import{u as _,a as J,b as K,c as X,j as a,M as Z,B as j,F as ee,G as l,T as I,D as y}from"./index-DuzC95fe.js";import{r}from"./vendor-BXCbSo2_.js";import{a as P}from"./axios-B0b4r6rC.js";import{T as ae,a as te,b as S,d as le,c as ne,e as N,F as O}from"./EditAbleDataGrid-CaBIStsk.js";import{B as T,T as s}from"./TextField-D3nO1ftf.js";import{M as p}from"./Skeleton-Cr70XX44.js";import"./DataGrid-DEjeA-50.js";import"./ExcelExport-CmjamEmv.js";import"./dayjs.min-DO4_1a-m.js";const De=()=>{const{user:u}=_(),{data:x,error:oe,isLoading:se,refetch:g}=J(),{data:m}=K(),[f,w]=r.useState([]),[D,k]=r.useState([]),[d,R]=r.useState({searchPlanningDateFrom:"",searchPlanningDateTo:""}),[t,v]=r.useState({collectionName:"",brandId:"",seasonId:"",volume:"",planningDate:"",launchDate:"",isRepeatCollection:"No",noOfDesigns:"",noOfColors:"",poPcs:"",appId:1,createdBy:u.empId,createdOn:new Date().toISOString(),lastUpdatedBy:u.empId,lastUpdatedOn:new Date().toISOString()}),[B,V]=r.useState("");console.log("formData",t),console.log("lookupData",m);const[F,U]=r.useState("1"),{enqueueSnackbar:h}=X(),z=(e,n)=>{U(n)},[o,W]=r.useState({}),[A,L]=r.useState([]);r.useEffect(()=>{if(m){const e=m.result[0];w(e.brandList),k(e.seasonList)}g()},[m]),console.log("brands",f),console.log("seasons",D),r.useEffect(()=>{V(t.noOfColors*t.poPcs)},[t.noOfColors,t.poPcs]),r.useEffect(()=>{if(x){const e=x.result.map((n,c)=>({...n,id:c+1,planningDate:new Date(n.planningDate),launchDate:new Date(n.launchDate)}));L(e)}g()},[x]);const G=A,b=[{field:"collectionName",headerName:"Collection",editable:!0,flex:2},{field:"brandId",headerName:"Brand",editable:!0,flex:1,type:"singleSelect",valueOptions:f.map(e=>({value:e.lookUpId,label:e.lookUpName}))},{field:"seasonId",headerName:"Season",editable:!0,flex:1,type:"singleSelect",valueOptions:D.map(e=>({value:e.lookUpId,label:e.lookUpName}))},{field:"volume",headerName:"Volume",flex:1,editable:!0,type:"singleSelect",valueOptions:["Volume 1","Volume 2","Volume 3","Volume 4","Volume 5"]},{field:"planningDate",headerName:"Planning Date",type:"date",flex:1,editable:!0,valueGetter:e=>e?new Date(e):null,valueFormatter:e=>{const n=e;return n?n.toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"2-digit"}):""}},{field:"launchDate",headerName:"Launch Date",type:"date",flex:1,editable:!0,valueGetter:e=>e?new Date(e):null,valueFormatter:e=>{const n=e;return n?n.toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"2-digit"}):""}},{field:"isRepeatCollection",headerName:"Repeat",flex:1,editable:!0,type:"singleSelect",valueOptions:["No","Yes"]},{field:"noOfColors",headerName:"No. Of Colors",editable:!0,flex:1},{field:"noOfDesigns",headerName:"No Of Designs",editable:!0,flex:1},{field:"poPcs",headerName:"Po Pcs",editable:!0,flex:1}],q=[{value:"Volume 1",label:"Volume 1"},{value:"Volume 2",label:"Volume 2"},{value:"Volume 3",label:"Volume 3"},{value:"Volume 4",label:"Volume 4"},{value:"Volume 5",label:"Volume 5"}],E=[{value:"Yes",label:"Yes"},{value:"No",label:"No"}],i=e=>{const{name:n,value:c}=e.target;v({...t,[n]:c})},C=e=>{const{name:n,value:c}=e.target;R({...d,[n]:c})},M=()=>{const e={};return t.collectionName.trim()||(e.collectionName="collectionName is required"),t.seasonId||(e.seasonId="seasonId  is required"),t.brandId||(e.brandId="brandId  is required"),t.planningDate||(e.planningDate="planningDate  is required"),t.launchDate||(e.launchDate="launchDate  is required"),t.noOfDesigns||(e.noOfDesigns="noOfDesigns  is required"),t.noOfColors||(e.noOfColors="noOfColors  is required"),t.poPcs||(e.poPcs="poPcs  is required"),e},H=async()=>{console.log(t);const e=M();if(Object.keys(e).length>0){W(e);return}try{const n=await P.post("https://gecxc.com:4041/API/CollectionRegistration/SaveCollection",t);h("Collection saved successfully!",{variant:"success",autoHideDuration:5e3}),console.log("Form data saved:",n.data),v({collectionName:"",brandId:"",seasonId:"",volume:"",planningDate:"",launchDate:"",isRepeatCollection:"",noOfDesigns:"",noOfColors:"",poPcs:"",createdOn:new Date().toISOString(),createdBy:u.empId,lastUpdatedOn:new Date().toISOString(),lastUpdatedBy:u.empId}),g()}catch(n){console.error("Error saving data:",n),h("Collection not saved !",{variant:"error",autoHideDuration:5e3})}},[$,Y]=r.useState([]),Q=async()=>{try{const e=await P.get(`https://gecxc.com:4041/API/CollectionRegistration/GetCollectionListByPlanningDate?startDate=${d.searchPlanningDateFrom}&endDate=${d.searchPlanningDateTo}&appId=1`);h("Collection saved successfully!",{variant:"success",autoHideDuration:5e3}),console.log("Response Data:",e.data),Y(e.data.result.map((n,c)=>({id:c,...n})))}catch(e){console.error("Error saving data:",e),h("Collection not saved !",{variant:"error",autoHideDuration:5e3})}};return console.log("searchData",d),a.jsx(Z,{style:{borderWidth:1,borderStyle:"dotted",borderColor:"#a11f23",width:"auto",maxHeight:{xs:"80vh",md:"auto"},overflow:"auto"},children:a.jsx(j,{sx:{width:"100%",typography:"body1"},children:a.jsxs(ae,{value:F,children:[a.jsx(j,{sx:{borderBottom:1,borderColor:"divider"},children:a.jsxs(te,{onChange:z,"aria-label":"lab API tabs example",children:[a.jsx(S,{icon:a.jsx(le,{}),label:"Add Collection",value:"1",sx:e=>({"& .MuiTouchRipple-child":{backgroundColor:`${e.palette.primary.main} !important`}})}),a.jsx(S,{icon:a.jsx(ne,{}),label:"Search Collection",value:"2",sx:e=>({"& .MuiTouchRipple-child":{backgroundColor:`${e.palette.primary.main} !important`}})})]})}),a.jsxs(N,{value:"1",children:[a.jsx(ee,{children:a.jsxs(l,{container:!0,spacing:2,width:"inherit",children:[a.jsx(l,{item:!0,xs:9,md:9,children:a.jsx(I,{variant:"h3",gutterBottom:!0,children:"Create New Collection"})}),a.jsx(l,{item:!0,xs:3,textAlign:"right",children:a.jsx(T,{variant:"contained",size:"small",onClick:H,children:"Save"})}),a.jsx(l,{item:!0,xs:12,md:3,children:a.jsx(s,{fullWidth:!0,select:!0,label:"* Season Name",name:"seasonId",value:t.seasonId,onChange:i,size:"small",error:!!o.seasonId,helperText:o.seasonId,children:D.map(e=>a.jsx(p,{value:e.lookUpId,children:e.lookUpName},e.lookUpId))})}),a.jsx(l,{item:!0,xs:12,md:3,children:a.jsx(s,{fullWidth:!0,select:!0,label:"Brand Name",name:"brandId",value:t.brandId,onChange:i,size:"small",error:!!o.brandId,helperText:o.brandId,children:f.map(e=>a.jsx(p,{value:e.lookUpId,children:e.lookUpName},e.lookUpId))})}),a.jsx(l,{item:!0,xs:12,md:6,children:a.jsx(s,{label:"* Collection Name",fullWidth:!0,size:"small",name:"collectionName",onChange:i,value:t.collectionName,error:!!o.collectionName,helperText:o.collectionName})}),a.jsx(l,{item:!0,xs:12,md:3,children:a.jsx(s,{fullWidth:!0,select:!0,label:"Volume",name:"volume",value:t.volume,onChange:i,size:"small",children:q.map(e=>a.jsx(p,{value:e.value,children:e.label},e.value))})}),a.jsx(l,{item:!0,xs:12,md:3,children:a.jsx(s,{size:"small",type:"date",label:"Planning Date",name:"planningDate",value:t.planningDate,onChange:i,fullWidth:!0,focused:!0,error:!!o.planningDate,helperText:o.planningDate})}),a.jsx(l,{item:!0,xs:12,md:3,children:a.jsx(s,{size:"small",type:"date",label:"Launch Date",name:"launchDate",value:t.launchDate,onChange:i,fullWidth:!0,focused:!0,error:!!o.launchDate,helperText:o.launchDate})}),a.jsx(l,{item:!0,xs:12,md:3,children:a.jsx(s,{fullWidth:!0,select:!0,label:"Repeat Collection?",name:"isRepeatCollection",defaultValue:"No",value:t.isRepeatCollection,onChange:i,size:"small",children:E.map(e=>a.jsx(p,{value:e.value,children:e.label},e.value))})}),a.jsx(l,{item:!0,xs:12,md:3,children:a.jsx(s,{label:"No. of Colors/Articles",fullWidth:!0,size:"small",name:"noOfColors",type:"number",onChange:i,value:t.noOfColors,error:!!o.noOfColors,helperText:o.noOfColors})}),a.jsx(l,{item:!0,xs:12,md:3,children:a.jsx(s,{label:"No. of Designs",fullWidth:!0,size:"small",name:"noOfDesigns",type:"number",onChange:i,value:t.noOfDesigns,error:!!o.noOfDesigns,helperText:o.noOfDesigns})}),a.jsx(l,{item:!0,xs:12,md:3,children:a.jsx(s,{label:"Po. Pieces",fullWidth:!0,size:"small",name:"poPcs",type:"number",onChange:i,value:t.poPcs,error:!!o.poPcs,helperText:o.poPcs})}),a.jsx(l,{item:!0,xs:12,md:3,children:a.jsx(s,{label:"Total Pieces",fullWidth:!0,size:"small",name:"totalPcs",type:"number",value:B,disabled:!0})}),a.jsx(l,{item:!0,sm:12,children:a.jsx(y,{color:"#cc8587",sx:{height:2,width:"100%"}})})]})}),a.jsx(l,{container:!0,spacing:2,width:"inherit",paddingTop:2,children:a.jsx(l,{item:!0,xs:12,children:a.jsx(O,{initialRows:G,ncolumns:b,formData:t,deleteApi:"https://gecxc.com:4041/API/CollectionRegistration/DeleteCollectionByCollectionId?collectionId=",deleteBy:"collectionId",editAPi:"https://gecxc.com:4041/API/CollectionRegistration/SaveCollection"})})})]}),a.jsxs(N,{value:"2",children:[a.jsxs(l,{container:!0,spacing:2,width:"inherit",children:[a.jsx(l,{item:!0,xs:9,md:9,children:a.jsx(I,{variant:"h3",gutterBottom:!0,children:"Search Collection"})}),a.jsx(l,{item:!0,xs:3,textAlign:"right",children:a.jsx(T,{variant:"contained",size:"small",onClick:Q,children:"Search"})}),a.jsx(l,{item:!0,xs:12,md:6,children:a.jsx(s,{size:"small",type:"date",label:"Date From",name:"searchPlanningDateFrom",value:d.searchPlanningDateFrom,onChange:C,fullWidth:!0,focused:!0})}),a.jsx(l,{item:!0,xs:12,md:6,children:a.jsx(s,{size:"small",type:"date",label:"Date to",name:"searchPlanningDateTo",value:d.searchPlanningDateTo,onChange:C,fullWidth:!0,focused:!0})}),a.jsx(l,{item:!0,sm:12,children:a.jsx(y,{color:"#cc8587",sx:{height:2,width:"100%"}})})]}),a.jsx(l,{container:!0,spacing:2,width:"inherit",paddingTop:2,children:a.jsx(l,{item:!0,xs:12,children:a.jsx(O,{initialRows:$,ncolumns:b,formData:t,disableAddRecord:!0})})})]})]})})})};export{De as default};
