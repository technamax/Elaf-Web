import{j as e,_ as Ze,r as Ke,l as $e,R as _e,u as Se,c as Ne,a5 as Ae,b as ye,a6 as ke,a7 as Re,a8 as qe,a9 as Ee,aa as De,ab as Me,C as K,d as $,ac as Le,G as a,D as me,T as je,ad as et,ae as tt,af as st,ag as at,ah as rt,ai as ot,B as ve,aj as nt,ak as lt}from"./index-Ch7U0NAe.js";import{r as o}from"./vendor-BXCbSo2_.js";import{I as Ce,B as D,a as de}from"./axios-Dw5sNTRn.js";import{d as Oe,c as xe,A as Te,e as we,f as ze,S as dt,a as it,b as ct,F as ut}from"./Fabrication-CSiUbFOY.js";import{d as Fe}from"./VisibilityOutlined-B2Mb8-aW.js";import{l as We,R as Pe,D as mt,a as ht,b as pt,c as gt}from"./ReuseableDataGrid-B8355t8E.js";import{T as n,P as xt}from"./TextField-B5RWw7XP.js";import{M as P}from"./Skeleton-BpkNu_S2.js";import{A as Ue,F as Ge,C as Ye}from"./ExcelExport-Cib3lUw3.js";import"./dayjs.min-DO4_1a-m.js";import{d as ft}from"./Close-D4nM2tmi.js";import{d as It}from"./PersonAddAlt1Outlined-BK-5QBmt.js";let Qe=!1;const bt=o.forwardRef(function(t,u){return Qe||(console.warn(["MUI: The Autocomplete component was moved from the lab to the core.","","You should use `import { Autocomplete } from '@mui/material'`","or `import Autocomplete from '@mui/material/Autocomplete'`"].join(`
`)),Qe=!0),e.jsx(Ue,Ze({ref:u},t))});var Be={},vt=$e;Object.defineProperty(Be,"__esModule",{value:!0});var Xe=Be.default=void 0,jt=vt(Ke()),yt=e;Xe=Be.default=(0,jt.default)((0,yt.jsx)("path",{d:"M21 10h-3L2 3v7l9 2-9 2v7l8-3.5V21c0 1.1.9 2 2 2h9c1.1 0 2-.9 2-2v-9c0-1.1-.9-2-2-2m0 11h-9v-9h9zm-4.5-1L13 16h2v-3h3v3h2z"}),"SendAndArchive");const Ct="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAACXBIWXMAAAsTAAALEwEAmpwYAAACk0lEQVR4nO2WzU4UQRSFe14CgoiMKPIqolEiIQq+gEFgFPHnFVyILI3GnQIbxxhG3IkaYxT8iUZFoxuDbokoIaNE/czNnE6KSjdT07Yb40kqqa6qW+dW3XNvdRT9R4MAHgD3640Dh/MkHQTOqMWIv9PGydOBUeCsWoz4O208PwdcxCz1xoGBKG8Abc5JPwBrataP0fY3iLcCk8C6SF4DV4HzatZf1Ny6vrfkRd4PrABV4BywE9huKpc2rA0ARaATGAe+yebgn5IfB34BD0XQCzwlHU+AA1r7CPgJlLKS94n8GtAM3CIcFaAJKGuPviwxX9XJjfxlCtGMyJLwQrbzwNeGNEFNRFVdZdrJb2ttAbizyU10SBNXQslbgR8SnMXcxagEOGyxdmxs3ZDmxjybHmWKZUdriAOnZWhqf+ZtVgyw3+HZPAZ2qX8yxIGbwCudxsdwgH3JszERtqtOVEIc+ARMKbc3xNy79r1a+xHodsYtDec8W6sl01YxQxxYVfzdWM4krDPiGEveXMHLjhMqUGshDlQTHLDNCg06MJvgwJcQB96lhMBSrddZ1y0nloDdXkbc9WwPKQSLIQ7M6rGxGuBjKMB+JEGE24A3tnfUgIo7E+p+1jTsUn8wxIEWFaJxKdrFmBwrJRSiEc2d8mz2AxPas6WuAwbgkspncZNaPyexWbuXsuaGbuQ7cDEKBbVHZEVParMeliRUPLW7eK4XcUF7NQU7YAD26NrKciLtJtJObuTXtce+KAuAI9pgXq9aj0SVhgXFvEN9y4Cjmci9kvtZmpjQw9KuOhH/kvUr1bq0xmK+bLZRHqB2nZd1Gyinp5yfUuu/1ZyRX7CfmlzIXUgLx6SH93o3ltUv6z8hf+LoX8ZvSFCuNiG5hzcAAAAASUVORK5CYII=",St=()=>{const p=_e(),{user:t}=Se(),{enqueueSnackbar:u}=Ne(),[s,i]=o.useState([]),[m,W]=o.useState(!1),[d,f]=o.useState({embroideryId:0,designId:"",batchNo:"",planningHeaderId:"",componentId:"",fabricId:"",vendorId:"",poPcs:"",baseColorId:"",baseColorName:"",colorId:"",availableQty:"",noOfHead:"",repeats:"",cuttingSize:"",itemsPerRepeat:"",totalPcs:"",totalAmount:"",threadStiches:"",threadRate:"",threadAmount:"",tillaStiches:"",tilaRate:"",tilaAmount:"",sequence:"",sequenceRate:"",sequenceAmount:"",isSolving:!1,solvingLayers:0,solvingInMeters:"",solvingRate:0,solvingAmount:"",threadAdditional:[],costPerComponent:"",createdBy:t.empId,createdOn:new Date().toISOString(),lastUpdatedOn:new Date().toISOString(),lastUpdatedBy:t.empId});o.useEffect(()=>{f({embroideryId:(s==null?void 0:s.embroideryId)||0,designId:(s==null?void 0:s.designId)||"",batchNo:(s==null?void 0:s.batchNo)||"",planningHeaderId:(s==null?void 0:s.planningHeaderId)||"",componentId:(s==null?void 0:s.componentId)||"",fabricId:(s==null?void 0:s.fabricId)||"",vendorId:(s==null?void 0:s.vendorId)||"",poPcs:(s==null?void 0:s.poPcs)||"",baseColorId:(s==null?void 0:s.baseColorId)||"",baseColorName:(s==null?void 0:s.baseColorName)||"",colorId:(s==null?void 0:s.colorId)||"",availableQty:(s==null?void 0:s.availableQty)||"",noOfHead:(s==null?void 0:s.noOfHead)||"",repeats:(s==null?void 0:s.repeats)||"",cuttingSize:(s==null?void 0:s.cuttingSize)||"",itemsPerRepeat:(s==null?void 0:s.itemsPerRepeat)||"",totalPcs:(s==null?void 0:s.totalPcs)||"",totalAmount:(s==null?void 0:s.totalAmount)||"",threadStiches:(s==null?void 0:s.threadStiches)||"",threadRate:(s==null?void 0:s.threadRate)||"",threadAmount:(s==null?void 0:s.threadAmount)||"",tillaStiches:(s==null?void 0:s.tillaStiches)||"",tilaRate:(s==null?void 0:s.tilaRate)||"",tilaAmount:(s==null?void 0:s.tilaAmount)||"",sequence:(s==null?void 0:s.sequence)||"",sequenceRate:(s==null?void 0:s.sequenceRate)||"",sequenceAmount:(s==null?void 0:s.sequenceAmount)||"",isSolving:(s==null?void 0:s.isSolving)||!1,solvingLayers:(s==null?void 0:s.solvingLayers)||0,solvingInMeters:(s==null?void 0:s.solvingInMeters)||"",solvingRate:(s==null?void 0:s.solvingRate)||0,solvingAmount:(s==null?void 0:s.solvingAmount)||"",threadAdditional:(s==null?void 0:s.threadAdditional)||[],costPerComponent:(s==null?void 0:s.costPerComponent)||"",createdOn:(s==null?void 0:s.createdOn)||new Date().toISOString(),createdBy:(s==null?void 0:s.createdBy)||t.empId,lastUpdatedOn:new Date().toISOString(),lastUpdatedBy:t.empId})},[s]);const G=["Boring","Pooni","Laser","Doori","Dissolving"];function X(l,j,A){return{fontWeight:j.indexOf(l)===-1?A.typography.fontWeightRegular:A.typography.fontWeightMedium}}const{data:b}=Ae(),[H,B]=o.useState(""),{data:q}=ye(),{data:z,refetch:Y}=ke(H,{skip:!H}),{data:E,refetch:Z}=Re(d.designId,{skip:!d.designId}),{data:g}=qe({batchNo:d.planningHeaderId,componentId:d.componentId},{skip:!d.planningHeaderId||!d.componentId}),{data:T}=Ee({batchNo:d.planningHeaderId,componentId:d.componentId,fabricId:d.fabricId},{skip:!d.planningHeaderId||!d.componentId||!d.fabricId}),{data:C,refetch:R}=De(d.planningHeaderId,{skip:!d.planningHeaderId}),{data:V}=Me(d.planningHeaderId,{skip:!d.planningHeaderId});console.log("formData.planningHeaderId",d.planningHeaderId),console.log("collectionData",b);const[_,S]=o.useState(!1),Q=(l,j)=>{S(!_)},[te,oe]=o.useState([]),[se,ie]=o.useState([]),[he,ce]=o.useState([]),[fe,pe]=o.useState([]),[ne,le]=o.useState([]),[ae,L]=o.useState([]),[k,M]=o.useState([]),[Ie,ge]=o.useState([]);console.log("batchList",se),console.log("formData",d),o.useEffect(()=>{z&&oe(z.result)},[z]),o.useEffect(()=>{E&&ie(E.result)},[E]),o.useEffect(()=>{g&&ce(g.result)},[g]),o.useEffect(()=>{T&&L(g.result)},[T]),o.useEffect(()=>{V&&ge(V.result)},[V]),o.useEffect(()=>{C&&M(C.result.map((l,j)=>({id:j,...l})))},[C,R]),console.log("embroideryList",C),console.log("initialRows",k),o.useEffect(()=>{if(q){const l=q.result[0];pe(l.vendorList),le(l.noOfHeadsList)}},[q]);const ue=(b==null?void 0:b.result)||[];o.useEffect(()=>{const l=()=>{const v=parseFloat(d.repeats)||0,J=parseFloat(d.itemsPerRepeat)||0;return(v*J).toFixed(2)};f(v=>({...v,totalPcs:l()}));const j=()=>{const v=parseFloat(d.threadStiches)||0,J=parseFloat(d.threadRate)||0,re=parseFloat(d.noOfHead)||0,be=parseFloat(d.repeats)||0;return(v/1e3*(J*be*re)).toFixed(2)};f(v=>({...v,threadAmount:j()}));const A=()=>{const v=parseFloat(d.tillaStiches)||0,J=parseFloat(d.tilaRate)||0,re=parseFloat(d.noOfHead)||0,be=parseFloat(d.repeats)||0;return(v/1e3*(J*be*re)).toFixed(2)};f(v=>({...v,tilaAmount:A()}));const c=()=>{const v=parseFloat(d.sequence)||0,J=parseFloat(d.sequenceRate)||0,re=parseFloat(d.noOfHead)||0,be=parseFloat(d.repeats)||0;return(v/1e3*(J*be*re)).toFixed(2)};f(v=>({...v,sequenceAmount:c()}));const r=()=>{const v=parseFloat(d.repeats)||0,J=parseFloat(d.noOfHead)||0,re=parseFloat(d.solvingLayers)||0;return(v*J*13/39.37*re).toFixed(2)};f(v=>({...v,solvingInMeters:r()}));const h=()=>{const v=parseFloat(d.solvingInMeters)||0,J=parseFloat(d.solvingRate)||0;return parseFloat(d.solvingLayers),(v*J).toFixed(2)};f(v=>({...v,solvingAmount:h()}));const y=()=>{const v=parseFloat(d.threadAmount)||0,J=parseFloat(d.tilaAmount)||0,re=parseFloat(d.sequenceAmount)||0,be=parseFloat(d.solvingAmount)||0;return(v+J+re+be).toFixed(2)};f(v=>({...v,totalAmount:y()||0}));const U=()=>{const v=parseFloat(d.totalAmount)||0,J=parseFloat(d.totalPcs)||0;return(v/J).toFixed(2)};f(v=>({...v,costPerComponent:U()||0}))},[d.threadAmount,d.totalAmount,d.sequenceAmount,d.solvingAmount,d.repeats,d.tilaAmount,d.itemsPerRepeat,d.threadRate,d.threadStiches,d.noOfHead,d.tilaRate,d.tillaStiches,d.sequenceRate,d.sequence,d.solvingLayers,d.solvingInMeters,d.solvingRate]);const O=l=>{const{name:j,checked:A}=l.target;f(c=>({...c,[j]:A}))},I=l=>{const{name:j,value:A}=l.target;if(j==="collectionId")ue.find(c=>c.collectionId===parseInt(A)),B(A),W(!0),f({...d,collectionId:A,designId:"",batchNo:"",planningHeaderId:"",componentId:"",fabricId:"",vendorId:"",poPcs:"",baseColorId:"",baseColorName:"",colorId:"",availableQty:"",noOfHead:"",repeats:"",cuttingSize:"",itemsPerRepeat:"",totalPcs:"",totalAmount:"",threadStiches:"",threadRate:"",threadAmount:"",tillaStiches:"",tilaRate:"",tilaAmount:"",sequence:"",sequenceRate:"",sequenceAmount:"",isSolving:!1,solvingLayers:0,solvingInMeters:"",solvingRate:0,solvingAmount:"",threadAdditional:[],costPerComponent:""});else if(j==="designId"){const c=te.find(r=>r.designId===parseInt(A));f({...d,designId:A,baseColorId:c?c.colorId:"",baseColorName:c?c.colorName:"",batchNo:"",planningHeaderId:"",componentId:"",fabricId:"",vendorId:"",poPcs:"",colorId:"",availableQty:"",noOfHead:"",repeats:"",cuttingSize:"",itemsPerRepeat:"",totalPcs:"",totalAmount:"",threadStiches:"",threadRate:"",threadAmount:"",tillaStiches:"",tilaRate:"",tilaAmount:"",sequence:"",sequenceRate:"",sequenceAmount:"",isSolving:!1,solvingLayers:0,solvingInMeters:"",solvingRate:0,solvingAmount:"",threadAdditional:[],costPerComponent:""})}else if(j==="colorId"){const c=ae.find(r=>r.colorId===A);f({...d,colorId:A,availableQty:c?c.total:"",cuttingSize:c?c.cuttingSize:"",repeats:c?c.repeats:""})}else if(j==="batchNo"){const c=se.find(r=>r.batchNo===A);f({...d,batchNo:A,planningHeaderId:c?c.planningHeaderId:"",poPcs:c?c.poPcs:"",componentId:"",fabricId:"",vendorId:"",colorId:"",availableQty:"",noOfHead:"",repeats:"",cuttingSize:"",itemsPerRepeat:"",totalPcs:"",totalAmount:"",threadStiches:"",threadRate:"",threadAmount:"",tillaStiches:"",tilaRate:"",tilaAmount:"",sequence:"",sequenceRate:"",sequenceAmount:"",isSolving:!1,solvingLayers:0,solvingInMeters:"",solvingRate:0,solvingAmount:"",threadAdditional:[],costPerComponent:""}),S(!0),W(!1)}else f({...d,[j]:A}),N(c=>({...c,[j]:""}))},[x,N]=o.useState({}),F=async()=>{try{const l=await de.post("https://gecxc.com:4041/api/Embroidery/SaveEmbroidery",{...d,threadAdditional:d.threadAdditional.join(", ")});console.log("Save response:",l.data),l.data.success?u("Fabrication saved successfully!",{variant:"success",autoHideDuration:5e3}):(u(`${l.data.message} !`,{variant:"error",autoHideDuration:5e3}),console.log("response.message",l.data.message)),f(j=>({embroideryId:0,designId:j.designId,batchNo:j.batchNo,planningHeaderId:j.planningHeaderId,componentId:"",fabricId:"",vendorId:"",poPcs:j.poPcs,baseColorId:j.baseColorId,baseColorName:j.baseColorName,colorId:"",availableQty:"",noOfHead:"",repeats:"",cuttingSize:"",itemsPerRepeat:"",totalPcs:"",totalAmount:"",threadStiches:"",threadRate:"",threadAmount:"",tillaStiches:"",tilaRate:"",tilaAmount:"",sequence:"",sequenceRate:"",sequenceAmount:"",isSolving:!1,solvingLayers:0,solvingInMeters:"",solvingRate:0,solvingAmount:"",threadAdditional:[],costPerComponent:"",createdOn:new Date().toISOString(),createdBy:t.empId,lastUpdatedOn:new Date().toISOString(),lastUpdatedBy:t.empId})),R()}catch(l){console.error("Error saving data:",l),u("Dyeing not saved successfully!",{variant:"error",autoHideDuration:5e3})}};console.log("initialRows",k);const w=[{field:"designNo",headerName:"Design"},{field:"batchNo",headerName:"Batch No."},{field:"componentName",headerName:"Component "},{field:"fabricName",headerName:"Fabric "},{field:"vendorId",headerName:"Vendor"},{field:"poPcs",headerName:"Po Pcs"},{field:"colourName",headerName:"Color"},{field:"availableQty",headerName:"Available Qty"},{field:"noOfHeadsName",headerName:"No. Of Heads"},{field:"repeats",headerName:"Repeats"},{field:"cuttingSize",headerName:"Cutting Size"},{field:"itemsPerRepeat",headerName:"Items Per Repeat"},{field:"totalPcs",headerName:"Total Pcs"},{field:"threadStiches",headerName:"Thread Stitches"},{field:"threadRate",headerName:"Thread Rate"},{field:"threadAmount",headerName:"Thread Amount"},{field:"tillaStiches",headerName:"Tilla Stitches"},{field:"tilaRate",headerName:"Tilla Rate"},{field:"tilaAmount",headerName:"Tilla Amount"},{field:"sequence",headerName:"sequence"},{field:"sequenceRate",headerName:"Sequence Rate"},{field:"sequenceAmount",headerName:"Sequence Amount"},{field:"isSolving",headerName:"Is Solving"},{field:"solvingLayers",headerName:"Solving Layers"},{field:"solvingInMeters",headerName:"Solving In Meters"},{field:"solvingRate",headerName:"Solving Rate"},{field:"solvingAmount",headerName:"Solving Amount"},{field:"threadAdditional",headerName:"ThreadAdditional"},{field:"costPerComponent",headerName:"Cost Per Component"}];return e.jsxs(e.Fragment,{children:[e.jsxs(K,{variant:"outlined",children:[e.jsx($,{className:"css-4rfrnx-MuiCardHeader-root",avatar:e.jsx(Le,{src:Ct,sx:{background:"transparent"}}),title:"Embroidery  ",titleTypographyProps:{style:{color:"white"}}}),e.jsxs(a,{container:!0,spacing:2,width:"Inherit",sx:{paddingY:2,paddingX:2},children:[" ",e.jsxs(a,{item:!0,xs:12,md:3,children:[e.jsx(n,{fullWidth:!0,select:!0,label:"Select Collection",name:"collectionId",value:H,onChange:I,size:"small",children:ue.map(l=>e.jsx(P,{value:l.collectionId,children:l.collectionName},l.collectionId))})," "]}),e.jsx(a,{item:!0,xs:12,md:3,children:e.jsx(n,{fullWidth:!0,select:!0,label:"Select Design",name:"designId",value:d.designId,onChange:I,size:"small",children:te.map(l=>e.jsx(P,{value:l.designId,children:l.designNo},l.designId))})}),e.jsxs(a,{item:!0,xs:12,md:3,children:[e.jsx(n,{fullWidth:!0,select:!0,label:"Batch No.",name:"batchNo",value:d.batchNo,onChange:I,size:"small",children:se.map(l=>e.jsx(P,{value:l.batchNo,children:l.batchNo},l.batchNo))})," "]}),e.jsx(a,{item:!0,xs:12,md:3,children:e.jsx(n,{label:"Base Color",fullWidth:!0,size:"small",name:"baseColorName",value:d.baseColorName,onChange:I,disabled:!0,sx:d.baseColorName===""?null:l=>({".css-4a5t8g-MuiInputBase-input-MuiOutlinedInput-input":{backgroundColor:`${l.palette.secondary[200]} !important`}})})})]})]}),e.jsx(a,{item:!0,xs:12,md:12,children:e.jsx(me,{color:"#cc8587",sx:{height:1,width:"100%",mt:2}})}),e.jsxs(K,{variant:"outlined",children:[e.jsx($,{className:"css-4rfrnx-MuiCardHeader-root",avatar:e.jsx(Oe,{}),title:"Add Embroidery",titleTypographyProps:{style:{color:"white"}},action:e.jsx(Ce,{onClick:Q,sx:{mt:"-18px"},children:e.jsx(xe,{style:{color:"white"}})}),sx:{display:"flex",alignItems:"center",justifyContent:"space-between"}})," ",e.jsxs(Te,{expanded:_,onChange:Q,sx:{},children:[e.jsx(we,{expandIcon:e.jsx(xe,{}),"aria-controls":"panel1-content",id:"panel1-header",sx:{display:"none"}}),e.jsxs(ze,{children:[e.jsxs(a,{container:!0,spacing:2,width:"Inherit",sx:{paddingY:2,paddingX:2},children:[" ",e.jsxs(a,{item:!0,xs:12,md:3,children:[e.jsx(n,{fullWidth:!0,select:!0,label:"Components",name:"componentId",value:d.componentId,onChange:I,size:"small",required:!0,error:!!x.componentId,helperText:x.componentId,children:Ie.map(l=>e.jsx(P,{value:l.componentId,children:l.componentName},l.componentId))})," "]}),e.jsx(a,{item:!0,xs:12,md:3,children:e.jsx(n,{fullWidth:!0,select:!0,label:"Select Fabric",defaultValue:"",size:"small",name:"fabricId",value:d.fabricId,onChange:I,required:!0,error:!!x.fabricId,helperText:x.fabricId,children:he.map(l=>e.jsx(P,{value:l.fabricId,children:l.fabric},l.fabricId))})}),e.jsx(a,{item:!0,xs:12,md:3,children:e.jsx(n,{fullWidth:!0,select:!0,label:"Vendors",defaultValue:"",size:"small",name:"vendorId",value:d.vendorId,onChange:I,required:!0,error:!!x.vendorId,helperText:x.vendorId,children:fe.map(l=>e.jsx(P,{value:l.lookUpId,children:l.lookUpName},l.lookUpId))})}),e.jsx(a,{item:!0,xs:12,md:3,children:e.jsx(n,{fullWidth:!0,select:!0,label:"Color",size:"small",name:"colorId",value:d.colorId,onChange:I,required:!0,error:!!x.colorId,helperText:x.colorId,children:ae.map(l=>e.jsx(P,{value:l.colorId,children:l.color},l.colorId))})}),e.jsx(a,{item:!0,xs:12,md:1.5,children:e.jsx(n,{label:"Po Pcs",fullWidth:!0,size:"small",name:"poPcs",value:d.poPcs,onChange:I,disabled:!0})}),e.jsx(a,{item:!0,xs:12,md:1.5,children:e.jsx(n,{label:"Available Quantity",fullWidth:!0,size:"small",name:"availableQty",type:"number",value:d.availableQty,onChange:I})}),e.jsx(a,{item:!0,xs:12,md:1.5,children:e.jsx(n,{label:"Repeats",type:"number",fullWidth:!0,size:"small",name:"repeats",value:d.repeats,onChange:I})}),e.jsx(a,{item:!0,xs:12,md:1.5,children:e.jsx(n,{fullWidth:!0,select:!0,label:"Heads",defaultValue:"",size:"small",name:"noOfHead",value:d.noOfHead,onChange:I,required:!0,error:!!x.noOfHead,helperText:x.noOfHead,children:ne.map(l=>e.jsx(P,{value:l.lookUpId,children:l.lookUpName},l.lookUpId))})}),e.jsx(a,{item:!0,xs:12,md:1.5,children:e.jsx(n,{label:"Cutting Size",fullWidth:!0,size:"small",name:"cuttingSize",type:"number",value:d.cuttingSize,onChange:I})}),e.jsx(a,{item:!0,xs:12,md:1.5,children:e.jsx(n,{label:"itemsPerRepeat",fullWidth:!0,type:"number",size:"small",name:"itemsPerRepeat",value:d.itemsPerRepeat,onChange:I,required:!0,error:!!x.itemsPerRepeat,helperText:x.itemsPerRepeat})}),e.jsx(a,{item:!0,xs:12,md:1.5,children:e.jsx(n,{label:"total Pcs.",fullWidth:!0,size:"small",type:"number",name:"totalPcs",value:d.totalPcs,onChange:I})}),e.jsx(a,{item:!0,xs:12,md:1.5,children:e.jsx(n,{label:"Total Amount",fullWidth:!0,type:"number",size:"small",name:"totalAmount",value:d.totalAmount,onChange:I})}),e.jsx(a,{item:!0,xs:12,md:3,children:e.jsx(n,{label:"Cost Per Component",fullWidth:!0,size:"small",name:"costPerComponent",value:d.costPerComponent,onChange:I})}),e.jsx(a,{item:!0,xs:12,md:3,children:e.jsx(Ge,{control:e.jsx(Ye,{checked:d.isSolving,onChange:O,name:"isSolving"}),label:"isSolving"})}),e.jsx(a,{item:!0,xs:12,md:6,children:e.jsx(n,{select:!0,label:"Additional",value:d.threadAdditional,name:"threadAdditional",size:"small",onChange:I,fullWidth:!0,SelectProps:{multiple:!0},children:G.map(l=>e.jsx(P,{value:l,style:X(l,d.threadAdditional,p),children:l},l))})}),e.jsx(a,{item:!0,xs:12,md:6,children:e.jsxs(a,{container:!0,spacing:1,width:"Inherit",children:[e.jsx(a,{item:!0,xs:12,md:12,children:e.jsx(je,{variant:"h5",gutterBottom:!0,children:"Thread"})})," ",e.jsx(a,{item:!0,xs:12,md:4,children:e.jsx(n,{label:"Stitches",fullWidth:!0,size:"small",type:"number",name:"threadStiches",value:d.threadStiches,onChange:I,required:!0})}),e.jsx(a,{item:!0,xs:12,md:4,children:e.jsx(n,{label:"Rate",type:"number",fullWidth:!0,size:"small",name:"threadRate",value:d.threadRate,onChange:I,required:!0})}),e.jsx(a,{item:!0,xs:12,md:4,children:e.jsx(n,{label:"Amount",fullWidth:!0,size:"small",type:"number",name:"threadAmount",value:d.threadAmount,onChange:I})})]})}),e.jsx(a,{item:!0,xs:12,md:6,children:e.jsxs(a,{container:!0,spacing:1,width:"Inherit",children:[e.jsx(a,{item:!0,xs:12,md:12,children:e.jsx(je,{variant:"h5",gutterBottom:!0,children:"Tilla"})})," ",e.jsx(a,{item:!0,xs:12,md:4,children:e.jsx(n,{label:"Stitches",fullWidth:!0,size:"small",type:"number",name:"tillaStiches",value:d.tillaStiches,onChange:I,required:!0})}),e.jsx(a,{item:!0,xs:12,md:4,children:e.jsx(n,{label:"Rate",fullWidth:!0,size:"small",type:"number",name:"tilaRate",value:d.tilaRate,onChange:I,required:!0})}),e.jsx(a,{item:!0,xs:12,md:4,children:e.jsx(n,{label:"Amount",fullWidth:!0,size:"small",name:"tilaAmount",value:d.tilaAmount,onChange:I})})]})}),e.jsxs(a,{item:!0,xs:12,md:6,children:[e.jsxs(a,{container:!0,spacing:1,width:"Inherit",children:[e.jsx(a,{item:!0,xs:12,md:12,children:e.jsx(je,{variant:"h5",gutterBottom:!0,children:"Sequence"})})," ",e.jsx(a,{item:!0,xs:12,md:4,children:e.jsx(n,{label:"Sequence",fullWidth:!0,size:"small",name:"sequence",type:"number",value:d.sequence,onChange:I,required:!0})}),e.jsx(a,{item:!0,xs:12,md:4,children:e.jsx(n,{label:"Rate",fullWidth:!0,type:"number",size:"small",name:"sequenceRate",value:d.sequenceRate,onChange:I,required:!0})}),e.jsx(a,{item:!0,xs:12,md:4,children:e.jsx(n,{label:"Amount",fullWidth:!0,size:"small",name:"sequenceAmount",value:d.sequenceAmount,onChange:I})})]})," "]}),d.isSolving?e.jsx(a,{item:!0,xs:12,md:6,children:e.jsxs(a,{container:!0,spacing:1,width:"Inherit",children:[e.jsx(a,{item:!0,xs:12,md:12,children:e.jsx(je,{variant:"h5",gutterBottom:!0,children:"Solving"})})," ",e.jsx(a,{item:!0,xs:12,md:3,children:e.jsx(n,{label:"Layers",fullWidth:!0,size:"small",type:"number",name:"solvingLayers",value:d.solvingLayers,onChange:I})}),e.jsx(a,{item:!0,xs:12,md:3,children:e.jsx(n,{label:"Meters",type:"number",fullWidth:!0,size:"small",name:"solvingInMeters",value:d.solvingInMeters,onChange:I})}),e.jsx(a,{item:!0,xs:12,md:3,children:e.jsx(n,{label:"Rate",fullWidth:!0,type:"number",size:"small",name:"solvingRate",value:d.solvingRate,onChange:I})}),e.jsx(a,{item:!0,xs:12,md:3,children:e.jsx(n,{label:"Amount",fullWidth:!0,size:"small",type:"number",name:"solvingAmount",value:d.solvingAmount,onChange:I})})]})}):null,e.jsx(a,{item:!0,xs:12,textAlign:"right",sx:{mt:2},children:e.jsx(D,{variant:"contained",size:"small",onClick:F,children:"Save"})})]})," "]})," "]})]}),e.jsx(a,{item:!0,xs:12,md:12,children:e.jsx(me,{sx:{height:1,width:"100%",marginTop:1,marginBottom:0}})}),e.jsxs(K,{variant:"outlined",children:[e.jsx($,{className:"css-4rfrnx-MuiCardHeader-root",avatar:e.jsx(Fe,{}),title:"View Embroidery ",titleTypographyProps:{style:{color:"white"}}})," ",e.jsx(a,{container:!0,spacing:2,width:"Inherit",sx:{paddingY:2,paddingX:2},children:e.jsxs(a,{sx:{marginTop:2},item:!0,xs:12,children:[" ",m?e.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"},children:e.jsx("img",{src:We,alt:"Loading",style:{width:200,height:200}})}):e.jsx(Pe,{iColumns:w,initialRows:k,setInitialData:i,deleteApi:"https://gecxc.com:4041/api/Embroidery/DeleteEmbroideryById?embroideryId=",deleteBy:"embroideryId",refetch:R,setAccordionExpanded:S,fileName:"Embroidery List"})]})})]})]})},Pt=St,Nt=()=>{const{user:p}=Se();console.log("user",p);const[t,u]=o.useState([]),[s,i]=o.useState([]),[m,W]=o.useState({processType:"MultiHead",planningId:0,collectionId:"",baseColorId:"",baseColorName:"",noOfDesigns:"",noOfColors:"",planningHeaderId:"",designId:"",batchNo:"",componentId:"",cuttingSize:"",colorId:"",fabricId:"",noOfHeads:0,operatingMachineId:0,repeats:"",repeatSize:"",uomId:"",totalFabric:"",shrinkage:"",wastage:"",total:"",appId:1,createdOn:new Date().toISOString(),createdBy:p.empId,lastUpdatedBy:p.empId,lastUpdatedOn:new Date().toISOString(),isSchiffili:!1,repeatsInMtr:""});console.log("formData",m),o.useEffect(()=>{W({processType:(t==null?void 0:t.processType)||"MultiHead",planningId:(t==null?void 0:t.planningId)||0,collectionId:(t==null?void 0:t.collectionId)||"",baseColorId:(t==null?void 0:t.baseColorId)||"",baseColorName:(t==null?void 0:t.baseColorName)||"",noOfDesigns:(t==null?void 0:t.noOfDesigns)||"",noOfColors:(t==null?void 0:t.noOfColors)||"",planningHeaderId:(t==null?void 0:t.planningHeaderId)||"",designId:(t==null?void 0:t.designId)||"",batchNo:(t==null?void 0:t.batchNo)||"",componentId:(t==null?void 0:t.componentId)||"",cuttingSize:(t==null?void 0:t.cuttingSize)||"",colorId:(t==null?void 0:t.colorId)||"",fabricId:(t==null?void 0:t.fabricId)||"",noOfHeads:(t==null?void 0:t.noOfHeads)||0,operatingMachineId:(t==null?void 0:t.operatingMachineId)||0,repeats:(t==null?void 0:t.repeats)||"",repeatSize:(t==null?void 0:t.repeatSize)||"",uomId:(t==null?void 0:t.uomId)||"",totalFabric:(t==null?void 0:t.totalFabric)||"",shrinkage:(t==null?void 0:t.shrinkage)||"",wastage:(t==null?void 0:t.wastage)||"",total:(t==null?void 0:t.total)||"",appId:1,createdOn:(t==null?void 0:t.createdOn)||new Date().toISOString(),createdBy:(t==null?void 0:t.createdBy)||p.empId,lastUpdatedBy:p.empId,lastUpdatedOn:new Date().toISOString(),repeatsInMtr:(t==null?void 0:t.repeatsInMtr)||""})},[t]);const{data:d}=Ae(),[f,G]=o.useState(""),{data:X,refetch:b}=ke(f,{skip:!f}),{data:H,refetch:B}=et(m.planningHeaderId,{skip:!m.planningHeaderId}),{data:q}=ye(),[z,Y]=o.useState([]),{enqueueSnackbar:E}=Ne();console.log("lookupData",q),o.useEffect(()=>{X&&(Y(X.result),b())},[X]),o.useEffect(()=>{H&&i(H.result.map((r,h)=>({id:h,...r})))},[H,B]),console.log("designList",z),console.log("collectionData",d);const Z=(d==null?void 0:d.result)||[],[g,T]=o.useState(!1),[C,R]=o.useState([]),[V,_]=o.useState([]),[S,Q]=o.useState([]),[te,oe]=o.useState([]),[se,ie]=o.useState([]),[he,ce]=o.useState([]),[fe,pe]=o.useState([]),[ne,le]=o.useState([]);console.log("components:",S),console.log("Fabrications:",te),console.log("colors:",se),console.log("uoms:",he),console.log("heads:",fe),console.log("lookupData",q),o.useEffect(()=>{if(q){const r=q.result[0];Q(r.componentList),ie(r.colorList),oe(r.fabricList),pe(r.noOfHeadsList),ce(r.uomList),R(r.planningTypeProcessList),_(r.operatingMachineList)}},[q]),o.useEffect(()=>{const r=async h=>{try{const y=await de.get(`https://gecxc.com:4041/api/PrePlanning/GetPrePlanningHeaderByDesignId?designId=${h}`);console.log(y.data),le(y.data.result)}catch(y){console.error("Error fetching pre-planning lookup data:",y)}};m.designId&&r(m.designId)},[m.designId,m.planningHeaderId]),o.useEffect(()=>{const r=()=>{const v=parseFloat(m.repeats)||0,J=parseFloat(m.repeatSize)||0,re=(v*J).toFixed(2);return parseFloat(re).toLocaleString()};W(v=>({...v,totalFabric:r()}));const h=()=>{const J=(typeof m.totalFabric=="string"?parseFloat(m.totalFabric.replace(/,/g,"")):m.totalFabric)||0,re=parseFloat(m.shrinkage)||0,be=parseFloat(m.wastage)||0,Je=(J*(100+(re+be))/100).toFixed(2);return parseFloat(Je).toLocaleString()};W(v=>({...v,total:h()}));const y=()=>(parseFloat(m.repeats),(.9144*(parseFloat(m.repeatSize)||0)).toFixed(2));W(v=>({...v,repeatsInMtr:y()}));const U=()=>{const v=parseFloat(m.repeats)||0;return((parseFloat(m.repeatsInMtr)||0)*v).toFixed(2)};W(v=>({...v,totalFabric:v.isSchiffili?U():r()}))},[m.repeats,m.repeatSize,m.totalFabric,m.shrinkage,m.wastage,m.repeatsInMtr,m.isSchiffili]);const[ae,L]=o.useState(!1);o.useState(!1);const k=r=>{const{name:h,value:y}=r.target;if(h==="collectionId"){const U=Z.find(v=>v.collectionId===parseInt(y));T(!0),G(y),W({...m,processType:"MultiHead",componentId:"",cuttingSize:"",colorId:"",fabricId:"",noOfHeads:0,operatingMachineId:0,repeats:"",repeatSize:"",uomId:"",totalFabric:"",shrinkage:"",wastage:"",total:"",collectionId:y,noOfDesigns:U?U.noOfDesigns:"",noOfColors:U?U.noOfColors:""})}else if(h==="designId"){const U=z.find(v=>v.designId===parseInt(y));W({...m,processType:"MultiHead",componentId:"",cuttingSize:"",colorId:"",fabricId:"",noOfHeads:0,operatingMachineId:0,repeats:"",repeatSize:"",uomId:"",totalFabric:"",shrinkage:"",wastage:"",total:"",designId:y,baseColorId:U?U.colorId:"",baseColorName:U?U.colorName:""})}else if(h==="batchNo"){const U=ne.find(v=>v.batchNo===y);W({...m,componentId:"",processType:"MultiHead",cuttingSize:"",colorId:"",fabricId:"",noOfHeads:0,operatingMachineId:0,repeats:"",repeatSize:"",uomId:"",totalFabric:"",shrinkage:"",wastage:"",total:"",batchNo:y,planningHeaderId:U?U.planningHeaderId:""}),L(!0),T(!1)}else W({...m,[h]:y})},[M,Ie]=o.useState({}),ge=async()=>{const r=ue();if(Object.keys(r).length>0){Ie(r);return}try{const h={...m,totalFabric:parseFloat(m.totalFabric.replace(/,/g,"")),total:parseFloat(m.total.replace(/,/g,""))},y=await de.post("https://gecxc.com:4041/api/PrePlanning/SavePrePlanning",h);console.log("Data saved successfully:",y.data),console.log("Save response:",y.data),y.data.success?E("Fabrication saved successfully!",{variant:"success",autoHideDuration:5e3}):(E(`${y.data.message} !`,{variant:"error",autoHideDuration:5e3}),console.log("response.message",y.data.message)),W(U=>({processType:"MultiHead",planningId:0,collectionId:U.collectionId,designId:U.designId,batchNo:U.batchNo,planningHeaderId:U.planningHeaderId,baseColorId:U.baseColorId,baseColorName:U.baseColorName,noOfDesigns:U.noOfDesigns,noOfColors:U.noOfColors,componentId:"",cuttingSize:"",colorId:"",fabricId:"",noOfHeads:0,operatingMachineId:0,repeats:"",repeatSize:"",uomId:"",totalFabric:"",shrinkage:"",wastage:"",total:"",appId:1,createdOn:new Date().toISOString(),createdBy:p.empId,lastUpdatedOn:new Date().toISOString(),lastUpdatedBy:p.empId,isSchiffili:!1,repeatsInMtr:""})),B()}catch(h){console.error("Error saving data:",h),E("Pre Planning not saved successfully!",{variant:"error",autoHideDuration:5e3})}},ue=()=>{const r={};return m.componentId||(r.componentId="componentId is required"),m.colorId||(r.colorId="colorId is required"),m.fabricId||(r.fabricId="fabricId is required"),m.cuttingSize||(r.cuttingSize="cuttingSize is required"),m.repeats||(r.repeats="repeats is required"),m.repeatSize||(r.repeatSize="repeatSize is required"),m.uomId||(r.uomId="uomId is required"),m.shrinkage||(r.shrinkage="shrinkage is required"),m.wastage||(r.wastage="wastage is required"),r};console.log("initialRows",s);const O=s.reduce((r,h)=>r+(h.totalFabric??0),0).toFixed(2),I=parseFloat(O).toLocaleString();console.log("localizedTotalFabric",I);const x=s.reduce((r,h)=>r+(h.total??0),0).toFixed(2),N=parseFloat(x).toLocaleString(),F=[...s,{id:"TOTAL_FABRIC",label:"Total Fabric",totalFabric:I,total:N}],w={sortable:!1,pinnable:!1,hideable:!1};console.log("rows",F);const ee=[{field:"componentName",headerName:"Component",...w,colSpan:(r,h)=>{if(h.id==="TOTAL_FABRIC")return 7},valueGetter:(r,h)=>h.id==="TOTAL_FABRIC"?h.label:r},{field:"color",headerName:"Color",...w},{field:"cuttingSize",headerName:"Cutting Size",...w},{field:"fabric",headerName:"Fabrication",...w},{field:"noOfHeadName",headerName:"No. Of Heads",...w},{field:"repeats",headerName:"Repeats",valueGetter:r=>r.toLocaleString(),...w},{field:"repeatSize",headerName:"Repeat Size",valueGetter:r=>r.toLocaleString(),...w},{field:"totalFabric",headerName:"Total Fabric",valueGetter:r=>r.toLocaleString(),...w},{field:"uom",headerName:"UOM",colSpan:(r,h)=>{if(h.id==="TOTAL_FABRIC")return 2},valueGetter:(r,h)=>h.id==="TOTAL_FABRIC"?"OverAll Total":r},{field:"shrinkage",headerName:"Shrinkage %"},{field:"wastage",headerName:"Wastage %"},{field:"total",headerName:"Total",valueGetter:r=>r.toLocaleString(),colSpan:(r,h)=>{if(h.id==="TOTAL_FABRIC")return 2}}],l=m.processType==="Schiffili",j=({row:r,field:h})=>r.id==="TOTAL_FABRIC"&&(h==="componentName"||h==="uom")?"bold":"";console.log("batchList:",ne);const A="https://gecxc.com:4041/api/PrePlanning/DeletePreplanningByPlanningId?PlanningId=",c=(r,h)=>{L(!ae)};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"CardHeader",children:e.jsxs(K,{variant:"outlined",children:[e.jsx($,{className:"css-4rfrnx-MuiCardHeader-root",avatar:e.jsx(Xe,{}),title:"Pre Planning",titleTypographyProps:{style:{color:"white"}},children:" "}),e.jsxs(a,{container:!0,spacing:2,width:"Inherit",sx:{paddingY:2,paddingX:2},children:[e.jsxs(a,{item:!0,xs:12,md:2,children:[e.jsx(n,{fullWidth:!0,select:!0,label:"Select Collection",name:"collectionId",value:m.collectionId,onChange:k,size:"small",required:!0,children:Z.map(r=>e.jsx(P,{value:r.collectionId,children:r.collectionName},r.collectionId))})," "]}),e.jsx(a,{item:!0,xs:12,md:2,children:e.jsx(n,{fullWidth:!0,select:!0,label:"Select Design",name:"designId",value:m.designId,onChange:k,size:"small",required:!0,children:z.map(r=>e.jsx(P,{value:r.designId,children:r.designNo},r.designId))})}),e.jsxs(a,{item:!0,xs:12,md:2,children:[e.jsx(n,{fullWidth:!0,select:!0,label:"Batch No.",name:"batchNo",value:m.batchNo,onChange:k,size:"small",required:!0,children:ne.map(r=>e.jsx(P,{value:r.batchNo,children:r.batchNo},r.batchNo))})," "]}),e.jsx(a,{item:!0,xs:12,md:2,children:e.jsx(n,{label:"No of Design",fullWidth:!0,size:"small",name:"noOfDesigns",value:m.noOfDesigns,onChange:k,disabled:!0})}),e.jsx(a,{item:!0,xs:12,md:2,children:e.jsx(n,{label:"No of Color",fullWidth:!0,size:"small",name:"noOfColors",value:m.noOfColors,onChange:k,disabled:!0})}),e.jsx(a,{item:!0,xs:12,md:2,children:e.jsx(n,{label:"Base Color",fullWidth:!0,size:"small",name:"baseColorName",value:m.baseColorName,onChange:k,disabled:!0})})]})]})}),e.jsxs(K,{variant:"outlined",children:[e.jsx($,{className:"MainCard",avatar:e.jsx(Oe,{}),title:"Add Pre Planning",titleTypographyProps:{style:{color:"white"}},action:e.jsx(Ce,{onClick:c,sx:{mt:"-18px"},children:e.jsx(xe,{style:{color:"white"}})}),sx:{display:"flex",alignItems:"center",justifyContent:"space-between"}}),e.jsxs(Te,{expanded:ae,onChange:c,sx:{},children:[e.jsx(we,{expandIcon:e.jsx(xe,{}),"aria-controls":"panel1-content",id:"panel1-header",sx:{display:"none"}}),e.jsx(ze,{children:e.jsxs(a,{container:!0,spacing:2,width:"Inherit",sx:{paddingY:2,paddingX:2},children:[e.jsxs(a,{item:!0,xs:12,md:2,children:[e.jsx(n,{fullWidth:!0,select:!0,label:"Process Type",name:"processType",value:m.processType,onChange:k,size:"small",required:!0,children:C.map(r=>e.jsx(P,{value:r.lookUpName,children:r.lookUpName},r.lookUpId))})," "]}),e.jsx(a,{item:!0,xs:12,md:2,children:e.jsx(Ue,{fullWidth:!0,options:S,getOptionLabel:r=>r.lookUpName,value:S.find(r=>r.lookUpId===m.componentId)||null,onChange:(r,h)=>{k({target:{name:"componentId",value:h?h.lookUpId:""}})},renderOption:(r,h)=>{const{lookUpName:y}=h;return e.jsx("span",{...r,children:y})},renderInput:r=>e.jsx(n,{...r,label:"Select Component",size:"small",name:"componentId",value:m.componentId,required:!0,error:!!M.componentId,helperText:M.componentId,sx:{backgroundColor:"white","& input":{backgroundColor:"white"}}}),PaperComponent:({children:r})=>e.jsx("div",{style:{backgroundColor:"white"},children:r})})}),e.jsxs(a,{item:!0,xs:12,md:2,children:[" ",e.jsx(Ue,{fullWidth:!0,options:se,getOptionLabel:r=>r.lookUpName,value:se.find(r=>r.lookUpId===m.colorId)||null,onChange:(r,h)=>{k({target:{name:"colorId",value:h?h.lookUpId:""}})},renderInput:r=>e.jsx(n,{...r,label:"Color",size:"small",value:m.colorId,name:"colorId",required:!0,error:!!M.colorId,helperText:M.colorId,sx:{backgroundColor:"white","& input":{backgroundColor:"white"}}}),PaperComponent:({children:r})=>e.jsx("div",{style:{backgroundColor:"white"},children:r})})]}),e.jsx(a,{item:!0,xs:12,md:2,children:e.jsx(n,{label:"Cutting Size",fullWidth:!0,size:"small",name:"cuttingSize",type:"number",value:m.cuttingSize,onChange:k,required:!0,error:!!M.cuttingSize,helperText:M.cuttingSize})}),e.jsx(a,{item:!0,xs:12,md:2,children:e.jsx(Ue,{fullWidth:!0,options:te,getOptionLabel:r=>r.lookUpName,value:te.find(r=>r.lookUpId===m.fabricId)||null,onChange:(r,h)=>{k({target:{name:"fabricId",value:h?h.lookUpId:""}})},renderInput:r=>e.jsx(n,{...r,label:"Fabrication",size:"small",name:"fabricId",value:m.fabricId,required:!0,error:!!M.fabricId,helperText:M.fabricId,sx:{backgroundColor:"white","& input":{backgroundColor:"white"}}}),PaperComponent:({children:r})=>e.jsx("div",{style:{backgroundColor:"white"},children:r})})}),e.jsx(a,{item:!0,xs:12,md:2,children:l?e.jsx(n,{fullWidth:!0,select:!0,label:"Operating Machine",size:"small",name:"operatingMachineId",value:m.operatingMachineId,onChange:k,required:!0,children:V.map(r=>e.jsx(P,{value:r.lookUpId,children:r.lookUpName},r.lookUpId))}):e.jsx(n,{fullWidth:!0,select:!0,label:"No of Heads",size:"small",name:"noOfHeads",value:m.noOfHeads,onChange:k,required:!0,children:fe.map(r=>e.jsx(P,{value:r.lookUpId,children:r.lookUpName},r.lookUpId))})}),e.jsx(a,{item:!0,xs:12,md:2,children:e.jsx(n,{label:"Repeats",fullWidth:!0,size:"small",name:"repeats",type:"number",value:m.repeats,onChange:k,error:!!M.repeats,helperText:M.repeats,required:!0})}),e.jsx(a,{item:!0,xs:12,md:2,children:e.jsx(n,{label:"Repeat Size",fullWidth:!0,type:"number",size:"small",name:"repeatSize",value:m.repeatSize,onChange:k,error:!!M.repeatSize,helperText:M.repeatSize,required:!0})}),e.jsx(a,{item:!0,xs:12,md:2,children:e.jsx(n,{label:"Total Fabric",fullWidth:!0,size:"small",name:"totalFabric",value:m.totalFabric,onChange:k})}),e.jsx(a,{item:!0,xs:12,md:2,children:e.jsx(n,{fullWidth:!0,select:!0,label:"UOM",type:"number",defaultValue:"",size:"small",name:"uomId",value:m.uomId,onChange:k,error:!!M.uomId,helperText:M.uomId,required:!0,disabled:m.isSchiffili,children:he.map(r=>e.jsx(P,{value:r.lookUpId,children:r.lookUpName},r.lookUpId))})}),e.jsx(a,{item:!0,xs:12,md:2,children:e.jsx(n,{label:"Shrinkage %",fullWidth:!0,size:"small",type:"number",name:"shrinkage",value:m.shrinkage,onChange:k,error:!!M.shrinkage,helperText:M.shrinkage,required:!0})}),e.jsx(a,{item:!0,xs:12,md:2,children:e.jsx(n,{label:"Wastage %",fullWidth:!0,size:"small",type:"number",name:"wastage",value:m.wastage,onChange:k,error:!!M.wastage,helperText:M.wastage,required:!0})}),e.jsx(a,{item:!0,xs:12,md:2,children:e.jsx(n,{label:"Total",fullWidth:!0,size:"small",name:"total",value:m.total,onChange:k})}),e.jsx(a,{item:!0,xs:12,md:6,children:e.jsx(a,{container:!0,spacing:1,width:"Inherit",children:e.jsx(a,{item:!0,xs:12,md:4,children:e.jsx(n,{label:"repeat in mtr",fullWidth:!0,size:"small",name:"repeatsInMtr",disabled:!0,value:m.repeatsInMtr,onChange:k})})})}),e.jsx(a,{item:!0,xs:12,textAlign:"right",children:e.jsx(D,{variant:"contained",size:"small",onClick:ge,children:"Save"})})]})})]})]}),e.jsx(a,{item:!0,xs:12,md:12,children:e.jsx(me,{sx:{height:1,width:"100%",marginTop:1,marginBottom:0}})}),e.jsxs(K,{variant:"outlined",children:[e.jsx($,{className:"MainCard",avatar:e.jsx(Fe,{}),title:"View",titleTypographyProps:{style:{color:"white"}}}),e.jsx(a,{sx:{paddingY:1,paddingX:1},children:e.jsx(a,{sx:{},item:!0,xs:12,children:g?e.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"},children:e.jsx("img",{src:We,alt:"Loading",style:{width:200,height:200}})}):e.jsx(Pe,{iColumns:ee,initialRows:F,setInitialData:u,deleteApi:A,deleteBy:"planningId",refetch:B,getCellClassName:j,setAccordionExpanded:L,fileName:"PrePlanningList"})})})]})]})},At=Nt,kt="/assets/roller-ezgif.com-instagif-CY-x4C-U.gif",Ot=()=>{const{user:p}=Se();console.log("user",p);const[t,u]=o.useState([]),[s,i]=o.useState({dpId:0,designId:"",batchNo:"",planningHeaderId:"",fabricId:"",colorId:"",color:"",vendorId:"",processType:"",AvailableQty:"",Shrinkage:"",Wastage:"",OutputQty:"",UOM:"",uomId:"",RatePerUOM:"",UnitRatePerPo:"",TotalExclGst:"",GST:"0",TotalIncludingGst:"",poPcs:"",baseColorName:"",createdBy:p.empId,createdOn:new Date().toISOString(),lastUpdatedOn:new Date().toISOString(),lastUpdatedBy:p.empId});o.useEffect(()=>{i({dpId:t.dpId||0,designId:(t==null?void 0:t.designId)||"",planningHeaderId:(t==null?void 0:t.planningHeaderId)||0,batchNo:(t==null?void 0:t.batchNo)||"",fabricId:(t==null?void 0:t.fabricId)||"",colorId:(t==null?void 0:t.colorId)||"",color:(t==null?void 0:t.color)||"",vendorId:(t==null?void 0:t.vendorId)||"",processType:(t==null?void 0:t.processType)||"",AvailableQty:(t==null?void 0:t.availableQty)||"",Shrinkage:(t==null?void 0:t.shrinkage)||"",Wastage:(t==null?void 0:t.wastage)||"",OutputQty:(t==null?void 0:t.outputQty)||0,UOM:(t==null?void 0:t.uom)||0,uomId:(t==null?void 0:t.uomId)||"",RatePerUOM:(t==null?void 0:t.ratePerUOM)||0,UnitRatePerPo:(t==null?void 0:t.unitRatePerPo)||"",TotalExclGst:(t==null?void 0:t.totalExclGst)||"",GST:(t==null?void 0:t.gst)||"",TotalIncludingGst:(t==null?void 0:t.totalIncludingGst)||"",poPcs:(t==null?void 0:t.poPcs)||0,baseColorName:(t==null?void 0:t.baseColorName)||0,createdOn:(t==null?void 0:t.createdOn)||new Date().toISOString(),createdBy:(t==null?void 0:t.createdBy)||p.empId,lastUpdatedOn:new Date().toISOString(),lastUpdatedBy:p.empId})},[t]);const{enqueueSnackbar:m}=Ne(),[W,d]=o.useState(!1);console.log("Dyeing form data to send",s);const{data:f}=Ae(),[G,X]=o.useState(""),{data:b}=ye(),{data:H,refetch:B}=ke(G,{skip:!G}),{data:q,refetch:z}=Re(s.designId,{skip:!s.designId}),{data:Y}=tt({batchNo:s.planningHeaderId,processType:"DyeingPrinting"},{skip:!s.planningHeaderId}),{data:E}=st({fabricId:s.fabricId,planningHeaderId:s.planningHeaderId},{skip:!s.fabricId||!s.planningHeaderId}),{data:Z,refetch:g}=at(s.planningHeaderId,{skip:!s.planningHeaderId}),[T,C]=o.useState([]),[R,V]=o.useState([]),[_,S]=o.useState([]),[Q,te]=o.useState([]),[oe,se]=o.useState([]),[ie,he]=o.useState([]),[ce,fe]=o.useState([]),[pe,ne]=o.useState(!1);console.log("batchList",R),console.log("formData",s);const le=(x,N)=>{ne(!pe)};o.useEffect(()=>{H&&C(H.result)},[H]),o.useEffect(()=>{q&&V(q.result)},[q]),o.useEffect(()=>{Y&&S(Y.result)},[Y]),o.useEffect(()=>{E&&he(E.result)},[E]),o.useEffect(()=>{b&&fe(b.result[0].vendorList)},[Y]),console.log(ce),o.useEffect(()=>{Z&&se(Z.result.map((x,N)=>({id:N,...x})))},[Z,g]),o.useEffect(()=>{if(b){const x=b.result[0];te(x.uomList)}},[b]);const ae=(f==null?void 0:f.result)||[],L=x=>{const{name:N,value:F}=x.target;if(N==="collectionId")ae.find(w=>w.collectionId===parseInt(F)),X(F),d(!0),i({...s,collectionId:F,designId:"",batchNo:"",planningHeaderId:"",fabricId:"",colorId:"",color:"",vendorId:"",processType:"",AvailableQty:"",Shrinkage:"",Wastage:"",OutputQty:"",UOM:"",uomId:"",RatePerUOM:"",UnitRatePerPo:"",TotalExclGst:"",GST:"0",TotalIncludingGst:"",poPcs:"",baseColorName:""});else if(N==="designId"){const w=T.find(ee=>ee.designId===parseInt(F));i({...s,designId:F,baseColorId:w?w.colorId:"",baseColorName:w?w.colorName:"",batchNo:"",planningHeaderId:"",fabricId:"",colorId:"",color:"",vendorId:"",processType:"",AvailableQty:"",Shrinkage:"",Wastage:"",OutputQty:"",UOM:"",uomId:"",RatePerUOM:"",UnitRatePerPo:"",TotalExclGst:"",GST:"0",TotalIncludingGst:"",poPcs:""})}else if(N==="batchNo"){const w=R.find(ee=>ee.batchNo===F);i({...s,batchNo:F,planningHeaderId:w?w.planningHeaderId:"",poPcs:w?w.poPcs:"",fabricId:"",colorId:"",color:"",vendorId:"",processType:"",AvailableQty:"",Shrinkage:"",Wastage:"",OutputQty:"",UOM:"",uomId:"",RatePerUOM:"",UnitRatePerPo:"",TotalExclGst:"",GST:"0",TotalIncludingGst:""}),ne(!0),d(!1)}else if(N==="fabricId")_.find(w=>w.fabricId===F),console.log("Selected Fabric:",_),i({...s,fabricId:F});else if(N==="ColorId"){const w=ie.find(ee=>ee.colorId===F.colorId);i({...s,ColorId:F.colorId,color:w.color,AvailableQty:w.total,UOM:w.uom,Shrinkage:w.shrinkage,Wastage:w.wastage})}else N==="processType"?i({...s,processType:F}):N==="vendorId"?i({...s,vendorId:F}):(i({...s,[N]:F}),M(w=>({...w,[N]:""})))};o.useEffect(()=>{const x=()=>{const r=parseFloat(s.AvailableQty)||0,h=parseFloat(s.Shrinkage)||0,y=parseFloat(s.Wastage)||0;return(r*(100-(h+y))/100).toFixed(2)},N=()=>{const r=parseFloat(s.AvailableQty)||0,h=parseFloat(s.RatePerUOM)||0;return(r*h).toFixed(2)},F=(r,h)=>(r*(1+h/100)).toFixed(2),w=x(),ee=N(),l=parseFloat(s.GST)||0,j=F(ee,l),A=parseFloat(s.poPcs)||0,c=A?j/A:0;i(r=>({...r,OutputQty:w,TotalExclGst:ee,TotalIncludingGst:j,UnitRatePerPo:c.toFixed(2)}))},[s.AvailableQty,s.Shrinkage,s.Wastage,s.RatePerUOM,s.GST,s.poPcs,s.UnitRatePerPo]);const[k,M]=o.useState({}),Ie=async()=>{const x=ge();if(Object.keys(x).length>0){M(x);return}try{const N=await de.post("https://gecxc.com:4041/api/DyeingPrinting/SaveDyeingPrinting",s);console.log("Save response:",N.data),N.data.success?m("Fabrication saved successfully!",{variant:"success",autoHideDuration:5e3}):(m(`${N.data.message} !`,{variant:"error",autoHideDuration:5e3}),console.log("response.message",N.data.message)),i(F=>({designId:F.designId,planningHeaderId:F.planningHeaderId,batchNo:F.batchNo,dpId:0,fabricId:"",colorId:"",color:"",vendorId:"",processType:"",AvailableQty:"",Shrinkage:"",Wastage:"",OutputQty:"",UOM:"",uomId:"",RatePerUOM:"",UnitRatePerPo:"",TotalExclGst:"",GST:"0",TotalIncludingGst:"",poPcs:F.poPcs,baseColorName:"",createdOn:new Date().toISOString(),createdBy:p.empId,lastUpdatedOn:new Date().toISOString(),lastUpdatedBy:p.empId})),g()}catch(N){console.error("Error saving data:",N),m("Dyeing not saved successfully!",{variant:"error",autoHideDuration:5e3})}},ge=()=>{const x={};return s.fabricId||(x.fabricId="fabricId is required"),s.colorId||(x.colorId="colorId is required"),s.vendorId||(x.vendorId="vendorId is required"),s.processType||(x.processType="processType is required"),s.GST||(x.GST="GST is required"),s.RatePerUOM||(x.RatePerUOM="RatePerUOM is required"),x},ue=[{value:"Dyeing",label:"Dyeing"},{value:"Printing",label:"Printing"}],O=[{field:"fabricName",headerName:"Fabric"},{field:"colorName",headerName:"Color"},{field:"vendorName",headerName:"Vendor"},{field:"processType",headerName:"Process Type"},{field:"uom",headerName:" UOM"},{field:"availableQty",headerName:"Available Quantitity"},{field:"shrinkage",headerName:"Shrinkage"},{field:"wastage",headerName:"Wastage"},{field:"outputQty",headerName:"Output Qty"},{field:"ratePerUOM",headerName:"Rate"},{field:"totalExclGst",headerName:"Total Excl. Gst"},{field:"gst",headerName:"GST"},{field:"totalIncludingGst",headerName:"Total Including GST"},{field:"unitRatePerPo",headerName:"UnitRate Per Po."}];return e.jsxs(e.Fragment,{children:[e.jsxs(K,{variant:"outlined",children:[e.jsx($,{className:"css-4rfrnx-MuiCardHeader-root",avatar:e.jsx(Le,{src:kt,sx:{background:"transparent"}}),title:"Dyeing ",titleTypographyProps:{style:{color:"white"}}}),e.jsxs(a,{container:!0,spacing:2,width:"Inherit",sx:{paddingY:2,paddingX:2},children:[e.jsxs(a,{item:!0,xs:12,md:3,children:[e.jsx(n,{fullWidth:!0,select:!0,label:"Select Collection",name:"collectionId",value:G,onChange:L,size:"small",children:ae.map(x=>e.jsx(P,{value:x.collectionId,children:x.collectionName},x.collectionId))})," "]}),e.jsx(a,{item:!0,xs:12,md:3,children:e.jsx(n,{fullWidth:!0,select:!0,label:"Select Design",name:"designId",value:s.designId,onChange:L,size:"small",children:T.map(x=>e.jsx(P,{value:x.designId,children:x.designNo},x.designId))})}),e.jsxs(a,{item:!0,xs:12,md:3,children:[e.jsx(n,{fullWidth:!0,select:!0,label:"Batch No.",name:"batchNo",value:s.batchNo,onChange:L,size:"small",children:R.map(x=>e.jsx(P,{value:x.batchNo,children:x.batchNo},x.batchNo))})," "]}),e.jsx(a,{item:!0,xs:12,md:3,children:e.jsx(n,{label:"Base Color",fullWidth:!0,size:"small",name:"baseColorName",value:s.baseColorName,onChange:L,disabled:!0})}),e.jsx(a,{item:!0,xs:12,md:3,children:e.jsx(n,{fullWidth:!0,select:!0,label:"Select Fabric",defaultValue:"",size:"small",name:"fabricId",value:s.fabricId,onChange:L,error:!!k.fabricId,helperText:k.fabricId,required:!0,children:_.map(x=>e.jsx(P,{value:x.fabricId,children:x.fabric},x.fabricId))})}),e.jsx(a,{item:!0,xs:12,md:3,children:e.jsx(bt,{fullWidth:!0,options:ie,getOptionLabel:x=>x.color||"",renderInput:x=>e.jsx(n,{...x,label:"Color",name:"colorId",size:"small",error:!!k.colorId,helperText:k.colorId,required:!0}),value:ie.find(x=>x.colorId===s.colorId)||null,onChange:(x,N)=>{i(F=>({...F,colorId:N?N.colorId:"",color:N?N.color:"",AvailableQty:N?N.total:"",UOM:N?N.uom:"",uomId:N?N.uomId:"",Shrinkage:N?N.shrinkage:"",Wastage:N?N.wastage:""}))}})})]})]}),e.jsx(me,{color:"#cc8587",sx:{height:1,width:"100%",mt:2}}),e.jsxs(K,{variant:"outlined",children:[e.jsx($,{className:"css-4rfrnx-MuiCardHeader-root",avatar:e.jsx(Oe,{}),title:"Add Dyeing ",titleTypographyProps:{style:{color:"white"}},action:e.jsx(Ce,{onClick:le,sx:{mt:"-18px"},children:e.jsx(xe,{style:{color:"white"}})}),sx:{display:"flex",alignItems:"center",justifyContent:"space-between"}}),e.jsxs(Te,{expanded:pe,onChange:le,sx:{},children:[e.jsx(we,{expandIcon:e.jsx(xe,{}),"aria-controls":"panel1-content",id:"panel1-header",sx:{display:"none"}}),e.jsx(ze,{children:e.jsxs(a,{container:!0,spacing:2,width:"Inherit",sx:{paddingY:2,paddingX:2},children:[e.jsx(a,{item:!0,xs:12,md:3,children:e.jsx(n,{fullWidth:!0,select:!0,label:"Vendor Name",size:"small",name:"vendorId",value:s.vendorId,onChange:L,error:!!k.vendorId,helperText:k.vendorId,required:!0,children:ce.map(x=>e.jsx(P,{value:x.lookUpId,children:x.lookUpName},x.lookUpId))})}),e.jsx(a,{item:!0,xs:12,md:3,children:e.jsx(n,{fullWidth:!0,select:!0,label:"Process Type",size:"small",name:"processType",value:s.processType,onChange:L,error:!!k.processType,helperText:k.processType,required:!0,children:ue.map(x=>e.jsx(P,{value:x.value,children:x.label},x.value))})}),e.jsx(a,{item:!0,xs:12,md:3,children:e.jsx(n,{label:"Po Pcs",fullWidth:!0,size:"small",name:"poPcs",value:s.poPcs,onChange:L,disabled:!0})}),e.jsx(a,{item:!0,xs:12,md:1.5,children:e.jsx(n,{label:"UOM",fullWidth:!0,size:"small",name:"UOM",value:s.UOM,onChange:L})}),e.jsx(a,{item:!0,xs:12,md:1.5,children:e.jsx(n,{label:"AvailableQty",fullWidth:!0,size:"small",type:"number",name:"AvailableQty",value:s.AvailableQty,onChange:L})}),e.jsx(a,{item:!0,xs:12,md:1.5,children:e.jsx(n,{label:"Shrinkage%",type:"number",fullWidth:!0,size:"small",name:"Shrinkage",value:s.Shrinkage,onChange:L})}),e.jsx(a,{item:!0,xs:12,md:1.5,children:e.jsx(n,{label:"Wastage%",fullWidth:!0,size:"small",type:"number",name:"Wastage",value:s.Wastage,onChange:L})}),e.jsx(a,{item:!0,xs:12,md:1.5,children:e.jsx(n,{label:"Output Qty",fullWidth:!0,size:"small",name:"OutputQty",type:"number",value:s.OutputQty,onChange:L})}),e.jsx(a,{item:!0,xs:12,md:1.5,children:e.jsx(n,{label:"Rate",fullWidth:!0,size:"small",type:"number",name:"RatePerUOM",value:s.RatePerUOM,onChange:L,error:!!k.RatePerUOM,helperText:k.RatePerUOM,required:!0})}),e.jsx(a,{item:!0,xs:12,md:1.5,children:e.jsx(n,{label:"Total Excluding GST",type:"number",fullWidth:!0,size:"small",name:"TotalExclGst",value:s.TotalExclGst,onChange:L})}),e.jsxs(a,{item:!0,xs:12,md:1.5,children:[e.jsx(n,{label:"GST",fullWidth:!0,type:"number",size:"small",name:"GST",value:s.GST,onChange:L,error:!!k.GST,helperText:k.GST,required:!0})," "]}),e.jsx(a,{item:!0,xs:12,md:1.5,children:e.jsx(n,{label:"Total:Including Gst",fullWidth:!0,size:"small",name:"TotalExclGst",value:s.TotalIncludingGst,onChange:L})}),e.jsx(a,{item:!0,xs:12,md:1.5,children:e.jsx(n,{label:"Unit P: T/Po PC's",fullWidth:!0,size:"small",name:"UnitRatePerPo",value:s.UnitRatePerPo,onChange:L})}),e.jsx(a,{item:!0,xs:12,md:12,textAlign:"right",children:e.jsx(D,{variant:"contained",color:"primary",size:"small",onClick:Ie,children:"Save"})})]})})]})]}),e.jsx(a,{item:!0,xs:12,md:12,children:e.jsx(me,{sx:{height:1,width:"100%",marginTop:1,marginBottom:0}})}),e.jsxs(K,{variant:"outlined",children:[e.jsx($,{className:"css-4rfrnx-MuiCardHeader-root",avatar:e.jsx(Fe,{}),title:"View Dyeing ",titleTypographyProps:{style:{color:"white"}}})," ",e.jsx(a,{container:!0,spacing:2,width:"Inherit",sx:{paddingY:2,paddingX:2},children:e.jsx(a,{item:!0,xs:12,md:12,paddingTop:1,children:W?e.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"},children:e.jsx("img",{src:We,alt:"Loading",style:{width:200,height:200}})}):e.jsx(Pe,{iColumns:O,initialRows:oe,setInitialData:u,deleteApi:"https://gecxc.com:4041/api/DyeingPrinting/DeleteDyeingPrintingById?DPId=",deleteBy:"dpId",refetch:g,setAccordionExpanded:ne,fileName:"Dyeing&PrintingList"})})})]})]})},Tt=Ot,Ve="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAACXBIWXMAAAsTAAALEwEAmpwYAAADr0lEQVR4nNXXaciVVRAH8Kv1Jtoi5psFZZYUtoimhUVlaJHZghK2UBFCtGkbZdgiBG1GHyowaaEdWogWElvMFjJpw4oWwrJsVetDtNNevxjeuXW8PPe991rvh/5w4TznnDkzZ87Mf+bWav8H4Dgcgc9wfcPanViFidioL5Rvj2/wIqbgCyzA3XgKH+BI/+DWijMGpYEjO1U+FH8Uh++Jj6yPNzG5YW5wccYxWItF6anwWP9OjJiE7/FuYcCTeDnHjQYsLWR3w8cYi/OxP57AzE49cSGewzgswfJ0/0u4HwfgWYyq3w5deBXH4wXchHU4GgvbVdwPR+EVPI1NMCDesviFos3SqIiTaSl7BW5Pw5/Ho3gYl2Nuu8G3NG+8X85tgcMxCxfhLBxWf/N08bJU+h52xRrciGdwdj7bsFbKx+fbnZTfe+cNflGNX/EQJqQ3Pi+MPgN3pAd/x8GtlO+BT/I2A1P4T+0hMuYdzC/Om56XCW/NyOCt5gs9Lo5oPxBD8u07xesZK5vjtjRqXKEj0vGEZgYsxGXYOKO8U/yE3ZN0PsSVuCHOLHTsgxVVykdmgAzKAGuFryvmLsDVBXnF+w9OCt+60BXcMarRgBA8D91Jvc2URrqNSZkJ+f1dUvRbDfu/wqbpiXmFrluCIUvlke+rsS3OaaJ8WUmxhewO+LYXT52KneLWhcx167EhRtQ3JKNVYUqTuAkmfDBStoncI7kvMmvLHAcdTywPORT35rjqbdfWySPzfDF+wAPF/Hb4skJ2Xa6HzL45fiwCvTRgJq7NvK/CmcXeuQ1rpxdrF1fIBvn0z5ScXuXFGk7Md4nbVeGUYu8lDWvnFmtzKmR/C+JpZcA03JXjqoBaWfD9VplGkqjq890VvUJgTfHuezUzYMdgsBxHRavCpAaZoQ3fQblVWJLrK0suaDSgXwbakCSTKkQp7WoiP6AX5pyVJPd3GjYzYgFmZzT/2OSwVdkLblOU7PuauF4+Z3fGxqWtDBiblawrWbE3hIFv4OcW++Ylta9uqyHVU3rnpNBr/h2WZ1WMrLmmpfJABEnW7uD44dlybwjCk8OyWX0/YqvWLvSUy3jTXbIt77QsL8q+YnReZnTbyuvA1OTuqZkhMyoqXSNWRH+Y8sem8sm1DYWehvLtjPrhObdzZspVuDnL7GnBI4XMPUlQIzZYeR3ZGc1ObzyeFW981viByRtjsttdnO3cyRF8tf8Serj8oPhjmu11tNqfZnpFzz8fh/TJn9O+xl9lMwg6mBWmPgAAAABJRU5ErkJggg==",wt=()=>{const{user:p}=Se(),{enqueueSnackbar:t}=Ne(),[u,s]=o.useState([]),[i,m]=o.useState({schiffiliId:0,designId:"",planningHeaderId:0,batchNo:"",componentId:"",poPcs:"",baseColorName:"",fabricId:"",vendorId:"",colorId:"",availableQty:"",thaanQty:0,operatingMachineId:0,operatingMachine:"",workingHeadId:0,cuttingSize:"",rate:"",costPerComponent:"",totalEmbroidry:0,noOfItemPerThaan:0,noOfStichesPerYard:0,amountPerYard:0,totalPcs:0,laserCut:!1,laserCutRate:0,pcsForLaserCut:0,totalAmount:0,createdBy:p.empId,createdOn:new Date().toISOString(),lastUpdatedOn:new Date().toISOString(),lastUpdatedBy:p.empId});o.useEffect(()=>{m({schiffiliId:u.schiffiliId||0,designId:(u==null?void 0:u.designId)||"",planningHeaderId:(u==null?void 0:u.planningHeaderId)||0,batchNo:(u==null?void 0:u.batchNo)||"",componentId:(u==null?void 0:u.componentId)||"",poPcs:(u==null?void 0:u.poPcs)||"",baseColorName:(u==null?void 0:u.baseColorName)||"",fabricId:(u==null?void 0:u.fabricId)||"",vendorId:(u==null?void 0:u.vendorId)||"",colorId:(u==null?void 0:u.colorId)||"",availableQty:(u==null?void 0:u.availableQty)||"",thaanQty:(u==null?void 0:u.thaanQty)||0,operatingMachineId:(u==null?void 0:u.operatingMachineId)||0,operatingMachine:(u==null?void 0:u.operatingMachine)||"",workingHeadId:(u==null?void 0:u.workingHeadId)||0,cuttingSize:(u==null?void 0:u.cuttingSize)||"",rate:(u==null?void 0:u.rate)||"",costPerComponent:(u==null?void 0:u.costPerComponent)||"",totalEmbroidry:(u==null?void 0:u.totalEmbroidry)||0,noOfItemPerThaan:(u==null?void 0:u.noOfItemPerThaan)||0,noOfStichesPerYard:(u==null?void 0:u.noOfStichesPerYard)||0,amountPerYard:(u==null?void 0:u.amountPerYard)||0,totalPcs:(u==null?void 0:u.totalPcs)||0,laserCut:(u==null?void 0:u.laserCut)||!1,laserCutRate:(u==null?void 0:u.laserCutRate)||0,pcsForLaserCut:(u==null?void 0:u.pcsForLaserCut)||0,totalAmount:(u==null?void 0:u.totalAmount)||0,createdOn:(u==null?void 0:u.createdOn)||new Date().toISOString(),createdBy:(u==null?void 0:u.createdBy)||p.empId,lastUpdatedOn:new Date().toISOString(),lastUpdatedBy:p.empId})},[u]);const[W,d]=o.useState(!1),f=(l,j)=>{d(!W)},[G,X]=o.useState(!1),{data:b}=Ae(),[H,B]=o.useState(""),{data:q}=ye(),{data:z,refetch:Y}=ke(H,{skip:!H}),{data:E,refetch:Z}=Re(i.designId,{skip:!i.designId}),{data:g}=qe({batchNo:i.planningHeaderId,componentId:i.componentId},{skip:!i.planningHeaderId||!i.componentId}),{data:T}=Ee({batchNo:i.planningHeaderId,componentId:i.componentId,fabricId:i.fabricId},{skip:!i.planningHeaderId||!i.componentId||!i.fabricId}),{data:C,refetch:R}=rt(i.planningHeaderId,{skip:!i.planningHeaderId}),{data:V}=Me(i.planningHeaderId,{skip:!i.planningHeaderId});console.log("formData.planningHeaderId",i.planningHeaderId),console.log("collectionData",b),console.log("schiffliList",C);const[_,S]=o.useState([]),[Q,te]=o.useState([]),[oe,se]=o.useState([]),[ie,he]=o.useState([]),[ce,fe]=o.useState([]),[pe,ne]=o.useState([]),[le,ae]=o.useState([]),[L,k]=o.useState([]),[M,Ie]=o.useState([]);o.useEffect(()=>{z&&S(z.result)},[z]),o.useEffect(()=>{E&&te(E.result)},[E]),o.useEffect(()=>{g&&se(g.result)},[g]),o.useEffect(()=>{T&&ae(g.result)},[T]),o.useEffect(()=>{V&&Ie(V.result)},[V]),o.useEffect(()=>{C&&k(C.result.map((l,j)=>({id:j,...l})))},[C,R]),o.useEffect(()=>{if(q){const l=q.result[0];he(l.vendorList),fe(l.operatingMachineList),ne(l.workingHeadList)}},[q]),console.log("initialRows",L);const ge=(b==null?void 0:b.result)||[];o.useEffect(()=>{const l=()=>{const h=parseFloat(i.thaanQty)||0,y=parseFloat(i.operatingMachine)||0;return(h*y).toFixed(2)};m(h=>({...h,totalEmbroidry:l()}));const j=()=>{const h=parseFloat(i.thaanQty)||0,y=parseFloat(i.noOfStichesPerYard)||0;return(h*y).toFixed(2)};m(h=>({...h,totalPcs:j()}));const A=()=>{const h=parseFloat(i.noOfStichesPerYard)||0,y=parseFloat(i.rate)||0;return(h/1e3*y).toFixed(2)};m(h=>({...h,amountPerYard:A()}));const c=()=>{const h=parseFloat(i.totalAmount)||0,y=parseFloat(i.totalPcs)||0;return(h/y).toFixed(2)};m(h=>({...h,costPerComponent:c()}));const r=()=>{const h=parseFloat(i.amountPerYard)||0,y=parseFloat(i.totalEmbroidry)||0,U=parseFloat(i.laserCutRate)||0,v=parseFloat(i.pcsForLaserCut)||0;return(h*y+v*U).toFixed(2)};m(h=>({...h,totalAmount:r()}))},[i.thaanQty,i.operatingMachine,i.noOfStichesPerYard,i.rate,i.totalAmount,i.totalPcs,i.amountPerYard,i.totalEmbroidry,i.laserCutRate,i.pcsForLaserCut]);const ue=l=>{const{name:j,checked:A}=l.target;m(c=>({...c,[j]:A}))},O=l=>{const{name:j,value:A}=l.target;if(j==="collectionId")ge.find(c=>c.collectionId===parseInt(A)),B(A),X(!0),m({...i,collectionId:A,designId:"",planningHeaderId:0,batchNo:"",componentId:"",poPcs:"",baseColorName:"",fabricId:"",vendorId:"",colorId:"",availableQty:"",thaanQty:0,operatingMachineId:0,operatingMachine:"",workingHeadId:0,cuttingSize:"",rate:"",costPerComponent:"",totalEmbroidry:0,noOfItemPerThaan:0,noOfStichesPerYard:0,amountPerYard:0,totalPcs:0,laserCut:!1,laserCutRate:0,pcsForLaserCut:0,totalAmount:0});else if(j==="designId"){const c=_.find(r=>r.designId===parseInt(A));m({...i,designId:A,baseColorId:c?c.colorId:"",baseColorName:c?c.colorName:"",planningHeaderId:0,batchNo:"",componentId:"",poPcs:"",fabricId:"",vendorId:"",colorId:"",availableQty:"",thaanQty:0,operatingMachineId:0,operatingMachine:"",workingHeadId:0,cuttingSize:"",rate:"",costPerComponent:"",totalEmbroidry:0,noOfItemPerThaan:0,noOfStichesPerYard:0,amountPerYard:0,totalPcs:0,laserCut:!1,laserCutRate:0,pcsForLaserCut:0,totalAmount:0})}else if(j==="batchNo"){const c=Q.find(r=>r.batchNo===A);m({...i,batchNo:A,planningHeaderId:c?c.planningHeaderId:"",poPcs:c?c.poPcs:"",componentId:"",fabricId:"",vendorId:"",colorId:"",availableQty:"",thaanQty:0,operatingMachineId:0,operatingMachine:"",workingHeadId:0,cuttingSize:"",rate:"",costPerComponent:"",totalEmbroidry:0,noOfItemPerThaan:0,noOfStichesPerYard:0,amountPerYard:0,totalPcs:0,laserCut:!1,laserCutRate:0,pcsForLaserCut:0,totalAmount:0}),d(!0),X(!1)}else if(j==="colorId"){const c=le.find(r=>r.colorId===A);m({...i,colorId:A,availableQty:c?c.total:"",cuttingSize:c?c.cuttingSize:"",repeats:c?c.repeats:""})}else if(j==="operatingMachineId"){const c=ce.find(r=>r.lookUpId===A);m({...i,operatingMachineId:A,operatingMachine:c?c.lookUpName:""})}else m({...i,[j]:A})};console.log("colors",le);const[I,x]=o.useState({}),N=async()=>{const l=F();if(Object.keys(l).length>0){x(l);return}try{const j=await de.post("https://gecxc.com:4041/api/Schiffli/SaveSchiffili",i);console.log("Save response:",j.data),j.data.success?t("Fabrication saved successfully!",{variant:"success",autoHideDuration:5e3}):(t(`${j.data.message} !`,{variant:"error",autoHideDuration:5e3}),console.log("response.message",j.data.message)),m(A=>({designId:A.designId,planningHeaderId:A.planningHeaderId,batchNo:A.batchNo,baseColorName:A.baseColorName,schiffiliId:0,componentId:"",poPcs:A.poPcs,fabricId:"",vendorId:"",colorId:"",availableQty:"",thaanQty:0,operatingMachineId:0,operatingMachine:"",workingHeadId:0,cuttingSize:"",rate:"",costPerComponent:"",totalEmbroidry:0,noOfItemPerThaan:0,noOfStichesPerYard:0,amountPerYard:0,totalPcs:0,laserCut:!1,laserCutRate:0,pcsForLaserCut:0,totalAmount:0,createdOn:new Date().toISOString(),createdBy:p.empId,lastUpdatedOn:new Date().toISOString(),lastUpdatedBy:p.empId})),R()}catch(j){console.error("Error saving data:",j),t("Dyeing not saved successfully!",{variant:"error",autoHideDuration:5e3})}},F=()=>{const l={};return i.fabricId||(l.fabricId="fabricId is required"),i.colorId||(l.colorId="colorId is required"),i.vendorId||(l.vendorId="vendorId is required"),i.componentId||(l.componentId="componentId is required"),i.thaanQty||(l.thaanQty="thaanQty is required"),i.workingHeadId||(l.workingHeadId="workingHeadId is required"),i.rate||(l.rate="rate is required"),i.operatingMachineId||(l.operatingMachineId="operatingMachineId is required"),i.noOfStichesPerYard||(l.noOfStichesPerYard="noOfStichesPerYard is required"),i.noOfItemPerThaan||(l.noOfItemPerThaan="noOfItemPerThaan is required"),l};console.log("formData",i);const w=[{field:"componentName",headerName:"Component"},{field:"fabricName",headerName:"Fabric"},{field:"vendorName",headerName:"Vendor"},{field:"colourName",headerName:"Color"},{field:"thaanQty",headerName:"Thaan Quantity"},{field:"availableQty",headerName:"Available Quantitity"},{field:"operatingMachineName",headerName:"Operating Machine"},{field:"noOfHeadsName",headerName:"Working Head"},{field:"cuttingSize",headerName:"Cutting Size"},{field:"rate",headerName:"Rate"},{field:"noOfStichesPerYard",headerName:"No. Of Stiches Per Yard"},{field:"noOfItemPerThaan",headerName:"No. Of Item Per Thaan"},{field:"totalEmbroidry",headerName:"Total Embroidry"},{field:"amountPerYard",headerName:"Amount Per Yard"},{field:"totalPcs",headerName:"Total Pcs"},{field:"totalAmount",headerName:"Total Amount"},{field:"costPerComponent",headerName:"Cost Per Component"},{field:"laserCutRate",headerName:"LaserCut Rate"},{field:"pcsForLaserCut",headerName:"Pcs.For Laser Cut"}];return e.jsxs(e.Fragment,{children:[e.jsxs(K,{variant:"outlined",children:[e.jsx($,{className:"css-4rfrnx-MuiCardHeader-root",avatar:e.jsx(Le,{src:Ve,sx:{background:"transparent"}}),title:"Schiffli ",titleTypographyProps:{style:{color:"white"}}}),e.jsxs(a,{container:!0,spacing:2,width:"Inherit",sx:{paddingY:2,paddingX:2},children:[e.jsxs(a,{item:!0,xs:12,md:3,children:[e.jsx(n,{fullWidth:!0,select:!0,label:"Select Collection",name:"collectionId",value:H,onChange:O,size:"small",children:ge.map(l=>e.jsx(P,{value:l.collectionId,children:l.collectionName},l.collectionId))})," "]}),e.jsx(a,{item:!0,xs:12,md:3,children:e.jsx(n,{fullWidth:!0,select:!0,label:"Select Design",name:"designId",value:i.designId,onChange:O,size:"small",children:_.map(l=>e.jsx(P,{value:l.designId,children:l.designNo},l.designId))})}),e.jsxs(a,{item:!0,xs:12,md:3,children:[e.jsx(n,{fullWidth:!0,select:!0,label:"Batch No.",name:"batchNo",value:i.batchNo,onChange:O,size:"small",children:Q.map(l=>e.jsx(P,{value:l.batchNo,children:l.batchNo},l.batchNo))})," "]}),e.jsxs(a,{item:!0,xs:12,md:3,children:[e.jsx(n,{fullWidth:!0,select:!0,label:"Components",name:"componentId",value:i.componentId,onChange:O,size:"small",required:!0,error:!!I.componentId,helperText:I.componentId,children:M.map(l=>e.jsx(P,{value:l.componentId,children:l.componentName},l.componentId))})," "]}),e.jsx(a,{item:!0,xs:12,md:3,children:e.jsx(n,{label:"Base Color",fullWidth:!0,size:"small",name:"baseColorName",value:i.baseColorName,onChange:O,disabled:!0})})]})]}),e.jsx(me,{color:"#cc8587",sx:{height:1,width:"100%",mt:2}}),e.jsxs(K,{variant:"outlined",children:[e.jsx($,{className:"css-4rfrnx-MuiCardHeader-root",avatar:e.jsx(Oe,{}),title:"Add Schiffli ",titleTypographyProps:{style:{color:"white"}},action:e.jsx(Ce,{onClick:f,sx:{mt:"-18px"},children:e.jsx(xe,{style:{color:"white"}})}),sx:{display:"flex",alignItems:"center",justifyContent:"space-between"}})," ",e.jsxs(Te,{expanded:W,onChange:f,sx:{},children:[e.jsx(we,{expandIcon:e.jsx(xe,{}),"aria-controls":"panel1-content",id:"panel1-header",sx:{display:"none"}}),e.jsx(ze,{children:e.jsxs(a,{container:!0,spacing:2,width:"Inherit",sx:{paddingY:2,paddingX:2},children:[e.jsx(a,{item:!0,xs:12,md:3,children:e.jsx(n,{fullWidth:!0,select:!0,label:"Select Fabric",defaultValue:"",size:"small",name:"fabricId",value:i.fabricId,onChange:O,required:!0,error:!!I.fabricId,helperText:I.fabricId,children:oe.map(l=>e.jsx(P,{value:l.fabricId,children:l.fabric},l.fabricId))})}),e.jsx(a,{item:!0,xs:12,md:3,children:e.jsx(n,{fullWidth:!0,select:!0,label:"Vendors",defaultValue:"",size:"small",name:"vendorId",value:i.vendorId,onChange:O,required:!0,error:!!I.vendorId,helperText:I.vendorId,children:ie.map(l=>e.jsx(P,{value:l.lookUpId,children:l.lookUpName},l.lookUpId))})}),e.jsx(a,{item:!0,xs:12,md:3,children:e.jsx(n,{fullWidth:!0,select:!0,label:"Color",size:"small",name:"colorId",value:i.colorId,onChange:O,required:!0,error:!!I.colorId,helperText:I.colorId,children:le.map(l=>e.jsx(P,{value:l.colorId,children:l.color},l.colorId))})}),e.jsx(a,{item:!0,xs:12,md:1.5,children:e.jsx(n,{label:"Po Pcs",fullWidth:!0,size:"small",name:"poPcs",value:i.poPcs,disabled:!0,onChange:O})}),e.jsx(a,{item:!0,xs:12,md:1.5,children:e.jsx(n,{label:"Available Quantity",fullWidth:!0,size:"small",name:"availableQty",value:i.availableQty,onChange:O})}),e.jsx(a,{item:!0,xs:12,md:1.5,children:e.jsx(n,{label:"Thaan Quantity",fullWidth:!0,type:"number",size:"small",name:"thaanQty",value:i.thaanQty,onChange:O,required:!0,error:!!I.thaanQty,helperText:I.thaanQty})}),e.jsx(a,{item:!0,xs:12,md:1.5,children:e.jsx(n,{fullWidth:!0,select:!0,label:"operatingMachineId",defaultValue:"",size:"small",name:"operatingMachineId",value:i.operatingMachineId,onChange:O,required:!0,error:!!I.operatingMachineId,helperText:I.operatingMachineId,children:ce.map(l=>e.jsx(P,{value:l.lookUpId,children:l.lookUpName},l.lookUpId))})}),e.jsx(a,{item:!0,xs:12,md:1.5,children:e.jsx(n,{fullWidth:!0,select:!0,label:"workingHeadId",defaultValue:"",size:"small",name:"workingHeadId",value:i.workingHeadId,onChange:O,required:!0,error:!!I.workingHeadId,helperText:I.workingHeadId,children:pe.map(l=>e.jsx(P,{value:l.lookUpId,children:l.lookUpName},l.lookUpId))})}),e.jsx(a,{item:!0,xs:12,md:1.5,children:e.jsx(n,{label:"Cutting Size",fullWidth:!0,type:"number",size:"small",name:"cuttingSize",value:i.cuttingSize,onChange:O})}),e.jsx(a,{item:!0,xs:12,md:1.5,children:e.jsx(n,{label:"Rate",type:"number",fullWidth:!0,size:"small",name:"rate",value:i.rate,onChange:O,required:!0,error:!!I.rate,helperText:I.rate})}),e.jsx(a,{item:!0,xs:12,md:1.5,children:e.jsx(n,{label:"No. Of Stiches Per Yard",fullWidth:!0,type:"number",size:"small",name:"noOfStichesPerYard",value:i.noOfStichesPerYard,onChange:O,required:!0,error:!!I.noOfStichesPerYard,helperText:I.noOfStichesPerYard})}),e.jsx(a,{item:!0,xs:12,md:1.5,children:e.jsx(n,{label:"No. Of Items Per Thaan",fullWidth:!0,size:"small",type:"number",name:"noOfItemPerThaan",value:i.noOfItemPerThaan,onChange:O,required:!0,error:!!I.noOfItemPerThaan,helperText:I.noOfItemPerThaan})}),e.jsx(a,{item:!0,xs:12,md:1.5,children:e.jsx(n,{label:"Total Embroidry",fullWidth:!0,size:"small",name:"totalEmbroidry",type:"number",value:i.totalEmbroidry,onChange:O})}),e.jsx(a,{item:!0,xs:12,md:1.5,children:e.jsx(n,{label:"Amount Per Yard",fullWidth:!0,type:"number",size:"small",name:"amountPerYard",value:i.amountPerYard,onChange:O})}),e.jsx(a,{item:!0,xs:12,md:1.5,children:e.jsx(n,{label:"Total Pcs",fullWidth:!0,size:"small",name:"totalPcs",value:i.totalPcs,onChange:O})}),e.jsx(a,{item:!0,xs:12,md:1.5,children:e.jsx(n,{label:"Cost Per Component",fullWidth:!0,size:"small",name:"costPerComponent",value:i.costPerComponent,onChange:O})}),e.jsx(a,{item:!0,xs:12,md:1.5,children:e.jsx(n,{label:"Total Amount",fullWidth:!0,size:"small",type:"number",name:"totalAmount",value:i.totalAmount,onChange:O})}),e.jsx(a,{item:!0,xs:12,md:1.5,children:e.jsx(Ge,{control:e.jsx(Ye,{checked:i.laserCut,onChange:ue,name:"laserCut"}),label:"Laser Cut"})}),i.laserCut?e.jsx(a,{item:!0,xs:12,md:4.5,children:e.jsxs(a,{container:!0,spacing:1,width:"Inherit",children:[e.jsx(a,{item:!0,xs:12,md:6,children:e.jsx(n,{label:"Laser Cut Rate",fullWidth:!0,size:"small",name:"laserCutRate",value:i.laserCutRate,onChange:O})}),e.jsx(a,{item:!0,xs:12,md:6,children:e.jsx(n,{label:"Pcs For LaserCut",fullWidth:!0,size:"small",name:"pcsForLaserCut",value:i.pcsForLaserCut,onChange:O})})]})}):null,e.jsx(a,{item:!0,xs:12,textAlign:"right",sx:{mt:2},children:e.jsx(D,{variant:"contained",size:"small",onClick:N,children:"Save"})})]})})]})]}),e.jsx(a,{item:!0,xs:12,md:12,children:e.jsx(me,{sx:{height:1,width:"100%",marginTop:1,marginBottom:0}})}),e.jsxs(K,{variant:"outlined",children:[e.jsx($,{className:"css-4rfrnx-MuiCardHeader-root",avatar:e.jsx(Fe,{}),title:"View Schiffli ",titleTypographyProps:{style:{color:"white"}}}),e.jsx(a,{container:!0,spacing:2,width:"Inherit",sx:{paddingY:2,paddingX:2},children:e.jsx(a,{sx:{marginTop:2},item:!0,xs:12,children:G?e.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"},children:e.jsx("img",{src:We,alt:"Loading",style:{width:200,height:200}})}):e.jsx(Pe,{iColumns:w,initialRows:L,setInitialData:s,deleteApi:"https://gecxc.com:4041/api/Schiffli/DeleteSchiffiById?schiffiId=",deleteBy:"schiffiliId",refetch:R,setAccordionExpanded:d,fileName:"Schffili List"})})})]})]})},zt=wt,Ft=({additionalProcessData:p,setAdditionalProcessData:t,refetchAdditionalProcessList:u,handleClickOpen:s})=>{const{user:i}=Se(),[m,W]=o.useState([]),d=m.reduce((g,T)=>g+(T.quantity??0),0).toFixed(2);console.log("Quantity",d);const[f,G]=o.useState({additionalProcessDetId:0,additionalProcessId:p.additionalProcessId||0,designId:p.designId||"",planningHeaderId:p.planningHeaderId||0,batchNo:p.batchNo||"",componentName:p.componentName||"",componentId:p.componentId||"",colorName:p.colorName||"",colorId:p.colorId||"",fabricName:p.fabricName||"",fabricId:p.fabricId||"",uomId:p.uomId||"",uom:p.uom||"",vendorId:"",pcsPerComponent:p.pcsPerComponent||"",remainingPcsPerComponent:p.pcsPerComponent-d||"",processTypeName:p.processTypeName||"",processTypeId:p.processTypeId||"",quantity:"",ratePerPcs:0,totalAmount:0,costPerComponent:"",createdOn:new Date().toISOString(),createdBy:i.empId,lastUpdatedOn:new Date().toISOString(),LastUpdatedBy:i.empId});o.useEffect(()=>{G({...f,remainingPcsPerComponent:p.pcsPerComponent-d||""})},[m]);const{data:X}=ye(),{data:b,refetch:H}=ot(f.additionalProcessId,{skip:!f.additionalProcessId}),[B,q]=o.useState([]);o.useEffect(()=>{if(X){const g=X.result[0];q(g.vendorList)}},[X]),o.useEffect(()=>{b&&W(b.result.map((g,T)=>({id:T,...g})))},[b,H]),console.log("initialRows",m);const z=g=>{const{name:T,value:C}=g.target;G({...f,[T]:C})};o.useEffect(()=>{const g=()=>{const C=parseFloat(f.quantity)||0,R=parseFloat(f.ratePerPcs)||0;return(C*R).toFixed(2)};G(C=>({...C,totalAmount:g()}));const T=()=>{const C=parseFloat(f.totalAmount)||0,R=parseFloat(f.poPcs)||0;return(C/R).toFixed(2)};G(C=>({...C,costPerComponent:T()}))},[f.quantity,f.ratePerPcs,f.totalAmount]);const Y=async()=>{console.log(f);try{const g=await de.post("https://gecxc.com:4041/api/AdditionalProcess/SaveAdditionalProcessDetails",f);console.log("Save response:",g.data),H(),G(T=>({...T,vendorId:"",pcsPerComponent:p.pcsPerComponent||"",quantity:"",ratePerPcs:0,totalAmount:0,costPerComponent:"",createdOn:new Date().toISOString(),createdBy:i.empId,lastUpdatedOn:new Date().toISOString(),LastUpdatedBy:i.empId})),u(),setAccordionExpanded(!1)}catch(g){console.error("Error saving data:",g)}},E=[{field:"vendorName",headerName:"Vendor",flex:2},{field:"processType",headerName:"Process Type",flex:1},{field:"pcsPerComponent",headerName:" Pcs. Per Component",flex:1},{field:"quantity",headerName:"Quantitity",flex:1},{field:"ratePerPcs",headerName:"Rate Per Pcs.",flex:1},{field:"totalAmount",headerName:"Total Amount",flex:1}];return e.jsxs(ve,{noValidate:!0,component:"form",sx:{display:"flex",flexDirection:"column",m:"auto",width:"Inherit"},children:[e.jsxs(a,{container:!0,spacing:2,width:"Inherit",sx:{paddingY:2,paddingX:2},children:[e.jsxs(a,{item:!0,xs:12,md:3,children:[e.jsx(n,{fullWidth:!0,label:"Select Collection",name:"collectionId",value:f.selectedCollectionId,onChange:z,size:"small",disabled:!0})," "]}),e.jsx(a,{item:!0,xs:12,md:3,children:e.jsx(n,{fullWidth:!0,label:"Select Design",name:"designId",value:f.designId,onChange:z,size:"small",disabled:!0})}),e.jsxs(a,{item:!0,xs:12,md:3,children:[e.jsx(n,{fullWidth:!0,label:"Batch No.",name:"batchNo",value:f.batchNo,onChange:z,size:"small",disabled:!0})," "]}),e.jsxs(a,{item:!0,xs:12,md:3,children:[e.jsx(n,{fullWidth:!0,label:"Components",name:"componentName",value:f.componentName,onChange:z,size:"small",disabled:!0})," "]}),e.jsx(a,{item:!0,xs:12,md:3,children:e.jsx(n,{fullWidth:!0,label:"Select Fabric",defaultValue:"",size:"small",name:"fabricName",value:f.fabricName,onChange:z,disabled:!0})}),e.jsx(a,{item:!0,xs:12,md:3,children:e.jsx(n,{fullWidth:!0,label:"Color",size:"small",name:"colorName",value:f.colorName,onChange:z,disabled:!0})}),e.jsx(a,{item:!0,xs:12,md:3,children:e.jsx(n,{fullWidth:!0,label:"Process Type",defaultValue:"",size:"small",name:"processTypeName",value:f.processTypeName,onChange:z,disabled:!0})}),e.jsx(a,{item:!0,xs:12,md:1.5,children:e.jsx(n,{label:"Pcs. Per Component",fullWidth:!0,size:"small",name:"pcsPerComponent",value:f.pcsPerComponent,onChange:z,disabled:!0})}),e.jsx(a,{item:!0,xs:12,md:1.5,children:e.jsx(n,{label:"Remaining Pcs. Per Component",fullWidth:!0,size:"small",name:"remainingPcsPerComponent",value:f.remainingPcsPerComponent,onChange:z,disabled:!0})})]}),e.jsx(me,{color:"#921e22",sx:{height:2,width:"100%"}}),e.jsxs(a,{container:!0,spacing:2,width:"Inherit",sx:{paddingY:2,paddingX:2},children:[e.jsx(a,{item:!0,xs:12,md:3,children:e.jsx(n,{fullWidth:!0,select:!0,label:"Vendors",size:"small",name:"vendorId",value:f.vendorId,onChange:z,children:B.map(g=>e.jsx(P,{value:g.lookUpId,children:g.lookUpName},g.lookUpId))})}),e.jsx(a,{item:!0,xs:12,md:3,children:e.jsx(n,{label:"Quantity",fullWidth:!0,type:"number",size:"small",name:"quantity",value:f.quantity,onChange:z})}),e.jsx(a,{item:!0,xs:12,md:3,children:e.jsx(n,{label:"Rate Per Pcs",type:"number",fullWidth:!0,size:"small",name:"ratePerPcs",value:f.ratePerPcs,onChange:z})}),e.jsx(a,{item:!0,xs:12,md:3,children:e.jsx(n,{label:"Total Amount",fullWidth:!0,type:"number",size:"small",name:"totalAmount",value:f.totalAmount,onChange:z})}),e.jsx(a,{item:!0,xs:12,md:3,children:e.jsx(n,{label:"UOM",fullWidth:!0,size:"small",name:"uom",value:f.uom,onChange:z,disabled:!0})}),e.jsx(a,{item:!0,xs:12,textAlign:"right",sx:{mt:2},children:e.jsx(D,{variant:"contained",size:"small",onClick:Y,children:"Save"})})]}),e.jsx(a,{container:!0,spacing:2,width:"Inherit",sx:{paddingY:2,paddingX:2},children:e.jsx(a,{sx:{marginTop:2},item:!0,xs:12,children:e.jsx(Pe,{iColumns:E,initialRows:m,deleteApi:"https://gecxc.com:4041/api/AdditionalProcess/DeleteAdditionalProcessDetails?apdId=",deleteBy:"additionalProcessDetId",refetch:H,disableEdit:!0})})})]})},Ht=()=>{const{user:p}=Se(),[t,u]=o.useState([]),[s,i]=o.useState({additionalProcessId:0,designId:"",planningHeaderId:0,batchNo:"",componentId:"",colorId:"",fabricId:"",uomId:"",baseColorName:"",poPcs:"",pcsPerComponent:"",processTypeId:"",createdOn:new Date().toISOString(),createdBy:p.empId,lastUpdatedOn:new Date().toISOString(),LastUpdatedBy:p.empId});console.log("initialData",t),o.useEffect(()=>{i({additionalProcessId:(t==null?void 0:t.additionalProcessId)||0,designId:(t==null?void 0:t.designId)||"",planningHeaderId:(t==null?void 0:t.planningHeaderId)||0,batchNo:(t==null?void 0:t.batchNo)||"",componentId:(t==null?void 0:t.componentId)||"",fabricId:(t==null?void 0:t.fabricId)||"",colorId:(t==null?void 0:t.colorId)||"",poPcs:(t==null?void 0:t.poPcs)||"",baseColorName:(t==null?void 0:t.baseColorName)||"",pcsPerComponent:(t==null?void 0:t.pcsPerComponent)||"",uomId:(t==null?void 0:t.uomId)||"",processTypeId:(t==null?void 0:t.processTypeId)||"",createdOn:(t==null?void 0:t.createdOn)||new Date().toISOString(),createdBy:(t==null?void 0:t.createdBy)||p.empId,lastUpdatedOn:new Date().toISOString(),LastUpdatedBy:p.empId})},[t]);const[m,W]=o.useState(!1),d=(c,r)=>{W(!m)},{data:f}=Ae(),[G,X]=o.useState(""),{data:b}=ye(),{data:H,refetch:B}=ke(G,{skip:!G}),{data:q,refetch:z}=Re(s.designId,{skip:!s.designId}),{data:Y}=qe({batchNo:s.planningHeaderId,componentId:s.componentId},{skip:!s.planningHeaderId||!s.componentId}),{data:E}=Ee({batchNo:s.planningHeaderId,componentId:s.componentId,fabricId:s.fabricId},{skip:!s.planningHeaderId||!s.componentId||!s.fabricId}),{data:Z,refetch:g}=nt(s.planningHeaderId,{skip:!s.planningHeaderId}),{data:T}=Me(s.planningHeaderId,{skip:!s.planningHeaderId});console.log("lookupData",b),console.log("collectionData",f),console.log("colorData",E);const[C,R]=o.useState([]),[V,_]=o.useState([]),[S,Q]=o.useState([]),[te,oe]=o.useState([]),[se,ie]=o.useState([]),[he,ce]=o.useState([]),[fe,pe]=o.useState([]),[ne,le]=o.useState([]),[ae,L]=o.useState([]),[k,M]=o.useState([]),[Ie,ge]=o.useState([]);console.log("batchData",q),o.useEffect(()=>{H&&R(H.result)},[H]),o.useEffect(()=>{q&&_(q.result)},[q]),o.useEffect(()=>{Y&&Q(Y.result)},[Y]),o.useEffect(()=>{E&&L(E.result)},[E]),o.useEffect(()=>{T&&ge(T.result)},[T]),o.useEffect(()=>{if(b){const c=b.result[0];ie(c.uomList),ce(c.processList)}},[b]),o.useEffect(()=>{Z&&M(Z.result.map((c,r)=>({id:r,...c})))},[Z,g]),o.useEffect(()=>{if(b){const c=b.result[0];oe(c.vendorList),pe(c.operatingMachineList),le(c.workingHeadList)}},[b]),console.log("initialRows",k);const ue=(f==null?void 0:f.result)||[],O=c=>{const{name:r,value:h}=c.target;if(r==="collectionId")ue.find(y=>y.collectionId===parseInt(h)),X(h),i({...s,collectionId:h});else if(r==="designId"){const y=C.find(U=>U.designId===parseInt(h));i({...s,designId:h,baseColorId:y?y.colorId:"",baseColorName:y?y.colorName:""})}else if(r==="batchNo"){const y=V.find(U=>U.batchNo===h);i({...s,batchNo:h,planningHeaderId:y?y.planningHeaderId:"",poPcs:y?y.poPcs:""}),W(!0)}else i({...s,[r]:h})};console.log("colors",ae);const I=async()=>{console.log("formData",s);try{const c=await de.post("https://gecxc.com:4041/api/AdditionalProcess/SaveAdditionalProcess",s);console.log("Save response:",c.data),i(r=>({additionalProcessId:0,designId:r.designId,planningHeaderId:r.planningHeaderId,batchNo:r.batchNo,baseColorName:r.baseColorName,poPcs:r.poPcs,componentId:"",colorId:"",fabricId:"",uomId:"",pcsPerComponent:"",processTypeId:"",createdOn:new Date().toISOString(),createdBy:p.empId,lastUpdatedOn:new Date().toISOString(),LastUpdatedBy:p.empId})),g()}catch(c){console.error("Error saving data:",c)}};console.log("formData",s),o.forwardRef(function(r,h){return e.jsx(lt,{direction:"up",ref:h,...r})});const[x,N]=o.useState({}),[F,w]=o.useState(!1),ee=c=>{N(c),w(!0)},l=()=>{w(!1),N({}),g()},j=[{field:"designNo",headerName:"Design"},{field:"batchNo",headerName:"Batch"},{field:"componentName",headerName:"Component"},{field:"fabricName",headerName:"Fabric"},{field:"colorName",headerName:"Color"},{field:"processTypeName",headerName:"Process Type"},{field:"pcsPerComponent",headerName:"Pcs Per Component"},{field:"assignedQty",headerName:"Assigned Quantity"},{field:"AddVendor",headerName:"Add Vendor",renderCell:c=>e.jsx("div",{style:{display:"flex",justifyContent:"space-around"},children:e.jsx(Ce,{color:"primary",onClick:()=>ee(c.row),children:e.jsx(It,{})})})}];return e.jsxs(e.Fragment,{children:[e.jsxs(K,{variant:"outlined",children:[e.jsx($,{className:"css-4rfrnx-MuiCardHeader-root",avatar:e.jsx(Le,{src:Ve,sx:{background:"transparent"}}),title:"Additional Process ",titleTypographyProps:{style:{color:"white"}}}),e.jsxs(a,{container:!0,spacing:2,width:"Inherit",sx:{paddingY:2,paddingX:2},children:[e.jsxs(a,{item:!0,xs:12,md:3,children:[e.jsx(n,{fullWidth:!0,select:!0,label:"Select Collection",name:"collectionId",value:G,onChange:O,size:"small",children:ue.map(c=>e.jsx(P,{value:c.collectionId,children:c.collectionName},c.collectionId))})," "]}),e.jsx(a,{item:!0,xs:12,md:3,children:e.jsx(n,{fullWidth:!0,select:!0,label:"Select Design",name:"designId",value:s.designId,onChange:O,size:"small",children:C.map(c=>e.jsx(P,{value:c.designId,children:c.designNo},c.designId))})}),e.jsxs(a,{item:!0,xs:12,md:3,children:[e.jsx(n,{fullWidth:!0,select:!0,label:"Batch No.",name:"batchNo",value:s.batchNo,onChange:O,size:"small",children:V.map(c=>e.jsx(P,{value:c.batchNo,children:c.batchNo},c.batchNo))})," "]}),e.jsxs(a,{item:!0,xs:12,md:3,children:[e.jsx(n,{fullWidth:!0,select:!0,label:"Components",name:"componentId",value:s.componentId,onChange:O,size:"small",children:Ie.map(c=>e.jsx(P,{value:c.componentId,children:c.componentName},c.componentId))})," "]}),e.jsx(a,{item:!0,xs:12,md:3,children:e.jsx(n,{label:"Base Color",fullWidth:!0,size:"small",name:"baseColorName",value:s.baseColorName,onChange:O,disabled:!0})})]})]}),e.jsx(me,{color:"#cc8587",sx:{height:1,width:"100%",mt:2}}),e.jsxs(K,{variant:"outlined",children:[e.jsx($,{className:"css-4rfrnx-MuiCardHeader-root",avatar:e.jsx(Oe,{}),title:"Add Additional Process ",titleTypographyProps:{style:{color:"white"}},action:e.jsx(Ce,{onClick:d,sx:{mt:"-18px"},children:e.jsx(xe,{style:{color:"white"}})}),sx:{display:"flex",alignItems:"center",justifyContent:"space-between"}})," ",e.jsxs(Te,{expanded:m,onChange:d,sx:{},children:[e.jsx(we,{expandIcon:e.jsx(xe,{}),"aria-controls":"panel1-content",id:"panel1-header",sx:{display:"none"}}),e.jsx(ze,{children:e.jsxs(a,{container:!0,spacing:2,width:"Inherit",sx:{paddingY:2,paddingX:2},children:[e.jsx(a,{item:!0,xs:12,md:3,children:e.jsx(n,{fullWidth:!0,select:!0,label:"Select Fabric",defaultValue:"",size:"small",name:"fabricId",value:s.fabricId,onChange:O,children:S.map(c=>e.jsx(P,{value:c.fabricId,children:c.fabric},c.fabricId))})}),e.jsx(a,{item:!0,xs:12,md:3,children:e.jsx(n,{fullWidth:!0,select:!0,label:"Color",size:"small",name:"colorId",value:s.colorId,onChange:O,children:ae.map(c=>e.jsx(P,{value:c.colorId,children:c.color},c.colorId))})}),e.jsx(a,{item:!0,xs:12,md:1.5,children:e.jsx(n,{label:"Po Pcs",fullWidth:!0,size:"small",name:"poPcs",value:s.poPcs,onChange:O,disabled:!0})}),e.jsx(a,{item:!0,xs:12,md:1.5,children:e.jsx(n,{label:"Pcs. Per Component",fullWidth:!0,size:"small",name:"pcsPerComponent",value:s.pcsPerComponent,onChange:O})}),e.jsx(a,{item:!0,xs:12,md:3,children:e.jsx(n,{fullWidth:!0,select:!0,label:"UOM",type:"number",defaultValue:140,size:"small",name:"uomId",value:s.uomId,onChange:O,children:se.map(c=>e.jsx(P,{value:c.lookUpId,children:c.lookUpName},c.lookUpId))})}),e.jsx(a,{item:!0,xs:12,md:3,children:e.jsx(n,{fullWidth:!0,select:!0,label:"Process Type",size:"small",name:"processTypeId",value:s.processTypeId,onChange:O,children:he.map(c=>e.jsx(P,{value:c.lookUpId,children:c.lookUpName},c.lookUpId))})}),e.jsx(a,{item:!0,xs:12,textAlign:"right",sx:{mt:2},children:e.jsx(D,{variant:"contained",size:"small",onClick:I,children:"Save"})})]})})]})]}),e.jsx(me,{color:"#cc8587",sx:{height:1,width:"100%",mt:2}}),e.jsxs(K,{variant:"outlined",children:[e.jsx($,{className:"css-4rfrnx-MuiCardHeader-root",avatar:e.jsx(Fe,{}),title:"View Additional Process ",titleTypographyProps:{style:{color:"white"}}}),e.jsx(a,{container:!0,spacing:2,width:"Inherit",sx:{paddingY:2,paddingX:2},children:e.jsxs(a,{sx:{marginTop:2},item:!0,xs:12,children:[e.jsx(Pe,{iColumns:j,initialRows:k,setInitialData:u,deleteApi:"https://gecxc.com:4041/api/AdditionalProcess/DeleteAdditionalProcess?adId=",deleteBy:"additionalProcessId",refetch:g,setAccordionExpanded:W,fileName:"AdditionalProcess"}),e.jsxs(mt,{open:F,onClose:l,fullWidth:!0,maxWidth:"lg",children:[e.jsxs(ht,{sx:{backgroundColor:"#A11F23",color:"#ffffff",display:"flex",justifyContent:"space-between",alignItems:"center",paddingX:"24px",paddingY:"4px"},children:[e.jsx(je,{variant:"h4",component:"div",color:"#ffffff",gutterBottom:!0,fontSize:20,fontWeight:2,fontStyle:"normal",children:"Assign Vendors "}),e.jsx(Ce,{onClick:l,sx:{color:"#ffffff"},children:e.jsx(ft,{})})]}),e.jsxs(pt,{children:[e.jsx(gt,{id:"alert-dialog-slide-description"}),e.jsx(Ft,{additionalProcessData:x,setAdditionalProcessData:N,refetchAdditionalProcessList:g,handleClickOpen:ee})]})]})]})})]})]})},Ut=Ht;function Rt({}){const{data:p}=ye(),[t,u]=o.useState([]),[s,i]=o.useState([]),[m,W]=o.useState([]),[d,f]=o.useState([]),[G,X]=o.useState([]);Se(),o.useEffect(()=>{p&&(W(p.result[0].vendorList),i(p.result[0].serviceList),u(p.result[0].serviceTypeList),X(p.result[0].uomList))},[p]);const[b,H]=o.useState({additionalServiceId:0,collectionId:"",serviceTypeId:"",serviceListId:"",vendorId:"",poPcs:"",qty:"",uomId:"string",rate:"",totalAmount:"",costperPiece:"",uom:"",createdBy:0,createdOn:new Date().toISOString()}),B=async g=>{const{name:T,value:C}=g.target;if(console.log(`Updating ${T} to ${C}`),H({...b,[T]:C}),T==="collectionId"){const R=d.find(V=>V.collectionId===C);R&&H(V=>({...V,poPcs:R.poPcs}))}};o.useEffect(()=>{const g=()=>{const C=parseFloat(b.qty)||0,R=parseFloat(b.rate)||0;return(C*R).toFixed(2)};H(C=>({...C,totalAmount:g()}));const T=()=>{const C=parseFloat(b.poPcs)||0,R=parseFloat(b.totalAmount)||0;return(C/R).toFixed(2)};H(C=>({...C,costperPiece:T()}))},[b.qty,b.rate,b.totalAmount,b.costperPiece]);const q=async()=>{try{const g=await de.post("https://gecxc.com:4041/api/AdditionalServices/SaveAdditionalServices",b);console.log("Form data saved:",g.data),H({additionalServiceId:0,collectionId:"",serviceTypeId:"",serviceListId:"",vendorId:"",poPcs:"",qty:"",uomId:"string",rate:"",totalAmount:"",costperPiece:""}),onSaveSuccess&&onSaveSuccess()}catch(g){console.error("Error saving data:",g)}};o.useEffect(()=>{(async()=>{try{const T=await de.get("https://gecxc.com:4041/api/CollectionRegistration/GetCollectionList?appId=1");console.log("GetCollectionFromPlanningHeader",T),f(T.data.result)}catch(T){console.error("Error fetching design options:",T)}})()},[]);const[z,Y]=o.useState([]),E=o.useCallback(async()=>{try{const g=await de.get(`https://gecxc.com:4041/api/AdditionalServices/GetAdditionalServicesListByCollectionId?collectionId=${b.collectionId}`);Array.isArray(g.data.result)?Y(g.data.result.map((T,C)=>({id:C,...T}))):(console.error("API returned unexpected data format:",g.data.result),Y([]))}catch(g){console.error("Error fetching data:",g),Y([])}},[b.collectionId]);o.useEffect(()=>{E()},[E]);const Z=[{field:"collectionName",headerName:"Collection Name",flex:1},{field:"serviceType",headerName:"Service Type",flex:1},{field:"serviceListName",headerName:"Service List Name",flex:1},{field:"vendor",headerName:"Vendor",flex:1},{field:"poPcs",headerName:"PO Pieces"},{field:"qty",headerName:"Quantity"},{field:"uom",headerName:"UOM"},{field:"rate",headerName:"Rate"},{field:"totalAmount",headerName:"Total Amount"},{field:"costperPiece",headerName:"Cost per Piece"}];return e.jsxs(e.Fragment,{children:[e.jsxs(K,{variant:"outlined",children:[e.jsx($,{className:"css-4rfrnx-MuiCardHeader-root",title:"Additional Services",titleTypographyProps:{style:{color:"white"}}}),e.jsxs(a,{container:!0,spacing:2,width:"Inherit",sx:{paddingY:2,paddingX:2},children:[e.jsx(a,{item:!0,xs:12,md:4,children:e.jsx(n,{fullWidth:!0,select:!0,label:"Select Collection",name:"collectionId",value:b.collectionId,onChange:B,size:"small",children:d.length>0?d.map(g=>e.jsx(P,{id:"collectionId",value:g.collectionId,children:g.collectionName},g.collectionId)):e.jsx(P,{disabled:!0,children:"No Collections Available"})})}),e.jsx(a,{item:!0,md:4,width:"inherit",paddingX:1,children:e.jsx(n,{id:"outlined-select-option",select:!0,label:"Service Type",name:"serviceTypeId",value:b.serviceTypeId,onChange:B,variant:"outlined",size:"small",fullWidth:!0,children:t.map(g=>e.jsx(P,{value:g.lookUpId,children:g.lookUpName},g.lookUpId))})}),e.jsx(a,{item:!0,md:4,width:"inherit",paddingX:1,children:e.jsx(n,{id:"outlined-select-option",select:!0,label:"Service List Id",name:"serviceListId",value:b.serviceListId,onChange:B,variant:"outlined",size:"small",fullWidth:!0,children:s.map(g=>e.jsx(P,{value:g.lookUpId,children:g.lookUpName},g.lookUpId))})}),e.jsx(a,{item:!0,xs:12,md:4,children:e.jsx(n,{fullWidth:!0,select:!0,label:"Vendor Name",size:"small",name:"vendorId",value:b.vendorId,onChange:B,children:m.map(g=>e.jsx(P,{value:g.lookUpId,children:g.lookUpName},g.lookUpId))})}),e.jsx(a,{item:!0,md:2,width:"inherit",paddingX:1,children:e.jsx(n,{id:"outlined-required",label:"PO PC's",name:"poPcs",value:b.poPcs,onChange:B,type:"number",size:"small",fullWidth:!0,disabled:!0})}),e.jsx(a,{item:!0,md:2,width:"inherit",paddingX:1,children:e.jsx(n,{id:"outlined-required",label:"Qty",name:"qty",value:b.qty,onChange:B,type:"number",size:"small",required:!0,fullWidth:!0})}),e.jsx(a,{item:!0,md:2,width:"inherit",paddingX:1,children:e.jsx(n,{fullWidth:!0,select:!0,label:"UOM",defaultValue:"",size:"small",name:"uomId",value:b.uomId,onChange:B,children:G.map(g=>e.jsx(P,{value:g.lookUpId,children:g.lookUpName},g.lookUpId))})}),e.jsx(a,{item:!0,md:2,width:"inherit",paddingX:1,children:e.jsx(n,{id:"outlined-required",label:"Rate",name:"rate",value:b.rate,onChange:B,type:"number",size:"small",fullWidth:!0,required:!0})}),e.jsx(a,{item:!0,md:2,width:"inherit",paddingX:1,children:e.jsx(n,{id:"outlined-required",label:"Total Amount",name:"totalAmount",value:b.totalAmount,onChange:B,type:"number",size:"small",fullWidth:!0,required:!0})}),e.jsx(a,{item:!0,md:2,width:"inherit",paddingX:1,children:e.jsx(n,{id:"outlined-required",label:"Cost per Piece",name:"costperPiece",value:b.costperPiece,onChange:B,type:"number",size:"small",required:!0,fullWidth:!0})}),e.jsx(a,{item:!0,md:12,width:"inherit",paddingX:1,textAlign:"right",children:e.jsx(D,{variant:"contained",color:"primary",size:"small",onClick:q,children:"Save"})})]})]}),e.jsx(me,{color:"#cc8587",sx:{height:1,width:"100%",mt:2}}),e.jsxs(K,{variant:"outlined",children:[e.jsx($,{className:"css-4rfrnx-MuiCardHeader-root",title:"View Additional Services",titleTypographyProps:{style:{color:"white"}}}),e.jsx(Pe,{iColumns:Z,initialRows:z})]})]})}const He=["Pre Planning","Fabrication","Dyeing/Printing  ","Embroidery ","Schiffli","Additional Process","Additional Services"];function Zt(){const[p,t]=o.useState(0),[u,s]=o.useState(new Set),[i,m]=o.useState(null),[W,d]=o.useState([]),{enqueueSnackbar:f}=Ne(),{data:G,refetch:X}=ye(),b=S=>{m(S.currentTarget)},H=()=>{m(null)},B=!!i,q=B?"simple-popover":void 0,z=S=>S===1,Y=S=>u.has(S),E=()=>{let S=u;Y(p)&&(S=new Set(S.values()),S.delete(p)),t(Q=>Q+1),s(S)},Z=()=>{t(S=>S-1)},g=()=>{if(!z(p))throw new Error("You can't skip a step that isn't optional.");t(S=>S+1),s(S=>{const Q=new Set(S.values());return Q.add(p),Q})},T=()=>{t(0)},[C,R]=o.useState({lookUpId:"",lookUpName:"",lookUpDomain:"",lookUpCategory:"",enabled:"",createdOn:new Date().toISOString()}),V=async()=>{if(!C.lookUpDomain||!C.lookUpName){f("Please fill in all required fields.",{variant:"error",autoHideDuration:5e3});return}try{const S=await de.get(`https://gecxc.com:4041/api/Common/SaveLookUp?lookupDomain=${C.lookUpDomain}&LookUpName=${C.lookUpName}&appId=1`);return console.log("Form data saved:",S.data),f("Lookup saved successfully!",{variant:"success",autoHideDuration:5e3}),R({lookUpId:"",lookUpName:"",lookUpDomain:"",lookUpCategory:"",enabled:"",createdOn:new Date().toISOString()}),X(),S.data}catch(S){throw console.error("Error saving data:",S),f("Error saving data. Please try again.",{variant:"error",autoHideDuration:5e3}),S}},_=S=>{R({...C,[S.target.name]:S.target.value})};return o.useEffect(()=>{(async()=>{try{const Q=await de.get("https://gecxc.com:4041/api/Common/GetLookUpDomains?appId=1");console.log("LookupData",Q),d(Q.data.result)}catch(Q){console.error("Error fetching design options:",Q)}})()},[]),e.jsxs(ve,{sx:{width:"100%"},children:[e.jsxs(a,{container:!0,spacing:1,width:"Inherit",children:[e.jsx(a,{item:!0,sm:6,children:e.jsx(je,{variant:"h2",gutterBottom:!0,children:"Planning Process"})}),e.jsxs(a,{item:!0,sm:6,textAlign:"right",children:[e.jsx(D,{"aria-describedby":q,variant:"outlined",size:"small",onClick:b,children:"+Lookup"}),e.jsx(xt,{id:"mouse-over-popover",open:B,anchorEl:i,onClose:H,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"right"},sx:{".MuiPopover-paper":{width:"300px",padding:"16px"}},children:e.jsxs(a,{container:!0,spacing:3,width:"Inherit",children:[e.jsx(a,{item:!0,sm:12,children:e.jsx(n,{fullWidth:!0,id:"outlined-select-currency",select:!0,label:"Select Lookup",size:"small",value:C.lookUpDomain,name:"lookUpDomain",onChange:_,children:W.map(S=>e.jsx(P,{value:S.lookUpDomain,children:S.lookUpDomain},S.lookUpDomain))})}),e.jsx(a,{item:!0,sm:12,children:e.jsx(n,{fullWidth:!0,label:"Add Lookup Description",value:C.lookUpName,onChange:_,name:"lookUpName",size:"small"})}),e.jsx(a,{item:!0,sm:3,textAlign:"right",children:e.jsx(D,{variant:"contained",size:"small",onClick:V,children:"Save"})})]})})]})]}),e.jsx(dt,{activeStep:p,children:He.map((S,Q)=>{const te={},oe={};return z(Q)&&(oe.optional=e.jsx(je,{variant:"caption",children:"Optional"})),Y(Q)&&(te.completed=!1),e.jsx(it,{...te,children:e.jsxs(ct,{...oe,onClick:()=>t(Q),style:{cursor:"pointer"},children:[" ",S]})},S)})}),e.jsxs(ve,{sx:{display:"flex",flexDirection:"row",pt:2},children:[e.jsx(D,{color:"inherit",disabled:p===0,onClick:Z,sx:{mr:1},children:"Back"}),e.jsx(ve,{sx:{flex:"1 1 auto"}}),z(p)&&e.jsx(D,{color:"inherit",onClick:g,sx:{mr:1},children:"Skip"}),e.jsx(D,{onClick:E,children:p===He.length-1?"Finish":"Next"})]}),p===He.length?e.jsxs(o.Fragment,{children:[e.jsx(je,{sx:{mt:2,mb:1},children:"All steps completed - you're finished"}),e.jsxs(ve,{sx:{display:"flex",flexDirection:"row",pt:2},children:[e.jsx(ve,{sx:{flex:"1 1 auto"}}),e.jsx(D,{onClick:T,children:"Reset"})]})]}):e.jsxs(o.Fragment,{children:[p===0&&e.jsx(At,{}),p===1&&e.jsx(ut,{}),p===2&&e.jsx(Tt,{}),p===3&&e.jsx(Pt,{}),p===4&&e.jsx(zt,{}),p===5&&e.jsx(Ut,{}),p===6&&e.jsx(Rt,{}),e.jsxs(ve,{sx:{display:"flex",flexDirection:"row",pt:2},children:[e.jsx(D,{color:"inherit",disabled:p===0,onClick:Z,sx:{mr:1},children:"Back"}),e.jsx(ve,{sx:{flex:"1 1 auto"}}),z(p)&&e.jsx(D,{color:"inherit",onClick:g,sx:{mr:1},children:"Skip"}),e.jsx(D,{onClick:E,children:p===He.length-1?"Finish":"Next"})]})]})]})}export{Zt as default};
