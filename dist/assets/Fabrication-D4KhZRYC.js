import{o as E,p as z,s as j,aq as Re,z as D,A as H,at as Te,_ as m,au as we,av as ke,j as o,H as F,I as W,q as Ge,aw as ge,ax as Ue,P as ve,r as he,i as Ie,u as Be,c as Fe,a7 as Oe,b as qe,a8 as Ee,a9 as ze,ah as De,ay as He,C as oe,d as ae,ae as We,G as S,D as $e,af as Ye}from"./index-KHXveQAW.js";import{r as l}from"./vendor-BXCbSo2_.js";import{I as Ve,B as _e,a as Je}from"./axios-B9NCLk-l.js";import{d as Qe,R as Xe}from"./ReuseableDataGrid-CFdmB6Vn.js";import{T as w}from"./TextField-BZp6YcmY.js";import{M as Y}from"./Skeleton-BiWCxejt.js";const Ce=l.createContext({});function Ke(e){return z("MuiAccordion",e)}const J=E("MuiAccordion",["root","rounded","expanded","disabled","gutters","region"]),Ze=["children","className","defaultExpanded","disabled","disableGutters","expanded","onChange","square","slots","slotProps","TransitionComponent","TransitionProps"],et=e=>{const{classes:t,square:n,expanded:i,disabled:c,disableGutters:s}=e;return W({root:["root",!n&&"rounded",i&&"expanded",c&&"disabled",!s&&"gutters"],region:["region"]},Ke,t)},tt=j(Re,{name:"MuiAccordion",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{[`& .${J.region}`]:t.region},t.root,!n.square&&t.rounded,!n.disableGutters&&t.gutters]}})(({theme:e})=>{const t={duration:e.transitions.duration.shortest};return{position:"relative",transition:e.transitions.create(["margin"],t),overflowAnchor:"none","&::before":{position:"absolute",left:0,top:-1,right:0,height:1,content:'""',opacity:1,backgroundColor:(e.vars||e).palette.divider,transition:e.transitions.create(["opacity","background-color"],t)},"&:first-of-type":{"&::before":{display:"none"}},[`&.${J.expanded}`]:{"&::before":{opacity:0},"&:first-of-type":{marginTop:0},"&:last-of-type":{marginBottom:0},"& + &":{"&::before":{display:"none"}}},[`&.${J.disabled}`]:{backgroundColor:(e.vars||e).palette.action.disabledBackground}}},({theme:e})=>({variants:[{props:t=>!t.square,style:{borderRadius:0,"&:first-of-type":{borderTopLeftRadius:(e.vars||e).shape.borderRadius,borderTopRightRadius:(e.vars||e).shape.borderRadius},"&:last-of-type":{borderBottomLeftRadius:(e.vars||e).shape.borderRadius,borderBottomRightRadius:(e.vars||e).shape.borderRadius,"@supports (-ms-ime-align: auto)":{borderBottomLeftRadius:0,borderBottomRightRadius:0}}}},{props:t=>!t.disableGutters,style:{[`&.${J.expanded}`]:{margin:"16px 0"}}}]})),ot=l.forwardRef(function(t,n){const i=D({props:t,name:"MuiAccordion"}),{children:c,className:s,defaultExpanded:f=!1,disabled:a=!1,disableGutters:u=!1,expanded:g,onChange:x,square:p=!1,slots:v={},slotProps:k={},TransitionComponent:M,TransitionProps:h}=i,y=H(i,Ze),[I,N]=Te({controlled:g,default:f,name:"Accordion",state:"expanded"}),L=l.useCallback(K=>{N(!I),x&&x(K,!I)},[I,x,N]),[U,...P]=l.Children.toArray(c),O=l.useMemo(()=>({expanded:I,disabled:a,disableGutters:u,toggle:L}),[I,a,u,L]),A=m({},i,{square:p,disabled:a,disableGutters:u,expanded:I}),R=et(A),G=m({transition:M},v),V=m({transition:h},k),[X,_]=we("transition",{elementType:ke,externalForwardedProps:{slots:G,slotProps:V},ownerState:A});return o.jsxs(tt,m({className:F(R.root,s),ref:n,ownerState:A,square:p},y,{children:[o.jsx(Ce.Provider,{value:O,children:U}),o.jsx(X,m({in:I,timeout:"auto"},_,{children:o.jsx("div",{"aria-labelledby":U.props.id,id:U.props["aria-controls"],role:"region",className:R.region,children:P})}))]}))});function at(e){return z("MuiAccordionDetails",e)}E("MuiAccordionDetails",["root"]);const rt=["className"],nt=e=>{const{classes:t}=e;return W({root:["root"]},at,t)},st=j("div",{name:"MuiAccordionDetails",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e})=>({padding:e.spacing(1,2,2)})),it=l.forwardRef(function(t,n){const i=D({props:t,name:"MuiAccordionDetails"}),{className:c}=i,s=H(i,rt),f=i,a=nt(f);return o.jsx(st,m({className:F(a.root,c),ref:n,ownerState:f},s))});function lt(e){return z("MuiAccordionSummary",e)}const $=E("MuiAccordionSummary",["root","expanded","focusVisible","disabled","gutters","contentGutters","content","expandIconWrapper"]),ct=["children","className","expandIcon","focusVisibleClassName","onClick"],dt=e=>{const{classes:t,expanded:n,disabled:i,disableGutters:c}=e;return W({root:["root",n&&"expanded",i&&"disabled",!c&&"gutters"],focusVisible:["focusVisible"],content:["content",n&&"expanded",!c&&"contentGutters"],expandIconWrapper:["expandIconWrapper",n&&"expanded"]},lt,t)},ut=j(Ge,{name:"MuiAccordionSummary",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e})=>{const t={duration:e.transitions.duration.shortest};return{display:"flex",minHeight:48,padding:e.spacing(0,2),transition:e.transitions.create(["min-height","background-color"],t),[`&.${$.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},[`&.${$.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity},[`&:hover:not(.${$.disabled})`]:{cursor:"pointer"},variants:[{props:n=>!n.disableGutters,style:{[`&.${$.expanded}`]:{minHeight:64}}}]}}),pt=j("div",{name:"MuiAccordionSummary",slot:"Content",overridesResolver:(e,t)=>t.content})(({theme:e})=>({display:"flex",flexGrow:1,margin:"12px 0",variants:[{props:t=>!t.disableGutters,style:{transition:e.transitions.create(["margin"],{duration:e.transitions.duration.shortest}),[`&.${$.expanded}`]:{margin:"20px 0"}}}]})),bt=j("div",{name:"MuiAccordionSummary",slot:"ExpandIconWrapper",overridesResolver:(e,t)=>t.expandIconWrapper})(({theme:e})=>({display:"flex",color:(e.vars||e).palette.action.active,transform:"rotate(0deg)",transition:e.transitions.create("transform",{duration:e.transitions.duration.shortest}),[`&.${$.expanded}`]:{transform:"rotate(180deg)"}})),mt=l.forwardRef(function(t,n){const i=D({props:t,name:"MuiAccordionSummary"}),{children:c,className:s,expandIcon:f,focusVisibleClassName:a,onClick:u}=i,g=H(i,ct),{disabled:x=!1,disableGutters:p,expanded:v,toggle:k}=l.useContext(Ce),M=I=>{k&&k(I),u&&u(I)},h=m({},i,{expanded:v,disabled:x,disableGutters:p}),y=dt(h);return o.jsxs(ut,m({focusRipple:!1,disableRipple:!0,disabled:x,component:"div","aria-expanded":v,className:F(y.root,s),focusVisibleClassName:F(y.focusVisible,a),onClick:M,ref:n,ownerState:h},g,{children:[o.jsx(pt,{className:y.content,ownerState:h,children:c}),f&&o.jsx(bt,{className:y.expandIconWrapper,ownerState:h,children:f})]}))}),Q=l.createContext({}),ie=l.createContext({});function ft(e){return z("MuiStep",e)}E("MuiStep",["root","horizontal","vertical","alternativeLabel","completed"]);const xt=["active","children","className","component","completed","disabled","expanded","index","last"],gt=e=>{const{classes:t,orientation:n,alternativeLabel:i,completed:c}=e;return W({root:["root",n,i&&"alternativeLabel",c&&"completed"]},ft,t)},vt=j("div",{name:"MuiStep",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.orientation],n.alternativeLabel&&t.alternativeLabel,n.completed&&t.completed]}})(({ownerState:e})=>m({},e.orientation==="horizontal"&&{paddingLeft:8,paddingRight:8},e.alternativeLabel&&{flex:1,position:"relative"})),so=l.forwardRef(function(t,n){const i=D({props:t,name:"MuiStep"}),{active:c,children:s,className:f,component:a="div",completed:u,disabled:g,expanded:x=!1,index:p,last:v}=i,k=H(i,xt),{activeStep:M,connector:h,alternativeLabel:y,orientation:I,nonLinear:N}=l.useContext(Q);let[L=!1,U=!1,P=!1]=[c,u,g];M===p?L=c!==void 0?c:!0:!N&&M>p?U=u!==void 0?u:!0:!N&&M<p&&(P=g!==void 0?g:!0);const O=l.useMemo(()=>({index:p,last:v,expanded:x,icon:p+1,active:L,completed:U,disabled:P}),[p,v,x,L,U,P]),A=m({},i,{active:L,orientation:I,alternativeLabel:y,completed:U,disabled:P,expanded:x,component:a}),R=gt(A),G=o.jsxs(vt,m({as:a,className:F(R.root,f),ref:n,ownerState:A},k,{children:[h&&y&&p!==0?h:null,s]}));return o.jsx(ie.Provider,{value:O,children:h&&!y&&p!==0?o.jsxs(l.Fragment,{children:[h,G]}):G})}),ht=ge(o.jsx("path",{d:"M12 0a12 12 0 1 0 0 24 12 12 0 0 0 0-24zm-2 17l-5-5 1.4-1.4 3.6 3.6 7.6-7.6L19 8l-9 9z"}),"CheckCircle"),It=ge(o.jsx("path",{d:"M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z"}),"Warning");function Ct(e){return z("MuiStepIcon",e)}const re=E("MuiStepIcon",["root","active","completed","error","text"]);var xe;const St=["active","className","completed","error","icon"],yt=e=>{const{classes:t,active:n,completed:i,error:c}=e;return W({root:["root",n&&"active",i&&"completed",c&&"error"],text:["text"]},Ct,t)},ne=j(Ue,{name:"MuiStepIcon",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e})=>({display:"block",transition:e.transitions.create("color",{duration:e.transitions.duration.shortest}),color:(e.vars||e).palette.text.disabled,[`&.${re.completed}`]:{color:(e.vars||e).palette.primary.main},[`&.${re.active}`]:{color:(e.vars||e).palette.primary.main},[`&.${re.error}`]:{color:(e.vars||e).palette.error.main}})),Lt=j("text",{name:"MuiStepIcon",slot:"Text",overridesResolver:(e,t)=>t.text})(({theme:e})=>({fill:(e.vars||e).palette.primary.contrastText,fontSize:e.typography.caption.fontSize,fontFamily:e.typography.fontFamily})),At=l.forwardRef(function(t,n){const i=D({props:t,name:"MuiStepIcon"}),{active:c=!1,className:s,completed:f=!1,error:a=!1,icon:u}=i,g=H(i,St),x=m({},i,{active:c,completed:f,error:a}),p=yt(x);if(typeof u=="number"||typeof u=="string"){const v=F(s,p.root);return a?o.jsx(ne,m({as:It,className:v,ref:n,ownerState:x},g)):f?o.jsx(ne,m({as:ht,className:v,ref:n,ownerState:x},g)):o.jsxs(ne,m({className:v,ref:n,ownerState:x},g,{children:[xe||(xe=o.jsx("circle",{cx:"12",cy:"12",r:"12"})),o.jsx(Lt,{className:p.text,x:"12",y:"12",textAnchor:"middle",dominantBaseline:"central",ownerState:x,children:u})]}))}return u});function jt(e){return z("MuiStepLabel",e)}const q=E("MuiStepLabel",["root","horizontal","vertical","label","active","completed","error","disabled","iconContainer","alternativeLabel","labelContainer"]),Mt=["children","className","componentsProps","error","icon","optional","slotProps","StepIconComponent","StepIconProps"],Nt=e=>{const{classes:t,orientation:n,active:i,completed:c,error:s,disabled:f,alternativeLabel:a}=e;return W({root:["root",n,s&&"error",f&&"disabled",a&&"alternativeLabel"],label:["label",i&&"active",c&&"completed",s&&"error",f&&"disabled",a&&"alternativeLabel"],iconContainer:["iconContainer",i&&"active",c&&"completed",s&&"error",f&&"disabled",a&&"alternativeLabel"],labelContainer:["labelContainer",a&&"alternativeLabel"]},jt,t)},Pt=j("span",{name:"MuiStepLabel",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.orientation]]}})(({ownerState:e})=>m({display:"flex",alignItems:"center",[`&.${q.alternativeLabel}`]:{flexDirection:"column"},[`&.${q.disabled}`]:{cursor:"default"}},e.orientation==="vertical"&&{textAlign:"left",padding:"8px 0"})),Rt=j("span",{name:"MuiStepLabel",slot:"Label",overridesResolver:(e,t)=>t.label})(({theme:e})=>m({},e.typography.body2,{display:"block",transition:e.transitions.create("color",{duration:e.transitions.duration.shortest}),[`&.${q.active}`]:{color:(e.vars||e).palette.text.primary,fontWeight:500},[`&.${q.completed}`]:{color:(e.vars||e).palette.text.primary,fontWeight:500},[`&.${q.alternativeLabel}`]:{marginTop:16},[`&.${q.error}`]:{color:(e.vars||e).palette.error.main}})),Tt=j("span",{name:"MuiStepLabel",slot:"IconContainer",overridesResolver:(e,t)=>t.iconContainer})(()=>({flexShrink:0,display:"flex",paddingRight:8,[`&.${q.alternativeLabel}`]:{paddingRight:0}})),wt=j("span",{name:"MuiStepLabel",slot:"LabelContainer",overridesResolver:(e,t)=>t.labelContainer})(({theme:e})=>({width:"100%",color:(e.vars||e).palette.text.secondary,[`&.${q.alternativeLabel}`]:{textAlign:"center"}})),kt=l.forwardRef(function(t,n){var i;const c=D({props:t,name:"MuiStepLabel"}),{children:s,className:f,componentsProps:a={},error:u=!1,icon:g,optional:x,slotProps:p={},StepIconComponent:v,StepIconProps:k}=c,M=H(c,Mt),{alternativeLabel:h,orientation:y}=l.useContext(Q),{active:I,disabled:N,completed:L,icon:U}=l.useContext(ie),P=g||U;let O=v;P&&!O&&(O=At);const A=m({},c,{active:I,alternativeLabel:h,completed:L,disabled:N,error:u,orientation:y}),R=Nt(A),G=(i=p.label)!=null?i:a.label;return o.jsxs(Pt,m({className:F(R.root,f),ref:n,ownerState:A},M,{children:[P||O?o.jsx(Tt,{className:R.iconContainer,ownerState:A,children:o.jsx(O,m({completed:L,active:I,error:u,icon:P},k))}):null,o.jsxs(wt,{className:R.labelContainer,ownerState:A,children:[s?o.jsx(Rt,m({ownerState:A},G,{className:F(R.label,G==null?void 0:G.className),children:s})):null,x]})]}))});kt.muiName="StepLabel";function Gt(e){return z("MuiStepConnector",e)}E("MuiStepConnector",["root","horizontal","vertical","alternativeLabel","active","completed","disabled","line","lineHorizontal","lineVertical"]);const Ut=["className"],Bt=e=>{const{classes:t,orientation:n,alternativeLabel:i,active:c,completed:s,disabled:f}=e,a={root:["root",n,i&&"alternativeLabel",c&&"active",s&&"completed",f&&"disabled"],line:["line",`line${ve(n)}`]};return W(a,Gt,t)},Ft=j("div",{name:"MuiStepConnector",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.orientation],n.alternativeLabel&&t.alternativeLabel,n.completed&&t.completed]}})(({ownerState:e})=>m({flex:"1 1 auto"},e.orientation==="vertical"&&{marginLeft:12},e.alternativeLabel&&{position:"absolute",top:12,left:"calc(-50% + 20px)",right:"calc(50% + 20px)"})),Ot=j("span",{name:"MuiStepConnector",slot:"Line",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.line,t[`line${ve(n.orientation)}`]]}})(({ownerState:e,theme:t})=>{const n=t.palette.mode==="light"?t.palette.grey[400]:t.palette.grey[600];return m({display:"block",borderColor:t.vars?t.vars.palette.StepConnector.border:n},e.orientation==="horizontal"&&{borderTopStyle:"solid",borderTopWidth:1},e.orientation==="vertical"&&{borderLeftStyle:"solid",borderLeftWidth:1,minHeight:24})}),qt=l.forwardRef(function(t,n){const i=D({props:t,name:"MuiStepConnector"}),{className:c}=i,s=H(i,Ut),{alternativeLabel:f,orientation:a="horizontal"}=l.useContext(Q),{active:u,disabled:g,completed:x}=l.useContext(ie),p=m({},i,{alternativeLabel:f,orientation:a,active:u,completed:x,disabled:g}),v=Bt(p);return o.jsx(Ft,m({className:F(v.root,c),ref:n,ownerState:p},s,{children:o.jsx(Ot,{className:v.line,ownerState:p})}))});function Et(e){return z("MuiStepper",e)}E("MuiStepper",["root","horizontal","vertical","nonLinear","alternativeLabel"]);const zt=["activeStep","alternativeLabel","children","className","component","connector","nonLinear","orientation"],Dt=e=>{const{orientation:t,nonLinear:n,alternativeLabel:i,classes:c}=e;return W({root:["root",t,n&&"nonLinear",i&&"alternativeLabel"]},Et,c)},Ht=j("div",{name:"MuiStepper",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.orientation],n.alternativeLabel&&t.alternativeLabel,n.nonLinear&&t.nonLinear]}})(({ownerState:e})=>m({display:"flex"},e.orientation==="horizontal"&&{flexDirection:"row",alignItems:"center"},e.orientation==="vertical"&&{flexDirection:"column"},e.alternativeLabel&&{alignItems:"flex-start"})),Wt=o.jsx(qt,{}),io=l.forwardRef(function(t,n){const i=D({props:t,name:"MuiStepper"}),{activeStep:c=0,alternativeLabel:s=!1,children:f,className:a,component:u="div",connector:g=Wt,nonLinear:x=!1,orientation:p="horizontal"}=i,v=H(i,zt),k=m({},i,{nonLinear:x,alternativeLabel:s,orientation:p,component:u}),M=Dt(k),h=l.Children.toArray(f).filter(Boolean),y=h.map((N,L)=>l.cloneElement(N,m({index:L,last:L+1===h.length},N.props))),I=l.useMemo(()=>({activeStep:c,alternativeLabel:s,connector:g,nonLinear:x,orientation:p}),[c,s,g,x,p]);return o.jsx(Q.Provider,{value:I,children:o.jsx(Ht,m({as:u,ownerState:k,className:F(M.root,a),ref:n},v,{children:y}))})});var le={},$t=Ie;Object.defineProperty(le,"__esModule",{value:!0});var Se=le.default=void 0,Yt=$t(he()),Vt=o;Se=le.default=(0,Yt.default)((0,Vt.jsx)("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6z"}),"AddOutlined");var ce={},_t=Ie;Object.defineProperty(ce,"__esModule",{value:!0});var se=ce.default=void 0,Jt=_t(he()),Qt=o;se=ce.default=(0,Jt.default)((0,Qt.jsx)("path",{d:"M16.59 8.59 12 13.17 7.41 8.59 6 10l6 6 6-6z"}),"ExpandMore");const Xt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAACXBIWXMAAAsTAAALEwEAmpwYAAAC1ElEQVR4nO2bsU5UQRSGpxELXGNhI2AMYNRYWeojQFS0E30CBU0IjfEdTDBWGB+AGOwUCjtJjFgYExJFa1/AhYbI+pmT/ZeMu2B2752d2YX5yrs75z/zn7kzd3PPOpfJZDIdAJwFZoFV4BuwTXts6/srwAww4voJYBhYBH4ThhrwCjjneh3gJlBV4jvAEnAHuAgMthljUN+f1niLg+LecL0K8FDVQhUbDRR3DFj2VsOs69HK14BdYK5LGvOKX+uplUD9nm8s+7kua5kJxi/gjOsFgJeNZR9J77X0FmPotXPU7WqjGo2kOS49O2WGY2geiM55Y8lFRJus8SCmbgt6WDGmXUSAe9J9E1O3BeCHEjnvIqLnBGMzpm4LwJYSOeEiYnrS3Yqp20LjWdUdMe09sgHCHTHtnjQAWCMMa4WTOCQG0JcGhCAbILrnWEC6oZ0NEEmrkFI7GyCSViGldjZAJK1CSu1sgEhahZTa2QCRtAoptbMBImkVUmpnA0TSKqTUzgaIpFVIqZ0NEEEcA46ra+RjBw1Szdhb4E/AZOlqlZxPRwPUNPGFsEz2hQHUK9+YvLW7TQGVggkNAI8Va71UshENeORN/lSApCqKVy2VbEQD1nV5KkBCtgKeNK+Ag0xJYUBVYyr7vDL/Z9mXfHPzB5jwYl3V9Y3UBnzXmAv/M6WEATs6RSaaYj3X50/DTL24ASvNLTJK2LgVMjkv/hUZY81Zl1MbMNPcJOU1Tm2G2AT3mfxPxV8IGbuoASNqV7OKjHkb12fPhNvAyZLtMNe07Bt9w++AY0VjBjPAAF5o3LJ3bcgzISRm9kI3Jl/GgCFv45v3rg/oFvngnQxFsLEbtuGFvueDGGBY87LXLL1nQr9R2ABv82u0y1s/77g7SgYYwHV1cqMNy1pa7wKXYvcSJjHAAE4DzwL+ZSY6LgTUfxLfB94CX0tuhDF5H8SATCaTybjDw18JVhz+QhIOiQAAAABJRU5ErkJggg==",Kt=()=>{const{user:e}=Be(),[t,n]=l.useState({}),[i,c]=l.useState(!0),[s,f]=l.useState([]),[a,u]=l.useState({fabricationId:0,designId:"",planningHeaderId:"",batchNo:"",baseColorId:"",baseColorName:"",fabricId:"",poPcs:"",quantity:"",rate:"",uomId:"",total:"",unitPrice:"0",gst:"",totalInclGst:"",createdOn:new Date().toISOString(),createdBy:e.empId,lastUpdatedOn:new Date().toISOString(),lastUpdatedBy:e.empId});l.useEffect(()=>{u({fabricationId:s.fabricationId||0,designId:s.designId||"",planningHeaderId:s.planningHeaderId||"",batchNo:s.batchNo||"",baseColorId:s.baseColorId||"",baseColorName:s.baseColorName||"",fabricId:s.fabricId||"",poPcs:s.poPcs||"",quantity:s.quantity||"",rate:s.rate||"",uomId:s.uomId||"",total:s.total||"",unitPrice:s.unitPrice||"0",gst:s.gst||"",totalInclGst:s.totalInclGst||"",createdOn:(s==null?void 0:s.createdOn)||new Date().toISOString(),createdBy:(s==null?void 0:s.createdBy)||e.empId,lastUpdatedOn:new Date().toISOString(),lastUpdatedBy:e.empId})},[s]);const{enqueueSnackbar:g}=Fe(),[x,p]=l.useState(!1),v=(r,d)=>{p(!x)},[k,M]=l.useState(!1),{data:h}=Oe();console.log(h);const[y,I]=l.useState(""),{data:N}=qe(),{data:L,refetch:U}=Ee(y,{skip:!y}),{data:P,refetch:O}=ze(a.designId,{skip:!a.designId}),{data:A}=De({batchNo:a.planningHeaderId,processType:"PrePlanning"},{skip:!a.planningHeaderId}),{data:R,refetch:G}=He(a.planningHeaderId,{skip:!a.planningHeaderId});console.log("fabricRequisitionData",R);const[V,X]=l.useState([]),[_,K]=l.useState([]),[Z,ye]=l.useState([]),[Le,Ae]=l.useState([]),[ee,te]=l.useState([]);console.log("planningHeaderId",a.planningHeaderId),console.log("Fabrications",Z),l.useEffect(()=>{L&&X(L.result)},[L]),l.useEffect(()=>{P&&K(P.result)},[P]),l.useEffect(()=>{A&&ye(A.result)},[A]),l.useEffect(()=>{R&&(c(!1),te(R.result.map((r,d)=>({id:d,...r}))))},[R,G]),l.useEffect(()=>{if(N){const r=N.result[0];Ae(r.uomList)}},[N]);const de=(h==null?void 0:h.result)||[];l.useEffect(()=>{const r=()=>{const b=parseFloat(a.quantity)||0,B=parseFloat(a.rate)||0;return(b*B).toFixed(2)};u(b=>({...b,total:r()}));const d=()=>{const b=parseFloat(a.total)||0,B=parseFloat(a.gst)||0;return(b*(1+B/100)).toFixed(2)};u(b=>({...b,totalInclGst:d()}));const C=()=>{const b=parseFloat(a.total)||0,B=parseFloat(a.poPcs)||0,fe=(b/B).toFixed(2);return isNaN(fe)?0:fe};u(b=>({...b,unitPrice:C()}))},[a.quantity,a.rate,a.total,a.gst]);const T=r=>{const{name:d,value:C}=r.target;if(d==="collectionId")de.find(b=>b.collectionId===parseInt(C)),I(C),M(!0),te([]),c(!0),u({...a,designId:"",baseColorId:"",planningHeaderId:"",batchNo:"",fabricId:"",poPcs:"",quantity:"",rate:"",uomId:"",total:"",unitPrice:"0",gst:"",totalInclGst:"",collectionId:C});else if(d==="designId"){const b=V.find(B=>B.designId===parseInt(C));te([]),c(!0),u({...a,planningHeaderId:"",batchNo:"",fabricId:"",poPcs:"",quantity:"",rate:"",uomId:"",total:"",unitPrice:"0",gst:"",totalInclGst:"",designId:C,baseColorId:b?b.colorId:"",baseColorName:b?b.colorName:""})}else if(d==="batchNo"){const b=_.find(B=>B.batchNo===C);u({...a,fabricId:"",quantity:"",rate:"",uomId:"",total:"",unitPrice:"0",gst:"",totalInclGst:"",batchNo:C,planningHeaderId:b?b.planningHeaderId:"",poPcs:b?b.poPcs:""}),p(!0),M(!1)}else if(d==="fabricId"){const b=Z.find(B=>B.fabricId===C);u({...a,fabricId:C,uomId:b?b.uomId:"0",quantity:b?b.total:""})}else u({...a,[d]:C}),n(b=>({...b,[d]:""}))},ue=ee.reduce((r,d)=>r+(parseFloat(d.total)||0),0).toFixed(2),pe=parseFloat(ue).toLocaleString(),be=ee.reduce((r,d)=>r+(parseFloat(d.totalInclGst)||0),0).toFixed(2),me=parseFloat(be).toLocaleString();console.log("overallTotal",ue),console.log("overallTotalIncGst",be),console.log("localizedTotal",pe),console.log("localizedTotalIncGst",me);const je=[...ee,{id:"TOTAL_SUMMARY",label:"Total Summary",total:pe,totalInclGst:me}],Me=[{field:"designNo",headerName:"Design",colSpan:(r,d)=>{if(d.id==="TOTAL_SUMMARY")return 6},valueGetter:(r,d)=>d.id==="TOTAL_SUMMARY"?d.label:r,renderCell:r=>o.jsx("div",{style:{color:r.row.id==="TOTAL_SUMMARY"?"black":void 0,fontWeight:r.row.id==="TOTAL_SUMMARY"?"bold":void 0},children:r.value})},{field:"fabricName",headerName:"Fabric"},{field:"poPcs",headerName:"PO. Pieces"},{field:"quantity",headerName:"Quantity"},{field:"rate",headerName:"Rate"},{field:"uomName",headerName:"UOM",renderCell:r=>{const d=r.value==="Meters"?"primary.dark":r.value==="Yards"?theme.palette.grey[900]:r.value==="Inches"?"success.dark":"default";return o.jsx(Ye,{label:r.value,sx:{backgroundColor:d==="primary"||d==="default"?void 0:d,color:d==="primary"||d==="default"?void 0:"white"},color:d==="primary"?"primary":d==="default"?"default":void 0})}},{field:"total",headerName:"Total",valueGetter:r=>r.toLocaleString(),renderCell:r=>o.jsx("div",{style:{color:r.row.id==="TOTAL_SUMMARY"?"#a11f23":void 0,fontWeight:r.row.id==="TOTAL_SUMMARY"?"bold":void 0},children:r.value})},{field:"unitPrice",headerName:"Unit Price"},{field:"gst",headerName:"GST"},{field:"totalInclGst",headerName:"Total Inc. GST",valueGetter:r=>r.toLocaleString(),renderCell:r=>o.jsx("div",{style:{color:r.row.id==="TOTAL_SUMMARY"?"#a11f23":void 0,fontWeight:r.row.id==="TOTAL_SUMMARY"?"bold":void 0},children:r.value}),colSpan:(r,d)=>{if(d.id==="TOTAL_SUMMARY")return 2}}],Ne=async()=>{const r=Pe();if(Object.keys(r).length>0){n(r);return}try{const d=await Je.post("https://gecxc.com:4041/api/Fabrication/SaveFabrication",a);console.log("Save response:",d.data),d.data.success?g("Fabrication saved successfully!",{variant:"success",autoHideDuration:5e3}):(g(`${d.data.message} !`,{variant:"error",autoHideDuration:5e3}),console.log("response.message",d.data.message)),u(C=>({designId:C.designId,batchNo:C.batchNo,planningHeaderId:C.planningHeaderId,fabricationId:0,baseColorId:C.baseColorId,baseColorName:C.baseColorName,fabricId:"",poPcs:C.poPcs,quantity:"",rate:"",uomId:"",total:"",unitPrice:"0",gst:"",totalInclGst:"",createdOn:new Date().toISOString(),createdBy:e.empId,lastUpdatedOn:new Date().toISOString(),lastUpdatedBy:e.empId})),G()}catch(d){console.error("Error saving data:",d),g("Fabrication not saved successfully!",{variant:"error",autoHideDuration:5e3})}},Pe=()=>{const r={};return a.fabricId||(r.fabricId="fabricId is required"),a.gst||(r.gst="gst is required"),a.uomId||(r.uomId="uomId is required"),a.rate||(r.rate="rate is required"),r};return console.log("formData",a),o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"CardHeader",children:o.jsxs(oe,{variant:"outlined",children:[o.jsx(ae,{className:"css-4rfrnx-MuiCardHeader-root",avatar:o.jsx(We,{src:Xt,sx:{background:"transparent"}}),title:"Fabric Requisition",titleTypographyProps:{style:{color:"white"}}}),o.jsxs(S,{container:!0,spacing:1,width:"Inherit",sx:{paddingY:2,paddingX:2},children:[o.jsxs(S,{item:!0,xs:12,md:3,children:[o.jsx(w,{fullWidth:!0,select:!0,label:"Select Collection",name:"collectionId",value:y,onChange:T,size:"small",required:!0,InputLabelProps:{sx:{color:"black"}},children:de.map(r=>o.jsx(Y,{value:r.collectionId,children:r.collectionName},r.collectionId))})," "]}),o.jsx(S,{item:!0,xs:12,md:3,children:o.jsx(w,{fullWidth:!0,select:!0,label:"Select Design",name:"designId",value:a.designId,onChange:T,size:"small",required:!0,InputLabelProps:{sx:{color:"black"}},children:V.map(r=>o.jsx(Y,{value:r.designId,children:r.designNo},r.designId))})}),o.jsxs(S,{item:!0,xs:12,md:3,children:[o.jsx(w,{fullWidth:!0,select:!0,label:"Batch No.",name:"batchNo",value:a.batchNo,onChange:T,size:"small",required:!0,InputLabelProps:{sx:{color:"black"}},children:_.map(r=>o.jsx(Y,{value:r.batchNo,children:r.batchNo},r.batchNo))})," "]}),o.jsx(S,{item:!0,xs:12,md:3,children:o.jsx(w,{label:"Base Color",fullWidth:!0,size:"small",name:"baseColorName",value:a.baseColorName,onChange:T,disabled:!0,sx:r=>({...a.baseColorName!==""&&{".css-4a5t8g-MuiInputBase-input-MuiOutlinedInput-input":{backgroundColor:"#c9c9c9 !important"}},"& .MuiInputBase-input.Mui-disabled":{WebkitTextFillColor:"black"},"& .MuiInputBase-root.Mui-disabled":{backgroundColor:"#f9f9f9"},"& .MuiOutlinedInput-root.Mui-disabled .MuiOutlinedInput-notchedOutline":{borderColor:"gray"},"& .MuiInputLabel-root.Mui-disabled":{color:"rgba(0, 0, 0, 0.87)"}})})})]})]})}),o.jsxs(oe,{variant:"outlined",children:[o.jsx(ae,{className:"css-4rfrnx-MuiCardHeader-root",avatar:o.jsx(Se,{}),title:"Add Fabric Requisition",titleTypographyProps:{style:{color:"white"}},action:o.jsx(Ve,{onClick:v,sx:{mt:"-18px"},children:o.jsx(se,{style:{color:"white"}})}),sx:{display:"flex",alignItems:"center",justifyContent:"space-between"}}),o.jsxs(ot,{expanded:x,onChange:v,sx:{},children:[o.jsx(mt,{expandIcon:o.jsx(se,{}),"aria-controls":"panel1-content",id:"panel1-header",sx:{display:"none"}}),o.jsx(it,{children:o.jsxs(S,{container:!0,spacing:1,width:"Inherit",sx:{paddingY:2,paddingX:2},children:[o.jsx(S,{item:!0,xs:12,md:3,children:o.jsx(w,{fullWidth:!0,select:!0,label:"Select Fabric",defaultValue:"",size:"small",name:"fabricId",value:a.fabricId,onChange:T,required:!0,error:!!t.fabricId,helperText:t.fabricId,InputLabelProps:{sx:{color:"black"}},children:Z.map(r=>o.jsx(Y,{value:r.fabricId,children:r.fabric},r.fabricId))})}),o.jsx(S,{item:!0,xs:12,md:3,children:o.jsx(w,{fullWidth:!0,select:!0,label:"UOM",defaultValue:"",size:"small",name:"uomId",value:a.uomId,onChange:T,required:!0,error:!!t.uomId,helperText:t.uomId,InputLabelProps:{sx:{color:"black"}},children:Le.map(r=>o.jsx(Y,{value:r.lookUpId,children:r.lookUpName},r.lookUpId))})}),o.jsx(S,{item:!0,xs:12,md:1.5,children:o.jsx(w,{label:"Po Pcs",fullWidth:!0,type:"number",size:"small",name:"poPcs",value:a.poPcs,onChange:T,disabled:!0,sx:r=>({...a.poPcs!==""&&{".css-4a5t8g-MuiInputBase-input-MuiOutlinedInput-input":{backgroundColor:"#c9c9c9 !important"}},"& .MuiInputBase-input.Mui-disabled":{WebkitTextFillColor:"black"},"& .MuiInputBase-root.Mui-disabled":{backgroundColor:"#f9f9f9"},"& .MuiOutlinedInput-root.Mui-disabled .MuiOutlinedInput-notchedOutline":{borderColor:"gray"},"& .MuiInputLabel-root.Mui-disabled":{color:"rgba(0, 0, 0, 0.87)"}})})}),o.jsx(S,{item:!0,xs:12,md:1.5,children:o.jsx(w,{label:"Quantity",fullWidth:!0,size:"small",type:"number",name:"quantity",value:a.quantity,onChange:T,InputLabelProps:{sx:{color:"black"}}})}),o.jsx(S,{item:!0,xs:12,md:1.5,children:o.jsx(w,{label:"Rate",fullWidth:!0,size:"small",type:"number",name:"rate",value:a.rate,onChange:T,required:!0,error:!!t.rate,helperText:t.rate,InputLabelProps:{sx:{color:"black"}}})}),o.jsx(S,{item:!0,xs:12,md:1.5,children:o.jsx(w,{label:"Total",fullWidth:!0,size:"small",type:"number",name:"total",value:a.total,onChange:T,InputLabelProps:{sx:{color:"black"}}})}),o.jsx(S,{item:!0,xs:12,md:1.5,children:o.jsx(w,{label:"Unit Price",fullWidth:!0,size:"small",name:"unitPrice",value:a.unitPrice,onChange:T,InputLabelProps:{sx:{color:"black"}}})}),o.jsx(S,{item:!0,xs:12,md:1.5,children:o.jsx(w,{label:"GST",fullWidth:!0,size:"small",type:"number",name:"gst",value:a.gst,onChange:T,required:!0,error:!!t.gst,helperText:t.gst,InputLabelProps:{sx:{color:"black"}}})}),o.jsx(S,{item:!0,xs:12,md:3,children:o.jsx(w,{label:"Total Inc GST.",fullWidth:!0,size:"small",type:"number",name:"totalInclGst",value:a.totalInclGst,onChange:T,InputLabelProps:{sx:{color:"black"}}})}),o.jsx(S,{item:!0,xs:12,textAlign:"right",children:o.jsx(_e,{variant:"contained",size:"small",onClick:Ne,children:"Save"})})]})})]})]}),o.jsx(S,{item:!0,xs:12,md:12,children:o.jsx($e,{sx:{height:1,width:"100%",marginTop:1,marginBottom:0}})}),o.jsxs(oe,{variant:"outlined",children:[o.jsx(ae,{className:"css-4rfrnx-MuiCardHeader-root",avatar:o.jsx(Qe,{}),title:"View",titleTypographyProps:{style:{color:"white"}}}),o.jsx(S,{container:!0,spacing:2,width:"Inherit",sx:{paddingY:2,paddingX:2},children:o.jsx(S,{sx:{marginTop:2},item:!0,xs:12,children:o.jsx(Xe,{iColumns:Me,initialRows:je,setInitialData:f,deleteApi:"https://gecxc.com:4041/api/Fabrication/DeleteFabricByFabricId?fabricationId=",deleteBy:"fabricationId",refetch:G,setAccordionExpanded:p,fileName:"Fabrication Requistion List",isLoading:i})})})]})]})},lo=Kt;export{ot as A,lo as F,io as S,so as a,kt as b,se as c,Se as d,mt as e,it as f};
