import{j as e,_ as at,r as ot,i as st,u as ve,b as Ce,a5 as nt,B as xe,G as t,D as de,S as Ve,c as ke,a6 as lt,T as fe,a7 as Se,a8 as Oe,a9 as Fe,aa as we,ab as We,ac as rt,ad as Re,C as pe,d as me,ae as Te,af as it,ag as dt,ah as ct,ai as ut,aj as pt,ak as mt,al as ht,am as gt}from"./index-D_mF4B5t.js";import{r as o}from"./vendor-BXCbSo2_.js";import{B as re,a as he,I as Me}from"./axios-DMod4shj.js";import{d as Je,c as Be,A as Ze,e as Ke,f as $e,S as bt,a as It,b as xt,F as ft}from"./Fabrication-CX6q5EGy.js";import{R as je,d as Ne,l as ze,D as He,a as Qe,b as qe,c as Ue}from"./ReuseableDataGrid-w8BqS-IT.js";import{d as Ee}from"./Close-Dpiuv4c2.js";import{d as Ge}from"./PersonAddAlt1Outlined-DAtHwuFX.js";import{T as l,P as Ct}from"./TextField-9z7gW76p.js";import{M as L}from"./Skeleton-0kTGRzah.js";import{A as Le,F as De,C as _e}from"./ExcelExport-COFPiD_X.js";import"./dayjs.min-DO4_1a-m.js";let Xe=!1;const yt=o.forwardRef(function(s,a){return Xe||(console.warn(["MUI: The Autocomplete component was moved from the lab to the core.","","You should use `import { Autocomplete } from '@mui/material'`","or `import Autocomplete from '@mui/material/Autocomplete'`"].join(`
`)),Xe=!0),e.jsx(Le,at({ref:a},s))});var Ye={},Pt=st;Object.defineProperty(Ye,"__esModule",{value:!0});var et=Ye.default=void 0,vt=Pt(ot()),jt=e;et=Ye.default=(0,vt.default)((0,jt.jsx)("path",{d:"M21 10h-3L2 3v7l9 2-9 2v7l8-3.5V21c0 1.1.9 2 2 2h9c1.1 0 2-.9 2-2v-9c0-1.1-.9-2-2-2m0 11h-9v-9h9zm-4.5-1L13 16h2v-3h3v3h2z"}),"SendAndArchive");const Mt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAACXBIWXMAAAsTAAALEwEAmpwYAAACk0lEQVR4nO2WzU4UQRSFe14CgoiMKPIqolEiIQq+gEFgFPHnFVyILI3GnQIbxxhG3IkaYxT8iUZFoxuDbokoIaNE/czNnE6KSjdT07Yb40kqqa6qW+dW3XNvdRT9R4MAHgD3640Dh/MkHQTOqMWIv9PGydOBUeCsWoz4O208PwdcxCz1xoGBKG8Abc5JPwBrataP0fY3iLcCk8C6SF4DV4HzatZf1Ny6vrfkRd4PrABV4BywE9huKpc2rA0ARaATGAe+yebgn5IfB34BD0XQCzwlHU+AA1r7CPgJlLKS94n8GtAM3CIcFaAJKGuPviwxX9XJjfxlCtGMyJLwQrbzwNeGNEFNRFVdZdrJb2ttAbizyU10SBNXQslbgR8SnMXcxagEOGyxdmxs3ZDmxjybHmWKZUdriAOnZWhqf+ZtVgyw3+HZPAZ2qX8yxIGbwCudxsdwgH3JszERtqtOVEIc+ARMKbc3xNy79r1a+xHodsYtDec8W6sl01YxQxxYVfzdWM4krDPiGEveXMHLjhMqUGshDlQTHLDNCg06MJvgwJcQB96lhMBSrddZ1y0nloDdXkbc9WwPKQSLIQ7M6rGxGuBjKMB+JEGE24A3tnfUgIo7E+p+1jTsUn8wxIEWFaJxKdrFmBwrJRSiEc2d8mz2AxPas6WuAwbgkspncZNaPyexWbuXsuaGbuQ7cDEKBbVHZEVParMeliRUPLW7eK4XcUF7NQU7YAD26NrKciLtJtJObuTXtce+KAuAI9pgXq9aj0SVhgXFvEN9y4Cjmci9kvtZmpjQw9KuOhH/kvUr1bq0xmK+bLZRHqB2nZd1Gyinp5yfUuu/1ZyRX7CfmlzIXUgLx6SH93o3ltUv6z8hf+LoX8ZvSFCuNiG5hzcAAAAASUVORK5CYII=",kt=({initialFormData:d,setAdditionalProcessData:s,refetchDyeingPrintingData:a,handleClickOpen:m})=>{const{user:i}=ve(),[u,c]=o.useState([]),k=u.reduce((p,f)=>p+(f.assignedQty??0),0).toFixed(2);console.log("Quantity",k);const[h,U]=o.useState({dpIdDet:0,dpId:d.dpId||0,designId:d.designId||"",batchNo:d.batchNo||"",planningHeaderId:d.planningHeaderId||0,fabricId:d.fabricId||"",colorId:d.colorId||"",colorName:d.colorName||"",vendorId:"",processType:d.processType||"",availableQty:d.availableQty||"",remainingQty:d.availableQty-k||"",shrinkage:"",wastage:"",uomId:d.uomId||"",uom:d.uom||"",poPcs:d.poPcs||"",assignedQty:"",rate:"",unitRatePerPo:0,totalExcGst:0,gst:"",TotalIncludingGst:"",createdOn:new Date().toISOString(),createdBy:i.empId,lastUpdatedOn:new Date().toISOString(),LastUpdatedBy:i.empId});o.useEffect(()=>{U({...h,remainingQty:d.availableQty-k||""})},[u]);const{data:w}=Ce(),{data:r,refetch:B}=nt(h.dpId,{skip:!h.dpId}),[H,X]=o.useState([]);o.useEffect(()=>{if(w){const p=w.result[0];X(p.vendorList)}},[w]),o.useEffect(()=>{r&&c(r.result.map((p,f)=>({id:f,...p})))},[r,B]),console.log("initialRows",u);const j=p=>{const{name:f,value:N}=p.target;U({...h,[f]:N})};o.useEffect(()=>{const p=()=>{const ee=parseFloat(h.availableQty)||0,le=parseFloat(h.shrinkage)||0,ue=parseFloat(h.wastage)||0;return(ee*(100-(le+ue))/100).toFixed(2)},f=()=>{const ee=parseFloat(h.assignedQty)||0,le=parseFloat(h.rate)||0;return(ee*le).toFixed(2)},N=(ee,le)=>(ee*(1+le/100)).toFixed(2),W=p(),$=f(),C=parseFloat(h.gst)||0,S=N($,C),J=parseFloat(h.poPcs)||0,ne=J?S/J:0;U(ee=>({...ee,outputQty:W,totalExcGst:$,TotalIncludingGst:S,unitRatePerPo:ne.toFixed(2)}))},[h.availableQty,h.shrinkage,h.wastage,h.rate,h.gst,h.poPcs,h.unitRatePerPo]),console.log("formData",h);const E=async()=>{console.log(h);try{const p=await he.post("https://gecxc.com:4041/api/DyeingPrinting/SaveDyeingPrintingDetails",h);console.log("Save response:",p.data),U(f=>({...f,dpIdDet:0,vendorId:"",availableQty:d.availableQty||"",shrinkage:"",wastage:"",assignedQty:"",rate:"",unitRatePerPo:0,totalExcGst:0,gst:"",TotalIncludingGst:"",createdOn:new Date().toISOString(),createdBy:i.empId,lastUpdatedOn:new Date().toISOString(),LastUpdatedBy:i.empId})),B(),a()}catch(p){console.error("Error saving data:",p)}},Q=[{field:"vendorName",headerName:"Vendor",flex:2},{field:"assignedQty",headerName:"Assigned Quantity",flex:1},{field:"rate",headerName:"Rate",flex:1},{field:"totalExcGst",headerName:"Total Excl Gst.",flex:1},{field:"gst",headerName:"Gst.",flex:1},{field:"totalIncludingGst",headerName:"TotalIncludingGst",flex:1},{field:"unitRatePerPo",headerName:"unitRatePerPo.",flex:1}];return e.jsxs(xe,{noValidate:!0,component:"form",sx:{display:"flex",flexDirection:"column",m:"auto",width:"Inherit"},children:[e.jsxs(t,{container:!0,spacing:1,width:"Inherit",sx:{paddingY:2,paddingX:2},children:[e.jsxs(t,{item:!0,xs:12,md:3,children:[e.jsx(l,{fullWidth:!0,label:"Fabric",name:"fabricName",value:h.fabricName,onChange:j,size:"small",disabled:!0})," "]}),e.jsx(t,{item:!0,xs:12,md:3,children:e.jsx(l,{fullWidth:!0,label:"Process Type",name:"processType",value:h.processType,onChange:j,size:"small",disabled:!0})}),e.jsxs(t,{item:!0,xs:12,md:3,children:[e.jsx(l,{fullWidth:!0,label:"Color",name:"colorName",value:h.colorName,onChange:j,size:"small",disabled:!0})," "]}),e.jsxs(t,{item:!0,xs:12,md:3,children:[e.jsx(l,{fullWidth:!0,label:"UOM",name:"uom",value:h.uom,onChange:j,size:"small",disabled:!0})," "]}),e.jsx(t,{item:!0,xs:12,md:3,children:e.jsx(l,{fullWidth:!0,label:"PO Pcs",size:"small",name:"poPcs",value:h.poPcs,onChange:j,disabled:!0})}),e.jsx(t,{item:!0,xs:12,md:1.5,children:e.jsx(l,{label:"Total AvailableQty",fullWidth:!0,size:"small",name:"availableQty",value:h.availableQty,onChange:j,disabled:!0})}),e.jsx(t,{item:!0,xs:12,md:1.5,children:e.jsx(l,{label:"Remaining Qty",fullWidth:!0,size:"small",name:"remainingQty",value:h.remainingQty,onChange:j,disabled:!0})})]}),e.jsx(de,{color:"#921e22",sx:{height:2,width:"100%"}}),e.jsxs(t,{container:!0,spacing:1,width:"Inherit",sx:{paddingY:2,paddingX:2},children:[e.jsx(t,{item:!0,xs:12,md:3,children:e.jsx(l,{fullWidth:!0,select:!0,label:"Vendors",size:"small",name:"vendorId",value:h.vendorId,onChange:j,children:H.map(p=>e.jsx(L,{value:p.lookUpId,children:p.lookUpName},p.lookUpId))})}),e.jsx(t,{item:!0,xs:12,md:3,children:e.jsx(l,{label:"Assign Quantity",fullWidth:!0,type:"number",size:"small",name:"assignedQty",value:h.assignedQty,onChange:j})}),e.jsx(t,{item:!0,xs:12,md:3,children:e.jsx(l,{label:"Rate Per uom",type:"number",fullWidth:!0,size:"small",name:"rate",value:h.rate,onChange:j})}),e.jsx(t,{item:!0,xs:12,md:3,children:e.jsx(l,{label:"Shrinkage",fullWidth:!0,type:"number",size:"small",name:"shrinkage",value:h.shrinkage,onChange:j})}),e.jsx(t,{item:!0,xs:12,md:3,children:e.jsx(l,{label:"Wastage",fullWidth:!0,type:"number",size:"small",name:"wastage",value:h.wastage,onChange:j})}),e.jsx(t,{item:!0,xs:12,md:3,children:e.jsx(l,{label:"Output Qty",fullWidth:!0,type:"number",size:"small",name:"outputQty",value:h.outputQty,onChange:j})}),e.jsx(t,{item:!0,xs:12,md:3,children:e.jsx(l,{label:"Total Excl. Gst",fullWidth:!0,type:"number",size:"small",name:"totalExcGst",value:h.totalExcGst,onChange:j})}),e.jsx(t,{item:!0,xs:12,md:3,children:e.jsx(l,{label:"GST",fullWidth:!0,size:"small",name:"gst",value:h.gst,onChange:j})}),e.jsx(t,{item:!0,xs:12,md:3,children:e.jsx(l,{label:"Total Including Gst",fullWidth:!0,size:"small",name:"TotalIncludingGst",value:h.TotalIncludingGst,onChange:j})}),e.jsx(t,{item:!0,xs:12,md:3,children:e.jsx(l,{label:"UnitRate Per PO.",fullWidth:!0,size:"small",name:"unitRatePerPo",value:h.unitRatePerPo,onChange:j})}),e.jsx(t,{item:!0,xs:12,textAlign:"right",sx:{mt:2},children:e.jsx(re,{variant:"contained",size:"small",onClick:E,children:"Save"})})]}),e.jsx(t,{container:!0,spacing:2,width:"Inherit",sx:{paddingY:2,paddingX:2},children:e.jsx(t,{sx:{marginTop:2},item:!0,xs:12,children:e.jsx(je,{iColumns:Q,initialRows:u,deleteApi:"https://gecxc.com:4041/api/DyeingPrinting/DeleteDyeingPrintingDetailByDetId?dpIdDet=",deleteBy:"dpIdDet",refetch:B,disableEdit:!0})})})]})},St=({initialFormData:d,setAdditionalProcessData:s,refetchDyeingPrintingData:a,handleClickOpen:m})=>{const i=Ve(),{enqueueSnackbar:u}=ke(),{user:c}=ve(),[k,h]=o.useState([]),U=k.reduce((P,T)=>P+(T.assignedQty??0),0).toFixed(2);console.log("Quantity",U);const w=k.reduce((P,T)=>P+(T.requiredPcs??0),0).toFixed(2);console.log("totalRepeats",w);const[r,B]=o.useState({embroideryIdDet:0,embroideryId:d.embroideryId||0,designId:d.designId||"",batchNo:d.batchNo||"",planningHeaderId:d.planningHeaderId||0,componentId:d.componentId||"",componentName:d.componentName||"",fabricId:d.fabricId||"",fabricName:d.fabricName||"",vendorId:"",colorId:d.colorId||"",colourName:d.colourName||"",availableQty:d.availableQty||"",assignedQty:"",remainingQty:(d.availableQty-U).toFixed(2)||0,noOfHead:d.noOfHead||"",noOfHeadsName:d.noOfHeadsName||"",repeats:d.repeats||"",assignedRepeats:"",remainingRepeats:d.repeats-w||"",cuttingSize:d.cuttingSize||"",itemsPerRepeat:d.itemsPerRepeat||"",poPcs:d.poPcs||"",totalPcs:d.totalPcs||"",remainingPcs:(d.totalPcs-w).toFixed(2)||0,requiredPcs:0,totalAmount:0,threadStiches:0,threadRate:0,threadAmount:0,tillaStiches:0,tilaRate:0,tilaAmount:0,sequence:0,sequenceRate:0,sequenceAmount:0,isSolving:!1,solvingLayers:0,solvingInMeters:0,solvingRate:0,solvingAmount:0,additional:[],costPerComponent:0,createdOn:new Date().toISOString(),createdBy:c.empId,lastUpdatedOn:new Date().toISOString(),LastUpdatedBy:c.empId}),H=["Boring","Pooni","Laser","Doori","Dissolving"];function X(P,T,Y){return{fontWeight:T.indexOf(P)===-1?Y.typography.fontWeightRegular:Y.typography.fontWeightMedium}}o.useEffect(()=>{B({...r,remainingQty:d.availableQty-U||0,remainingPcs:d.totalPcs-w||0})},[k]);const{data:j}=Ce(),{data:E,refetch:Q}=lt(r.embroideryId,{skip:!r.embroideryId}),[V,p]=o.useState([]);o.useEffect(()=>{if(j){const P=j.result[0];p(P.vendorList)}},[j]),o.useEffect(()=>{E&&h(E.result.map((P,T)=>({id:T,...P})))},[E,Q]),console.log("initialRows",k);const f=P=>{const{name:T,value:Y}=P.target;B({...r,[T]:Y})},N=P=>{const{name:T,checked:Y}=P.target;B(ie=>({...ie,[T]:Y}))};console.log("formData",r);const[W,$]=o.useState(null),[C,S]=o.useState(r);o.useEffect(()=>{const P=setTimeout(()=>{S(r)},50);return()=>{clearTimeout(P)}},[r]),o.useEffect(()=>{const P=()=>{const A=parseFloat(C.repeats)||0,M=parseFloat(C.itemsPerRepeat)||0;return(A*M).toFixed(2)},T=()=>{const A=parseFloat(C.threadStiches)||0,M=parseFloat(C.threadRate)||0,G=parseFloat(C.noOfHead)||0,oe=parseFloat(C.repeats)||0;return(A/1e3*(M*oe*G)).toFixed(2)},Y=()=>{const A=parseFloat(C.tillaStiches)||0,M=parseFloat(C.tilaRate)||0,G=parseFloat(C.noOfHead)||0,oe=parseFloat(C.repeats)||0;return(A/1e3*(M*oe*G)).toFixed(2)},ie=()=>{const A=parseFloat(C.sequence)||0,M=parseFloat(C.sequenceRate)||0,G=parseFloat(C.noOfHead)||0,oe=parseFloat(C.repeats)||0;return(A/1e3*(M*oe*G)).toFixed(2)},_=()=>{const A=parseFloat(C.repeats)||0,M=parseFloat(C.noOfHead)||0,G=parseFloat(C.solvingLayers)||0;return(A*M*13/39.37*G).toFixed(2)},ae=()=>{const A=parseFloat(C.solvingInMeters)||0,M=parseFloat(C.solvingRate)||0;return(A*M).toFixed(2)},ge=()=>{const A=parseFloat(C.threadAmount)||0,M=parseFloat(C.tilaAmount)||0,G=parseFloat(C.sequenceAmount)||0,oe=parseFloat(C.solvingAmount)||0;return A+M+G+oe},ce=()=>{const A=parseFloat(C.totalAmount)||0,M=parseFloat(C.totalPcs)||0;return A/M};B(A=>({...A,totalPcs:P(),threadAmount:T(),tilaAmount:Y(),sequenceAmount:ie(),solvingInMeters:_(),solvingAmount:ae(),totalAmount:ge(),costPerComponent:ce()}))},[C.threadAmount,C.totalAmount,C.sequenceAmount,C.solvingAmount,C.repeats,C.tilaAmount,C.itemsPerRepeat,C.threadRate,C.threadStiches,C.noOfHead,C.tilaRate,C.tillaStiches,C.sequenceRate,C.sequence,C.solvingLayers,C.solvingInMeters,C.solvingRate]),o.useEffect(()=>{if(W==="assignedQty"){const P=()=>{const T=parseFloat(C.assignedQty)||0,Y=parseFloat(C.availableQty)||0,ie=parseFloat(C.totalPcs)||0;return Math.round(T*(ie/Y))};B(T=>({...T,requiredPcs:P()}))}else if(W==="requiredPcs"){const P=()=>{const T=parseFloat(C.requiredPcs)||0,Y=parseFloat(C.availableQty)||0,ie=parseFloat(C.totalPcs)||0;return Math.round(T*Y/ie)};B(T=>({...T,assignedQty:P()}))}},[C.assignedQty,C.requiredPcs,W]);const J=P=>{const T=P.target.value;$("assignedQty"),B(Y=>({...Y,assignedQty:T}))},ne=P=>{const T=P.target.value;$("requiredPcs"),B(Y=>({...Y,requiredPcs:T}))},ee=async()=>{if(console.log(r),r.totalAmount===0&&r.costPerComponent===0){u("Please Thread, Tilla or Sequnce values ",{variant:"error",autoHideDuration:5e3});return}try{const P=await he.post("https://gecxc.com:4041/api/Embroidery/SaveEmbroideryDetails",{...r,additional:r.additional.join(", ")});console.log("Save response:",P.data),B(T=>({...T,vendorId:"",embroideryIdDet:0,totalPcs:0,totalAmount:0,threadStiches:0,threadRate:0,threadAmount:0,tillaStiches:0,tilaRate:0,tilaAmount:0,sequence:0,sequenceRate:0,sequenceAmount:0,isSolving:!1,solvingLayers:0,solvingInMeters:0,solvingRate:0,solvingAmount:0,additional:[],requiredPcs:0,assignedQty:0,costPerComponent:0,createdOn:new Date().toISOString(),createdBy:c.empId,lastUpdatedOn:new Date().toISOString(),LastUpdatedBy:c.empId})),Q(),a(),setAccordionExpanded(!1)}catch(P){console.error("Error saving data:",P)}},le=[{field:"vendorName",headerName:"Vendor"},{field:"assignedQty",headerName:"Assigned Quantity"},{field:"requiredPcs",headerName:"Required Pcs"},{field:"additional",headerName:"ThreadAdditional"},{field:"threadStiches",headerName:"Thread Stitches"},{field:"threadRate",headerName:"Thread Rate"},{field:"threadAmount",headerName:"Thread Amount"},{field:"tillaStiches",headerName:"Tilla Stitches"},{field:"tilaRate",headerName:"Tilla Rate"},{field:"tilaAmount",headerName:"Tilla Amount"},{field:"sequence",headerName:"sequence"},{field:"sequenceRate",headerName:"Sequence Rate"},{field:"sequenceAmount",headerName:"Sequence Amount"},{field:"isSolving",headerName:"Is Solving"},{field:"solvingLayers",headerName:"Solving Layers"},{field:"solvingInMeters",headerName:"Solving In Meters"},{field:"solvingRate",headerName:"Solving Rate"},{field:"solvingAmount",headerName:"Solving Amount"},{field:"totalPcs",headerName:"Total Pcs"},{field:"totalAmount",headerName:"Total Amount"},{field:"costPerComponent",headerName:"Cost Per Component"}];return e.jsxs(xe,{noValidate:!0,component:"form",sx:{display:"flex",flexDirection:"column",m:"auto",width:"Inherit"},children:[e.jsxs(t,{container:!0,spacing:1,width:"Inherit",sx:{paddingY:2,paddingX:2},children:[e.jsxs(t,{item:!0,xs:12,md:3,children:[e.jsx(l,{fullWidth:!0,label:"Fabric",name:"fabricName",value:r.fabricName,onChange:f,size:"small",disabled:!0,sx:P=>({...r.fabricName!==""&&{".css-4a5t8g-MuiInputBase-input-MuiOutlinedInput-input":{backgroundColor:"#c9c9c9 !important"}},"& .MuiInputBase-input.Mui-disabled":{WebkitTextFillColor:"black"},"& .MuiInputBase-root.Mui-disabled":{backgroundColor:"#f9f9f9"},"& .MuiOutlinedInput-root.Mui-disabled .MuiOutlinedInput-notchedOutline":{borderColor:"gray"},"& .MuiInputLabel-root.Mui-disabled":{color:"rgba(0, 0, 0, 0.87)"}}),InputLabelProps:{sx:{color:"black"}}})," "]}),e.jsx(t,{item:!0,xs:12,md:3,children:e.jsx(l,{fullWidth:!0,label:"Component",name:"componentName",value:r.componentName,onChange:f,size:"small",disabled:!0,sx:P=>({...r.componentName!==""&&{".css-4a5t8g-MuiInputBase-input-MuiOutlinedInput-input":{backgroundColor:"#c9c9c9 !important"}},"& .MuiInputBase-input.Mui-disabled":{WebkitTextFillColor:"black"},"& .MuiInputBase-root.Mui-disabled":{backgroundColor:"#f9f9f9"},"& .MuiOutlinedInput-root.Mui-disabled .MuiOutlinedInput-notchedOutline":{borderColor:"gray"},"& .MuiInputLabel-root.Mui-disabled":{color:"rgba(0, 0, 0, 0.87)"}}),InputLabelProps:{sx:{color:"black"}}})}),e.jsxs(t,{item:!0,xs:12,md:3,children:[e.jsx(l,{fullWidth:!0,label:"Color",name:"colourName",value:r.colourName,onChange:f,size:"small",disabled:!0,sx:P=>({...r.colourName!==""&&{".css-4a5t8g-MuiInputBase-input-MuiOutlinedInput-input":{backgroundColor:"#c9c9c9 !important"}},"& .MuiInputBase-input.Mui-disabled":{WebkitTextFillColor:"black"},"& .MuiInputBase-root.Mui-disabled":{backgroundColor:"#f9f9f9"},"& .MuiOutlinedInput-root.Mui-disabled .MuiOutlinedInput-notchedOutline":{borderColor:"gray"},"& .MuiInputLabel-root.Mui-disabled":{color:"rgba(0, 0, 0, 0.87)"}}),InputLabelProps:{sx:{color:"black"}}})," "]}),e.jsxs(t,{item:!0,xs:12,md:3,children:[e.jsx(l,{fullWidth:!0,label:"PO Pcs",name:"poPcs",value:r.poPcs,onChange:f,size:"small",disabled:!0,sx:P=>({...r.poPcs!==""&&{".css-4a5t8g-MuiInputBase-input-MuiOutlinedInput-input":{backgroundColor:"#c9c9c9 !important"}},"& .MuiInputBase-input.Mui-disabled":{WebkitTextFillColor:"black"},"& .MuiInputBase-root.Mui-disabled":{backgroundColor:"#f9f9f9"},"& .MuiOutlinedInput-root.Mui-disabled .MuiOutlinedInput-notchedOutline":{borderColor:"gray"},"& .MuiInputLabel-root.Mui-disabled":{color:"rgba(0, 0, 0, 0.87)"}}),InputLabelProps:{sx:{color:"black"}}})," "]}),e.jsx(t,{item:!0,xs:12,md:3,children:e.jsx(l,{fullWidth:!0,label:"noOfHead",size:"small",name:"noOfHeadsName",value:r.noOfHeadsName,onChange:f,disabled:!0,sx:P=>({...r.noOfHeadsName!==""&&{".css-4a5t8g-MuiInputBase-input-MuiOutlinedInput-input":{backgroundColor:"#c9c9c9 !important"}},"& .MuiInputBase-input.Mui-disabled":{WebkitTextFillColor:"black"},"& .MuiInputBase-root.Mui-disabled":{backgroundColor:"#f9f9f9"},"& .MuiOutlinedInput-root.Mui-disabled .MuiOutlinedInput-notchedOutline":{borderColor:"gray"},"& .MuiInputLabel-root.Mui-disabled":{color:"rgba(0, 0, 0, 0.87)"}}),InputLabelProps:{sx:{color:"black"}}})}),e.jsx(t,{item:!0,xs:12,md:3,children:e.jsx(l,{fullWidth:!0,label:"Cutting Size",size:"small",name:"cuttingSize",value:r.cuttingSize,onChange:f,disabled:!0,sx:P=>({...r.cuttingSize!==""&&{".css-4a5t8g-MuiInputBase-input-MuiOutlinedInput-input":{backgroundColor:"#c9c9c9 !important"}},"& .MuiInputBase-input.Mui-disabled":{WebkitTextFillColor:"black"},"& .MuiInputBase-root.Mui-disabled":{backgroundColor:"#f9f9f9"},"& .MuiOutlinedInput-root.Mui-disabled .MuiOutlinedInput-notchedOutline":{borderColor:"gray"},"& .MuiInputLabel-root.Mui-disabled":{color:"rgba(0, 0, 0, 0.87)"}}),InputLabelProps:{sx:{color:"black"}}})}),e.jsx(t,{item:!0,xs:12,md:3,children:e.jsx(l,{fullWidth:!0,label:"Items Per Repeat",size:"small",name:"itemsPerRepeat",value:r.itemsPerRepeat,onChange:f,disabled:!0,sx:P=>({...r.itemsPerRepeat!==""&&{".css-4a5t8g-MuiInputBase-input-MuiOutlinedInput-input":{backgroundColor:"#c9c9c9 !important"}},"& .MuiInputBase-input.Mui-disabled":{WebkitTextFillColor:"black"},"& .MuiInputBase-root.Mui-disabled":{backgroundColor:"#f9f9f9"},"& .MuiOutlinedInput-root.Mui-disabled .MuiOutlinedInput-notchedOutline":{borderColor:"gray"},"& .MuiInputLabel-root.Mui-disabled":{color:"rgba(0, 0, 0, 0.87)"}}),InputLabelProps:{sx:{color:"black"}}})}),e.jsx(t,{item:!0,xs:12,md:1.5,children:e.jsx(l,{label:"Total AvailableQty",fullWidth:!0,size:"small",name:"availableQty",value:r.availableQty,onChange:f,disabled:!0,sx:P=>({...r.availableQty!==""&&{".css-4a5t8g-MuiInputBase-input-MuiOutlinedInput-input":{backgroundColor:"#c9c9c9 !important"}},"& .MuiInputBase-input.Mui-disabled":{WebkitTextFillColor:"black"},"& .MuiInputBase-root.Mui-disabled":{backgroundColor:"#f9f9f9"},"& .MuiOutlinedInput-root.Mui-disabled .MuiOutlinedInput-notchedOutline":{borderColor:"gray"},"& .MuiInputLabel-root.Mui-disabled":{color:"rgba(0, 0, 0, 0.87)"}}),InputLabelProps:{sx:{color:"black"}}})}),e.jsx(t,{item:!0,xs:12,md:1.5,children:e.jsx(l,{label:"Remaining Qty",fullWidth:!0,size:"small",name:"remainingQty",value:r.remainingQty,onChange:f,disabled:!0,sx:P=>({...r.remainingQty!==""&&{".css-4a5t8g-MuiInputBase-input-MuiOutlinedInput-input":{backgroundColor:"#c9c9c9 !important"}},"& .MuiInputBase-input.Mui-disabled":{WebkitTextFillColor:"black"},"& .MuiInputBase-root.Mui-disabled":{backgroundColor:"#f9f9f9"},"& .MuiOutlinedInput-root.Mui-disabled .MuiOutlinedInput-notchedOutline":{borderColor:"gray"},"& .MuiInputLabel-root.Mui-disabled":{color:"rgba(0, 0, 0, 0.87)"}}),InputLabelProps:{sx:{color:"black"}}})}),e.jsx(t,{item:!0,xs:12,md:1.5,children:e.jsx(l,{label:"Repeats",fullWidth:!0,size:"small",name:"repeats",value:r.repeats,onChange:f,disabled:!0,sx:P=>({...r.repeats!==""&&{".css-4a5t8g-MuiInputBase-input-MuiOutlinedInput-input":{backgroundColor:"#c9c9c9 !important"}},"& .MuiInputBase-input.Mui-disabled":{WebkitTextFillColor:"black"},"& .MuiInputBase-root.Mui-disabled":{backgroundColor:"#f9f9f9"},"& .MuiOutlinedInput-root.Mui-disabled .MuiOutlinedInput-notchedOutline":{borderColor:"gray"},"& .MuiInputLabel-root.Mui-disabled":{color:"rgba(0, 0, 0, 0.87)"}}),InputLabelProps:{sx:{color:"black"}}})}),e.jsx(t,{item:!0,xs:12,md:1.5,children:e.jsx(l,{label:"Total Pcs",fullWidth:!0,size:"small",name:"totalPcs",value:r.totalPcs,onChange:f,disabled:!0,sx:P=>({...r.totalPcs!==""&&{".css-4a5t8g-MuiInputBase-input-MuiOutlinedInput-input":{backgroundColor:"#c9c9c9 !important"}},"& .MuiInputBase-input.Mui-disabled":{WebkitTextFillColor:"black"},"& .MuiInputBase-root.Mui-disabled":{backgroundColor:"#f9f9f9"},"& .MuiOutlinedInput-root.Mui-disabled .MuiOutlinedInput-notchedOutline":{borderColor:"gray"},"& .MuiInputLabel-root.Mui-disabled":{color:"rgba(0, 0, 0, 0.87)"}}),InputLabelProps:{sx:{color:"black"}}})}),e.jsx(t,{item:!0,xs:12,md:1.5,children:e.jsx(l,{label:"remainingPcs",fullWidth:!0,size:"small",name:"remainingPcs",value:r.remainingPcs,onChange:f,disabled:!0,sx:P=>({...r.remainingPcs!==""&&{".css-4a5t8g-MuiInputBase-input-MuiOutlinedInput-input":{backgroundColor:"#c9c9c9 !important"}},"& .MuiInputBase-input.Mui-disabled":{WebkitTextFillColor:"black"},"& .MuiInputBase-root.Mui-disabled":{backgroundColor:"#f9f9f9"},"& .MuiOutlinedInput-root.Mui-disabled .MuiOutlinedInput-notchedOutline":{borderColor:"gray"},"& .MuiInputLabel-root.Mui-disabled":{color:"rgba(0, 0, 0, 0.87)"}}),InputLabelProps:{sx:{color:"black"}}})})]}),e.jsx(de,{color:"#921e22",sx:{height:2,width:"100%"}}),e.jsxs(t,{container:!0,spacing:1,width:"Inherit",sx:{paddingY:2,paddingX:2},children:[e.jsx(t,{item:!0,xs:12,md:3,children:e.jsx(l,{fullWidth:!0,select:!0,label:"Vendors",size:"small",name:"vendorId",value:r.vendorId,onChange:f,disabled:!r.remainingPcs&&!r.remainingQty,InputLabelProps:{sx:{color:"black"}},children:V.map(P=>e.jsx(L,{value:P.lookUpId,children:P.lookUpName},P.lookUpId))})}),e.jsx(t,{item:!0,xs:12,md:1.5,children:e.jsx(l,{label:"Assigned Qty",fullWidth:!0,size:"small",type:"number",name:"assignedQty",value:r.assignedQty,onChange:J,disabled:!r.remainingPcs&&!r.remainingQty,InputLabelProps:{sx:{color:"black"}}})}),e.jsx(t,{item:!0,xs:12,md:1.5,children:e.jsx(l,{label:"Required Pcs",fullWidth:!0,disabled:!r.remainingPcs&&!r.remainingQty,size:"small",type:"number",name:"requiredPcs",value:r.requiredPcs,onChange:ne,InputLabelProps:{sx:{color:"black"}}})}),e.jsx(t,{item:!0,xs:12,md:3,children:e.jsx(l,{label:"Total Amount",fullWidth:!0,type:"number",size:"small",disabled:!r.remainingPcs&&!r.remainingQty,name:"totalAmount",value:r.totalAmount,onChange:f,InputLabelProps:{sx:{color:"black"}}})}),e.jsx(t,{item:!0,xs:12,md:3,children:e.jsx(l,{label:"Cost Per Component",fullWidth:!0,size:"small",name:"costPerComponent",value:r.costPerComponent,onChange:f,disabled:!r.remainingPcs&&!r.remainingQty,InputLabelProps:{sx:{color:"black"}}})}),e.jsx(t,{item:!0,xs:12,md:4.5,children:e.jsx(l,{select:!0,label:"Additional",value:r.additional,name:"additional",size:"small",onChange:f,fullWidth:!0,disabled:!r.remainingPcs&&!r.remainingQty,InputLabelProps:{sx:{color:"black"}},SelectProps:{multiple:!0},children:H.map(P=>e.jsx(L,{value:P,style:X(P,r.additional,i),children:P},P))})}),e.jsx(t,{item:!0,xs:12,md:1.5,children:e.jsx(De,{control:e.jsx(_e,{checked:r.isSolving,onChange:N,disabled:!r.remainingPcs&&!r.remainingQty,name:"isSolving"}),label:"isSolving"})}),e.jsx(t,{item:!0,xs:12,md:6}),e.jsx(t,{item:!0,xs:12,md:6,children:e.jsxs(t,{container:!0,spacing:1,width:"Inherit",children:[e.jsx(t,{item:!0,xs:12,md:12,children:e.jsx(fe,{variant:"h5",gutterBottom:!0,children:"Thread"})})," ",e.jsx(t,{item:!0,xs:12,md:4,children:e.jsx(l,{label:"Stitches",fullWidth:!0,size:"small",type:"number",name:"threadStiches",value:r.threadStiches,onChange:f,required:!0,disabled:!r.remainingPcs&&!r.remainingQty,InputLabelProps:{sx:{color:"black"}}})}),e.jsx(t,{item:!0,xs:12,md:4,children:e.jsx(l,{label:"Rate",type:"number",fullWidth:!0,size:"small",name:"threadRate",value:r.threadRate,onChange:f,required:!0,disabled:!r.remainingPcs&&!r.remainingQty,InputLabelProps:{sx:{color:"black"}}})}),e.jsx(t,{item:!0,xs:12,md:4,children:e.jsx(l,{label:"Amount",fullWidth:!0,size:"small",type:"number",name:"threadAmount",value:r.threadAmount,onChange:f,disabled:!r.remainingPcs&&!r.remainingQty,InputLabelProps:{sx:{color:"black"}}})})]})}),e.jsx(t,{item:!0,xs:12,md:6,children:e.jsxs(t,{container:!0,spacing:1,width:"Inherit",children:[e.jsx(t,{item:!0,xs:12,md:12,children:e.jsx(fe,{variant:"h5",gutterBottom:!0,children:"Tilla"})})," ",e.jsx(t,{item:!0,xs:12,md:4,children:e.jsx(l,{label:"Stitches",fullWidth:!0,size:"small",type:"number",name:"tillaStiches",value:r.tillaStiches,onChange:f,required:!0,disabled:!r.remainingPcs&&!r.remainingQty,InputLabelProps:{sx:{color:"black"}}})}),e.jsx(t,{item:!0,xs:12,md:4,children:e.jsx(l,{label:"Rate",fullWidth:!0,size:"small",type:"number",name:"tilaRate",value:r.tilaRate,onChange:f,required:!0,disabled:!r.remainingPcs&&!r.remainingQty,InputLabelProps:{sx:{color:"black"}}})}),e.jsx(t,{item:!0,xs:12,md:4,children:e.jsx(l,{label:"Amount",fullWidth:!0,size:"small",name:"tilaAmount",value:r.tilaAmount,onChange:f,disabled:!r.remainingPcs&&!r.remainingQty,InputLabelProps:{sx:{color:"black"}}})})]})}),e.jsxs(t,{item:!0,xs:12,md:6,children:[e.jsxs(t,{container:!0,spacing:1,width:"Inherit",children:[e.jsx(t,{item:!0,xs:12,md:12,children:e.jsx(fe,{variant:"h5",gutterBottom:!0,children:"Sequence"})})," ",e.jsx(t,{item:!0,xs:12,md:4,children:e.jsx(l,{label:"Sequence",fullWidth:!0,size:"small",name:"sequence",type:"number",value:r.sequence,onChange:f,disabled:!r.remainingPcs&&!r.remainingQty,required:!0,InputLabelProps:{sx:{color:"black"}}})}),e.jsx(t,{item:!0,xs:12,md:4,children:e.jsx(l,{label:"Rate",fullWidth:!0,type:"number",size:"small",name:"sequenceRate",value:r.sequenceRate,onChange:f,required:!0,disabled:!r.remainingPcs&&!r.remainingQty,InputLabelProps:{sx:{color:"black"}}})}),e.jsx(t,{item:!0,xs:12,md:4,children:e.jsx(l,{label:"Amount",fullWidth:!0,size:"small",name:"sequenceAmount",value:r.sequenceAmount,onChange:f,disabled:!r.remainingPcs&&!r.remainingQty,InputLabelProps:{sx:{color:"black"}}})})]})," "]}),r.isSolving?e.jsx(t,{item:!0,xs:12,md:6,children:e.jsxs(t,{container:!0,spacing:1,width:"Inherit",children:[e.jsx(t,{item:!0,xs:12,md:12,children:e.jsx(fe,{variant:"h5",gutterBottom:!0,children:"Solving"})})," ",e.jsx(t,{item:!0,xs:12,md:3,children:e.jsx(l,{label:"Layers",fullWidth:!0,size:"small",type:"number",name:"solvingLayers",value:r.solvingLayers,onChange:f,disabled:!r.remainingPcs&&!r.remainingQty,InputLabelProps:{sx:{color:"black"}}})}),e.jsx(t,{item:!0,xs:12,md:3,children:e.jsx(l,{label:"Meters",type:"number",fullWidth:!0,size:"small",name:"solvingInMeters",value:r.solvingInMeters,disabled:!r.remainingPcs&&!r.remainingQty,onChange:f,InputLabelProps:{sx:{color:"black"}}})}),e.jsx(t,{item:!0,xs:12,md:3,children:e.jsx(l,{label:"Rate",fullWidth:!0,type:"number",size:"small",name:"solvingRate",value:r.solvingRate,onChange:f,InputLabelProps:{sx:{color:"black"}}})}),e.jsx(t,{item:!0,xs:12,md:3,children:e.jsx(l,{label:"Amount",fullWidth:!0,size:"small",type:"number",name:"solvingAmount",value:r.solvingAmount,disabled:!r.remainingPcs&&!r.remainingQty,onChange:f,InputLabelProps:{sx:{color:"black"}}})})]})}):null,e.jsx(t,{item:!0,xs:12,textAlign:"right",sx:{mt:2},children:e.jsx(re,{variant:"contained",size:"small",onClick:ee,children:"Save"})})]}),e.jsx(de,{color:"#921e22",sx:{height:2,width:"100%"}}),e.jsx(t,{container:!0,spacing:2,width:"Inherit",sx:{paddingY:2,paddingX:2},children:e.jsx(t,{sx:{marginTop:2},item:!0,xs:12,children:e.jsx(je,{iColumns:le,initialRows:k,deleteApi:"https://gecxc.com:4041/api/Embroidery/DeleteEmbroideryDetailsByDetId?embroideryDetId=",deleteBy:"embroideryIdDet",refetch:Q,disableEdit:!0})})})]})},Ot=()=>{Ve();const{user:d}=ve(),{enqueueSnackbar:s}=ke(),[a,m]=o.useState([]),[i,u]=o.useState(!1),[c,k]=o.useState({embroideryId:0,designId:"",batchNo:"",planningHeaderId:"",componentId:"",fabricId:"",vendorId:"",poPcs:"",baseColorId:"",baseColorName:"",colorId:"",availableQty:"",noOfHead:"",repeats:"",cuttingSize:"",itemsPerRepeat:"",totalPcs:"",totalAmount:"",threadStiches:"",threadRate:"",threadAmount:"",tillaStiches:"",tilaRate:"",tilaAmount:"",sequence:"",sequenceRate:"",sequenceAmount:"",isSolving:!1,solvingLayers:0,solvingInMeters:"",solvingRate:0,solvingAmount:"",threadAdditional:[],costPerComponent:"",createdBy:d.empId,createdOn:new Date().toISOString(),lastUpdatedOn:new Date().toISOString(),lastUpdatedBy:d.empId});o.useEffect(()=>{k({embroideryId:(a==null?void 0:a.embroideryId)||0,designId:(a==null?void 0:a.designId)||"",batchNo:(a==null?void 0:a.batchNo)||"",planningHeaderId:(a==null?void 0:a.planningHeaderId)||"",componentId:(a==null?void 0:a.componentId)||"",fabricId:(a==null?void 0:a.fabricId)||"",vendorId:(a==null?void 0:a.vendorId)||"",poPcs:(a==null?void 0:a.poPcs)||"",baseColorId:(a==null?void 0:a.baseColorId)||"",baseColorName:(a==null?void 0:a.baseColorName)||"",colorId:(a==null?void 0:a.colorId)||"",availableQty:(a==null?void 0:a.availableQty)||"",noOfHead:(a==null?void 0:a.noOfHead)||"",repeats:(a==null?void 0:a.repeats)||"",cuttingSize:(a==null?void 0:a.cuttingSize)||"",itemsPerRepeat:(a==null?void 0:a.itemsPerRepeat)||"",totalPcs:(a==null?void 0:a.totalPcs)||"",totalAmount:(a==null?void 0:a.totalAmount)||"",threadStiches:(a==null?void 0:a.threadStiches)||"",threadRate:(a==null?void 0:a.threadRate)||"",threadAmount:(a==null?void 0:a.threadAmount)||"",tillaStiches:(a==null?void 0:a.tillaStiches)||"",tilaRate:(a==null?void 0:a.tilaRate)||"",tilaAmount:(a==null?void 0:a.tilaAmount)||"",sequence:(a==null?void 0:a.sequence)||"",sequenceRate:(a==null?void 0:a.sequenceRate)||"",sequenceAmount:(a==null?void 0:a.sequenceAmount)||"",isSolving:(a==null?void 0:a.isSolving)||!1,solvingLayers:(a==null?void 0:a.solvingLayers)||0,solvingInMeters:(a==null?void 0:a.solvingInMeters)||"",solvingRate:(a==null?void 0:a.solvingRate)||0,solvingAmount:(a==null?void 0:a.solvingAmount)||"",threadAdditional:(a==null?void 0:a.threadAdditional)||[],costPerComponent:(a==null?void 0:a.costPerComponent)||"",createdOn:(a==null?void 0:a.createdOn)||new Date().toISOString(),createdBy:(a==null?void 0:a.createdBy)||d.empId,lastUpdatedOn:new Date().toISOString(),lastUpdatedBy:d.empId})},[a]);const{data:h}=Se(),[U,w]=o.useState(""),{data:r}=Ce(),{data:B,refetch:H}=Oe(U,{skip:!U}),{data:X,refetch:j}=Fe(c.designId,{skip:!c.designId}),{data:E}=we({batchNo:c.planningHeaderId,componentId:c.componentId},{skip:!c.planningHeaderId||!c.componentId}),{data:Q}=We({batchNo:c.planningHeaderId,componentId:c.componentId,fabricId:c.fabricId},{skip:!c.planningHeaderId||!c.componentId||!c.fabricId}),{data:V,refetch:p}=rt(c.planningHeaderId,{skip:!c.planningHeaderId}),{data:f}=Re(c.planningHeaderId,{skip:!c.planningHeaderId});console.log("formData.planningHeaderId",c.planningHeaderId),console.log("collectionData",h);const[N,W]=o.useState(!1),[$,C]=o.useState([]),[S,J]=o.useState([]),[ne,ee]=o.useState([]),[le,ue]=o.useState([]),[P,T]=o.useState([]),[Y,ie]=o.useState([]),[_,ae]=o.useState([]),[ge,ce]=o.useState([]);console.log("batchList",S),console.log("formData",c),o.useEffect(()=>{B&&C(B.result)},[B]),o.useEffect(()=>{X&&J(X.result)},[X]),o.useEffect(()=>{E&&ee(E.result)},[E]),o.useEffect(()=>{Q&&ie(E.result)},[Q]),o.useEffect(()=>{f&&ce(f.result)},[f]),o.useEffect(()=>{V&&ae(V.result.map((I,g)=>({id:g,...I})))},[V,p]),console.log("embroideryList",V),console.log("initialRows",_),o.useEffect(()=>{if(r){const I=r.result[0];ue(I.vendorList),T(I.noOfHeadsList)}},[r]);const A=(h==null?void 0:h.result)||[];o.useEffect(()=>{const I=()=>{const z=parseFloat(c.repeats)||0,se=parseFloat(c.itemsPerRepeat)||0;return(z*se).toFixed(2)};k(z=>({...z,totalPcs:I()}));const g=()=>{const z=parseFloat(c.threadStiches)||0,se=parseFloat(c.threadRate)||0,Ie=parseFloat(c.noOfHead)||0,Pe=parseFloat(c.repeats)||0;return(z/1e3*(se*Pe*Ie)).toFixed(2)};k(z=>({...z,threadAmount:g()}));const y=()=>{const z=parseFloat(c.tillaStiches)||0,se=parseFloat(c.tilaRate)||0,Ie=parseFloat(c.noOfHead)||0,Pe=parseFloat(c.repeats)||0;return(z/1e3*(se*Pe*Ie)).toFixed(2)};k(z=>({...z,tilaAmount:y()}));const n=()=>{const z=parseFloat(c.sequence)||0,se=parseFloat(c.sequenceRate)||0,Ie=parseFloat(c.noOfHead)||0,Pe=parseFloat(c.repeats)||0;return(z/1e3*(se*Pe*Ie)).toFixed(2)};k(z=>({...z,sequenceAmount:n()}));const x=()=>{const z=parseFloat(c.repeats)||0,se=parseFloat(c.noOfHead)||0,Ie=parseFloat(c.solvingLayers)||0;return(z*se*13/39.37*Ie).toFixed(2)};k(z=>({...z,solvingInMeters:x()}));const F=()=>{const z=parseFloat(c.solvingInMeters)||0,se=parseFloat(c.solvingRate)||0;return parseFloat(c.solvingLayers),(z*se).toFixed(2)};k(z=>({...z,solvingAmount:F()}));const Z=()=>{const z=parseFloat(c.threadAmount)||0,se=parseFloat(c.tilaAmount)||0,Ie=parseFloat(c.sequenceAmount)||0,Pe=parseFloat(c.solvingAmount)||0;return(z+se+Ie+Pe).toFixed(2)};k(z=>({...z,totalAmount:Z()||0}));const D=()=>{const z=parseFloat(c.totalAmount)||0,se=parseFloat(c.totalPcs)||0;return(z/se).toFixed(2)};k(z=>({...z,costPerComponent:D()||0}))},[c.threadAmount,c.totalAmount,c.sequenceAmount,c.solvingAmount,c.repeats,c.tilaAmount,c.itemsPerRepeat,c.threadRate,c.threadStiches,c.noOfHead,c.tilaRate,c.tillaStiches,c.sequenceRate,c.sequence,c.solvingLayers,c.solvingInMeters,c.solvingRate]);const M=I=>{const{name:g,value:y}=I.target;if(g==="collectionId")A.find(n=>n.collectionId===parseInt(y)),w(y),u(!0),k({...c,collectionId:y,designId:"",batchNo:"",planningHeaderId:"",componentId:"",fabricId:"",vendorId:"",poPcs:"",baseColorId:"",baseColorName:"",colorId:"",availableQty:"",noOfHead:"",repeats:"",cuttingSize:"",itemsPerRepeat:"",totalPcs:"",totalAmount:"",threadStiches:"",threadRate:"",threadAmount:"",tillaStiches:"",tilaRate:"",tilaAmount:"",sequence:"",sequenceRate:"",sequenceAmount:"",isSolving:!1,solvingLayers:0,solvingInMeters:"",solvingRate:0,solvingAmount:"",threadAdditional:[],costPerComponent:""});else if(g==="designId"){const n=$.find(x=>x.designId===parseInt(y));k({...c,designId:y,baseColorId:n?n.colorId:"",baseColorName:n?n.colorName:"",batchNo:"",planningHeaderId:"",componentId:"",fabricId:"",vendorId:"",poPcs:"",colorId:"",availableQty:"",noOfHead:"",repeats:"",cuttingSize:"",itemsPerRepeat:"",totalPcs:"",totalAmount:"",threadStiches:"",threadRate:"",threadAmount:"",tillaStiches:"",tilaRate:"",tilaAmount:"",sequence:"",sequenceRate:"",sequenceAmount:"",isSolving:!1,solvingLayers:0,solvingInMeters:"",solvingRate:0,solvingAmount:"",threadAdditional:[],costPerComponent:""})}else if(g==="colorId"){const n=Y.find(x=>x.colorId===y);k({...c,colorId:y,availableQty:n?n.total:"",cuttingSize:n?n.cuttingSize:"",repeats:n?n.repeats:"",noOfHead:n?n.noOfHeads:""})}else if(g==="batchNo"){const n=S.find(x=>x.batchNo===y);k({...c,batchNo:y,planningHeaderId:n?n.planningHeaderId:"",poPcs:n?n.poPcs:"",componentId:"",fabricId:"",vendorId:"",colorId:"",availableQty:"",noOfHead:"",repeats:"",cuttingSize:"",itemsPerRepeat:"",totalPcs:"",totalAmount:"",threadStiches:"",threadRate:"",threadAmount:"",tillaStiches:"",tilaRate:"",tilaAmount:"",sequence:"",sequenceRate:"",sequenceAmount:"",isSolving:!1,solvingLayers:0,solvingInMeters:"",solvingRate:0,solvingAmount:"",threadAdditional:[],costPerComponent:""}),W(!0),u(!1)}else k({...c,[g]:y}),oe(n=>({...n,[g]:""}))},[G,oe]=o.useState({}),te=async()=>{try{const I=await he.post("https://gecxc.com:4041/api/Embroidery/SaveEmbroidery",{...c,threadAdditional:c.threadAdditional.join(", ")});console.log("Save response:",I.data),I.data.success?s("Fabrication saved successfully!",{variant:"success",autoHideDuration:5e3}):(s(`${I.data.message}!`,{variant:"error",autoHideDuration:5e3}),console.log("response.message",I.data.message)),k(g=>({embroideryId:0,designId:g.designId,batchNo:g.batchNo,planningHeaderId:g.planningHeaderId,componentId:"",fabricId:"",vendorId:"",poPcs:g.poPcs,baseColorId:g.baseColorId,baseColorName:g.baseColorName,colorId:"",availableQty:"",noOfHead:"",repeats:"",cuttingSize:"",itemsPerRepeat:"",totalPcs:"",totalAmount:"",threadStiches:"",threadRate:"",threadAmount:"",tillaStiches:"",tilaRate:"",tilaAmount:"",sequence:"",sequenceRate:"",sequenceAmount:"",isSolving:!1,solvingLayers:0,solvingInMeters:"",solvingRate:0,solvingAmount:"",threadAdditional:[],costPerComponent:"",createdOn:new Date().toISOString(),createdBy:d.empId,lastUpdatedOn:new Date().toISOString(),lastUpdatedBy:d.empId})),p()}catch(I){console.error("Error saving data:",I),s("Dyeing not saved successfully!",{variant:"error",autoHideDuration:5e3})}};console.log("initialRows",_);const[R,q]=o.useState({}),[be,ye]=o.useState(!1),v=I=>{q(I),ye(!0)},O=()=>{ye(!1),q({}),refetchDyeingPrintingData()},K=[{field:"designNo",headerName:"Design"},{field:"batchNo",headerName:"Batch No."},{field:"componentName",headerName:"Component "},{field:"fabricName",headerName:"Fabric "},{field:"vendorId",headerName:"Vendor"},{field:"poPcs",headerName:"Po Pcs"},{field:"colourName",headerName:"Color"},{field:"noOfHeadsName",headerName:"No. Of Heads"},{field:"repeats",headerName:"Repeats"},{field:"cuttingSize",headerName:"Cutting Size"},{field:"itemsPerRepeat",headerName:"Items Per Repeat"},{field:"availableQty",headerName:"Available Qty"},{field:"assignedQty",headerName:"Assigned Qty"},{field:"totalPcs",headerName:"Total Pcs"},{field:"requiredPcs",headerName:"Required Pcs"},{field:"AddVendor",headerName:"Add Vendor",renderCell:I=>e.jsx("div",{style:{display:"flex",justifyContent:"space-around"},children:e.jsx(Me,{color:"primary",onClick:()=>v(I.row),children:e.jsx(Ge,{})})})}];return e.jsxs(e.Fragment,{children:[e.jsxs(pe,{variant:"outlined",children:[e.jsx(me,{className:"css-4rfrnx-MuiCardHeader-root",avatar:e.jsx(Te,{src:Mt,sx:{background:"transparent"}}),title:"Embroidery  ",titleTypographyProps:{style:{color:"white"}}}),e.jsxs(t,{container:!0,spacing:1,width:"Inherit",sx:{paddingY:2,paddingX:2},children:[" ",e.jsxs(t,{item:!0,xs:12,md:3,children:[e.jsx(l,{fullWidth:!0,select:!0,label:"Select Collection",name:"collectionId",value:U,onChange:M,size:"small",InputLabelProps:{sx:{color:"black"}},children:A.map(I=>e.jsx(L,{value:I.collectionId,children:I.collectionName},I.collectionId))})," "]}),e.jsx(t,{item:!0,xs:12,md:3,children:e.jsx(l,{fullWidth:!0,select:!0,label:"Select Design",name:"designId",value:c.designId,onChange:M,size:"small",InputLabelProps:{sx:{color:"black"}},children:$.map(I=>e.jsx(L,{value:I.designId,children:I.designNo},I.designId))})}),e.jsxs(t,{item:!0,xs:12,md:3,children:[e.jsx(l,{fullWidth:!0,select:!0,label:"Batch No.",name:"batchNo",value:c.batchNo,onChange:M,size:"small",InputLabelProps:{sx:{color:"black"}},children:S.map(I=>e.jsx(L,{value:I.batchNo,children:I.batchNo},I.batchNo))})," "]}),e.jsx(t,{item:!0,xs:12,md:3,children:e.jsx(l,{label:"Base Color",fullWidth:!0,size:"small",name:"baseColorName",value:c.baseColorName,onChange:M,disabled:!0,sx:I=>({...c.repeatsInMtr!==""&&{".css-4a5t8g-MuiInputBase-input-MuiOutlinedInput-input":{backgroundColor:"#c9c9c9 !important"}},"& .MuiInputBase-input.Mui-disabled":{WebkitTextFillColor:"black"},"& .MuiInputBase-root.Mui-disabled":{backgroundColor:"#f9f9f9"},"& .MuiOutlinedInput-root.Mui-disabled .MuiOutlinedInput-notchedOutline":{borderColor:"gray"},"& .MuiInputLabel-root.Mui-disabled":{color:"rgba(0, 0, 0, 0.87)"}})})}),e.jsxs(t,{item:!0,xs:12,md:12,children:[e.jsx(de,{color:"#921e22",sx:{height:2,width:"100%"}})," "]}),e.jsxs(t,{item:!0,xs:12,md:3,children:[e.jsx(l,{fullWidth:!0,select:!0,label:"Components",name:"componentId",value:c.componentId,onChange:M,size:"small",required:!0,error:!!G.componentId,helperText:G.componentId,InputLabelProps:{sx:{color:"black"}},children:ge.map(I=>e.jsx(L,{value:I.componentId,children:I.componentName},I.componentId))})," "]}),e.jsx(t,{item:!0,xs:12,md:3,children:e.jsx(l,{fullWidth:!0,select:!0,label:"Select Fabric",defaultValue:"",size:"small",name:"fabricId",value:c.fabricId,onChange:M,required:!0,error:!!G.fabricId,helperText:G.fabricId,InputLabelProps:{sx:{color:"black"}},children:ne.map(I=>e.jsx(L,{value:I.fabricId,children:I.fabric},I.fabricId))})}),e.jsx(t,{item:!0,xs:12,md:3,children:e.jsx(l,{fullWidth:!0,select:!0,label:"Color",size:"small",name:"colorId",value:c.colorId,onChange:M,required:!0,error:!!G.colorId,helperText:G.colorId,InputLabelProps:{sx:{color:"black"}},children:Y.map(I=>e.jsx(L,{value:I.colorId,children:I.color},I.colorId))})}),e.jsx(t,{item:!0,xs:12,md:1.5,children:e.jsx(l,{label:"Po Pcs",fullWidth:!0,size:"small",name:"poPcs",value:c.poPcs,onChange:M,disabled:!0,sx:I=>({...c.poPcs!==""&&{".css-4a5t8g-MuiInputBase-input-MuiOutlinedInput-input":{backgroundColor:"#c9c9c9 !important"}},"& .MuiInputBase-input.Mui-disabled":{WebkitTextFillColor:"black"},"& .MuiInputBase-root.Mui-disabled":{backgroundColor:"#f9f9f9"},"& .MuiOutlinedInput-root.Mui-disabled .MuiOutlinedInput-notchedOutline":{borderColor:"gray"},"& .MuiInputLabel-root.Mui-disabled":{color:"rgba(0, 0, 0, 0.87)"}})})}),e.jsx(t,{item:!0,xs:12,md:1.5,children:e.jsx(l,{label:"Available Quantity",fullWidth:!0,size:"small",name:"availableQty",type:"number",value:c.availableQty,onChange:M,InputLabelProps:{sx:{color:"black"}},sx:I=>({...c.availableQty!==""&&{".css-4a5t8g-MuiInputBase-input-MuiOutlinedInput-input":{backgroundColor:"#c9c9c9 !important"}},"& .MuiInputBase-input.Mui-disabled":{WebkitTextFillColor:"black"},"& .MuiInputBase-root.Mui-disabled":{backgroundColor:"#f9f9f9"},"& .MuiOutlinedInput-root.Mui-disabled .MuiOutlinedInput-notchedOutline":{borderColor:"gray"},"& .MuiInputLabel-root.Mui-disabled":{color:"rgba(0, 0, 0, 0.87)"}})})}),e.jsx(t,{item:!0,xs:12,md:1.5,children:e.jsx(l,{label:"Repeats",type:"number",fullWidth:!0,size:"small",name:"repeats",value:c.repeats,onChange:M,InputLabelProps:{sx:{color:"black"}},sx:I=>({...c.repeats!==""&&{".css-4a5t8g-MuiInputBase-input-MuiOutlinedInput-input":{backgroundColor:"#c9c9c9 !important"}},"& .MuiInputBase-input.Mui-disabled":{WebkitTextFillColor:"black"},"& .MuiInputBase-root.Mui-disabled":{backgroundColor:"#f9f9f9"},"& .MuiOutlinedInput-root.Mui-disabled .MuiOutlinedInput-notchedOutline":{borderColor:"gray"},"& .MuiInputLabel-root.Mui-disabled":{color:"rgba(0, 0, 0, 0.87)"}})})}),e.jsx(t,{item:!0,xs:12,md:1.5,children:e.jsx(l,{fullWidth:!0,select:!0,label:"Heads",defaultValue:"",size:"small",name:"noOfHead",value:c.noOfHead,onChange:M,required:!0,error:!!G.noOfHead,helperText:G.noOfHead,InputLabelProps:{sx:{color:"black"}},sx:I=>({...c.noOfHead!==""&&{".css-9ngl8c-MuiSelect-select-MuiInputBase-input-MuiOutlinedInput-input":{backgroundColor:"#c9c9c9 !important"}},"& .MuiInputBase-input.Mui-disabled":{WebkitTextFillColor:"black"},"& .MuiInputBase-root.Mui-disabled":{backgroundColor:"#f9f9f9"},"& .MuiOutlinedInput-root.Mui-disabled .MuiOutlinedInput-notchedOutline":{borderColor:"gray"},"& .MuiInputLabel-root.Mui-disabled":{color:"rgba(0, 0, 0, 0.87)"}}),children:P.map(I=>e.jsx(L,{value:I.lookUpId,children:I.lookUpName},I.lookUpId))})}),e.jsx(t,{item:!0,xs:12,md:1.5,children:e.jsx(l,{label:"Cutting Size",fullWidth:!0,size:"small",name:"cuttingSize",type:"number",value:c.cuttingSize,onChange:M,InputLabelProps:{sx:{color:"black"}},sx:I=>({...c.cuttingSize!==""&&{".css-4a5t8g-MuiInputBase-input-MuiOutlinedInput-input":{backgroundColor:"#c9c9c9 !important"}},"& .MuiInputBase-input.Mui-disabled":{WebkitTextFillColor:"black"},"& .MuiInputBase-root.Mui-disabled":{backgroundColor:"#f9f9f9"},"& .MuiOutlinedInput-root.Mui-disabled .MuiOutlinedInput-notchedOutline":{borderColor:"gray"},"& .MuiInputLabel-root.Mui-disabled":{color:"rgba(0, 0, 0, 0.87)"}})})}),e.jsx(t,{item:!0,xs:12,md:1.5,children:e.jsx(l,{label:"itemsPerRepeat",fullWidth:!0,type:"number",size:"small",name:"itemsPerRepeat",value:c.itemsPerRepeat,onChange:M,required:!0,error:!!G.itemsPerRepeat,helperText:G.itemsPerRepeat,InputLabelProps:{sx:{color:"black"}},sx:I=>({...c.itemsPerRepeat!==""&&{".css-4a5t8g-MuiInputBase-input-MuiOutlinedInput-input":{backgroundColor:"#c9c9c9 !important"}},"& .MuiInputBase-input.Mui-disabled":{WebkitTextFillColor:"black"},"& .MuiInputBase-root.Mui-disabled":{backgroundColor:"#f9f9f9"},"& .MuiOutlinedInput-root.Mui-disabled .MuiOutlinedInput-notchedOutline":{borderColor:"gray"},"& .MuiInputLabel-root.Mui-disabled":{color:"rgba(0, 0, 0, 0.87)"}})})}),e.jsx(t,{item:!0,xs:12,md:1.5,children:e.jsx(l,{label:"total Pcs.",fullWidth:!0,size:"small",type:"number",name:"totalPcs",value:c.totalPcs,onChange:M})}),e.jsx(t,{item:!0,xs:12,md:4.5,textAlign:"right",sx:{mt:2},children:e.jsx(re,{variant:"contained",size:"small",onClick:te,children:"Save"})})]})]}),e.jsx(t,{item:!0,xs:12,md:12,children:e.jsx(de,{color:"#cc8587",sx:{height:1,width:"100%",mt:2}})}),e.jsx(t,{item:!0,xs:12,md:12,children:e.jsx(de,{sx:{height:1,width:"100%",marginTop:1,marginBottom:0}})}),e.jsxs(pe,{variant:"outlined",children:[e.jsx(me,{className:"css-4rfrnx-MuiCardHeader-root",avatar:e.jsx(Ne,{}),title:"View Embroidery ",titleTypographyProps:{style:{color:"white"}}})," ",e.jsx(t,{container:!0,spacing:2,width:"Inherit",sx:{paddingY:2,paddingX:2},children:e.jsxs(t,{sx:{marginTop:2},item:!0,xs:12,children:[" ",i?e.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"},children:e.jsx("img",{src:ze,alt:"Loading",style:{width:200,height:200}})}):e.jsx(je,{iColumns:K,initialRows:_,setInitialData:m,deleteApi:"https://gecxc.com:4041/api/Embroidery/DeleteEmbroideryById?embroideryId=",deleteBy:"embroideryId",refetch:p,setAccordionExpanded:W,fileName:"Embroidery List"}),e.jsxs(He,{open:be,onClose:O,fullWidth:!0,maxWidth:"xl",children:[e.jsxs(Qe,{sx:{backgroundColor:"#A11F23",color:"#ffffff",display:"flex",justifyContent:"space-between",alignItems:"center",paddingX:"24px",paddingY:"4px"},children:[e.jsx(fe,{variant:"h4",component:"div",color:"#ffffff",gutterBottom:!0,fontSize:20,fontWeight:2,fontStyle:"normal",children:"Assign Vendors "}),e.jsx(Me,{onClick:O,sx:{color:"#ffffff"},children:e.jsx(Ee,{})})]}),e.jsxs(qe,{children:[e.jsx(Ue,{id:"alert-dialog-slide-description"}),e.jsx(St,{initialFormData:R,setInitialFormData:q,refetchDyeingPrintingData:p,handleClickOpen:v})]})]})]})})]})]})},Nt=Ot,At=()=>{const{user:d}=ve();console.log("user",d);const[s,a]=o.useState([]),[m,i]=o.useState([]),[u,c]=o.useState({processType:"MultiHead",planningId:0,collectionId:"",baseColorId:"",baseColorName:"",noOfDesigns:"",noOfColors:"",planningHeaderId:"",designId:"",batchNo:"",componentId:"",cuttingSize:"",colorId:"",fabricId:"",noOfHeads:0,operatingMachineId:0,repeats:"",repeatSize:"",uomId:"",totalFabric:"",shrinkage:"",wastage:"",total:"",appId:1,createdOn:new Date().toISOString(),createdBy:d.empId,lastUpdatedBy:d.empId,lastUpdatedOn:new Date().toISOString(),isSchiffili:!1,repeatsInMtr:""});console.log("formData",u),o.useEffect(()=>{c({...u,processType:(s==null?void 0:s.processType)||"MultiHead",planningId:(s==null?void 0:s.planningId)||0,baseColorId:(s==null?void 0:s.baseColorId)||"",componentId:(s==null?void 0:s.componentId)||"",cuttingSize:(s==null?void 0:s.cuttingSize)||"",colorId:(s==null?void 0:s.colorId)||"",fabricId:(s==null?void 0:s.fabricId)||"",noOfHeads:(s==null?void 0:s.noOfHeads)||0,operatingMachineId:(s==null?void 0:s.operatingMachineId)||0,repeats:(s==null?void 0:s.repeats)||"",repeatSize:(s==null?void 0:s.repeatSize)||"",uomId:(s==null?void 0:s.uomId)||"",totalFabric:(s==null?void 0:s.totalFabric)||"",shrinkage:(s==null?void 0:s.shrinkage)||"",wastage:(s==null?void 0:s.wastage)||"",total:(s==null?void 0:s.total)||"",appId:1,createdOn:(s==null?void 0:s.createdOn)||new Date().toISOString(),createdBy:(s==null?void 0:s.createdBy)||d.empId,lastUpdatedBy:d.empId,lastUpdatedOn:new Date().toISOString(),repeatsInMtr:(s==null?void 0:s.repeatsInMtr)||""})},[s]);const{data:k}=Se(),[h,U]=o.useState(""),{data:w,refetch:r}=Oe(h,{skip:!h}),{data:B,refetch:H}=it(u.planningHeaderId,{skip:!u.planningHeaderId}),{data:X}=Ce(),[j,E]=o.useState([]),{enqueueSnackbar:Q}=ke();console.log("lookupData",X),o.useEffect(()=>{w&&(E(w.result),r())},[w]),o.useEffect(()=>{B&&i(B.result.map((n,x)=>({id:x,...n})))},[B,H]),console.log("designList",j),console.log("collectionData",k);const V=(k==null?void 0:k.result)||[],[p,f]=o.useState(!1),[N,W]=o.useState([]),[$,C]=o.useState([]),[S,J]=o.useState([]),[ne,ee]=o.useState([]),[le,ue]=o.useState([]),[P,T]=o.useState([]),[Y,ie]=o.useState([]),[_,ae]=o.useState([]);console.log("components:",S),console.log("Fabrications:",ne),console.log("colors:",le),console.log("uoms:",P),console.log("heads:",Y),console.log("lookupData",X),o.useEffect(()=>{if(X){const n=X.result[0];J(n.componentList),ue(n.colorList),ee(n.fabricList),ie(n.noOfHeadsList),T(n.uomList),W(n.planningTypeProcessList),C(n.operatingMachineList)}},[X]),o.useEffect(()=>{const n=async x=>{try{const F=await he.get(`https://gecxc.com:4041/api/PrePlanning/GetPrePlanningHeaderByDesignId?designId=${x}`);console.log(F.data),ae(F.data.result)}catch(F){console.error("Error fetching pre-planning lookup data:",F)}};u.designId&&n(u.designId)},[u.designId,u.planningHeaderId]),o.useEffect(()=>{const n=()=>{const D=parseFloat(u.repeats)||0,z=parseFloat(u.repeatSize)||0,se=(D*z).toFixed(2);return parseFloat(se).toLocaleString()};c(D=>({...D,totalFabric:n()}));const x=()=>{const z=(typeof u.totalFabric=="string"?parseFloat(u.totalFabric.replace(/,/g,"")):u.totalFabric)||0,se=parseFloat(u.shrinkage)||0,Ie=parseFloat(u.wastage)||0,Pe=(z*(100+(se+Ie))/100).toFixed(2);return parseFloat(Pe).toLocaleString()};c(D=>({...D,total:x()}));const F=()=>(parseFloat(u.repeats),(.9144*(parseFloat(u.repeatSize)||0)).toFixed(2));c(D=>({...D,repeatsInMtr:F()}));const Z=()=>{const D=parseFloat(u.repeats)||0;return((parseFloat(u.repeatsInMtr)||0)*D).toFixed(2)};c(D=>({...D,totalFabric:D.isSchiffili?Z():n()}))},[u.repeats,u.repeatSize,u.totalFabric,u.shrinkage,u.wastage,u.repeatsInMtr,u.isSchiffili]);const[ge,ce]=o.useState(!1);o.useState(!1);const A=n=>{const{name:x,value:F}=n.target;if(x==="collectionId"){const Z=V.find(D=>D.collectionId===parseInt(F));f(!0),U(F),c({...u,processType:"MultiHead",componentId:"",cuttingSize:"",colorId:"",fabricId:"",noOfHeads:0,operatingMachineId:0,repeats:"",repeatSize:"",uomId:"",totalFabric:"",shrinkage:"",wastage:"",total:"",collectionId:F,noOfDesigns:Z?Z.noOfDesigns:"",noOfColors:Z?Z.noOfColors:""})}else if(x==="designId"){const Z=j.find(D=>D.designId===parseInt(F));c({...u,processType:"MultiHead",componentId:"",cuttingSize:"",colorId:"",fabricId:"",noOfHeads:0,operatingMachineId:0,repeats:"",repeatSize:"",uomId:"",totalFabric:"",shrinkage:"",wastage:"",total:"",designId:F,baseColorId:Z?Z.colorId:"",baseColorName:Z?Z.colorName:""})}else if(x==="batchNo"){const Z=_.find(D=>D.batchNo===F);c({...u,componentId:"",processType:"MultiHead",cuttingSize:"",colorId:"",fabricId:"",noOfHeads:0,operatingMachineId:0,repeats:"",repeatSize:"",uomId:"",totalFabric:"",shrinkage:"",wastage:"",total:"",batchNo:F,planningHeaderId:Z?Z.planningHeaderId:""}),ce(!0),f(!1)}else c({...u,[x]:F})},[M,G]=o.useState({}),oe=async()=>{const n=te();if(Object.keys(n).length>0){G(n);return}try{const x={...u,totalFabric:parseFloat(u.totalFabric.replace(/,/g,"")),total:parseFloat(u.total.replace(/,/g,""))},F=await he.post("https://gecxc.com:4041/api/PrePlanning/SavePrePlanning",x);console.log("Data saved successfully:",F.data),console.log("Save response:",F.data),F.data.success?Q("Fabrication saved successfully!",{variant:"success",autoHideDuration:5e3}):(Q(`${F.data.message} !`,{variant:"error",autoHideDuration:5e3}),console.log("response.message",F.data.message)),c(Z=>({processType:"MultiHead",planningId:0,collectionId:Z.collectionId,designId:Z.designId,batchNo:Z.batchNo,planningHeaderId:Z.planningHeaderId,baseColorId:Z.baseColorId,baseColorName:Z.baseColorName,noOfDesigns:Z.noOfDesigns,noOfColors:Z.noOfColors,componentId:"",cuttingSize:"",colorId:"",fabricId:"",noOfHeads:0,operatingMachineId:0,repeats:"",repeatSize:"",uomId:"",totalFabric:"",shrinkage:"",wastage:"",total:"",appId:1,createdOn:new Date().toISOString(),createdBy:d.empId,lastUpdatedOn:new Date().toISOString(),lastUpdatedBy:d.empId,isSchiffili:!1,repeatsInMtr:""})),H()}catch(x){console.error("Error saving data:",x),Q("Pre Planning not saved successfully!",{variant:"error",autoHideDuration:5e3})}},te=()=>{const n={};return u.componentId||(n.componentId="componentId is required"),u.colorId||(n.colorId="colorId is required"),u.fabricId||(n.fabricId="fabricId is required"),u.cuttingSize||(n.cuttingSize="cuttingSize is required"),u.repeats||(n.repeats="repeats is required"),u.repeatSize||(n.repeatSize="repeatSize is required"),u.uomId||(n.uomId="uomId is required"),u.shrinkage||(n.shrinkage="shrinkage is required"),u.wastage||(n.wastage="wastage is required"),n};console.log("initialRows",m);const R=m.reduce((n,x)=>n+(x.totalFabric??0),0).toFixed(2),q=parseFloat(R).toLocaleString();console.log("localizedTotalFabric",q);const be=m.reduce((n,x)=>n+(x.total??0),0).toFixed(2),ye=parseFloat(be).toLocaleString(),v=[...m,{id:"TOTAL_FABRIC",label:"Total Fabric",totalFabric:q,total:ye}],O={sortable:!1,pinnable:!1,hideable:!1};console.log("rows",v);const K=[{field:"componentName",headerName:"Component",...O,colSpan:(n,x)=>{if(x.id==="TOTAL_FABRIC")return 7},valueGetter:(n,x)=>x.id==="TOTAL_FABRIC"?x.label:n},{field:"color",headerName:"Color",...O},{field:"cuttingSize",headerName:"Cutting Size",...O},{field:"fabric",headerName:"Fabrication",...O},{field:"noOfHeadName",headerName:"No. Of Heads",...O},{field:"repeats",headerName:"Repeats",valueGetter:n=>n.toLocaleString(),...O},{field:"repeatSize",headerName:"Repeat Size",valueGetter:n=>n.toLocaleString(),...O},{field:"totalFabric",headerName:"Total Fabric",valueGetter:n=>n.toLocaleString(),...O},{field:"uom",headerName:"UOM",colSpan:(n,x)=>{if(x.id==="TOTAL_FABRIC")return 2},valueGetter:(n,x)=>x.id==="TOTAL_FABRIC"?"OverAll Total":n},{field:"shrinkage",headerName:"Shrinkage %"},{field:"wastage",headerName:"Wastage %"},{field:"total",headerName:"Total",valueGetter:n=>n.toLocaleString(),colSpan:(n,x)=>{if(x.id==="TOTAL_FABRIC")return 2}}],b=u.processType==="Schiffili",I=({row:n,field:x})=>n.id==="TOTAL_FABRIC"&&(x==="componentName"||x==="uom")?"bold":"";console.log("batchList:",_);const g="https://gecxc.com:4041/api/PrePlanning/DeletePreplanningByPlanningId?PlanningId=",y=(n,x)=>{ce(!ge)};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"CardHeader",children:e.jsxs(pe,{variant:"outlined",children:[e.jsx(me,{className:"css-4rfrnx-MuiCardHeader-root",avatar:e.jsx(et,{}),title:"Pre Planning",titleTypographyProps:{style:{color:"white"}},children:" "}),e.jsxs(t,{container:!0,spacing:1,width:"Inherit",sx:{paddingY:2,paddingX:2},children:[e.jsxs(t,{item:!0,xs:12,md:2,children:[e.jsx(l,{fullWidth:!0,select:!0,label:"Select Collection",name:"collectionId",value:u.collectionId,onChange:A,size:"small",required:!0,InputLabelProps:{sx:{color:"black"}},children:V.map(n=>e.jsx(L,{value:n.collectionId,children:n.collectionName},n.collectionId))})," "]}),e.jsx(t,{item:!0,xs:12,md:2,children:e.jsx(l,{fullWidth:!0,select:!0,label:"Select Design",name:"designId",value:u.designId,onChange:A,size:"small",required:!0,InputLabelProps:{sx:{color:"black"}},children:j.map(n=>e.jsx(L,{value:n.designId,children:n.designNo},n.designId))})}),e.jsxs(t,{item:!0,xs:12,md:2,children:[e.jsx(l,{fullWidth:!0,select:!0,label:"Batch No.",name:"batchNo",value:u.batchNo,onChange:A,size:"small",required:!0,InputLabelProps:{sx:{color:"black"}},children:_.map(n=>e.jsx(L,{value:n.batchNo,children:n.batchNo},n.batchNo))})," "]}),e.jsx(t,{item:!0,xs:12,md:2,children:e.jsx(l,{label:"No of Design",fullWidth:!0,size:"small",focused:!0,name:"noOfDesigns",value:u.noOfDesigns,onChange:A,disabled:!0,sx:n=>({...u.noOfDesigns!==""&&{".css-4a5t8g-MuiInputBase-input-MuiOutlinedInput-input":{backgroundColor:"#c9c9c9 !important"}},"& .MuiInputBase-input.Mui-disabled":{WebkitTextFillColor:"black"},"& .MuiInputBase-root.Mui-disabled":{backgroundColor:"#f9f9f9"},"& .MuiOutlinedInput-root.Mui-disabled .MuiOutlinedInput-notchedOutline":{borderColor:"gray"},"& .MuiInputLabel-root.Mui-disabled":{color:"rgba(0, 0, 0, 0.87)"}}),InputLabelProps:{sx:{color:"black"}}})}),e.jsx(t,{item:!0,xs:12,md:2,children:e.jsx(l,{label:"No of Color",fullWidth:!0,size:"small",name:"noOfColors",value:u.noOfColors,onChange:A,disabled:!0,sx:n=>({...u.noOfColors!==""&&{".css-4a5t8g-MuiInputBase-input-MuiOutlinedInput-input":{backgroundColor:"#c9c9c9 !important"}},"& .MuiInputBase-input.Mui-disabled":{WebkitTextFillColor:"black"},"& .MuiInputBase-root.Mui-disabled":{backgroundColor:"#f9f9f9"},"& .MuiOutlinedInput-root.Mui-disabled .MuiOutlinedInput-notchedOutline":{borderColor:"gray"},"& .MuiInputLabel-root.Mui-disabled":{color:"rgba(0, 0, 0, 0.87)"}})})}),e.jsx(t,{item:!0,xs:12,md:2,children:e.jsx(l,{label:"Base Color",fullWidth:!0,size:"small",name:"baseColorName",value:u.baseColorName,onChange:A,disabled:!0,sx:n=>({...u.baseColorName!==""&&{".css-4a5t8g-MuiInputBase-input-MuiOutlinedInput-input":{backgroundColor:"#c9c9c9 !important"}},"& .MuiInputBase-input.Mui-disabled":{WebkitTextFillColor:"black"},"& .MuiInputBase-root.Mui-disabled":{backgroundColor:"#f9f9f9"},"& .MuiOutlinedInput-root.Mui-disabled .MuiOutlinedInput-notchedOutline":{borderColor:"gray"},"& .MuiInputLabel-root.Mui-disabled":{color:"rgba(0, 0, 0, 0.87)"}})})})]})]})}),e.jsxs(pe,{variant:"outlined",children:[e.jsx(me,{className:"MainCard",avatar:e.jsx(Je,{}),title:"Add Pre Planning",titleTypographyProps:{style:{color:"white"}},action:e.jsx(Me,{onClick:y,sx:{mt:"-18px"},children:e.jsx(Be,{style:{color:"white"}})}),sx:{display:"flex",alignItems:"center",justifyContent:"space-between"}}),e.jsxs(Ze,{expanded:ge,onChange:y,sx:{},children:[e.jsx(Ke,{expandIcon:e.jsx(Be,{}),"aria-controls":"panel1-content",id:"panel1-header",sx:{display:"none"}}),e.jsx($e,{children:e.jsxs(t,{container:!0,spacing:1,width:"Inherit",sx:{paddingY:2,paddingX:2},children:[e.jsxs(t,{item:!0,xs:12,md:2,children:[e.jsx(l,{fullWidth:!0,select:!0,label:"Process Type",name:"processType",value:u.processType,onChange:A,size:"small",required:!0,InputLabelProps:{sx:{color:"black"}},children:N.map(n=>e.jsx(L,{value:n.lookUpName,children:n.lookUpName},n.lookUpId))})," "]}),e.jsx(t,{item:!0,xs:12,md:2,children:e.jsx(Le,{fullWidth:!0,options:S,getOptionLabel:n=>n.lookUpName,value:S.find(n=>n.lookUpId===u.componentId)||null,onChange:(n,x)=>{A({target:{name:"componentId",value:x?x.lookUpId:""}})},renderOption:(n,x)=>{const{lookUpName:F}=x;return e.jsx("span",{...n,children:F})},renderInput:n=>e.jsx(l,{...n,label:"Select Component",size:"small",name:"componentId",value:u.componentId,required:!0,error:!!M.componentId,helperText:M.componentId,InputLabelProps:{sx:{color:"black"}},sx:{"& input":{backgroundColor:"white"}}}),PaperComponent:({children:n})=>e.jsx("div",{style:{backgroundColor:"white"},children:n})})}),e.jsxs(t,{item:!0,xs:12,md:2,children:[" ",e.jsx(Le,{fullWidth:!0,options:le,getOptionLabel:n=>n.lookUpName,value:le.find(n=>n.lookUpId===u.colorId)||null,onChange:(n,x)=>{A({target:{name:"colorId",value:x?x.lookUpId:""}})},renderInput:n=>e.jsx(l,{...n,label:"Color",size:"small",value:u.colorId,name:"colorId",required:!0,error:!!M.colorId,helperText:M.colorId,InputLabelProps:{sx:{color:"black"}},sx:{"& input":{backgroundColor:"white"}}}),PaperComponent:({children:n})=>e.jsx("div",{style:{backgroundColor:"white"},children:n})})]}),e.jsx(t,{item:!0,xs:12,md:2,children:e.jsx(l,{label:"Cutting Size",fullWidth:!0,size:"small",name:"cuttingSize",type:"number",value:u.cuttingSize,onChange:A,required:!0,error:!!M.cuttingSize,helperText:M.cuttingSize,InputLabelProps:{sx:{color:"black"}}})}),e.jsx(t,{item:!0,xs:12,md:2,children:e.jsx(Le,{fullWidth:!0,options:ne,getOptionLabel:n=>n.lookUpName,value:ne.find(n=>n.lookUpId===u.fabricId)||null,onChange:(n,x)=>{A({target:{name:"fabricId",value:x?x.lookUpId:""}})},renderInput:n=>e.jsx(l,{...n,label:"Fabrication",size:"small",name:"fabricId",value:u.fabricId,required:!0,error:!!M.fabricId,helperText:M.fabricId,InputLabelProps:{sx:{color:"black"}},sx:{"& input":{backgroundColor:"white"}}}),PaperComponent:({children:n})=>e.jsx("div",{style:{backgroundColor:"white"},children:n})})}),e.jsx(t,{item:!0,xs:12,md:2,children:b?e.jsx(l,{fullWidth:!0,select:!0,label:"Operating Machine",size:"small",name:"operatingMachineId",value:u.operatingMachineId,onChange:A,required:!0,InputLabelProps:{sx:{color:"black"}},children:$.map(n=>e.jsx(L,{value:n.lookUpId,children:n.lookUpName},n.lookUpId))}):e.jsx(l,{fullWidth:!0,select:!0,label:"No of Heads",size:"small",name:"noOfHeads",value:u.noOfHeads,onChange:A,required:!0,InputLabelProps:{sx:{color:"black"}},children:Y.map(n=>e.jsx(L,{value:n.lookUpId,children:n.lookUpName},n.lookUpId))})}),e.jsx(t,{item:!0,xs:12,md:2,children:e.jsx(l,{label:"Repeats",fullWidth:!0,size:"small",name:"repeats",type:"number",value:u.repeats,onChange:A,error:!!M.repeats,helperText:M.repeats,required:!0,InputLabelProps:{sx:{color:"black"}}})}),e.jsx(t,{item:!0,xs:12,md:2,children:e.jsx(l,{label:"Repeat Size",fullWidth:!0,type:"number",size:"small",name:"repeatSize",value:u.repeatSize,onChange:A,error:!!M.repeatSize,helperText:M.repeatSize,required:!0,InputLabelProps:{sx:{color:"black"}}})}),e.jsx(t,{item:!0,xs:12,md:2,children:e.jsx(l,{label:"Total Fabric",fullWidth:!0,size:"small",name:"totalFabric",value:u.totalFabric,onChange:A,InputLabelProps:{sx:{color:"black"}}})}),e.jsx(t,{item:!0,xs:12,md:2,children:e.jsx(l,{fullWidth:!0,select:!0,label:"UOM",type:"number",defaultValue:"",size:"small",name:"uomId",value:u.uomId,onChange:A,error:!!M.uomId,helperText:M.uomId,required:!0,disabled:u.isSchiffili,InputLabelProps:{sx:{color:"black"}},children:P.map(n=>e.jsx(L,{value:n.lookUpId,children:n.lookUpName},n.lookUpId))})}),e.jsx(t,{item:!0,xs:12,md:2,children:e.jsx(l,{label:"Shrinkage %",fullWidth:!0,size:"small",type:"number",name:"shrinkage",value:u.shrinkage,onChange:A,error:!!M.shrinkage,helperText:M.shrinkage,required:!0,InputLabelProps:{sx:{color:"black"}}})}),e.jsx(t,{item:!0,xs:12,md:2,children:e.jsx(l,{label:"Wastage %",fullWidth:!0,size:"small",type:"number",name:"wastage",value:u.wastage,onChange:A,error:!!M.wastage,helperText:M.wastage,required:!0,InputLabelProps:{sx:{color:"black"}}})}),e.jsx(t,{item:!0,xs:12,md:2,children:e.jsx(l,{label:"Total",fullWidth:!0,size:"small",name:"total",value:u.total,onChange:A,InputLabelProps:{sx:{color:"black"}}})}),e.jsx(t,{item:!0,xs:12,md:6,children:e.jsx(t,{container:!0,spacing:1,width:"Inherit",children:e.jsx(t,{item:!0,xs:12,md:4,children:e.jsx(l,{label:"repeat in mtr",fullWidth:!0,size:"small",name:"repeatsInMtr",disabled:!0,value:u.repeatsInMtr,onChange:A,sx:n=>({...u.repeatsInMtr!==""&&{".css-4a5t8g-MuiInputBase-input-MuiOutlinedInput-input":{backgroundColor:"#c9c9c9 !important"}},"& .MuiInputBase-input.Mui-disabled":{WebkitTextFillColor:"black"},"& .MuiInputBase-root.Mui-disabled":{backgroundColor:"#f9f9f9"},"& .MuiOutlinedInput-root.Mui-disabled .MuiOutlinedInput-notchedOutline":{borderColor:"gray"},"& .MuiInputLabel-root.Mui-disabled":{color:"rgba(0, 0, 0, 0.87)"}})})})})}),e.jsx(t,{item:!0,xs:12,textAlign:"right",children:e.jsx(re,{variant:"contained",size:"small",onClick:oe,children:"Save"})})]})})]})]}),e.jsx(t,{item:!0,xs:12,md:12,children:e.jsx(de,{sx:{height:1,width:"100%",marginTop:1,marginBottom:0}})}),e.jsxs(pe,{variant:"outlined",children:[e.jsx(me,{className:"MainCard",avatar:e.jsx(Ne,{}),title:"View",titleTypographyProps:{style:{color:"white"}}}),e.jsx(t,{sx:{paddingY:1,paddingX:1},children:e.jsx(t,{sx:{},item:!0,xs:12,children:p?e.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"},children:e.jsx("img",{src:ze,alt:"Loading",style:{width:200,height:200}})}):e.jsx(je,{iColumns:K,initialRows:v,setInitialData:a,deleteApi:g,deleteBy:"planningId",refetch:H,getCellClassName:I,setAccordionExpanded:ce,fileName:"PrePlanningList"})})})]})]})},Lt=At,Bt="/assets/roller-ezgif.com-instagif-CY-x4C-U.gif",Ft=()=>{const{user:d}=ve();console.log("user",d);const[s,a]=o.useState([]),[m,i]=o.useState({dpId:0,designId:"",batchNo:"",planningHeaderId:"",fabricId:"",colorId:"",color:"",processType:"",availableQty:"",Shrinkage:"",Wastage:"",outputQty:"",UOM:"",uomId:"",poPcs:"",baseColorName:"",createdBy:d.empId,createdOn:new Date().toISOString(),lastUpdatedOn:new Date().toISOString(),lastUpdatedBy:d.empId});o.useEffect(()=>{i({...m,dpId:s.dpId||0,fabricId:(s==null?void 0:s.fabricId)||"",colorId:(s==null?void 0:s.colorId)||"",color:(s==null?void 0:s.color)||"",processType:(s==null?void 0:s.processType)||"",availableQty:(s==null?void 0:s.availableQty)||"",Shrinkage:(s==null?void 0:s.shrinkage)||"",Wastage:(s==null?void 0:s.wastage)||"",outputQty:(s==null?void 0:s.outputQty)||0,UOM:(s==null?void 0:s.uom)||0,uomId:(s==null?void 0:s.uomId)||"",poPcs:(s==null?void 0:s.poPcs)||0,createdOn:(s==null?void 0:s.createdOn)||new Date().toISOString(),createdBy:(s==null?void 0:s.createdBy)||d.empId,lastUpdatedOn:new Date().toISOString(),lastUpdatedBy:d.empId})},[s]);const{enqueueSnackbar:u}=ke(),[c,k]=o.useState(!1);console.log("Dyeing form data to send",m);const{data:h}=Se(),[U,w]=o.useState(""),{data:r}=Ce(),{data:B,refetch:H}=Oe(U,{skip:!U}),{data:X,refetch:j}=Fe(m.designId,{skip:!m.designId}),{data:E}=dt({batchNo:m.planningHeaderId,processType:"Fabrication"},{skip:!m.planningHeaderId}),{data:Q}=ct({fabricId:m.fabricId,planningHeaderId:m.planningHeaderId},{skip:!m.fabricId||!m.planningHeaderId}),{data:V,refetch:p}=ut(m.planningHeaderId,{skip:!m.planningHeaderId}),[f,N]=o.useState([]),[W,$]=o.useState([]),[C,S]=o.useState([]),[J,ne]=o.useState([]),[ee,le]=o.useState([]),[ue,P]=o.useState([]);o.useState([]);const[T,Y]=o.useState(!1);console.log("batchList",W),console.log("formData",m),o.useEffect(()=>{B&&N(B.result)},[B]),o.useEffect(()=>{X&&$(X.result)},[X]),o.useEffect(()=>{E&&S(E.result)},[E]),o.useEffect(()=>{Q&&P(Q.result)},[Q]),o.useEffect(()=>{V&&le(V.result.map((v,O)=>({id:O,...v})))},[V,p]),o.useEffect(()=>{if(r){const v=r.result[0];ne(v.uomList)}},[r]);const ie=(h==null?void 0:h.result)||[],_=v=>{const{name:O,value:K}=v.target;if(O==="collectionId")ie.find(b=>b.collectionId===parseInt(K)),w(K),k(!0),i({...m,collectionId:K,designId:"",batchNo:"",planningHeaderId:"",fabricId:"",colorId:"",color:"",processType:"",availableQty:"",Shrinkage:"",Wastage:"",outputQty:"",UOM:"",uomId:"",poPcs:"",baseColorName:""});else if(O==="designId"){const b=f.find(I=>I.designId===parseInt(K));i({...m,designId:K,baseColorId:b?b.colorId:"",baseColorName:b?b.colorName:"",batchNo:"",planningHeaderId:"",fabricId:"",colorId:"",color:"",processType:"",availableQty:"",Shrinkage:"",Wastage:"",outputQty:"",UOM:"",uomId:"",poPcs:""})}else if(O==="batchNo"){const b=W.find(I=>I.batchNo===K);i({...m,batchNo:K,planningHeaderId:b?b.planningHeaderId:"",poPcs:b?b.poPcs:"",fabricId:"",colorId:"",color:"",processType:"",availableQty:"",Shrinkage:"",Wastage:"",outputQty:"",UOM:"",uomId:""}),Y(!0),k(!1)}else if(O==="fabricId")C.find(b=>b.fabricId===K),console.log("Selected Fabric:",C),i({...m,fabricId:K});else if(O==="ColorId"){const b=ue.find(I=>I.colorId===K.colorId);i({...m,ColorId:K.colorId,color:b.color,availableQty:b.total,UOM:b.uom,Shrinkage:b.shrinkage,Wastage:b.wastage})}else O==="processType"?i({...m,processType:K}):O==="vendorId"?i({...m,vendorId:K}):(i({...m,[O]:K}),ge(b=>({...b,[O]:""})))};o.useEffect(()=>{const v=()=>{const y=parseFloat(m.availableQty)||0,n=parseFloat(m.Shrinkage)||0,x=parseFloat(m.Wastage)||0;return(y*(100-(n+x))/100).toFixed(2)},O=()=>{const y=parseFloat(m.availableQty)||0,n=parseFloat(m.RatePerUOM)||0;return(y*n).toFixed(2)},K=(y,n)=>(y*(1+n/100)).toFixed(2),b=v(),I=O(),g=parseFloat(m.GST)||0;K(I,g),parseFloat(m.poPcs),i(y=>({...y,outputQty:b}))},[m.availableQty,m.Shrinkage,m.Wastage,m.RatePerUOM,m.GST,m.poPcs,m.UnitRatePerPo]);const[ae,ge]=o.useState({}),ce=async()=>{try{const v=await he.post("https://gecxc.com:4041/api/DyeingPrinting/SaveDyeingPrinting",m);console.log("Save response:",v.data),v.data.success?u("Fabrication saved successfully!",{variant:"success",autoHideDuration:5e3}):(u(`${v.data.message} !`,{variant:"error",autoHideDuration:5e3}),console.log("response.message",v.data.message)),i(O=>({designId:O.designId,planningHeaderId:O.planningHeaderId,batchNo:O.batchNo,dpId:0,fabricId:"",colorId:"",color:"",processType:"",availableQty:"",Shrinkage:"",Wastage:"",outputQty:"",UOM:"",uomId:"",poPcs:O.poPcs,baseColorName:"",createdOn:new Date().toISOString(),createdBy:d.empId,lastUpdatedOn:new Date().toISOString(),lastUpdatedBy:d.empId})),p()}catch(v){console.error("Error saving data:",v),u("Dyeing not saved successfully!",{variant:"error",autoHideDuration:5e3})}},A=[{value:"Dyeing",label:"Dyeing"},{value:"Printing",label:"Printing"}],[M,G]=o.useState({}),[oe,te]=o.useState(!1),R=v=>{G(v),te(!0)},q=()=>{te(!1),G({}),p()},be=[{field:"fabricName",headerName:"Fabric"},{field:"colorName",headerName:"Color"},{field:"processType",headerName:"Process Type"},{field:"uom",headerName:" UOM"},{field:"poPcs",headerName:" PO PCS."},{field:"availableQty",headerName:"Available Quantitity"},{field:"assignedQty",headerName:"Assigned Qty"},{field:"AddVendor",headerName:"Add Vendor",renderCell:v=>e.jsx("div",{style:{display:"flex",justifyContent:"space-around"},children:e.jsx(Me,{color:"primary",onClick:()=>R(v.row),children:e.jsx(Ge,{})})})}];return e.jsxs(e.Fragment,{children:[e.jsxs(pe,{variant:"outlined",children:[e.jsx(me,{className:"css-4rfrnx-MuiCardHeader-root",avatar:e.jsx(Te,{src:Bt,sx:{background:"transparent"}}),title:"Add Dyeing and Printing ",titleTypographyProps:{style:{color:"white"}}}),e.jsxs(t,{container:!0,spacing:1,width:"Inherit",sx:{paddingY:2,paddingX:2},children:[e.jsxs(t,{item:!0,xs:12,md:3,children:[e.jsx(l,{fullWidth:!0,select:!0,label:"Select Collection",name:"collectionId",value:U,onChange:_,size:"small",InputLabelProps:{sx:{color:"black"}},children:ie.map(v=>e.jsx(L,{value:v.collectionId,children:v.collectionName},v.collectionId))})," "]}),e.jsx(t,{item:!0,xs:12,md:3,children:e.jsx(l,{fullWidth:!0,select:!0,label:"Select Design",name:"designId",value:m.designId,onChange:_,size:"small",InputLabelProps:{sx:{color:"black"}},children:f.map(v=>e.jsx(L,{value:v.designId,children:v.designNo},v.designId))})}),e.jsxs(t,{item:!0,xs:12,md:3,children:[e.jsx(l,{fullWidth:!0,select:!0,label:"Batch No.",name:"batchNo",value:m.batchNo,onChange:_,size:"small",InputLabelProps:{sx:{color:"black"}},children:W.map(v=>e.jsx(L,{value:v.batchNo,children:v.batchNo},v.batchNo))})," "]}),e.jsx(t,{item:!0,xs:12,md:3,children:e.jsx(l,{label:"Base Color",fullWidth:!0,size:"small",name:"baseColorName",value:m.baseColorName,onChange:_,disabled:!0,sx:v=>({...m.repeatsInMtr!==""&&{".css-4a5t8g-MuiInputBase-input-MuiOutlinedInput-input":{backgroundColor:"#c9c9c9 !important"}},"& .MuiInputBase-input.Mui-disabled":{WebkitTextFillColor:"black"},"& .MuiInputBase-root.Mui-disabled":{backgroundColor:"#f9f9f9"},"& .MuiOutlinedInput-root.Mui-disabled .MuiOutlinedInput-notchedOutline":{borderColor:"gray"},"& .MuiInputLabel-root.Mui-disabled":{color:"rgba(0, 0, 0, 0.87)"}})})})," ",e.jsxs(t,{item:!0,xs:12,md:12,children:[e.jsx(de,{color:"#921e22",sx:{height:2,width:"100%"}})," "]}),e.jsx(t,{item:!0,xs:12,md:3,children:e.jsx(l,{fullWidth:!0,select:!0,label:"Select Fabric",defaultValue:"",size:"small",name:"fabricId",value:m.fabricId,onChange:_,error:!!ae.fabricId,helperText:ae.fabricId,required:!0,InputLabelProps:{sx:{color:"black"}},children:C.map(v=>e.jsx(L,{value:v.fabricId,children:v.fabric},v.fabricId))})}),e.jsx(t,{item:!0,xs:12,md:3,children:e.jsx(yt,{fullWidth:!0,options:ue,getOptionLabel:v=>v.color||"",renderInput:v=>e.jsx(l,{...v,label:"Color",name:"colorId",size:"small",error:!!ae.colorId,helperText:ae.colorId,required:!0,InputLabelProps:{sx:{color:"black"}}}),value:ue.find(v=>v.colorId===m.colorId)||null,onChange:(v,O)=>{i(K=>({...K,colorId:O?O.colorId:"",color:O?O.color:"",availableQty:O?O.total:"",UOM:O?O.uom:"",uomId:O?O.uomId:"",Shrinkage:O?O.shrinkage:"",Wastage:O?O.wastage:""}))}})}),e.jsx(t,{item:!0,xs:12,md:3,children:e.jsx(l,{fullWidth:!0,select:!0,label:"Process Type",size:"small",name:"processType",value:m.processType,onChange:_,error:!!ae.processType,helperText:ae.processType,required:!0,InputLabelProps:{sx:{color:"black"}},children:A.map(v=>e.jsx(L,{value:v.value,children:v.label},v.value))})}),e.jsx(t,{item:!0,xs:12,md:3,children:e.jsx(l,{label:"Po Pcs",fullWidth:!0,size:"small",name:"poPcs",value:m.poPcs,onChange:_,disabled:!0,sx:v=>({...m.poPcs!==""&&{".css-4a5t8g-MuiInputBase-input-MuiOutlinedInput-input":{backgroundColor:"#c9c9c9 !important"}},"& .MuiInputBase-input.Mui-disabled":{WebkitTextFillColor:"black"},"& .MuiInputBase-root.Mui-disabled":{backgroundColor:"#f9f9f9"},"& .MuiOutlinedInput-root.Mui-disabled .MuiOutlinedInput-notchedOutline":{borderColor:"gray"},"& .MuiInputLabel-root.Mui-disabled":{color:"rgba(0, 0, 0, 0.87)"}})})}),e.jsx(t,{item:!0,xs:12,md:1.5,children:e.jsx(l,{label:"UOM",fullWidth:!0,size:"small",name:"UOM",value:m.UOM,onChange:_,InputLabelProps:{sx:{color:"black"}}})}),e.jsx(t,{item:!0,xs:12,md:1.5,children:e.jsx(l,{label:"availableQty",fullWidth:!0,size:"small",type:"number",name:"availableQty",value:m.availableQty,onChange:_,disabled:!0,sx:v=>({...m.availableQty!==""&&{".css-4a5t8g-MuiInputBase-input-MuiOutlinedInput-input":{backgroundColor:"#c9c9c9 !important"}},"& .MuiInputBase-input.Mui-disabled":{WebkitTextFillColor:"black"},"& .MuiInputBase-root.Mui-disabled":{backgroundColor:"#f9f9f9"},"& .MuiOutlinedInput-root.Mui-disabled .MuiOutlinedInput-notchedOutline":{borderColor:"gray"},"& .MuiInputLabel-root.Mui-disabled":{color:"rgba(0, 0, 0, 0.87)"}})})}),e.jsx(t,{item:!0,xs:12,md:9,sx:{marginTop:2},textAlign:"right",children:e.jsx(re,{variant:"contained",color:"primary",size:"small",onClick:ce,children:"Save"})})]})]}),e.jsx(de,{color:"#cc8587",sx:{height:1,width:"100%",mt:2}})," ",e.jsx(t,{item:!0,xs:12,md:12,children:e.jsx(de,{sx:{height:1,width:"100%",marginTop:1,marginBottom:0}})}),e.jsxs(pe,{variant:"outlined",children:[e.jsx(me,{className:"css-4rfrnx-MuiCardHeader-root",avatar:e.jsx(Ne,{}),title:"View Dyeing ",titleTypographyProps:{style:{color:"white"}}})," ",e.jsx(t,{container:!0,spacing:2,width:"Inherit",sx:{paddingY:2,paddingX:2},children:e.jsxs(t,{item:!0,xs:12,md:12,paddingTop:1,children:[c?e.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"},children:e.jsx("img",{src:ze,alt:"Loading",style:{width:200,height:200}})}):e.jsx(je,{iColumns:be,initialRows:ee,setInitialData:a,deleteApi:"https://gecxc.com:4041/api/DyeingPrinting/DeleteDyeingPrintingById?DPId=",deleteBy:"dpId",refetch:p,setAccordionExpanded:Y,fileName:"Dyeing&PrintingList"}),e.jsxs(He,{open:oe,onClose:q,fullWidth:!0,maxWidth:"xl",children:[e.jsxs(Qe,{sx:{backgroundColor:"#A11F23",color:"#ffffff",display:"flex",justifyContent:"space-between",alignItems:"center",paddingX:"24px",paddingY:"4px"},children:[e.jsx(fe,{variant:"h4",component:"div",color:"#ffffff",gutterBottom:!0,fontSize:20,fontWeight:2,fontStyle:"normal",children:"Assign Vendors "}),e.jsx(Me,{onClick:q,sx:{color:"#ffffff"},children:e.jsx(Ee,{})})]}),e.jsxs(qe,{children:[e.jsx(Ue,{id:"alert-dialog-slide-description"}),e.jsx(kt,{initialFormData:M,setInitialFormData:G,refetchDyeingPrintingData:p,handleClickOpen:R})]})]})]})})]})]})},Tt=Ft,tt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAACXBIWXMAAAsTAAALEwEAmpwYAAADr0lEQVR4nNXXaciVVRAH8Kv1Jtoi5psFZZYUtoimhUVlaJHZghK2UBFCtGkbZdgiBG1GHyowaaEdWogWElvMFjJpw4oWwrJsVetDtNNevxjeuXW8PPe991rvh/5w4TznnDkzZ87Mf+bWav8H4Dgcgc9wfcPanViFidioL5Rvj2/wIqbgCyzA3XgKH+BI/+DWijMGpYEjO1U+FH8Uh++Jj6yPNzG5YW5wccYxWItF6anwWP9OjJiE7/FuYcCTeDnHjQYsLWR3w8cYi/OxP57AzE49cSGewzgswfJ0/0u4HwfgWYyq3w5deBXH4wXchHU4GgvbVdwPR+EVPI1NMCDesviFos3SqIiTaSl7BW5Pw5/Ho3gYl2Nuu8G3NG+8X85tgcMxCxfhLBxWf/N08bJU+h52xRrciGdwdj7bsFbKx+fbnZTfe+cNflGNX/EQJqQ3Pi+MPgN3pAd/x8GtlO+BT/I2A1P4T+0hMuYdzC/Om56XCW/NyOCt5gs9Lo5oPxBD8u07xesZK5vjtjRqXKEj0vGEZgYsxGXYOKO8U/yE3ZN0PsSVuCHOLHTsgxVVykdmgAzKAGuFryvmLsDVBXnF+w9OCt+60BXcMarRgBA8D91Jvc2URrqNSZkJ+f1dUvRbDfu/wqbpiXmFrluCIUvlke+rsS3OaaJ8WUmxhewO+LYXT52KneLWhcx167EhRtQ3JKNVYUqTuAkmfDBStoncI7kvMmvLHAcdTywPORT35rjqbdfWySPzfDF+wAPF/Hb4skJ2Xa6HzL45fiwCvTRgJq7NvK/CmcXeuQ1rpxdrF1fIBvn0z5ScXuXFGk7Md4nbVeGUYu8lDWvnFmtzKmR/C+JpZcA03JXjqoBaWfD9VplGkqjq890VvUJgTfHuezUzYMdgsBxHRavCpAaZoQ3fQblVWJLrK0suaDSgXwbakCSTKkQp7WoiP6AX5pyVJPd3GjYzYgFmZzT/2OSwVdkLblOU7PuauF4+Z3fGxqWtDBiblawrWbE3hIFv4OcW++Ylta9uqyHVU3rnpNBr/h2WZ1WMrLmmpfJABEnW7uD44dlybwjCk8OyWX0/YqvWLvSUy3jTXbIt77QsL8q+YnReZnTbyuvA1OTuqZkhMyoqXSNWRH+Y8sem8sm1DYWehvLtjPrhObdzZspVuDnL7GnBI4XMPUlQIzZYeR3ZGc1ObzyeFW981viByRtjsttdnO3cyRF8tf8Serj8oPhjmu11tNqfZnpFzz8fh/TJn9O+xl9lMwg6mBWmPgAAAABJRU5ErkJggg==",zt=()=>{const{user:d}=ve(),{enqueueSnackbar:s}=ke(),[a,m]=o.useState([]),[i,u]=o.useState({schiffiliId:0,designId:"",planningHeaderId:0,batchNo:"",componentId:"",poPcs:"",baseColorName:"",fabricId:"",vendorId:"",colorId:"",availableQty:"",thaanQty:0,operatingMachineId:0,operatingMachine:"",workingHeadId:0,cuttingSize:"",rate:"",costPerComponent:"",totalEmbroidry:0,noOfItemPerThaan:0,noOfStichesPerYard:0,amountPerYard:0,totalPcs:0,laserCut:!1,laserCutRate:0,pcsForLaserCut:0,totalAmount:0,createdBy:d.empId,createdOn:new Date().toISOString(),lastUpdatedOn:new Date().toISOString(),lastUpdatedBy:d.empId});o.useEffect(()=>{u({schiffiliId:a.schiffiliId||0,designId:(a==null?void 0:a.designId)||"",planningHeaderId:(a==null?void 0:a.planningHeaderId)||0,batchNo:(a==null?void 0:a.batchNo)||"",componentId:(a==null?void 0:a.componentId)||"",poPcs:(a==null?void 0:a.poPcs)||"",baseColorName:(a==null?void 0:a.baseColorName)||"",fabricId:(a==null?void 0:a.fabricId)||"",vendorId:(a==null?void 0:a.vendorId)||"",colorId:(a==null?void 0:a.colorId)||"",availableQty:(a==null?void 0:a.availableQty)||"",thaanQty:(a==null?void 0:a.thaanQty)||0,operatingMachineId:(a==null?void 0:a.operatingMachineId)||0,operatingMachine:(a==null?void 0:a.operatingMachine)||"",workingHeadId:(a==null?void 0:a.workingHeadId)||0,cuttingSize:(a==null?void 0:a.cuttingSize)||"",rate:(a==null?void 0:a.rate)||"",costPerComponent:(a==null?void 0:a.costPerComponent)||"",totalEmbroidry:(a==null?void 0:a.totalEmbroidry)||0,noOfItemPerThaan:(a==null?void 0:a.noOfItemPerThaan)||0,noOfStichesPerYard:(a==null?void 0:a.noOfStichesPerYard)||0,amountPerYard:(a==null?void 0:a.amountPerYard)||0,totalPcs:(a==null?void 0:a.totalPcs)||0,laserCut:(a==null?void 0:a.laserCut)||!1,laserCutRate:(a==null?void 0:a.laserCutRate)||0,pcsForLaserCut:(a==null?void 0:a.pcsForLaserCut)||0,totalAmount:(a==null?void 0:a.totalAmount)||0,createdOn:(a==null?void 0:a.createdOn)||new Date().toISOString(),createdBy:(a==null?void 0:a.createdBy)||d.empId,lastUpdatedOn:new Date().toISOString(),lastUpdatedBy:d.empId})},[a]);const[c,k]=o.useState(!1),h=(b,I)=>{k(!c)},[U,w]=o.useState(!1),{data:r}=Se(),[B,H]=o.useState(""),{data:X}=Ce(),{data:j,refetch:E}=Oe(B,{skip:!B}),{data:Q,refetch:V}=Fe(i.designId,{skip:!i.designId}),{data:p}=we({batchNo:i.planningHeaderId,componentId:i.componentId},{skip:!i.planningHeaderId||!i.componentId}),{data:f}=We({batchNo:i.planningHeaderId,componentId:i.componentId,fabricId:i.fabricId},{skip:!i.planningHeaderId||!i.componentId||!i.fabricId}),{data:N,refetch:W}=pt(i.planningHeaderId,{skip:!i.planningHeaderId}),{data:$}=Re(i.planningHeaderId,{skip:!i.planningHeaderId});console.log("formData.planningHeaderId",i.planningHeaderId),console.log("collectionData",r),console.log("schiffliList",N);const[C,S]=o.useState([]),[J,ne]=o.useState([]),[ee,le]=o.useState([]),[ue,P]=o.useState([]),[T,Y]=o.useState([]),[ie,_]=o.useState([]),[ae,ge]=o.useState([]),[ce,A]=o.useState([]),[M,G]=o.useState([]);o.useEffect(()=>{j&&S(j.result)},[j]),o.useEffect(()=>{Q&&ne(Q.result)},[Q]),o.useEffect(()=>{p&&le(p.result)},[p]),o.useEffect(()=>{f&&ge(p.result)},[f]),o.useEffect(()=>{$&&G($.result)},[$]),o.useEffect(()=>{N&&A(N.result.map((b,I)=>({id:I,...b})))},[N,W]),o.useEffect(()=>{if(X){const b=X.result[0];P(b.vendorList),Y(b.operatingMachineList),_(b.workingHeadList)}},[X]),console.log("initialRows",ce);const oe=(r==null?void 0:r.result)||[];o.useEffect(()=>{const b=()=>{const x=parseFloat(i.thaanQty)||0,F=parseFloat(i.operatingMachine)||0;return(x*F).toFixed(2)};u(x=>({...x,totalEmbroidry:b()}));const I=()=>{const x=parseFloat(i.thaanQty)||0,F=parseFloat(i.noOfStichesPerYard)||0;return(x*F).toFixed(2)};u(x=>({...x,totalPcs:I()}));const g=()=>{const x=parseFloat(i.noOfStichesPerYard)||0,F=parseFloat(i.rate)||0;return(x/1e3*F).toFixed(2)};u(x=>({...x,amountPerYard:g()}));const y=()=>{const x=parseFloat(i.totalAmount)||0,F=parseFloat(i.totalPcs)||0;return(x/F).toFixed(2)};u(x=>({...x,costPerComponent:y()}));const n=()=>{const x=parseFloat(i.amountPerYard)||0,F=parseFloat(i.totalEmbroidry)||0,Z=parseFloat(i.laserCutRate)||0,D=parseFloat(i.pcsForLaserCut)||0;return(x*F+D*Z).toFixed(2)};u(x=>({...x,totalAmount:n()}))},[i.thaanQty,i.operatingMachine,i.noOfStichesPerYard,i.rate,i.totalAmount,i.totalPcs,i.amountPerYard,i.totalEmbroidry,i.laserCutRate,i.pcsForLaserCut]);const te=b=>{const{name:I,checked:g}=b.target;u(y=>({...y,[I]:g}))},R=b=>{const{name:I,value:g}=b.target;if(I==="collectionId")oe.find(y=>y.collectionId===parseInt(g)),H(g),w(!0),u({...i,collectionId:g,designId:"",planningHeaderId:0,batchNo:"",componentId:"",poPcs:"",baseColorName:"",fabricId:"",vendorId:"",colorId:"",availableQty:"",thaanQty:0,operatingMachineId:0,operatingMachine:"",workingHeadId:0,cuttingSize:"",rate:"",costPerComponent:"",totalEmbroidry:0,noOfItemPerThaan:0,noOfStichesPerYard:0,amountPerYard:0,totalPcs:0,laserCut:!1,laserCutRate:0,pcsForLaserCut:0,totalAmount:0});else if(I==="designId"){const y=C.find(n=>n.designId===parseInt(g));u({...i,designId:g,baseColorId:y?y.colorId:"",baseColorName:y?y.colorName:"",planningHeaderId:0,batchNo:"",componentId:"",poPcs:"",fabricId:"",vendorId:"",colorId:"",availableQty:"",thaanQty:0,operatingMachineId:0,operatingMachine:"",workingHeadId:0,cuttingSize:"",rate:"",costPerComponent:"",totalEmbroidry:0,noOfItemPerThaan:0,noOfStichesPerYard:0,amountPerYard:0,totalPcs:0,laserCut:!1,laserCutRate:0,pcsForLaserCut:0,totalAmount:0})}else if(I==="batchNo"){const y=J.find(n=>n.batchNo===g);u({...i,batchNo:g,planningHeaderId:y?y.planningHeaderId:"",poPcs:y?y.poPcs:"",componentId:"",fabricId:"",vendorId:"",colorId:"",availableQty:"",thaanQty:0,operatingMachineId:0,operatingMachine:"",workingHeadId:0,cuttingSize:"",rate:"",costPerComponent:"",totalEmbroidry:0,noOfItemPerThaan:0,noOfStichesPerYard:0,amountPerYard:0,totalPcs:0,laserCut:!1,laserCutRate:0,pcsForLaserCut:0,totalAmount:0}),k(!0),w(!1)}else if(I==="colorId"){const y=ae.find(n=>n.colorId===g);u({...i,colorId:g,availableQty:y?y.total:"",cuttingSize:y?y.cuttingSize:"",repeats:y?y.repeats:""})}else if(I==="operatingMachineId"){const y=T.find(n=>n.lookUpId===g);u({...i,operatingMachineId:g,operatingMachine:y?y.lookUpName:""})}else u({...i,[I]:g})};console.log("colors",ae);const[q,be]=o.useState({}),ye=async()=>{const b=v();if(Object.keys(b).length>0){be(b);return}try{const I=await he.post("https://gecxc.com:4041/api/Schiffli/SaveSchiffili",i);console.log("Save response:",I.data),I.data.success?s("Fabrication saved successfully!",{variant:"success",autoHideDuration:5e3}):(s(`${I.data.message} !`,{variant:"error",autoHideDuration:5e3}),console.log("response.message",I.data.message)),u(g=>({designId:g.designId,planningHeaderId:g.planningHeaderId,batchNo:g.batchNo,baseColorName:g.baseColorName,schiffiliId:0,componentId:"",poPcs:g.poPcs,fabricId:"",vendorId:"",colorId:"",availableQty:"",thaanQty:0,operatingMachineId:0,operatingMachine:"",workingHeadId:0,cuttingSize:"",rate:"",costPerComponent:"",totalEmbroidry:0,noOfItemPerThaan:0,noOfStichesPerYard:0,amountPerYard:0,totalPcs:0,laserCut:!1,laserCutRate:0,pcsForLaserCut:0,totalAmount:0,createdOn:new Date().toISOString(),createdBy:d.empId,lastUpdatedOn:new Date().toISOString(),lastUpdatedBy:d.empId})),W()}catch(I){console.error("Error saving data:",I),s("Dyeing not saved successfully!",{variant:"error",autoHideDuration:5e3})}},v=()=>{const b={};return i.fabricId||(b.fabricId="fabricId is required"),i.colorId||(b.colorId="colorId is required"),i.vendorId||(b.vendorId="vendorId is required"),i.componentId||(b.componentId="componentId is required"),i.thaanQty||(b.thaanQty="thaanQty is required"),i.workingHeadId||(b.workingHeadId="workingHeadId is required"),i.rate||(b.rate="rate is required"),i.operatingMachineId||(b.operatingMachineId="operatingMachineId is required"),i.noOfStichesPerYard||(b.noOfStichesPerYard="noOfStichesPerYard is required"),i.noOfItemPerThaan||(b.noOfItemPerThaan="noOfItemPerThaan is required"),b};console.log("formData",i);const O=[{field:"componentName",headerName:"Component"},{field:"fabricName",headerName:"Fabric"},{field:"vendorName",headerName:"Vendor"},{field:"colourName",headerName:"Color"},{field:"thaanQty",headerName:"Thaan Quantity"},{field:"availableQty",headerName:"Available Quantitity"},{field:"operatingMachineName",headerName:"Operating Machine"},{field:"noOfHeadsName",headerName:"Working Head"},{field:"cuttingSize",headerName:"Cutting Size"},{field:"rate",headerName:"Rate"},{field:"noOfStichesPerYard",headerName:"No. Of Stiches Per Yard"},{field:"noOfItemPerThaan",headerName:"No. Of Item Per Thaan"},{field:"totalEmbroidry",headerName:"Total Embroidry"},{field:"amountPerYard",headerName:"Amount Per Yard"},{field:"totalPcs",headerName:"Total Pcs"},{field:"totalAmount",headerName:"Total Amount"},{field:"costPerComponent",headerName:"Cost Per Component"},{field:"laserCutRate",headerName:"LaserCut Rate"},{field:"pcsForLaserCut",headerName:"Pcs.For Laser Cut"}];return e.jsxs(e.Fragment,{children:[e.jsxs(pe,{variant:"outlined",children:[e.jsx(me,{className:"css-4rfrnx-MuiCardHeader-root",avatar:e.jsx(Te,{src:tt,sx:{background:"transparent"}}),title:"Schiffli ",titleTypographyProps:{style:{color:"white"}}}),e.jsxs(t,{container:!0,spacing:1,width:"Inherit",sx:{paddingY:2,paddingX:2},children:[e.jsxs(t,{item:!0,xs:12,md:3,children:[e.jsx(l,{fullWidth:!0,select:!0,label:"Select Collection",name:"collectionId",value:B,onChange:R,size:"small",InputLabelProps:{sx:{color:"black"}},children:oe.map(b=>e.jsx(L,{value:b.collectionId,children:b.collectionName},b.collectionId))})," "]}),e.jsx(t,{item:!0,xs:12,md:3,children:e.jsx(l,{fullWidth:!0,select:!0,label:"Select Design",name:"designId",value:i.designId,onChange:R,size:"small",InputLabelProps:{sx:{color:"black"}},children:C.map(b=>e.jsx(L,{value:b.designId,children:b.designNo},b.designId))})}),e.jsxs(t,{item:!0,xs:12,md:3,children:[e.jsx(l,{fullWidth:!0,select:!0,label:"Batch No.",name:"batchNo",value:i.batchNo,onChange:R,size:"small",InputLabelProps:{sx:{color:"black"}},children:J.map(b=>e.jsx(L,{value:b.batchNo,children:b.batchNo},b.batchNo))})," "]}),e.jsxs(t,{item:!0,xs:12,md:3,children:[e.jsx(l,{fullWidth:!0,select:!0,label:"Components",name:"componentId",value:i.componentId,onChange:R,size:"small",required:!0,error:!!q.componentId,helperText:q.componentId,InputLabelProps:{sx:{color:"black"}},children:M.map(b=>e.jsx(L,{value:b.componentId,children:b.componentName},b.componentId))})," "]}),e.jsx(t,{item:!0,xs:12,md:3,children:e.jsx(l,{label:"Base Color",fullWidth:!0,size:"small",name:"baseColorName",value:i.baseColorName,onChange:R,disabled:!0,InputLabelProps:{sx:{color:"black"}},sx:b=>({...i.baseColorName!==""&&{".css-4a5t8g-MuiInputBase-input-MuiOutlinedInput-input":{backgroundColor:"#c9c9c9 !important"}},"& .MuiInputBase-input.Mui-disabled":{WebkitTextFillColor:"black"},"& .MuiInputBase-root.Mui-disabled":{backgroundColor:"#f9f9f9"},"& .MuiOutlinedInput-root.Mui-disabled .MuiOutlinedInput-notchedOutline":{},"& .MuiInputLabel-root.Mui-disabled":{color:"rgba(0, 0, 0, 0.87)"}})})})]})]}),e.jsx(de,{color:"#cc8587",sx:{height:1,width:"100%",mt:2}}),e.jsxs(pe,{variant:"outlined",children:[e.jsx(me,{className:"css-4rfrnx-MuiCardHeader-root",avatar:e.jsx(Je,{}),title:"Add Schiffli ",titleTypographyProps:{style:{color:"white"}},action:e.jsx(Me,{onClick:h,sx:{mt:"-18px"},children:e.jsx(Be,{style:{color:"white"}})}),sx:{display:"flex",alignItems:"center",justifyContent:"space-between"}})," ",e.jsxs(Ze,{expanded:c,onChange:h,sx:{},children:[e.jsx(Ke,{expandIcon:e.jsx(Be,{}),"aria-controls":"panel1-content",id:"panel1-header",sx:{display:"none"}}),e.jsx($e,{children:e.jsxs(t,{container:!0,spacing:1,width:"Inherit",sx:{paddingY:2,paddingX:2},children:[e.jsx(t,{item:!0,xs:12,md:3,children:e.jsx(l,{fullWidth:!0,select:!0,label:"Select Fabric",defaultValue:"",size:"small",name:"fabricId",value:i.fabricId,onChange:R,required:!0,error:!!q.fabricId,helperText:q.fabricId,InputLabelProps:{sx:{color:"black"}},children:ee.map(b=>e.jsx(L,{value:b.fabricId,children:b.fabric},b.fabricId))})}),e.jsx(t,{item:!0,xs:12,md:3,children:e.jsx(l,{fullWidth:!0,select:!0,label:"Vendors",defaultValue:"",size:"small",name:"vendorId",value:i.vendorId,onChange:R,required:!0,error:!!q.vendorId,helperText:q.vendorId,InputLabelProps:{sx:{color:"black"}},children:ue.map(b=>e.jsx(L,{value:b.lookUpId,children:b.lookUpName},b.lookUpId))})}),e.jsx(t,{item:!0,xs:12,md:3,children:e.jsx(l,{fullWidth:!0,select:!0,label:"Color",size:"small",name:"colorId",value:i.colorId,onChange:R,required:!0,error:!!q.colorId,helperText:q.colorId,InputLabelProps:{sx:{color:"black"}},children:ae.map(b=>e.jsx(L,{value:b.colorId,children:b.color},b.colorId))})}),e.jsx(t,{item:!0,xs:12,md:1.5,children:e.jsx(l,{label:"Po Pcs",fullWidth:!0,size:"small",name:"poPcs",value:i.poPcs,disabled:!0,onChange:R,sx:b=>({...i.poPcs!==""&&{".css-4a5t8g-MuiInputBase-input-MuiOutlinedInput-input":{backgroundColor:"#c9c9c9 !important"}},"& .MuiInputBase-input.Mui-disabled":{WebkitTextFillColor:"black"},"& .MuiInputBase-root.Mui-disabled":{backgroundColor:"#f9f9f9"},"& .MuiOutlinedInput-root.Mui-disabled .MuiOutlinedInput-notchedOutline":{},"& .MuiInputLabel-root.Mui-disabled":{color:"rgba(0, 0, 0, 0.87)"}}),InputLabelProps:{sx:{color:"black"}}})}),e.jsx(t,{item:!0,xs:12,md:1.5,children:e.jsx(l,{label:"Available Quantity",fullWidth:!0,size:"small",name:"availableQty",value:i.availableQty,onChange:R,sx:b=>({...i.availableQty!==""&&{".css-4a5t8g-MuiInputBase-input-MuiOutlinedInput-input":{backgroundColor:"#c9c9c9 !important"}},"& .MuiInputBase-input.Mui-disabled":{WebkitTextFillColor:"black"},"& .MuiInputBase-root.Mui-disabled":{backgroundColor:"#f9f9f9"},"& .MuiOutlinedInput-root.Mui-disabled .MuiOutlinedInput-notchedOutline":{},"& .MuiInputLabel-root.Mui-disabled":{color:"rgba(0, 0, 0, 0.87)"}}),InputLabelProps:{sx:{color:"black"}}})}),e.jsx(t,{item:!0,xs:12,md:1.5,children:e.jsx(l,{label:"Thaan Quantity",fullWidth:!0,type:"number",size:"small",name:"thaanQty",value:i.thaanQty,onChange:R,required:!0,error:!!q.thaanQty,helperText:q.thaanQty,InputLabelProps:{sx:{color:"black"}}})}),e.jsx(t,{item:!0,xs:12,md:1.5,children:e.jsx(l,{fullWidth:!0,select:!0,label:"operatingMachineId",defaultValue:"",size:"small",name:"operatingMachineId",value:i.operatingMachineId,onChange:R,required:!0,error:!!q.operatingMachineId,helperText:q.operatingMachineId,InputLabelProps:{sx:{color:"black"}},children:T.map(b=>e.jsx(L,{value:b.lookUpId,children:b.lookUpName},b.lookUpId))})}),e.jsx(t,{item:!0,xs:12,md:1.5,children:e.jsx(l,{fullWidth:!0,select:!0,label:"workingHeadId",defaultValue:"",size:"small",name:"workingHeadId",value:i.workingHeadId,onChange:R,required:!0,error:!!q.workingHeadId,helperText:q.workingHeadId,InputLabelProps:{sx:{color:"black"}},children:ie.map(b=>e.jsx(L,{value:b.lookUpId,children:b.lookUpName},b.lookUpId))})}),e.jsx(t,{item:!0,xs:12,md:1.5,children:e.jsx(l,{label:"Cutting Size",fullWidth:!0,type:"number",size:"small",name:"cuttingSize",value:i.cuttingSize,onChange:R,sx:b=>({...i.cuttingSize!==""&&{".css-4a5t8g-MuiInputBase-input-MuiOutlinedInput-input":{backgroundColor:"#c9c9c9 !important"}},"& .MuiInputBase-input.Mui-disabled":{WebkitTextFillColor:"black"},"& .MuiInputBase-root.Mui-disabled":{backgroundColor:"#f9f9f9"},"& .MuiOutlinedInput-root.Mui-disabled .MuiOutlinedInput-notchedOutline":{},"& .MuiInputLabel-root.Mui-disabled":{color:"rgba(0, 0, 0, 0.87)"}}),InputLabelProps:{sx:{color:"black"}}})}),e.jsx(t,{item:!0,xs:12,md:1.5,children:e.jsx(l,{label:"Rate",type:"number",fullWidth:!0,size:"small",name:"rate",value:i.rate,onChange:R,required:!0,error:!!q.rate,helperText:q.rate,InputLabelProps:{sx:{color:"black"}}})}),e.jsx(t,{item:!0,xs:12,md:1.5,children:e.jsx(l,{label:"No. Of Stiches Per Yard",fullWidth:!0,type:"number",size:"small",name:"noOfStichesPerYard",value:i.noOfStichesPerYard,onChange:R,required:!0,error:!!q.noOfStichesPerYard,helperText:q.noOfStichesPerYard,InputLabelProps:{sx:{color:"black"}}})}),e.jsx(t,{item:!0,xs:12,md:1.5,children:e.jsx(l,{label:"No. Of Items Per Thaan",fullWidth:!0,size:"small",type:"number",name:"noOfItemPerThaan",value:i.noOfItemPerThaan,onChange:R,required:!0,error:!!q.noOfItemPerThaan,helperText:q.noOfItemPerThaan,InputLabelProps:{sx:{color:"black"}}})}),e.jsx(t,{item:!0,xs:12,md:1.5,children:e.jsx(l,{label:"Total Embroidry",fullWidth:!0,size:"small",name:"totalEmbroidry",type:"number",value:i.totalEmbroidry,onChange:R,InputLabelProps:{sx:{color:"black"}}})}),e.jsx(t,{item:!0,xs:12,md:1.5,children:e.jsx(l,{label:"Amount Per Yard",fullWidth:!0,type:"number",size:"small",name:"amountPerYard",value:i.amountPerYard,onChange:R,InputLabelProps:{sx:{color:"black"}}})}),e.jsx(t,{item:!0,xs:12,md:1.5,children:e.jsx(l,{label:"Total Pcs",fullWidth:!0,size:"small",name:"totalPcs",value:i.totalPcs,onChange:R,InputLabelProps:{sx:{color:"black"}}})}),e.jsx(t,{item:!0,xs:12,md:1.5,children:e.jsx(l,{label:"Cost Per Component",fullWidth:!0,size:"small",name:"costPerComponent",value:i.costPerComponent,onChange:R,InputLabelProps:{sx:{color:"black"}}})}),e.jsx(t,{item:!0,xs:12,md:1.5,children:e.jsx(l,{label:"Total Amount",fullWidth:!0,size:"small",type:"number",name:"totalAmount",value:i.totalAmount,onChange:R,InputLabelProps:{sx:{color:"black"}}})}),e.jsx(t,{item:!0,xs:12,md:1.5,children:e.jsx(De,{control:e.jsx(_e,{checked:i.laserCut,onChange:te,name:"laserCut"}),label:"Laser Cut"})}),i.laserCut?e.jsx(t,{item:!0,xs:12,md:4.5,children:e.jsxs(t,{container:!0,spacing:1,width:"Inherit",children:[e.jsx(t,{item:!0,xs:12,md:6,children:e.jsx(l,{label:"Laser Cut Rate",fullWidth:!0,size:"small",name:"laserCutRate",value:i.laserCutRate,onChange:R,InputLabelProps:{sx:{color:"black"}}})}),e.jsx(t,{item:!0,xs:12,md:6,children:e.jsx(l,{label:"Pcs For LaserCut",fullWidth:!0,size:"small",name:"pcsForLaserCut",value:i.pcsForLaserCut,onChange:R,InputLabelProps:{sx:{color:"black"}}})})]})}):null,e.jsx(t,{item:!0,xs:12,textAlign:"right",sx:{mt:2},children:e.jsx(re,{variant:"contained",size:"small",onClick:ye,children:"Save"})})]})})]})]}),e.jsx(t,{item:!0,xs:12,md:12,children:e.jsx(de,{sx:{height:1,width:"100%",marginTop:1,marginBottom:0}})}),e.jsxs(pe,{variant:"outlined",children:[e.jsx(me,{className:"css-4rfrnx-MuiCardHeader-root",avatar:e.jsx(Ne,{}),title:"View Schiffli ",titleTypographyProps:{style:{color:"white"}}}),e.jsx(t,{container:!0,spacing:2,width:"Inherit",sx:{paddingY:2,paddingX:2},children:e.jsx(t,{sx:{marginTop:2},item:!0,xs:12,children:U?e.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"},children:e.jsx("img",{src:ze,alt:"Loading",style:{width:200,height:200}})}):e.jsx(je,{iColumns:O,initialRows:ce,setInitialData:m,deleteApi:"https://gecxc.com:4041/api/Schiffli/DeleteSchiffiById?schiffiId=",deleteBy:"schiffiliId",refetch:W,setAccordionExpanded:k,fileName:"Schffili List"})})})]})]})},wt=zt,Wt=({additionalProcessData:d,setAdditionalProcessData:s,refetchAdditionalProcessList:a,handleClickOpen:m})=>{const{user:i}=ve(),[u,c]=o.useState([]),k=u.reduce((p,f)=>p+(f.quantity??0),0).toFixed(2);console.log("Quantity",k);const[h,U]=o.useState({additionalProcessDetId:0,additionalProcessId:d.additionalProcessId||0,designId:d.designNo||"",planningHeaderId:d.planningHeaderId||0,batchNo:d.batchNo||"",componentName:d.componentName||"",componentId:d.componentId||"",colorName:d.colorName||"",colorId:d.colorId||"",fabricName:d.fabricName||"",fabricId:d.fabricId||"",uomId:d.uomId||"",uom:d.uom||"",vendorId:"",pcsPerComponent:d.pcsPerComponent||"",remainingPcsPerComponent:d.pcsPerComponent-k||"",processTypeName:d.processTypeName||"",processTypeId:d.processTypeId||"",quantity:"",ratePerPcs:0,totalAmount:0,costPerComponent:"",createdOn:new Date().toISOString(),createdBy:i.empId,lastUpdatedOn:new Date().toISOString(),LastUpdatedBy:i.empId});o.useEffect(()=>{U({...h,remainingPcsPerComponent:d.pcsPerComponent-k||""})},[u]);const{data:w}=Ce(),{data:r,refetch:B}=mt(h.additionalProcessId,{skip:!h.additionalProcessId}),[H,X]=o.useState([]);o.useEffect(()=>{if(w){const p=w.result[0];X(p.vendorList)}},[w]),o.useEffect(()=>{r&&c(r.result.map((p,f)=>({id:f,...p})))},[r,B]),console.log("initialRows",u);const j=p=>{const{name:f,value:N}=p.target;U({...h,[f]:N})};o.useEffect(()=>{const p=()=>{const N=parseFloat(h.quantity)||0,W=parseFloat(h.ratePerPcs)||0;return(N*W).toFixed(2)};U(N=>({...N,totalAmount:p()}));const f=()=>{const N=parseFloat(h.totalAmount)||0,W=parseFloat(h.poPcs)||0;return(N/W).toFixed(2)};U(N=>({...N,costPerComponent:f()}))},[h.quantity,h.ratePerPcs,h.totalAmount]);const E=async()=>{console.log(h);try{const p=await he.post("https://gecxc.com:4041/api/AdditionalProcess/SaveAdditionalProcessDetails",h);console.log("Save response:",p.data),B(),U(f=>({...f,vendorId:"",pcsPerComponent:d.pcsPerComponent||"",quantity:"",ratePerPcs:0,totalAmount:0,costPerComponent:"",createdOn:new Date().toISOString(),createdBy:i.empId,lastUpdatedOn:new Date().toISOString(),LastUpdatedBy:i.empId})),a(),setAccordionExpanded(!1)}catch(p){console.error("Error saving data:",p)}},Q=[{field:"vendorName",headerName:"Vendor",flex:2},{field:"processType",headerName:"Process Type",flex:1},{field:"pcsPerComponent",headerName:" Pcs. Per Component",flex:1},{field:"quantity",headerName:"Quantitity",flex:1},{field:"ratePerPcs",headerName:"Rate Per Pcs.",flex:1},{field:"totalAmount",headerName:"Total Amount",flex:1}];return e.jsxs(xe,{noValidate:!0,component:"form",sx:{display:"flex",flexDirection:"column",m:"auto",width:"Inherit"},children:[e.jsxs(t,{container:!0,spacing:1,width:"Inherit",sx:{paddingY:2,paddingX:2},children:[e.jsx(t,{item:!0,xs:12,md:3,children:e.jsx(l,{fullWidth:!0,label:"Select Design",name:"designId",value:h.designId,onChange:j,size:"small",disabled:!0,sx:p=>({...h.designId!==""&&{".css-4a5t8g-MuiInputBase-input-MuiOutlinedInput-input":{backgroundColor:"#c9c9c9 !important"}},"& .MuiInputBase-input.Mui-disabled":{WebkitTextFillColor:"black"},"& .MuiInputBase-root.Mui-disabled":{backgroundColor:"#f9f9f9"},"& .MuiOutlinedInput-root.Mui-disabled .MuiOutlinedInput-notchedOutline":{},"& .MuiInputLabel-root.Mui-disabled":{color:"rgba(0, 0, 0, 0.87)"}}),InputLabelProps:{sx:{color:"black"}}})}),e.jsxs(t,{item:!0,xs:12,md:3,children:[e.jsx(l,{fullWidth:!0,label:"Batch No.",name:"batchNo",value:h.batchNo,onChange:j,size:"small",disabled:!0,sx:p=>({...h.batchNo!==""&&{".css-4a5t8g-MuiInputBase-input-MuiOutlinedInput-input":{backgroundColor:"#c9c9c9 !important"}},"& .MuiInputBase-input.Mui-disabled":{WebkitTextFillColor:"black"},"& .MuiInputBase-root.Mui-disabled":{backgroundColor:"#f9f9f9"},"& .MuiOutlinedInput-root.Mui-disabled .MuiOutlinedInput-notchedOutline":{},"& .MuiInputLabel-root.Mui-disabled":{color:"rgba(0, 0, 0, 0.87)"}}),InputLabelProps:{sx:{color:"black"}}})," "]}),e.jsxs(t,{item:!0,xs:12,md:3,children:[e.jsx(l,{fullWidth:!0,label:"Components",name:"componentName",value:h.componentName,onChange:j,size:"small",disabled:!0,sx:p=>({...h.componentName!==""&&{".css-4a5t8g-MuiInputBase-input-MuiOutlinedInput-input":{backgroundColor:"#c9c9c9 !important"}},"& .MuiInputBase-input.Mui-disabled":{WebkitTextFillColor:"black"},"& .MuiInputBase-root.Mui-disabled":{backgroundColor:"#f9f9f9"},"& .MuiOutlinedInput-root.Mui-disabled .MuiOutlinedInput-notchedOutline":{},"& .MuiInputLabel-root.Mui-disabled":{color:"rgba(0, 0, 0, 0.87)"}}),InputLabelProps:{sx:{color:"black"}}})," "]}),e.jsx(t,{item:!0,xs:12,md:3,children:e.jsx(l,{fullWidth:!0,label:"Select Fabric",defaultValue:"",size:"small",name:"fabricName",value:h.fabricName,onChange:j,disabled:!0,sx:p=>({...h.fabricName!==""&&{".css-4a5t8g-MuiInputBase-input-MuiOutlinedInput-input":{backgroundColor:"#c9c9c9 !important"}},"& .MuiInputBase-input.Mui-disabled":{WebkitTextFillColor:"black"},"& .MuiInputBase-root.Mui-disabled":{backgroundColor:"#f9f9f9"},"& .MuiOutlinedInput-root.Mui-disabled .MuiOutlinedInput-notchedOutline":{},"& .MuiInputLabel-root.Mui-disabled":{color:"rgba(0, 0, 0, 0.87)"}}),InputLabelProps:{sx:{color:"black"}}})}),e.jsx(t,{item:!0,xs:12,md:3,children:e.jsx(l,{fullWidth:!0,label:"Color",size:"small",name:"colorName",value:h.colorName,onChange:j,disabled:!0,sx:p=>({...h.colorName!==""&&{".css-4a5t8g-MuiInputBase-input-MuiOutlinedInput-input":{backgroundColor:"#c9c9c9 !important"}},"& .MuiInputBase-input.Mui-disabled":{WebkitTextFillColor:"black"},"& .MuiInputBase-root.Mui-disabled":{backgroundColor:"#f9f9f9"},"& .MuiOutlinedInput-root.Mui-disabled .MuiOutlinedInput-notchedOutline":{},"& .MuiInputLabel-root.Mui-disabled":{color:"rgba(0, 0, 0, 0.87)"}}),InputLabelProps:{sx:{color:"black"}}})}),e.jsx(t,{item:!0,xs:12,md:3,children:e.jsx(l,{fullWidth:!0,label:"Process Type",defaultValue:"",size:"small",name:"processTypeName",value:h.processTypeName,onChange:j,disabled:!0,sx:p=>({...h.processTypeName!==""&&{".css-4a5t8g-MuiInputBase-input-MuiOutlinedInput-input":{backgroundColor:"#c9c9c9 !important"}},"& .MuiInputBase-input.Mui-disabled":{WebkitTextFillColor:"black"},"& .MuiInputBase-root.Mui-disabled":{backgroundColor:"#f9f9f9"},"& .MuiOutlinedInput-root.Mui-disabled .MuiOutlinedInput-notchedOutline":{},"& .MuiInputLabel-root.Mui-disabled":{color:"rgba(0, 0, 0, 0.87)"}}),InputLabelProps:{sx:{color:"black"}}})}),e.jsx(t,{item:!0,xs:12,md:1.5,children:e.jsx(l,{label:"Pcs. Per Component",fullWidth:!0,size:"small",name:"pcsPerComponent",value:h.pcsPerComponent,onChange:j,disabled:!0,sx:p=>({...h.pcsPerComponent!==""&&{".css-4a5t8g-MuiInputBase-input-MuiOutlinedInput-input":{backgroundColor:"#c9c9c9 !important"}},"& .MuiInputBase-input.Mui-disabled":{WebkitTextFillColor:"black"},"& .MuiInputBase-root.Mui-disabled":{backgroundColor:"#f9f9f9"},"& .MuiOutlinedInput-root.Mui-disabled .MuiOutlinedInput-notchedOutline":{},"& .MuiInputLabel-root.Mui-disabled":{color:"rgba(0, 0, 0, 0.87)"}}),InputLabelProps:{sx:{color:"black"}}})}),e.jsx(t,{item:!0,xs:12,md:1.5,children:e.jsx(l,{label:"Remaining Pcs. Per Component",fullWidth:!0,size:"small",name:"remainingPcsPerComponent",value:h.remainingPcsPerComponent,onChange:j,disabled:!0,sx:p=>({...h.remainingPcsPerComponent!==""&&{".css-4a5t8g-MuiInputBase-input-MuiOutlinedInput-input":{backgroundColor:"#c9c9c9 !important"}},"& .MuiInputBase-input.Mui-disabled":{WebkitTextFillColor:"black"},"& .MuiInputBase-root.Mui-disabled":{backgroundColor:"#f9f9f9"},"& .MuiOutlinedInput-root.Mui-disabled .MuiOutlinedInput-notchedOutline":{},"& .MuiInputLabel-root.Mui-disabled":{color:"rgba(0, 0, 0, 0.87)"}}),InputLabelProps:{sx:{color:"black"}}})})]}),e.jsx(de,{color:"#921e22",sx:{height:2,width:"100%"}}),e.jsxs(t,{container:!0,spacing:1,width:"Inherit",sx:{paddingY:2,paddingX:2},children:[e.jsx(t,{item:!0,xs:12,md:3,children:e.jsx(l,{fullWidth:!0,select:!0,label:"Vendors",size:"small",name:"vendorId",value:h.vendorId,onChange:j,InputLabelProps:{sx:{color:"black"}},children:H.map(p=>e.jsx(L,{value:p.lookUpId,children:p.lookUpName},p.lookUpId))})}),e.jsx(t,{item:!0,xs:12,md:3,children:e.jsx(l,{label:"Quantity",fullWidth:!0,type:"number",size:"small",name:"quantity",value:h.quantity,onChange:j,InputLabelProps:{sx:{color:"black"}}})}),e.jsx(t,{item:!0,xs:12,md:3,children:e.jsx(l,{label:"Rate Per Pcs",type:"number",fullWidth:!0,size:"small",name:"ratePerPcs",value:h.ratePerPcs,onChange:j,InputLabelProps:{sx:{color:"black"}}})}),e.jsx(t,{item:!0,xs:12,md:3,children:e.jsx(l,{label:"Total Amount",fullWidth:!0,type:"number",size:"small",name:"totalAmount",value:h.totalAmount,onChange:j,InputLabelProps:{sx:{color:"black"}}})}),e.jsx(t,{item:!0,xs:12,md:3,children:e.jsx(l,{label:"UOM",fullWidth:!0,size:"small",name:"uom",value:h.uom,onChange:j,disabled:!0,sx:p=>({...h.uom!==""&&{".css-4a5t8g-MuiInputBase-input-MuiOutlinedInput-input":{backgroundColor:"#c9c9c9 !important"}},"& .MuiInputBase-input.Mui-disabled":{WebkitTextFillColor:"black"},"& .MuiInputBase-root.Mui-disabled":{backgroundColor:"#f9f9f9"},"& .MuiOutlinedInput-root.Mui-disabled .MuiOutlinedInput-notchedOutline":{},"& .MuiInputLabel-root.Mui-disabled":{color:"rgba(0, 0, 0, 0.87)"}}),InputLabelProps:{sx:{color:"black"}}})}),e.jsx(t,{item:!0,xs:12,textAlign:"right",sx:{mt:2},children:e.jsx(re,{variant:"contained",size:"small",onClick:E,children:"Save"})})]}),e.jsx(de,{color:"#921e22",sx:{height:2,width:"100%"}}),e.jsx(t,{container:!0,spacing:2,width:"Inherit",sx:{paddingY:2,paddingX:2},children:e.jsx(t,{sx:{marginTop:2},item:!0,xs:12,children:e.jsx(je,{iColumns:Q,initialRows:u,deleteApi:"https://gecxc.com:4041/api/AdditionalProcess/DeleteAdditionalProcessDetails?apdId=",deleteBy:"additionalProcessDetId",refetch:B,disableEdit:!0})})})]})},Rt=()=>{const{user:d}=ve(),[s,a]=o.useState([]),[m,i]=o.useState({additionalProcessId:0,designId:"",planningHeaderId:0,batchNo:"",componentId:"",colorId:"",fabricId:"",uomId:"",baseColorName:"",poPcs:"",pcsPerComponent:"",processTypeId:"",createdOn:new Date().toISOString(),createdBy:d.empId,lastUpdatedOn:new Date().toISOString(),LastUpdatedBy:d.empId});console.log("initialData",s),o.useEffect(()=>{i({additionalProcessId:(s==null?void 0:s.additionalProcessId)||0,designId:(s==null?void 0:s.designId)||"",planningHeaderId:(s==null?void 0:s.planningHeaderId)||0,batchNo:(s==null?void 0:s.batchNo)||"",componentId:(s==null?void 0:s.componentId)||"",fabricId:(s==null?void 0:s.fabricId)||"",colorId:(s==null?void 0:s.colorId)||"",poPcs:(s==null?void 0:s.poPcs)||"",baseColorName:(s==null?void 0:s.baseColorName)||"",pcsPerComponent:(s==null?void 0:s.pcsPerComponent)||"",uomId:(s==null?void 0:s.uomId)||"",processTypeId:(s==null?void 0:s.processTypeId)||"",createdOn:(s==null?void 0:s.createdOn)||new Date().toISOString(),createdBy:(s==null?void 0:s.createdBy)||d.empId,lastUpdatedOn:new Date().toISOString(),LastUpdatedBy:d.empId})},[s]);const[u,c]=o.useState(!1),{data:k}=Se(),[h,U]=o.useState(""),{data:w}=Ce(),{data:r,refetch:B}=Oe(h,{skip:!h}),{data:H,refetch:X}=Fe(m.designId,{skip:!m.designId}),{data:j}=we({batchNo:m.planningHeaderId,componentId:m.componentId},{skip:!m.planningHeaderId||!m.componentId}),{data:E}=We({batchNo:m.planningHeaderId,componentId:m.componentId,fabricId:m.fabricId},{skip:!m.planningHeaderId||!m.componentId||!m.fabricId}),{data:Q,refetch:V}=ht(m.planningHeaderId,{skip:!m.planningHeaderId}),{data:p}=Re(m.planningHeaderId,{skip:!m.planningHeaderId});console.log("lookupData",w),console.log("collectionData",k),console.log("colorData",E);const[f,N]=o.useState([]),[W,$]=o.useState([]),[C,S]=o.useState([]),[J,ne]=o.useState([]),[ee,le]=o.useState([]),[ue,P]=o.useState([]),[T,Y]=o.useState([]),[ie,_]=o.useState([]),[ae,ge]=o.useState([]),[ce,A]=o.useState([]),[M,G]=o.useState([]);console.log("batchData",H),o.useEffect(()=>{r&&N(r.result)},[r]),o.useEffect(()=>{H&&$(H.result)},[H]),o.useEffect(()=>{j&&S(j.result)},[j]),o.useEffect(()=>{E&&ge(E.result)},[E]),o.useEffect(()=>{p&&G(p.result)},[p]),o.useEffect(()=>{if(w){const g=w.result[0];le(g.uomList),P(g.processList)}},[w]),o.useEffect(()=>{Q&&A(Q.result.map((g,y)=>({id:y,...g})))},[Q,V]),o.useEffect(()=>{if(w){const g=w.result[0];ne(g.vendorList),Y(g.operatingMachineList),_(g.workingHeadList)}},[w]),console.log("initialRows",ce);const oe=(k==null?void 0:k.result)||[],te=g=>{const{name:y,value:n}=g.target;if(y==="collectionId")oe.find(x=>x.collectionId===parseInt(n)),U(n),i({...m,collectionId:n});else if(y==="designId"){const x=f.find(F=>F.designId===parseInt(n));i({...m,designId:n,baseColorId:x?x.colorId:"",baseColorName:x?x.colorName:""})}else if(y==="batchNo"){const x=W.find(F=>F.batchNo===n);i({...m,batchNo:n,planningHeaderId:x?x.planningHeaderId:"",poPcs:x?x.poPcs:""}),c(!0)}else i({...m,[y]:n})};console.log("colors",ae);const R=async()=>{console.log("formData",m);try{const g=await he.post("https://gecxc.com:4041/api/AdditionalProcess/SaveAdditionalProcess",m);console.log("Save response:",g.data),i(y=>({additionalProcessId:0,designId:y.designId,planningHeaderId:y.planningHeaderId,batchNo:y.batchNo,baseColorName:y.baseColorName,poPcs:y.poPcs,componentId:"",colorId:"",fabricId:"",uomId:"",pcsPerComponent:"",processTypeId:"",createdOn:new Date().toISOString(),createdBy:d.empId,lastUpdatedOn:new Date().toISOString(),LastUpdatedBy:d.empId})),V()}catch(g){console.error("Error saving data:",g)}};console.log("formData",m),o.forwardRef(function(y,n){return e.jsx(gt,{direction:"up",ref:n,...y})});const[q,be]=o.useState({}),[ye,v]=o.useState(!1),O=g=>{be(g),v(!0)},K=()=>{v(!1),be({}),V()},b=[{field:"designNo",headerName:"Design"},{field:"batchNo",headerName:"Batch"},{field:"componentName",headerName:"Component"},{field:"fabricName",headerName:"Fabric"},{field:"colorName",headerName:"Color"},{field:"processTypeName",headerName:"Process Type"},{field:"pcsPerComponent",headerName:"Pcs Per Component"},{field:"assignedQty",headerName:"Assigned Quantity"},{field:"AddVendor",headerName:"Add Vendor",renderCell:g=>e.jsx("div",{style:{display:"flex",justifyContent:"space-around"},children:e.jsx(Me,{color:"primary",onClick:()=>O(g.row),children:e.jsx(Ge,{})})})}];return e.jsxs(e.Fragment,{children:[e.jsxs(pe,{variant:"outlined",children:[e.jsx(me,{className:"css-4rfrnx-MuiCardHeader-root",avatar:e.jsx(Te,{src:tt,sx:{background:"transparent"}}),title:"Additional Process ",titleTypographyProps:{style:{color:"white"}}}),e.jsxs(t,{container:!0,spacing:1,width:"Inherit",sx:{paddingY:2,paddingX:2},children:[e.jsxs(t,{item:!0,xs:12,md:3,children:[e.jsx(l,{fullWidth:!0,select:!0,label:"Select Collection",name:"collectionId",value:h,onChange:te,size:"small",InputLabelProps:{sx:{color:"black"}},children:oe.map(g=>e.jsx(L,{value:g.collectionId,children:g.collectionName},g.collectionId))})," "]}),e.jsx(t,{item:!0,xs:12,md:3,children:e.jsx(l,{fullWidth:!0,select:!0,label:"Select Design",name:"designId",value:m.designId,onChange:te,size:"small",InputLabelProps:{sx:{color:"black"}},children:f.map(g=>e.jsx(L,{value:g.designId,children:g.designNo},g.designId))})}),e.jsxs(t,{item:!0,xs:12,md:3,children:[e.jsx(l,{fullWidth:!0,select:!0,label:"Batch No.",name:"batchNo",value:m.batchNo,onChange:te,size:"small",InputLabelProps:{sx:{color:"black"}},children:W.map(g=>e.jsx(L,{value:g.batchNo,children:g.batchNo},g.batchNo))})," "]}),e.jsx(t,{item:!0,xs:12,md:3,children:e.jsx(l,{label:"Base Color",fullWidth:!0,size:"small",name:"baseColorName",value:m.baseColorName,onChange:te,disabled:!0,sx:g=>({...m.baseColorName!==""&&{".css-4a5t8g-MuiInputBase-input-MuiOutlinedInput-input":{backgroundColor:"#c9c9c9 !important"}},"& .MuiInputBase-input.Mui-disabled":{WebkitTextFillColor:"black"},"& .MuiInputBase-root.Mui-disabled":{backgroundColor:"#f9f9f9"},"& .MuiOutlinedInput-root.Mui-disabled .MuiOutlinedInput-notchedOutline":{},"& .MuiInputLabel-root.Mui-disabled":{color:"rgba(0, 0, 0, 0.87)"}}),InputLabelProps:{sx:{color:"black"}}})}),e.jsxs(t,{item:!0,xs:12,md:12,children:[e.jsx(de,{color:"#921e22",sx:{height:2,width:"100%"}})," "]}),e.jsxs(t,{item:!0,xs:12,md:3,children:[e.jsx(l,{fullWidth:!0,select:!0,label:"Components",name:"componentId",value:m.componentId,onChange:te,size:"small",InputLabelProps:{sx:{color:"black"}},children:M.map(g=>e.jsx(L,{value:g.componentId,children:g.componentName},g.componentId))})," "]}),e.jsx(t,{item:!0,xs:12,md:3,children:e.jsx(l,{fullWidth:!0,select:!0,label:"Select Fabric",defaultValue:"",size:"small",name:"fabricId",value:m.fabricId,onChange:te,InputLabelProps:{sx:{color:"black"}},children:C.map(g=>e.jsx(L,{value:g.fabricId,children:g.fabric},g.fabricId))})}),e.jsx(t,{item:!0,xs:12,md:3,children:e.jsx(l,{fullWidth:!0,select:!0,label:"Color",size:"small",name:"colorId",value:m.colorId,onChange:te,InputLabelProps:{sx:{color:"black"}},children:ae.map(g=>e.jsx(L,{value:g.colorId,children:g.color},g.colorId))})}),e.jsx(t,{item:!0,xs:12,md:1.5,children:e.jsx(l,{label:"Po Pcs",fullWidth:!0,size:"small",name:"poPcs",value:m.poPcs,onChange:te,disabled:!0,sx:g=>({...m.poPcs!==""&&{".css-4a5t8g-MuiInputBase-input-MuiOutlinedInput-input":{backgroundColor:"#c9c9c9 !important"}},"& .MuiInputBase-input.Mui-disabled":{WebkitTextFillColor:"black"},"& .MuiInputBase-root.Mui-disabled":{backgroundColor:"#f9f9f9"},"& .MuiOutlinedInput-root.Mui-disabled .MuiOutlinedInput-notchedOutline":{},"& .MuiInputLabel-root.Mui-disabled":{color:"rgba(0, 0, 0, 0.87)"}}),InputLabelProps:{sx:{color:"black"}}})}),e.jsx(t,{item:!0,xs:12,md:1.5,children:e.jsx(l,{label:"Pcs. Per Component",fullWidth:!0,size:"small",name:"pcsPerComponent",value:m.pcsPerComponent,onChange:te,InputLabelProps:{sx:{color:"black"}}})}),e.jsx(t,{item:!0,xs:12,md:3,children:e.jsx(l,{fullWidth:!0,select:!0,label:"UOM",type:"number",defaultValue:140,size:"small",name:"uomId",value:m.uomId,onChange:te,InputLabelProps:{sx:{color:"black"}},children:ee.map(g=>e.jsx(L,{value:g.lookUpId,children:g.lookUpName},g.lookUpId))})}),e.jsx(t,{item:!0,xs:12,md:3,children:e.jsx(l,{fullWidth:!0,select:!0,label:"Process Type",size:"small",name:"processTypeId",value:m.processTypeId,onChange:te,InputLabelProps:{sx:{color:"black"}},children:ue.map(g=>e.jsx(L,{value:g.lookUpId,children:g.lookUpName},g.lookUpId))})}),e.jsx(t,{item:!0,xs:12,textAlign:"right",sx:{mt:0},children:e.jsx(re,{variant:"contained",size:"small",onClick:R,children:"Save"})})]})]}),e.jsx(de,{color:"#cc8587",sx:{height:1,width:"100%",mt:2}}),e.jsxs(pe,{variant:"outlined",children:[e.jsx(me,{className:"css-4rfrnx-MuiCardHeader-root",avatar:e.jsx(Ne,{}),title:"View Additional Process ",titleTypographyProps:{style:{color:"white"}}}),e.jsx(t,{container:!0,spacing:2,width:"Inherit",sx:{paddingY:2,paddingX:2},children:e.jsxs(t,{sx:{marginTop:2},item:!0,xs:12,children:[e.jsx(je,{iColumns:b,initialRows:ce,setInitialData:a,deleteApi:"https://gecxc.com:4041/api/AdditionalProcess/DeleteAdditionalProcess?adId=",deleteBy:"additionalProcessId",refetch:V,setAccordionExpanded:c,fileName:"AdditionalProcess"}),e.jsxs(He,{open:ye,onClose:K,fullWidth:!0,maxWidth:"xl",children:[e.jsxs(Qe,{sx:{backgroundColor:"#A11F23",color:"#ffffff",display:"flex",justifyContent:"space-between",alignItems:"center",paddingX:"24px",paddingY:"4px"},children:[e.jsx(fe,{variant:"h4",component:"div",color:"#ffffff",gutterBottom:!0,fontSize:20,fontWeight:2,fontStyle:"normal",children:"Assign Vendors "}),e.jsx(Me,{onClick:K,sx:{color:"#ffffff"},children:e.jsx(Ee,{})})]}),e.jsxs(qe,{children:[e.jsx(Ue,{id:"alert-dialog-slide-description"}),e.jsx(Wt,{additionalProcessData:q,setAdditionalProcessData:be,refetchAdditionalProcessList:V,handleClickOpen:O})]})]})]})})]})]})},Ht=Rt;function Qt({}){const{data:d}=Ce(),[s,a]=o.useState([]),[m,i]=o.useState([]),[u,c]=o.useState([]),[k,h]=o.useState([]),[U,w]=o.useState([]);ve(),o.useEffect(()=>{d&&(c(d.result[0].vendorList),i(d.result[0].serviceList),a(d.result[0].serviceTypeList),w(d.result[0].uomList))},[d]);const[r,B]=o.useState({additionalServiceId:0,collectionId:"",serviceTypeId:"",serviceListId:"",vendorId:"",poPcs:"",qty:"",uomId:"string",rate:"",totalAmount:"",costperPiece:"",uom:"",createdBy:0,createdOn:new Date().toISOString()}),H=async p=>{const{name:f,value:N}=p.target;if(console.log(`Updating ${f} to ${N}`),B({...r,[f]:N}),f==="collectionId"){const W=k.find($=>$.collectionId===N);W&&B($=>({...$,poPcs:W.poPcs}))}};o.useEffect(()=>{const p=()=>{const N=parseFloat(r.qty)||0,W=parseFloat(r.rate)||0;return(N*W).toFixed(2)};B(N=>({...N,totalAmount:p()}));const f=()=>{const N=parseFloat(r.poPcs)||0,W=parseFloat(r.totalAmount)||0;return(N/W).toFixed(2)};B(N=>({...N,costperPiece:f()}))},[r.qty,r.rate,r.totalAmount,r.costperPiece]);const X=async()=>{try{const p=await he.post("https://gecxc.com:4041/api/AdditionalServices/SaveAdditionalServices",r);console.log("Form data saved:",p.data),B({additionalServiceId:0,collectionId:"",serviceTypeId:"",serviceListId:"",vendorId:"",poPcs:"",qty:"",uomId:"string",rate:"",totalAmount:"",costperPiece:""}),onSaveSuccess&&onSaveSuccess()}catch(p){console.error("Error saving data:",p)}};o.useEffect(()=>{(async()=>{try{const f=await he.get("https://gecxc.com:4041/api/CollectionRegistration/GetCollectionList?appId=1");console.log("GetCollectionFromPlanningHeader",f),h(f.data.result)}catch(f){console.error("Error fetching design options:",f)}})()},[]);const[j,E]=o.useState([]),Q=o.useCallback(async()=>{try{const p=await he.get(`https://gecxc.com:4041/api/AdditionalServices/GetAdditionalServicesListByCollectionId?collectionId=${r.collectionId}`);Array.isArray(p.data.result)?E(p.data.result.map((f,N)=>({id:N,...f}))):(console.error("API returned unexpected data format:",p.data.result),E([]))}catch(p){console.error("Error fetching data:",p),E([])}},[r.collectionId]);o.useEffect(()=>{Q()},[Q]);const V=[{field:"collectionName",headerName:"Collection Name",flex:1},{field:"serviceType",headerName:"Service Type",flex:1},{field:"serviceListName",headerName:"Service List Name",flex:1},{field:"vendor",headerName:"Vendor",flex:1},{field:"poPcs",headerName:"PO Pieces"},{field:"qty",headerName:"Quantity"},{field:"uom",headerName:"UOM"},{field:"rate",headerName:"Rate"},{field:"totalAmount",headerName:"Total Amount"},{field:"costperPiece",headerName:"Cost per Piece"}];return e.jsxs(e.Fragment,{children:[e.jsxs(pe,{variant:"outlined",children:[e.jsx(me,{className:"css-4rfrnx-MuiCardHeader-root",title:"Additional Services",titleTypographyProps:{style:{color:"white"}}}),e.jsxs(t,{container:!0,spacing:1,width:"Inherit",sx:{paddingY:2,paddingX:2},children:[e.jsx(t,{item:!0,xs:12,md:4,children:e.jsx(l,{fullWidth:!0,select:!0,label:"Select Collection",name:"collectionId",value:r.collectionId,onChange:H,size:"small",InputLabelProps:{sx:{color:"black"}},children:k.length>0?k.map(p=>e.jsx(L,{id:"collectionId",value:p.collectionId,children:p.collectionName},p.collectionId)):e.jsx(L,{disabled:!0,children:"No Collections Available"})})}),e.jsx(t,{item:!0,md:4,width:"inherit",paddingX:1,children:e.jsx(l,{id:"outlined-select-option",select:!0,label:"Service Type",name:"serviceTypeId",value:r.serviceTypeId,onChange:H,variant:"outlined",size:"small",fullWidth:!0,InputLabelProps:{sx:{color:"black"}},children:s.map(p=>e.jsx(L,{value:p.lookUpId,children:p.lookUpName},p.lookUpId))})}),e.jsx(t,{item:!0,md:4,width:"inherit",paddingX:1,children:e.jsx(l,{id:"outlined-select-option",select:!0,label:"Service List Id",name:"serviceListId",value:r.serviceListId,onChange:H,variant:"outlined",size:"small",fullWidth:!0,InputLabelProps:{sx:{color:"black"}},children:m.map(p=>e.jsx(L,{value:p.lookUpId,children:p.lookUpName},p.lookUpId))})}),e.jsx(t,{item:!0,xs:12,md:4,children:e.jsx(l,{fullWidth:!0,select:!0,label:"Vendor Name",size:"small",name:"vendorId",value:r.vendorId,onChange:H,InputLabelProps:{sx:{color:"black"}},children:u.map(p=>e.jsx(L,{value:p.lookUpId,children:p.lookUpName},p.lookUpId))})}),e.jsx(t,{item:!0,md:2,width:"inherit",paddingX:1,children:e.jsx(l,{id:"outlined-required",label:"PO PC's",name:"poPcs",value:r.poPcs,onChange:H,type:"number",size:"small",fullWidth:!0,disabled:!0,sx:p=>({...r.poPcs!==""&&{".css-4a5t8g-MuiInputBase-input-MuiOutlinedInput-input":{backgroundColor:"#c9c9c9 !important"}},"& .MuiInputBase-input.Mui-disabled":{WebkitTextFillColor:"black"},"& .MuiInputBase-root.Mui-disabled":{backgroundColor:"#f9f9f9"},"& .MuiOutlinedInput-root.Mui-disabled .MuiOutlinedInput-notchedOutline":{},"& .MuiInputLabel-root.Mui-disabled":{color:"rgba(0, 0, 0, 0.87)"}}),InputLabelProps:{sx:{color:"black"}}})}),e.jsx(t,{item:!0,md:2,width:"inherit",paddingX:1,children:e.jsx(l,{id:"outlined-required",label:"Qty",name:"qty",value:r.qty,onChange:H,type:"number",size:"small",required:!0,fullWidth:!0,InputLabelProps:{sx:{color:"black"}}})}),e.jsx(t,{item:!0,md:2,width:"inherit",paddingX:1,children:e.jsx(l,{fullWidth:!0,select:!0,label:"UOM",defaultValue:"",size:"small",name:"uomId",value:r.uomId,onChange:H,InputLabelProps:{sx:{color:"black"}},children:U.map(p=>e.jsx(L,{value:p.lookUpId,children:p.lookUpName},p.lookUpId))})}),e.jsx(t,{item:!0,md:2,width:"inherit",paddingX:1,children:e.jsx(l,{id:"outlined-required",label:"Rate",name:"rate",value:r.rate,onChange:H,type:"number",size:"small",fullWidth:!0,required:!0,InputLabelProps:{sx:{color:"black"}}})}),e.jsx(t,{item:!0,md:2,width:"inherit",paddingX:1,children:e.jsx(l,{id:"outlined-required",label:"Total Amount",name:"totalAmount",value:r.totalAmount,onChange:H,type:"number",size:"small",fullWidth:!0,required:!0,InputLabelProps:{sx:{color:"black"}}})}),e.jsx(t,{item:!0,md:2,width:"inherit",paddingX:1,children:e.jsx(l,{id:"outlined-required",label:"Cost per Piece",name:"costperPiece",value:r.costperPiece,onChange:H,type:"number",size:"small",required:!0,fullWidth:!0,InputLabelProps:{sx:{color:"black"}}})}),e.jsx(t,{item:!0,md:12,width:"inherit",paddingX:1,textAlign:"right",children:e.jsx(re,{variant:"contained",color:"primary",size:"small",onClick:X,children:"Save"})})]})]}),e.jsx(de,{color:"#cc8587",sx:{height:1,width:"100%",mt:2}}),e.jsxs(pe,{variant:"outlined",children:[e.jsx(me,{className:"css-4rfrnx-MuiCardHeader-root",title:"View Additional Services",titleTypographyProps:{style:{color:"white"}}}),e.jsx(je,{iColumns:V,initialRows:j})]})]})}const Ae=["Pre Planning","Fabrication","Dyeing/Printing  ","Embroidery ","Schiffli","Additional Process","Additional Services"];function Dt(){const[d,s]=o.useState(0),[a,m]=o.useState(new Set),[i,u]=o.useState(null),[c,k]=o.useState([]),{enqueueSnackbar:h}=ke(),{data:U,refetch:w}=Ce(),r=S=>{u(S.currentTarget)},B=()=>{u(null)},H=!!i,X=H?"simple-popover":void 0,j=S=>S===1,E=S=>a.has(S),Q=()=>{let S=a;E(d)&&(S=new Set(S.values()),S.delete(d)),s(J=>J+1),m(S)},V=()=>{s(S=>S-1)},p=()=>{if(!j(d))throw new Error("You can't skip a step that isn't optional.");s(S=>S+1),m(S=>{const J=new Set(S.values());return J.add(d),J})},f=()=>{s(0)},[N,W]=o.useState({lookUpId:"",lookUpName:"",lookUpDomain:"",lookUpCategory:"",enabled:"",createdOn:new Date().toISOString()}),$=async()=>{if(!N.lookUpDomain||!N.lookUpName){h("Please fill in all required fields.",{variant:"error",autoHideDuration:5e3});return}try{const S=await he.get(`https://gecxc.com:4041/api/Common/SaveLookUp?lookupDomain=${N.lookUpDomain}&LookUpName=${N.lookUpName}&appId=1`);return console.log("Form data saved:",S.data),h("Lookup saved successfully!",{variant:"success",autoHideDuration:5e3}),W({lookUpId:"",lookUpName:"",lookUpDomain:"",lookUpCategory:"",enabled:"",createdOn:new Date().toISOString()}),w(),S.data}catch(S){throw console.error("Error saving data:",S),h("Error saving data. Please try again.",{variant:"error",autoHideDuration:5e3}),S}},C=S=>{W({...N,[S.target.name]:S.target.value})};return o.useEffect(()=>{(async()=>{try{const J=await he.get("https://gecxc.com:4041/api/Common/GetLookUpDomains?appId=1");console.log("LookupData",J),k(J.data.result)}catch(J){console.error("Error fetching design options:",J)}})()},[]),e.jsxs(xe,{sx:{width:"100%"},children:[e.jsxs(t,{container:!0,spacing:1,width:"Inherit",children:[e.jsx(t,{item:!0,sm:6,children:e.jsx(fe,{variant:"h2",gutterBottom:!0,children:"Planning Process"})}),e.jsxs(t,{item:!0,sm:6,textAlign:"right",children:[e.jsx(re,{"aria-describedby":X,variant:"outlined",size:"small",onClick:r,children:"+Lookup"}),e.jsx(Ct,{id:"mouse-over-popover",open:H,anchorEl:i,onClose:B,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"right"},sx:{".MuiPopover-paper":{width:"300px",padding:"16px"}},children:e.jsxs(t,{container:!0,spacing:3,width:"Inherit",children:[e.jsx(t,{item:!0,sm:12,children:e.jsx(l,{fullWidth:!0,id:"outlined-select-currency",select:!0,label:"Select Lookup",size:"small",value:N.lookUpDomain,name:"lookUpDomain",onChange:C,children:c.map(S=>e.jsx(L,{value:S.lookUpDomain,children:S.lookUpDomain},S.lookUpDomain))})}),e.jsx(t,{item:!0,sm:12,children:e.jsx(l,{fullWidth:!0,label:"Add Lookup Description",value:N.lookUpName,onChange:C,name:"lookUpName",size:"small"})}),e.jsx(t,{item:!0,sm:3,textAlign:"right",children:e.jsx(re,{variant:"contained",size:"small",onClick:$,children:"Save"})})]})})]})]}),e.jsx(bt,{activeStep:d,children:Ae.map((S,J)=>{const ne={},ee={};return j(J)&&(ee.optional=e.jsx(fe,{variant:"caption",children:"Optional"})),E(J)&&(ne.completed=!1),e.jsx(It,{...ne,children:e.jsxs(xt,{...ee,onClick:()=>s(J),style:{cursor:"pointer"},children:[" ",S]})},S)})}),e.jsxs(xe,{sx:{display:"flex",flexDirection:"row",pt:2},children:[e.jsx(re,{color:"inherit",disabled:d===0,onClick:V,sx:{mr:1},children:"Back"}),e.jsx(xe,{sx:{flex:"1 1 auto"}}),j(d)&&e.jsx(re,{color:"inherit",onClick:p,sx:{mr:1},children:"Skip"}),e.jsx(re,{onClick:Q,children:d===Ae.length-1?"Finish":"Next"})]}),d===Ae.length?e.jsxs(o.Fragment,{children:[e.jsx(fe,{sx:{mt:2,mb:1},children:"All steps completed - you're finished"}),e.jsxs(xe,{sx:{display:"flex",flexDirection:"row",pt:2},children:[e.jsx(xe,{sx:{flex:"1 1 auto"}}),e.jsx(re,{onClick:f,children:"Reset"})]})]}):e.jsxs(o.Fragment,{children:[d===0&&e.jsx(Lt,{}),d===1&&e.jsx(ft,{}),d===2&&e.jsx(Tt,{}),d===3&&e.jsx(Nt,{}),d===4&&e.jsx(wt,{}),d===5&&e.jsx(Ht,{}),d===6&&e.jsx(Qt,{}),e.jsxs(xe,{sx:{display:"flex",flexDirection:"row",pt:2},children:[e.jsx(re,{color:"inherit",disabled:d===0,onClick:V,sx:{mr:1},children:"Back"}),e.jsx(xe,{sx:{flex:"1 1 auto"}}),j(d)&&e.jsx(re,{color:"inherit",onClick:p,sx:{mr:1},children:"Skip"}),e.jsx(re,{onClick:Q,children:d===Ae.length-1?"Finish":"Next"})]})]})]})}export{Dt as default};
