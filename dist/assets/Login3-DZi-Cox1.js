import{p as N,q as _,K as D,x as $,s as T,T as g,i as V,_ as k,r as d,A as z,k as q,N as G,g as O,j as e,m as Q,h as K,P as X,M as Y,B as C,O as Z,Q as J,R as B,S as ee,U as te,b as ne,V as se,W as oe,X as P,G as r,Y as re,Z as ae}from"./index-oJHoRO-l.js";import{I as ie,a as le}from"./axios-5ESieq6f.js";import{T as L,B as ce}from"./TextField-Dn70Puqt.js";function ue(n){return _("MuiLink",n)}const de=N("MuiLink",["root","underlineNone","underlineHover","underlineAlways","button","focusVisible"]),R={primary:"primary.main",textPrimary:"text.primary",secondary:"secondary.main",textSecondary:"text.secondary",error:"error.main"},me=n=>R[n]||n,pe=({theme:n,ownerState:t})=>{const s=me(t.color),i=D(n,`palette.${s}`,!1)||t.color,l=D(n,`palette.${s}Channel`);return"vars"in n&&l?`rgba(${l} / 0.4)`:$(i,.4)},he=["className","color","component","onBlur","onFocus","TypographyClasses","underline","variant","sx"],xe=n=>{const{classes:t,component:s,focusVisible:i,underline:l}=n,c={root:["root",`underline${V(l)}`,s==="button"&&"button",i&&"focusVisible"]};return K(c,ue,t)},fe=T(g,{name:"MuiLink",slot:"Root",overridesResolver:(n,t)=>{const{ownerState:s}=n;return[t.root,t[`underline${V(s.underline)}`],s.component==="button"&&t.button]}})(({theme:n,ownerState:t})=>k({},t.underline==="none"&&{textDecoration:"none"},t.underline==="hover"&&{textDecoration:"none","&:hover":{textDecoration:"underline"}},t.underline==="always"&&k({textDecoration:"underline"},t.color!=="inherit"&&{textDecorationColor:pe({theme:n,ownerState:t})},{"&:hover":{textDecorationColor:"inherit"}}),t.component==="button"&&{position:"relative",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none","&::-moz-focus-inner":{borderStyle:"none"},[`&.${de.focusVisible}`]:{outline:"auto"}})),I=d.forwardRef(function(t,s){const i=z({props:t,name:"MuiLink"}),{className:l,color:c="primary",component:m="a",onBlur:p,onFocus:b,TypographyClasses:u,underline:w="always",variant:h="inherit",sx:x}=i,S=q(i,he),{isFocusVisibleRef:y,onBlur:o,onFocus:a,ref:j}=G(),[v,A]=d.useState(!1),W=O(s,j),U=f=>{o(f),y.current===!1&&A(!1),p&&p(f)},E=f=>{a(f),y.current===!0&&A(!0),b&&b(f)},F=k({},i,{color:c,component:m,focusVisible:v,underline:w,variant:h}),H=xe(F);return e.jsx(fe,k({color:c,className:Q(H.root,l),classes:u,component:m,onBlur:U,onFocus:E,ref:W,ownerState:F,variant:h,sx:[...Object.keys(R).includes(c)?[]:[{color:c}],...Array.isArray(x)?x:[x]]},S))}),ge=T("div")(({theme:n})=>({backgroundColor:n.palette.grey[300],minHeight:"100vh"})),M=({children:n,...t})=>e.jsx(Y,{sx:{maxWidth:{xs:400,lg:475},margin:{xs:2.5,md:3},"& > *":{flexGrow:1,flexBasis:"50%"}},content:!1,...t,children:e.jsx(C,{sx:{p:{xs:2,sm:3,xl:5}},children:n})});M.propTypes={children:X.node};const be=({...n})=>{const{setUser:t}=Z(),s=J();B(s.breakpoints.down("md")),ee(o=>o.customization),d.useState(!0);const[i,l]=d.useState(""),c=te(),{enqueueSnackbar:m}=ne(),[p,b]=d.useState(!1),[u,w]=d.useState({username:"",password:""}),h=o=>{w({...u,[o.target.name]:o.target.value})},x=async o=>{o.preventDefault(),console.log("Submitting form with values:",u);try{const a=await le.post("https://gecxc.com:4041/api/Users/authenticate",{username:u.username,password:u.password});if(m("Login successful!",{variant:"success",autoHideDuration:5e3}),console.log("Full response:",a),a.data){const{token:j,empId:v}=a.data;localStorage.setItem("authToken",j),localStorage.setItem("empId",v),console.log("Stored empId:",v),console.log("Stored token:",j),t(a.data),c("/dashboard"),console.log("Authentication successful",a.data)}else throw new Error("No data in response")}catch(a){console.error("Authentication failed",a.response.data),l("Authentication failed. Please check your credentials."),m("Login Failed!",{variant:"error",autoHideDuration:5e3})}},S=()=>{b(!p)},y=o=>{o.preventDefault()};return e.jsx(C,{sx:{marginTop:1,display:"flex",flexDirection:"column",alignItems:"center"},children:e.jsxs(C,{component:"form",noValidate:!0,sx:{mt:1},onSubmit:x,children:[e.jsx(L,{margin:"normal",required:!0,fullWidth:!0,id:"username",label:"Username",name:"username",autoComplete:"username",autoFocus:!0,value:u.username,onChange:h}),e.jsx(L,{margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:p?"text":"password",id:"password",autoComplete:"current-password",value:u.password,onChange:h,InputProps:{endAdornment:e.jsx(ie,{position:"end",children:e.jsx(se,{"aria-label":"toggle password visibility",onClick:S,onMouseDown:y})})}}),e.jsx(C,{sx:{mt:2},children:e.jsx(oe,{children:e.jsx(ce,{sx:{borderRadius:10},disableElevation:!0,fullWidth:!0,type:"submit",variant:"contained",color:"error",children:"Sign in"})})})]})})},ye=()=>e.jsxs(P,{direction:"row",justifyContent:"space-between",children:[e.jsx(g,{variant:"subtitle2",component:I,href:"https://berrydashboard.io",target:"_blank",underline:"hover",children:"Elaf"}),e.jsx(g,{variant:"subtitle2",component:I,href:"https://codedthemes.com",target:"_blank",underline:"hover",children:"Â© Premium"})]}),ke=()=>{const n=B(t=>t.breakpoints.down("md"));return e.jsx(ge,{children:e.jsxs(r,{container:!0,direction:"column",justifyContent:"flex-end",sx:{minHeight:"100vh"},children:[e.jsx(r,{item:!0,xs:12,children:e.jsx(r,{container:!0,justifyContent:"center",alignItems:"center",sx:{minHeight:"calc(100vh - 68px)"},children:e.jsx(r,{item:!0,sx:{m:{xs:1,sm:3},mb:0},children:e.jsx(M,{children:e.jsxs(r,{container:!0,spacing:1,alignItems:"center",justifyContent:"center",children:[e.jsx(r,{item:!0,sx:{mb:1},children:e.jsx(re,{to:"#","aria-label":"logo",children:e.jsx(ae,{})})}),e.jsx(r,{item:!0,xs:12,children:e.jsx(r,{container:!0,direction:{xs:"column-reverse",md:"row"},alignItems:"center",justifyContent:"center",children:e.jsx(r,{item:!0,children:e.jsxs(P,{alignItems:"center",justifyContent:"center",spacing:1,children:[e.jsx(g,{color:"error",gutterBottom:!0,variant:n?"h3":"h2",children:"Welcome to ELAF"}),e.jsx(g,{color:"grey[600]",variant:"caption",fontSize:"16px",textAlign:{xs:"center",md:"inherit"},children:"Enter your credentials to continue"}),e.jsx(be,{})]})})})})]})})})})}),e.jsx(r,{item:!0,xs:6,sx:{m:3,mt:1},children:e.jsx(ye,{})})]})})};export{ke as default};
