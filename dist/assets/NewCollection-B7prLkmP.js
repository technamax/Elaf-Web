import{u as $,a as Y,r as s,b as Q,j as e,M as _,B as j,F as q,G as t,T as C,D}from"./index-B8I23nKO.js";import{a as y}from"./axios-oDLF1z78.js";import{T as J,a as K,b as P,d as X,c as Z,e as S}from"./AddCircle-XL3BnZuK.js";import{F as N}from"./EditAbleDataGrid-CbByiX-8.js";import{B as I,T as o}from"./TextField-DNyM24lV.js";import{M as m}from"./Skeleton-CmigZuP3.js";import"./DataGrid-BMk-oh2X.js";const ue=()=>{const{data:h,error:ee,isLoading:ae,refetch:x}=$(),{data:d}=Y(),[p,O]=s.useState([]),[g,w]=s.useState([]),[c,R]=s.useState({searchPlanningDateFrom:"",searchPlanningDateTo:""}),[l,f]=s.useState({collectionName:"",brandId:"",seasonId:"",volume:"",planningDate:"",launchDate:"",isReapetCollection:"No",noOfDesigns:"",noOfColors:"",poPcs:"",appId:1,createdBy:0,createdOn:new Date().toISOString(),lastUpdatedBy:0,lastUpdatedOn:new Date().toISOString()}),[T,k]=s.useState("");console.log("formData",l),console.log("lookupData",d);const[V,B]=s.useState("1"),{enqueueSnackbar:u}=Q(),z=(a,n)=>{B(n)},[F,W]=s.useState([]);s.useEffect(()=>{if(d){const a=d.result[0];O(a.brandList),w(a.seasonList)}x()},[d]),console.log("brands",p),console.log("seasons",g),s.useEffect(()=>{k(l.noOfColors*l.poPcs)},[l.noOfColors,l.poPcs]),s.useEffect(()=>{if(h){const a=h.result.map((n,r)=>({...n,id:r+1,planningDate:new Date(n.planningDate),launchDate:new Date(n.launchDate)}));W(a)}x()},[h]);const A=F,v=[{field:"collectionName",headerName:"Collection",editable:!0,flex:2},{field:"brandId",headerName:"Brand",editable:!0,flex:1,type:"singleSelect",valueOptions:p.map(a=>({value:a.lookUpId,label:a.lookUpName}))},{field:"seasonId",headerName:"Season",editable:!0,flex:1,type:"singleSelect",valueOptions:g.map(a=>({value:a.lookUpId,label:a.lookUpName}))},{field:"volume",headerName:"Volume",flex:1,editable:!0,type:"singleSelect",valueOptions:["Volume 1","Volume 2","Volume 3","Volume 4","Volume 5"]},{field:"planningDate",headerName:"Planning Date",type:"date",flex:1,editable:!0,valueGetter:a=>a?new Date(a):null,valueFormatter:a=>{const n=a;return n?n.toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"2-digit"}):""}},{field:"launchDate",headerName:"Launch Date",type:"date",flex:1,editable:!0,valueGetter:a=>a?new Date(a):null,valueFormatter:a=>{const n=a;return n?n.toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"2-digit"}):""}},{field:"isRepeatCollection",headerName:"Repeat",flex:1,editable:!0,type:"singleSelect",valueOptions:["No","Yes"]},{field:"noOfColors",headerName:"No. Of Colors",editable:!0,flex:1},{field:"noOfDesigns",headerName:"No Of Designs",editable:!0,flex:1},{field:"poPcs",headerName:"Po Pcs",editable:!0,flex:1}],L=[{value:"Volume 1",label:"Volume 1"},{value:"Volume 2",label:"Volume 2"},{value:"Volume 3",label:"Volume 3"},{value:"Volume 4",label:"Volume 4"},{value:"Volume 5",label:"Volume 5"}],U=[{value:"Yes",label:"Yes"},{value:"No",label:"No"}],i=a=>{const{name:n,value:r}=a.target;f({...l,[n]:r})},b=a=>{const{name:n,value:r}=a.target;R({...c,[n]:r})},G=async()=>{console.log(l);try{const a=await y.post("https://gecxc.com:4041/API/CollectionRegistration/SaveCollection",l);u("Collection saved successfully!",{variant:"success",autoHideDuration:5e3}),console.log("Form data saved:",a.data),f({collectionName:"",brandId:"",seasonId:"",volume:"",planningDate:"",launchDate:"",isReapetCollection:"",noOfDesigns:"",noOfColors:"",poPcs:""}),x()}catch(a){console.error("Error saving data:",a),u("Collection not saved !",{variant:"error",autoHideDuration:5e3})}},[E,M]=s.useState([]),H=async()=>{try{const a=await y.get(`https://gecxc.com:4041/API/CollectionRegistration/GetCollectionListByPlanningDate?startDate=${c.searchPlanningDateFrom}&endDate=${c.searchPlanningDateTo}&appId=1`);u("Collection saved successfully!",{variant:"success",autoHideDuration:5e3}),console.log("Response Data:",a.data),M(a.data.result.map((n,r)=>({id:r,...n})))}catch(a){console.error("Error saving data:",a),u("Collection not saved !",{variant:"error",autoHideDuration:5e3})}};return console.log("searchData",c),e.jsx(_,{style:{borderWidth:1,borderStyle:"dotted",borderColor:"#a11f23",width:"auto",maxHeight:{xs:"80vh",md:"auto"},overflow:"auto"},children:e.jsx(j,{sx:{width:"100%",typography:"body1"},children:e.jsxs(J,{value:V,children:[e.jsx(j,{sx:{borderBottom:1,borderColor:"divider"},children:e.jsxs(K,{onChange:z,"aria-label":"lab API tabs example",children:[e.jsx(P,{icon:e.jsx(X,{}),label:"Add Collection",value:"1",sx:a=>({"& .MuiTouchRipple-child":{backgroundColor:`${a.palette.primary.main} !important`}})}),e.jsx(P,{icon:e.jsx(Z,{}),label:"Search Collection",value:"2",sx:a=>({"& .MuiTouchRipple-child":{backgroundColor:`${a.palette.primary.main} !important`}})})]})}),e.jsxs(S,{value:"1",children:[e.jsx(q,{children:e.jsxs(t,{container:!0,spacing:2,width:"inherit",children:[e.jsx(t,{item:!0,xs:9,md:9,children:e.jsx(C,{variant:"h3",gutterBottom:!0,children:"Create New Collection"})}),e.jsx(t,{item:!0,xs:3,textAlign:"right",children:e.jsx(I,{variant:"contained",size:"small",onClick:G,children:"Save"})}),e.jsx(t,{item:!0,xs:12,md:3,children:e.jsx(o,{fullWidth:!0,select:!0,label:"Season Name",name:"seasonId",value:l.seasonId,onChange:i,size:"small",children:g.map(a=>e.jsx(m,{value:a.lookUpId,children:a.lookUpName},a.lookUpId))})}),e.jsx(t,{item:!0,xs:12,md:3,children:e.jsx(o,{fullWidth:!0,select:!0,label:"Brand Name",name:"brandId",value:l.brandId,onChange:i,size:"small",children:p.map(a=>e.jsx(m,{value:a.lookUpId,children:a.lookUpName},a.lookUpId))})}),e.jsx(t,{item:!0,xs:12,md:6,children:e.jsx(o,{label:"Collection Name",fullWidth:!0,size:"small",name:"collectionName",onChange:i,value:l.collectionName})}),e.jsx(t,{item:!0,xs:12,md:3,children:e.jsx(o,{fullWidth:!0,select:!0,label:"Volume",name:"volume",value:l.volume,onChange:i,size:"small",children:L.map(a=>e.jsx(m,{value:a.value,children:a.label},a.value))})}),e.jsx(t,{item:!0,xs:12,md:3,children:e.jsx(o,{size:"small",type:"date",label:"Planning Date",name:"planningDate",value:l.planningDate,onChange:i,fullWidth:!0,focused:!0})}),e.jsx(t,{item:!0,xs:12,md:3,children:e.jsx(o,{size:"small",type:"date",label:"Launch Date",name:"launchDate",value:l.launchDate,onChange:i,fullWidth:!0,focused:!0})}),e.jsx(t,{item:!0,xs:12,md:3,children:e.jsx(o,{fullWidth:!0,select:!0,label:"Repeat Collection?",name:"isReapetCollection",defaultValue:"No",value:l.isReapetCollection,onChange:i,size:"small",children:U.map(a=>e.jsx(m,{value:a.value,children:a.label},a.value))})}),e.jsx(t,{item:!0,xs:12,md:3,children:e.jsx(o,{label:"No. of Colors/Articles",fullWidth:!0,size:"small",name:"noOfColors",type:"number",onChange:i,value:l.noOfColors})}),e.jsx(t,{item:!0,xs:12,md:3,children:e.jsx(o,{label:"No. of Designs",fullWidth:!0,size:"small",name:"noOfDesigns",type:"number",onChange:i,value:l.noOfDesigns})}),e.jsx(t,{item:!0,xs:12,md:3,children:e.jsx(o,{label:"Po. Pieces",fullWidth:!0,size:"small",name:"poPcs",type:"number",onChange:i,value:l.poPcs})}),e.jsx(t,{item:!0,xs:12,md:3,children:e.jsx(o,{label:"Total Pieces",fullWidth:!0,size:"small",name:"totalPcs",type:"number",value:T,disabled:!0})}),e.jsx(t,{item:!0,sm:12,children:e.jsx(D,{color:"#cc8587",sx:{height:2,width:"100%"}})})]})}),e.jsx(t,{container:!0,spacing:2,width:"inherit",paddingTop:2,children:e.jsx(t,{item:!0,xs:12,children:e.jsx(N,{initialRows:A,ncolumns:v,formData:l,deleteApi:"https://gecxc.com:4041/API/CollectionRegistration/DeleteCollectionByCollectionId?collectionId=",deleteBy:"collectionId",editAPi:"https://gecxc.com:4041/API/CollectionRegistration/SaveCollection"})})})]}),e.jsxs(S,{value:"2",children:[e.jsxs(t,{container:!0,spacing:2,width:"inherit",children:[e.jsx(t,{item:!0,xs:9,md:9,children:e.jsx(C,{variant:"h3",gutterBottom:!0,children:"Search Collection"})}),e.jsx(t,{item:!0,xs:3,textAlign:"right",children:e.jsx(I,{variant:"contained",size:"small",onClick:H,children:"Search"})}),e.jsx(t,{item:!0,xs:12,md:6,children:e.jsx(o,{size:"small",type:"date",label:"Date From",name:"searchPlanningDateFrom",value:c.searchPlanningDateFrom,onChange:b,fullWidth:!0,focused:!0})}),e.jsx(t,{item:!0,xs:12,md:6,children:e.jsx(o,{size:"small",type:"date",label:"Date to",name:"searchPlanningDateTo",value:c.searchPlanningDateTo,onChange:b,fullWidth:!0,focused:!0})}),e.jsx(t,{item:!0,sm:12,children:e.jsx(D,{color:"#cc8587",sx:{height:2,width:"100%"}})})]}),e.jsx(t,{container:!0,spacing:2,width:"inherit",paddingTop:2,children:e.jsx(t,{item:!0,xs:12,children:e.jsx(N,{initialRows:E,ncolumns:v,formData:l,disableAddRecord:!0})})})]})]})})})};export{ue as default};
