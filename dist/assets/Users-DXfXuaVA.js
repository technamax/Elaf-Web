import{j as e,B as f,G as d,D as x}from"./index-CsWv3HX5.js";import{r as n}from"./vendor-BXCbSo2_.js";import{B as N,a as u}from"./axios-uGUsbY1x.js";import{T as l}from"./TextField-D_1a3A_1.js";import{M as v}from"./Skeleton-O8UzV6mH.js";import{D as w}from"./DataGrid-D32CN7U9.js";import{G as I}from"./GridToolbar-BQeDHkd2.js";function j({onSaveSuccess:m}){const c=[{value:"yes",label:"yes"},{value:"no",label:"no"}],[i,p]=n.useState({firstName:"",lastName:"",userName:"",empId:"",password:"",isActive:"yes",appId:""}),[a,h]=n.useState({}),t=r=>{const{name:s,value:g}=r.target;p({...i,[s]:g})},o=async()=>{const r={...i,isActive:i.isActive==="yes"};console.log(r);try{const s=await u.post("https://gecxc.com:4041/api/Users/SaveUsers",r);console.log("Form data saved:",s.data),p({firstName:"",lastName:"",userName:"",empId:"",password:"",isActive:"yes",appId:""}),h({}),m&&m()}catch(s){console.error("Error saving data:",s),s.response&&s.response.data&&h(s.response.data.errors)}};return e.jsx("div",{children:e.jsx(f,{m:3,pt:4,component:"form",sx:{"& .MuiTextField-root":{m:1,width:"inherit"}},noValidate:!0,autoComplete:"off",children:e.jsxs(d,{container:!0,children:[e.jsx(d,{item:!0,md:4,width:"inherit",paddingX:1,children:e.jsx(l,{id:"outlined-required",label:"First Name",name:"firstName",size:"small",required:!0,value:i.firstName,onChange:t,error:!!a.firstName,helperText:a.firstName&&a.firstName[0]})}),e.jsx(d,{item:!0,md:4,width:"inherit",paddingX:1,children:e.jsx(l,{id:"outlined-required",label:"Last Name",name:"lastName",size:"small",required:!0,value:i.lastName,onChange:t,error:!!a.lastName,helperText:a.lastName&&a.lastName[0]})}),e.jsx(d,{item:!0,md:4,width:"inherit",paddingX:1,children:e.jsx(l,{id:"outlined-required",label:"User Name",name:"userName",size:"small",required:!0,value:i.userName,onChange:t,error:!!a.userName,helperText:a.userName&&a.userName[0]})}),e.jsx(d,{item:!0,md:4,width:"inherit",paddingX:1,children:e.jsx(l,{id:"outlined-required",label:"Emp Id",name:"empId",size:"small",required:!0,value:i.empId,onChange:t,error:!!a.empId,helperText:a.empId&&a.empId[0]})}),e.jsx(d,{item:!0,md:4,width:"inherit",paddingX:1,children:e.jsx(l,{id:"outlined-required",label:"Password",name:"password",size:"small",required:!0,value:i.password,onChange:t,error:!!a.password,helperText:a.password&&a.password[0]})}),e.jsx(d,{item:!0,md:4,width:"inherit",paddingX:1,children:e.jsx(l,{id:"outlined-select-option",select:!0,label:"is Active",name:"isActive",size:"small",required:!0,value:i.isActive,onChange:t,error:!!a.isActive,helperText:a.isActive&&a.isActive[0],children:c.map(r=>e.jsx(v,{value:r.value,children:r.label},r.value))})}),e.jsx(d,{item:!0,md:4,width:"inherit",paddingX:1,children:e.jsx(l,{id:"outlined-required",label:"App Id",name:"appId",size:"small",required:!0,value:i.appId,onChange:t,error:!!a.appId,helperText:a.appId&&a.appId[0]})}),e.jsx(d,{item:!0,md:12,width:"inherit",paddingX:1,textAlign:"right",children:e.jsx(N,{variant:"contained",color:"primary",size:"small",onClick:o,children:"Save"})})]})})})}function b(){const[m,c]=n.useState([]),i=n.useCallback(async()=>{try{console.log("Fetching data...");const t=await u.get("https://gecxc.com:4041/api/Users/GetUserMenuByEmpId?empId=1");console.log("Data fetched:",t.data);const o=t.data.result.map((r,s)=>({id:s,...r}));console.log("Data with ID:",o),c(o)}catch(t){console.error("Error fetching data:",t)}},[]);n.useEffect(()=>{i()},[i]);const p=n.useCallback(async()=>{try{console.log("Fetching data...");const t=await u.get("https://gecxc.com:4041/api/Users/GetUserSubMenuByEmpId?empId=1");console.log("Data fetched:",t.data);const o=t.data.result.map((r,s)=>({id:s,...r}));console.log("Data with ID:",o),c(o)}catch(t){console.error("Error fetching data:",t)}},[]);n.useEffect(()=>{p()},[p]);const a=n.useCallback(async()=>{try{console.log("Fetching data...");const t=await u.get("https://gecxc.com:4041/api/Users/GetUsersList");console.log("Data fetched:",t.data);const o=t.data.result.map((r,s)=>({id:s,...r}));console.log("Data with ID:",o),c(o)}catch(t){console.error("Error fetching data:",t)}},[]);n.useEffect(()=>{a()},[a]);const h=[{field:"firstName",headerName:"First Name",width:150},{field:"lastName",headerName:"Last Name",width:200},{field:"userName",headerName:"User Name",minWidth:120},{field:"empId",headerName:" Emp Id",minWidth:120},{field:"password",headerName:"Password",minWidth:120},{field:"isActive",headerName:"is Active",minWidth:120},{field:"appId",headerName:"App Id",minWidth:120}];return e.jsx("div",{style:{height:"auto",width:"100%"},children:e.jsx(w,{rows:m,columns:h,autoHeight:!0,initialState:{pagination:{paginationModel:{page:0,pageSize:10}}},pageSizeOptions:[10,15],localeText:{toolbarDensity:"Size",toolbarDensityLabel:"Size",toolbarDensityCompact:"Small",toolbarDensityStandard:"Medium",toolbarDensityComfortable:"Large"},components:{Toolbar:I}})})}function S(m){return e.jsxs(e.Fragment,{children:[e.jsx(j,{}),e.jsx(x,{}),e.jsx(b,{fetchData:m})]})}export{S as default};
