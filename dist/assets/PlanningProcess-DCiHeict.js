import{j as e,_ as De,r as Je,i as Ze,Q as et,u as Ce,c as Ne,$ as Ae,b as Se,a0 as Oe,a1 as Ue,a2 as Ee,a3 as Be,a4 as tt,a5 as Me,C as Z,d as K,a6 as Le,G as a,D as de,V as ye,T as be,a7 as Qe,a8 as st,a9 as at,aa as rt,ab as ot,ac as nt,ad as lt,B as Ie,ae as dt,af as it}from"./index-AmyHuagJ.js";import{r}from"./vendor-BXCbSo2_.js";import{a as se}from"./axios-DGlyNUmx.js";import{d as Te,c as me,A as ke,e as ze,f as we,l as We,R as Pe,D as ct,g as ut,h as mt,i as ht,S as pt,a as gt,b as ft,F as xt}from"./Fabrication-cdULQOSi.js";import{d as Re}from"./VisibilityOutlined-jThwWf5t.js";import{T as n,B as _,P as It}from"./TextField-TQSsXG4K.js";import{M as P}from"./Skeleton-C1XBKFJE.js";import{A as He,C as Ge,D as bt}from"./DataGrid-CJTwKQXF.js";import{d as vt}from"./dayjs.min-BDDVprXY.js";import"./ExcelExport-Dm_zY6Hg.js";import{G as jt}from"./GridToolbar-D-Id0pWZ.js";let Ve=!1;const yt=r.forwardRef(function(t,u){return Ve||(console.warn(["MUI: The Autocomplete component was moved from the lab to the core.","","You should use `import { Autocomplete } from '@mui/material'`","or `import Autocomplete from '@mui/material/Autocomplete'`"].join(`
`)),Ve=!0),e.jsx(He,De({ref:u},t))});var Ye={},Ct=Ze;Object.defineProperty(Ye,"__esModule",{value:!0});var Ke=Ye.default=void 0,St=Ct(Je()),Pt=e;Ke=Ye.default=(0,St.default)((0,Pt.jsx)("path",{d:"M21 10h-3L2 3v7l9 2-9 2v7l8-3.5V21c0 1.1.9 2 2 2h9c1.1 0 2-.9 2-2v-9c0-1.1-.9-2-2-2m0 11h-9v-9h9zm-4.5-1L13 16h2v-3h3v3h2z"}),"SendAndArchive");const Nt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAACXBIWXMAAAsTAAALEwEAmpwYAAACk0lEQVR4nO2WzU4UQRSFe14CgoiMKPIqolEiIQq+gEFgFPHnFVyILI3GnQIbxxhG3IkaYxT8iUZFoxuDbokoIaNE/czNnE6KSjdT07Yb40kqqa6qW+dW3XNvdRT9R4MAHgD3640Dh/MkHQTOqMWIv9PGydOBUeCsWoz4O208PwdcxCz1xoGBKG8Abc5JPwBrataP0fY3iLcCk8C6SF4DV4HzatZf1Ny6vrfkRd4PrABV4BywE9huKpc2rA0ARaATGAe+yebgn5IfB34BD0XQCzwlHU+AA1r7CPgJlLKS94n8GtAM3CIcFaAJKGuPviwxX9XJjfxlCtGMyJLwQrbzwNeGNEFNRFVdZdrJb2ttAbizyU10SBNXQslbgR8SnMXcxagEOGyxdmxs3ZDmxjybHmWKZUdriAOnZWhqf+ZtVgyw3+HZPAZ2qX8yxIGbwCudxsdwgH3JszERtqtOVEIc+ARMKbc3xNy79r1a+xHodsYtDec8W6sl01YxQxxYVfzdWM4krDPiGEveXMHLjhMqUGshDlQTHLDNCg06MJvgwJcQB96lhMBSrddZ1y0nloDdXkbc9WwPKQSLIQ7M6rGxGuBjKMB+JEGE24A3tnfUgIo7E+p+1jTsUn8wxIEWFaJxKdrFmBwrJRSiEc2d8mz2AxPas6WuAwbgkspncZNaPyexWbuXsuaGbuQ7cDEKBbVHZEVParMeliRUPLW7eK4XcUF7NQU7YAD26NrKciLtJtJObuTXtce+KAuAI9pgXq9aj0SVhgXFvEN9y4Cjmci9kvtZmpjQw9KuOhH/kvUr1bq0xmK+bLZRHqB2nZd1Gyinp5yfUuu/1ZyRX7CfmlzIXUgLx6SH93o3ltUv6z8hf+LoX8ZvSFCuNiG5hzcAAAAASUVORK5CYII=",At=()=>{const g=et(),{user:t}=Ce(),{enqueueSnackbar:u}=Ne(),[s,i]=r.useState([]),[h,w]=r.useState(!1),[o,x]=r.useState({embroideryId:0,designId:"",batchNo:"",planningHeaderId:"",componentId:"",fabricId:"",vendorId:"",poPcs:"",baseColorId:"",baseColorName:"",colorId:"",availableQty:"",noOfHead:"",repeats:"",cuttingSize:"",itemsPerRepeat:"",totalPcs:"",totalAmount:"",threadStiches:"",threadRate:"",threadAmount:"",tillaStiches:"",tilaRate:"",tilaAmount:"",sequence:"",sequenceRate:"",sequenceAmount:"",isSolving:!1,solvingLayers:0,solvingInMeters:"",solvingRate:0,solvingAmount:"",threadAdditional:[],costPerComponent:"",createdBy:t.empId,createdOn:new Date().toISOString(),lastUpdatedOn:new Date().toISOString(),lastUpdatedBy:t.empId});r.useEffect(()=>{x({embroideryId:(s==null?void 0:s.embroideryId)||0,designId:(s==null?void 0:s.designId)||"",batchNo:(s==null?void 0:s.batchNo)||"",planningHeaderId:(s==null?void 0:s.planningHeaderId)||"",componentId:(s==null?void 0:s.componentId)||"",fabricId:(s==null?void 0:s.fabricId)||"",vendorId:(s==null?void 0:s.vendorId)||"",poPcs:(s==null?void 0:s.poPcs)||"",baseColorId:(s==null?void 0:s.baseColorId)||"",baseColorName:(s==null?void 0:s.baseColorName)||"",colorId:(s==null?void 0:s.colorId)||"",availableQty:(s==null?void 0:s.availableQty)||"",noOfHead:(s==null?void 0:s.noOfHead)||"",repeats:(s==null?void 0:s.repeats)||"",cuttingSize:(s==null?void 0:s.cuttingSize)||"",itemsPerRepeat:(s==null?void 0:s.itemsPerRepeat)||"",totalPcs:(s==null?void 0:s.totalPcs)||"",totalAmount:(s==null?void 0:s.totalAmount)||"",threadStiches:(s==null?void 0:s.threadStiches)||"",threadRate:(s==null?void 0:s.threadRate)||"",threadAmount:(s==null?void 0:s.threadAmount)||"",tillaStiches:(s==null?void 0:s.tillaStiches)||"",tilaRate:(s==null?void 0:s.tilaRate)||"",tilaAmount:(s==null?void 0:s.tilaAmount)||"",sequence:(s==null?void 0:s.sequence)||"",sequenceRate:(s==null?void 0:s.sequenceRate)||"",sequenceAmount:(s==null?void 0:s.sequenceAmount)||"",isSolving:(s==null?void 0:s.isSolving)||!1,solvingLayers:(s==null?void 0:s.solvingLayers)||0,solvingInMeters:(s==null?void 0:s.solvingInMeters)||"",solvingRate:(s==null?void 0:s.solvingRate)||0,solvingAmount:(s==null?void 0:s.solvingAmount)||"",threadAdditional:(s==null?void 0:s.threadAdditional)||[],costPerComponent:(s==null?void 0:s.costPerComponent)||"",createdOn:(s==null?void 0:s.createdOn)||new Date().toISOString(),createdBy:(s==null?void 0:s.createdBy)||t.empId,lastUpdatedOn:new Date().toISOString(),lastUpdatedBy:t.empId})},[s]);const Q=["Boring","Pooni","Laser","Doori","Dissolving"];function X(d,f,l){return{fontWeight:f.indexOf(d)===-1?l.typography.fontWeightRegular:l.typography.fontWeightMedium}}const{data:k}=Ae(),[A,V]=r.useState(""),{data:T}=Se(),{data:R,refetch:C}=Oe(A,{skip:!A}),{data:O,refetch:J}=Ue(o.designId,{skip:!o.designId}),{data:v}=Ee({batchNo:o.planningHeaderId,componentId:o.componentId},{skip:!o.planningHeaderId||!o.componentId}),{data:z}=Be({batchNo:o.planningHeaderId,componentId:o.componentId,fabricId:o.fabricId},{skip:!o.planningHeaderId||!o.componentId||!o.fabricId}),{data:W,refetch:G}=tt(o.planningHeaderId,{skip:!o.planningHeaderId}),{data:j}=Me(o.planningHeaderId,{skip:!o.planningHeaderId});console.log("formData.planningHeaderId",o.planningHeaderId),console.log("collectionData",k);const[q,D]=r.useState(!1),ee=(d,f)=>{D(!q)},[he,pe]=r.useState([]),[ne,te]=r.useState([]),[ge,ae]=r.useState([]),[ie,E]=r.useState([]),[L,re]=r.useState([]),[oe,B]=r.useState([]),[Y,fe]=r.useState([]),[ce,ue]=r.useState([]);console.log("batchList",ne),console.log("formData",o),r.useEffect(()=>{R&&pe(R.result)},[R]),r.useEffect(()=>{O&&te(O.result)},[O]),r.useEffect(()=>{v&&ae(v.result)},[v]),r.useEffect(()=>{z&&B(v.result)},[z]),r.useEffect(()=>{j&&ue(j.result)},[j]),r.useEffect(()=>{W&&fe(W.result.map((d,f)=>({id:f,...d})))},[W,G]),console.log("embroideryList",W),console.log("initialRows",Y),r.useEffect(()=>{if(T){const d=T.result[0];E(d.vendorList),re(d.noOfHeadsList)}},[T]);const le=(k==null?void 0:k.result)||[];r.useEffect(()=>{const d=()=>{const U=parseFloat(o.repeats)||0,$=parseFloat(o.itemsPerRepeat)||0;return(U*$).toFixed(2)};x(U=>({...U,totalPcs:d()}));const f=()=>{const U=parseFloat(o.threadStiches)||0,$=parseFloat(o.threadRate)||0,xe=parseFloat(o.noOfHead)||0,je=parseFloat(o.repeats)||0;return(U/1e3*($*je*xe)).toFixed(2)};x(U=>({...U,threadAmount:f()}));const l=()=>{const U=parseFloat(o.tillaStiches)||0,$=parseFloat(o.tilaRate)||0,xe=parseFloat(o.noOfHead)||0,je=parseFloat(o.repeats)||0;return(U/1e3*($*je*xe)).toFixed(2)};x(U=>({...U,tilaAmount:l()}));const b=()=>{const U=parseFloat(o.sequence)||0,$=parseFloat(o.sequenceRate)||0,xe=parseFloat(o.noOfHead)||0,je=parseFloat(o.repeats)||0;return(U/1e3*($*je*xe)).toFixed(2)};x(U=>({...U,sequenceAmount:b()}));const y=()=>{const U=parseFloat(o.repeats)||0,$=parseFloat(o.noOfHead)||0,xe=parseFloat(o.solvingLayers)||0;return(U*$*13/39.37*xe).toFixed(2)};x(U=>({...U,solvingInMeters:y()}));const M=()=>{const U=parseFloat(o.solvingInMeters)||0,$=parseFloat(o.solvingRate)||0;return parseFloat(o.solvingLayers),(U*$).toFixed(2)};x(U=>({...U,solvingAmount:M()}));const ve=()=>{const U=parseFloat(o.threadAmount)||0,$=parseFloat(o.tilaAmount)||0,xe=parseFloat(o.sequenceAmount)||0,je=parseFloat(o.solvingAmount)||0;return(U+$+xe+je).toFixed(2)};x(U=>({...U,totalAmount:ve()}));const qe=()=>{const U=parseFloat(o.totalAmount)||0,$=parseFloat(o.totalPcs)||0;return(U/$).toFixed(2)};x(U=>({...U,costPerComponent:qe()}))},[o.threadAmount,o.totalAmount,o.sequenceAmount,o.solvingAmount,o.repeats,o.tilaAmount,o.itemsPerRepeat,o.threadRate,o.threadStiches,o.noOfHead,o.tilaRate,o.tillaStiches,o.sequenceRate,o.sequence,o.solvingLayers,o.solvingInMeters,o.solvingRate]);const N=d=>{const{name:f,checked:l}=d.target;x(b=>({...b,[f]:l}))},I=d=>{const{name:f,value:l}=d.target;if(f==="collectionId")le.find(b=>b.collectionId===parseInt(l)),V(l),w(!0),x({...o,collectionId:l,designId:"",batchNo:"",planningHeaderId:"",componentId:"",fabricId:"",vendorId:"",poPcs:"",baseColorId:"",baseColorName:"",colorId:"",availableQty:"",noOfHead:"",repeats:"",cuttingSize:"",itemsPerRepeat:"",totalPcs:"",totalAmount:"",threadStiches:"",threadRate:"",threadAmount:"",tillaStiches:"",tilaRate:"",tilaAmount:"",sequence:"",sequenceRate:"",sequenceAmount:"",isSolving:!1,solvingLayers:0,solvingInMeters:"",solvingRate:0,solvingAmount:"",threadAdditional:[],costPerComponent:""});else if(f==="designId"){const b=he.find(y=>y.designId===parseInt(l));x({...o,designId:l,baseColorId:b?b.colorId:"",baseColorName:b?b.colorName:"",batchNo:"",planningHeaderId:"",componentId:"",fabricId:"",vendorId:"",poPcs:"",colorId:"",availableQty:"",noOfHead:"",repeats:"",cuttingSize:"",itemsPerRepeat:"",totalPcs:"",totalAmount:"",threadStiches:"",threadRate:"",threadAmount:"",tillaStiches:"",tilaRate:"",tilaAmount:"",sequence:"",sequenceRate:"",sequenceAmount:"",isSolving:!1,solvingLayers:0,solvingInMeters:"",solvingRate:0,solvingAmount:"",threadAdditional:[],costPerComponent:""})}else if(f==="colorId"){const b=oe.find(y=>y.colorId===l);x({...o,colorId:l,availableQty:b?b.total:"",cuttingSize:b?b.cuttingSize:"",repeats:b?b.repeats:""})}else if(f==="batchNo"){const b=ne.find(y=>y.batchNo===l);x({...o,batchNo:l,planningHeaderId:b?b.planningHeaderId:"",poPcs:b?b.poPcs:"",componentId:"",fabricId:"",vendorId:"",baseColorId:"",baseColorName:"",colorId:"",availableQty:"",noOfHead:"",repeats:"",cuttingSize:"",itemsPerRepeat:"",totalPcs:"",totalAmount:"",threadStiches:"",threadRate:"",threadAmount:"",tillaStiches:"",tilaRate:"",tilaAmount:"",sequence:"",sequenceRate:"",sequenceAmount:"",isSolving:!1,solvingLayers:0,solvingInMeters:"",solvingRate:0,solvingAmount:"",threadAdditional:[],costPerComponent:""}),D(!0),w(!1)}else x({...o,[f]:l})},[p,S]=r.useState({}),F=async()=>{const d=H();if(Object.keys(d).length>0){S(d);return}try{const f=await se.post("https://gecxc.com:4041/api/Embroidery/SaveEmbroidery",{...o,threadAdditional:o.threadAdditional.join(", ")});console.log("Save response:",f.data),f.data.success?u("Fabrication saved successfully!",{variant:"success",autoHideDuration:5e3}):(u(`${f.data.message} !`,{variant:"error",autoHideDuration:5e3}),console.log("response.message",f.data.message)),x(l=>({embroideryId:0,designId:l.designId,batchNo:l.batchNo,planningHeaderId:l.planningHeaderId,componentId:"",fabricId:"",vendorId:"",poPcs:l.poPcs,baseColorId:l.baseColorId,baseColorName:l.baseColorName,colorId:"",availableQty:"",noOfHead:"",repeats:"",cuttingSize:"",itemsPerRepeat:"",totalPcs:"",totalAmount:"",threadStiches:"",threadRate:"",threadAmount:"",tillaStiches:"",tilaRate:"",tilaAmount:"",sequence:"",sequenceRate:"",sequenceAmount:"",isSolving:!1,solvingLayers:0,solvingInMeters:"",solvingRate:0,solvingAmount:"",threadAdditional:[],costPerComponent:"",createdOn:new Date().toISOString(),createdBy:t.empId,lastUpdatedOn:new Date().toISOString(),lastUpdatedBy:t.empId})),G()}catch(f){console.error("Error saving data:",f),u("Dyeing not saved successfully!",{variant:"error",autoHideDuration:5e3})}},H=()=>{const d={};return o.fabricId||(d.fabricId="fabricId is required"),o.colorId||(d.colorId="colorId is required"),o.vendorId||(d.vendorId="vendorId is required"),o.componentId||(d.componentId="componentId is required"),o.noOfHead||(d.noOfHead="noOfHead is required"),o.itemsPerRepeat||(d.itemsPerRepeat="itemsPerRepeat is required"),o.threadStiches||(d.threadStiches="threadStiches is required"),o.threadRate||(d.threadRate="threadRate is required"),o.tillaStiches||(d.tillaStiches="tillaStiches is required"),o.tilaRate||(d.tilaRate="tilaRate is required"),o.sequence||(d.sequence="sequence is required"),o.sequenceRate||(d.sequenceRate="sequenceRate is required"),d};console.log("initialRows",Y);const m=[{field:"designNo",headerName:"Design"},{field:"batchNo",headerName:"Batch No."},{field:"componentName",headerName:"Component "},{field:"fabricName",headerName:"Fabric "},{field:"vendorId",headerName:"Vendor"},{field:"poPcs",headerName:"Po Pcs"},{field:"colourName",headerName:"Color"},{field:"availableQty",headerName:"Available Qty"},{field:"noOfHeadsName",headerName:"No. Of Heads"},{field:"repeats",headerName:"Repeats"},{field:"cuttingSize",headerName:"Cutting Size"},{field:"itemsPerRepeat",headerName:"Items Per Repeat"},{field:"totalPcs",headerName:"Total Pcs"},{field:"threadStiches",headerName:"Thread Stitches"},{field:"threadRate",headerName:"Thread Rate"},{field:"threadAmount",headerName:"Thread Amount"},{field:"tillaStiches",headerName:"Tilla Stitches"},{field:"tilaRate",headerName:"Tilla Rate"},{field:"tilaAmount",headerName:"Tilla Amount"},{field:"sequence",headerName:"sequence"},{field:"sequenceRate",headerName:"Sequence Rate"},{field:"sequenceAmount",headerName:"Sequence Amount"},{field:"isSolving",headerName:"Is Solving"},{field:"solvingLayers",headerName:"Solving Layers"},{field:"solvingInMeters",headerName:"Solving In Meters"},{field:"solvingRate",headerName:"Solving Rate"},{field:"solvingAmount",headerName:"Solving Amount"},{field:"threadAdditional",headerName:"ThreadAdditional"},{field:"costPerComponent",headerName:"Cost Per Component"}];return e.jsxs(e.Fragment,{children:[e.jsxs(Z,{variant:"outlined",children:[e.jsx(K,{className:"css-4rfrnx-MuiCardHeader-root",avatar:e.jsx(Le,{src:Nt,sx:{background:"transparent"}}),title:"Embroidery  ",titleTypographyProps:{style:{color:"white"}}}),e.jsxs(a,{container:!0,spacing:2,width:"Inherit",sx:{paddingY:2,paddingX:2},children:[" ",e.jsxs(a,{item:!0,xs:12,md:3,children:[e.jsx(n,{fullWidth:!0,select:!0,label:"Select Collection",name:"collectionId",value:A,onChange:I,size:"small",children:le.map(d=>e.jsx(P,{value:d.collectionId,children:d.collectionName},d.collectionId))})," "]}),e.jsx(a,{item:!0,xs:12,md:3,children:e.jsx(n,{fullWidth:!0,select:!0,label:"Select Design",name:"designId",value:o.designId,onChange:I,size:"small",children:he.map(d=>e.jsx(P,{value:d.designId,children:d.designNo},d.designId))})}),e.jsxs(a,{item:!0,xs:12,md:3,children:[e.jsx(n,{fullWidth:!0,select:!0,label:"Batch No.",name:"batchNo",value:o.batchNo,onChange:I,size:"small",children:ne.map(d=>e.jsx(P,{value:d.batchNo,children:d.batchNo},d.batchNo))})," "]}),e.jsx(a,{item:!0,xs:12,md:3,children:e.jsx(n,{label:"Base Color",fullWidth:!0,size:"small",name:"baseColorName",value:o.baseColorName,onChange:I,disabled:!0})})]})]}),e.jsx(a,{item:!0,xs:12,md:12,children:e.jsx(de,{color:"#cc8587",sx:{height:1,width:"100%",mt:2}})}),e.jsxs(Z,{variant:"outlined",children:[e.jsx(K,{className:"css-4rfrnx-MuiCardHeader-root",avatar:e.jsx(Te,{}),title:"Add Embroidery",titleTypographyProps:{style:{color:"white"}},action:e.jsx(ye,{onClick:ee,sx:{mt:"-18px"},children:e.jsx(me,{style:{color:"white"}})}),sx:{display:"flex",alignItems:"center",justifyContent:"space-between"}})," ",e.jsxs(ke,{expanded:q,onChange:ee,sx:{},children:[e.jsx(ze,{expandIcon:e.jsx(me,{}),"aria-controls":"panel1-content",id:"panel1-header",sx:{display:"none"}}),e.jsxs(we,{children:[e.jsxs(a,{container:!0,spacing:2,width:"Inherit",sx:{paddingY:2,paddingX:2},children:[" ",e.jsxs(a,{item:!0,xs:12,md:3,children:[e.jsx(n,{fullWidth:!0,select:!0,label:"Components",name:"componentId",value:o.componentId,onChange:I,size:"small",required:!0,error:!!p.componentId,helperText:p.componentId,children:ce.map(d=>e.jsx(P,{value:d.componentId,children:d.componentName},d.componentId))})," "]}),e.jsx(a,{item:!0,xs:12,md:3,children:e.jsx(n,{fullWidth:!0,select:!0,label:"Select Fabric",defaultValue:"",size:"small",name:"fabricId",value:o.fabricId,onChange:I,required:!0,error:!!p.fabricId,helperText:p.fabricId,children:ge.map(d=>e.jsx(P,{value:d.fabricId,children:d.fabric},d.fabricId))})}),e.jsx(a,{item:!0,xs:12,md:3,children:e.jsx(n,{fullWidth:!0,select:!0,label:"Vendors",defaultValue:"",size:"small",name:"vendorId",value:o.vendorId,onChange:I,required:!0,error:!!p.vendorId,helperText:p.vendorId,children:ie.map(d=>e.jsx(P,{value:d.lookUpId,children:d.lookUpName},d.lookUpId))})}),e.jsx(a,{item:!0,xs:12,md:3,children:e.jsx(n,{fullWidth:!0,select:!0,label:"Color",size:"small",name:"colorId",value:o.colorId,onChange:I,required:!0,error:!!p.colorId,helperText:p.colorId,children:oe.map(d=>e.jsx(P,{value:d.colorId,children:d.color},d.colorId))})}),e.jsx(a,{item:!0,xs:12,md:1.5,children:e.jsx(n,{label:"Po Pcs",fullWidth:!0,size:"small",name:"poPcs",value:o.poPcs,onChange:I,disabled:!0})}),e.jsx(a,{item:!0,xs:12,md:1.5,children:e.jsx(n,{label:"Available Quantity",fullWidth:!0,size:"small",name:"availableQty",type:"number",value:o.availableQty,onChange:I})}),e.jsx(a,{item:!0,xs:12,md:1.5,children:e.jsx(n,{label:"Repeats",type:"number",fullWidth:!0,size:"small",name:"repeats",value:o.repeats,onChange:I})}),e.jsx(a,{item:!0,xs:12,md:1.5,children:e.jsx(n,{fullWidth:!0,select:!0,label:"Heads",defaultValue:"",size:"small",name:"noOfHead",value:o.noOfHead,onChange:I,required:!0,error:!!p.noOfHead,helperText:p.noOfHead,children:L.map(d=>e.jsx(P,{value:d.lookUpId,children:d.lookUpName},d.lookUpId))})}),e.jsx(a,{item:!0,xs:12,md:1.5,children:e.jsx(n,{label:"Cutting Size",fullWidth:!0,size:"small",name:"cuttingSize",type:"number",value:o.cuttingSize,onChange:I})}),e.jsx(a,{item:!0,xs:12,md:1.5,children:e.jsx(n,{label:"itemsPerRepeat",fullWidth:!0,type:"number",size:"small",name:"itemsPerRepeat",value:o.itemsPerRepeat,onChange:I,required:!0,error:!!p.itemsPerRepeat,helperText:p.itemsPerRepeat})}),e.jsx(a,{item:!0,xs:12,md:1.5,children:e.jsx(n,{label:"total Pcs.",fullWidth:!0,size:"small",type:"number",name:"totalPcs",value:o.totalPcs,onChange:I})}),e.jsx(a,{item:!0,xs:12,md:1.5,children:e.jsx(n,{label:"Total Amount",fullWidth:!0,type:"number",size:"small",name:"totalAmount",value:o.totalAmount,onChange:I})}),e.jsx(a,{item:!0,xs:12,md:1.5,children:e.jsx(n,{label:"Cost Per Component",fullWidth:!0,size:"small",name:"costPerComponent",value:o.costPerComponent,onChange:I})}),e.jsx(a,{item:!0,xs:12,md:3,children:e.jsx(n,{select:!0,label:"Additional",value:o.threadAdditional,name:"threadAdditional",size:"small",onChange:I,fullWidth:!0,SelectProps:{multiple:!0},children:Q.map(d=>e.jsx(P,{value:d,style:X(d,o.threadAdditional,g),children:d},d))})}),e.jsx(a,{item:!0,xs:12,md:4}),e.jsx(a,{item:!0,xs:12,md:6,children:e.jsxs(a,{container:!0,spacing:1,width:"Inherit",children:[e.jsx(a,{item:!0,xs:12,md:12,children:e.jsx(be,{variant:"h5",gutterBottom:!0,children:"Thread"})})," ",e.jsx(a,{item:!0,xs:12,md:4,children:e.jsx(n,{label:"Stitches",fullWidth:!0,size:"small",type:"number",name:"threadStiches",value:o.threadStiches,onChange:I,required:!0,error:!!p.threadStiches,helperText:p.threadStiches})}),e.jsx(a,{item:!0,xs:12,md:4,children:e.jsx(n,{label:"Rate",type:"number",fullWidth:!0,size:"small",name:"threadRate",value:o.threadRate,onChange:I,required:!0,error:!!p.threadRate,helperText:p.threadRate})}),e.jsx(a,{item:!0,xs:12,md:4,children:e.jsx(n,{label:"Amount",fullWidth:!0,size:"small",type:"number",name:"threadAmount",value:o.threadAmount,onChange:I})})]})}),e.jsx(a,{item:!0,xs:12,md:6,children:e.jsxs(a,{container:!0,spacing:1,width:"Inherit",children:[e.jsx(a,{item:!0,xs:12,md:12,children:e.jsx(be,{variant:"h5",gutterBottom:!0,children:"Tilla"})})," ",e.jsx(a,{item:!0,xs:12,md:4,children:e.jsx(n,{label:"Stitches",fullWidth:!0,size:"small",type:"number",name:"tillaStiches",value:o.tillaStiches,onChange:I,required:!0,error:!!p.tillaStiches,helperText:p.tillaStiches})}),e.jsx(a,{item:!0,xs:12,md:4,children:e.jsx(n,{label:"Rate",fullWidth:!0,size:"small",type:"number",name:"tilaRate",value:o.tilaRate,onChange:I,required:!0,error:!!p.tilaRate,helperText:p.tilaRate})}),e.jsx(a,{item:!0,xs:12,md:4,children:e.jsx(n,{label:"Amount",fullWidth:!0,size:"small",name:"tilaAmount",value:o.tilaAmount,onChange:I})})]})}),e.jsxs(a,{item:!0,xs:12,md:6,children:[e.jsxs(a,{container:!0,spacing:1,width:"Inherit",children:[e.jsx(a,{item:!0,xs:12,md:12,children:e.jsx(be,{variant:"h5",gutterBottom:!0,children:"Sequence"})})," ",e.jsx(a,{item:!0,xs:12,md:4,children:e.jsx(n,{label:"Sequence",fullWidth:!0,size:"small",name:"sequence",type:"number",value:o.sequence,onChange:I,required:!0,error:!!p.sequence,helperText:p.sequence})}),e.jsx(a,{item:!0,xs:12,md:4,children:e.jsx(n,{label:"Rate",fullWidth:!0,type:"number",size:"small",name:"sequenceRate",value:o.sequenceRate,onChange:I,required:!0,error:!!p.sequenceRate,helperText:p.sequenceRate})}),e.jsx(a,{item:!0,xs:12,md:4,children:e.jsx(n,{label:"Amount",fullWidth:!0,size:"small",name:"sequenceAmount",value:o.sequenceAmount,onChange:I})})]})," "]}),o.isSolving?e.jsx(a,{item:!0,xs:12,md:6,children:e.jsxs(a,{container:!0,spacing:1,width:"Inherit",children:[e.jsx(a,{item:!0,xs:12,md:12,children:e.jsx(be,{variant:"h5",gutterBottom:!0,children:"Solving"})})," ",e.jsx(a,{item:!0,xs:12,md:3,children:e.jsx(n,{label:"Layers",fullWidth:!0,size:"small",type:"number",name:"solvingLayers",value:o.solvingLayers,onChange:I})}),e.jsx(a,{item:!0,xs:12,md:3,children:e.jsx(n,{label:"Meters",type:"number",fullWidth:!0,size:"small",name:"solvingInMeters",value:o.solvingInMeters,onChange:I})}),e.jsx(a,{item:!0,xs:12,md:3,children:e.jsx(n,{label:"Rate",fullWidth:!0,type:"number",size:"small",name:"solvingRate",value:o.solvingRate,onChange:I})}),e.jsx(a,{item:!0,xs:12,md:3,children:e.jsx(n,{label:"Amount",fullWidth:!0,size:"small",type:"number",name:"solvingAmount",value:o.solvingAmount,onChange:I})})]})}):null,e.jsx(a,{item:!0,xs:12,md:12,children:e.jsx(Qe,{control:e.jsx(Ge,{checked:o.isSolving,onChange:N,name:"isSolving"}),label:"isSolving"})}),e.jsx(a,{item:!0,xs:12,textAlign:"right",sx:{mt:2},children:e.jsx(_,{variant:"contained",size:"small",onClick:F,children:"Save"})})]})," "]})," "]})]}),e.jsx(a,{item:!0,xs:12,md:12,children:e.jsx(de,{sx:{height:1,width:"100%",marginTop:1,marginBottom:0}})}),e.jsxs(Z,{variant:"outlined",children:[e.jsx(K,{className:"css-4rfrnx-MuiCardHeader-root",avatar:e.jsx(Re,{}),title:"View Embroidery ",titleTypographyProps:{style:{color:"white"}}})," ",e.jsx(a,{container:!0,spacing:2,width:"Inherit",sx:{paddingY:2,paddingX:2},children:e.jsxs(a,{sx:{marginTop:2},item:!0,xs:12,children:[" ",h?e.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"},children:e.jsx("img",{src:We,alt:"Loading",style:{width:200,height:200}})}):e.jsx(Pe,{iColumns:m,initialRows:Y,setInitialData:i,deleteApi:"https://gecxc.com:4041/api/Embroidery/DeleteEmbroideryById?embroideryId=",deleteBy:"embroideryId",refetch:G,setAccordionExpanded:D,fileName:"Embroidery List"})]})})]})]})},Ot=At,Tt=()=>{const{user:g}=Ce();console.log("user",g);const[t,u]=r.useState([]),[s,i]=r.useState([]),[h,w]=r.useState({planningId:0,collectionId:"",baseColorId:"",baseColorName:"",noOfDesigns:"",noOfColors:"",planningHeaderId:"",designId:"",batchNo:"",componentId:"",cuttingSize:"",colorId:"",fabricId:"",noOfHeads:"",repeats:"",repeatSize:"",uomId:"",totalFabric:"",shrinkage:"",wastage:"",total:"",appId:1,createdOn:new Date().toISOString(),createdBy:g.empId,lastUpdatedBy:g.empId,lastUpdatedOn:new Date().toISOString(),isSchiffili:!1,repeatsInMtr:""});console.log("formData",h),r.useEffect(()=>{w({planningId:(t==null?void 0:t.planningId)||0,collectionId:(t==null?void 0:t.collectionId)||"",baseColorId:(t==null?void 0:t.baseColorId)||"",baseColorName:(t==null?void 0:t.baseColorName)||"",noOfDesigns:(t==null?void 0:t.noOfDesigns)||"",noOfColors:(t==null?void 0:t.noOfColors)||"",planningHeaderId:(t==null?void 0:t.planningHeaderId)||"",designId:(t==null?void 0:t.designId)||"",batchNo:(t==null?void 0:t.batchNo)||"",componentId:(t==null?void 0:t.componentId)||"",cuttingSize:(t==null?void 0:t.cuttingSize)||"",colorId:(t==null?void 0:t.colorId)||"",fabricId:(t==null?void 0:t.fabricId)||"",noOfHeads:(t==null?void 0:t.noOfHeads)||"",repeats:(t==null?void 0:t.repeats)||"",repeatSize:(t==null?void 0:t.repeatSize)||"",uomId:(t==null?void 0:t.uomId)||"",totalFabric:(t==null?void 0:t.totalFabric)||"",shrinkage:(t==null?void 0:t.shrinkage)||"",wastage:(t==null?void 0:t.wastage)||"",total:(t==null?void 0:t.total)||"",appId:1,createdOn:(t==null?void 0:t.createdOn)||new Date().toISOString(),createdBy:(t==null?void 0:t.createdBy)||g.empId,lastUpdatedBy:g.empId,lastUpdatedOn:new Date().toISOString(),isSchiffili:(t==null?void 0:t.isSchiffili)||!1,repeatsInMtr:(t==null?void 0:t.repeatsInMtr)||""})},[t]);const{data:o}=Ae(),[x,Q]=r.useState(""),{data:X,refetch:k}=Oe(x,{skip:!x}),{data:A,refetch:V}=st(h.planningHeaderId,{skip:!h.planningHeaderId}),[T,R]=r.useState([]),{enqueueSnackbar:C}=Ne();r.useEffect(()=>{X&&(R(X.result),k())},[X]),r.useEffect(()=>{A&&i(A.result.map((m,c)=>({id:c,...m})))},[A,V]),console.log("designList",T),console.log("collectionData",o);const O=(o==null?void 0:o.result)||[],[J,v]=r.useState(!1),[z,W]=r.useState([]),[G,j]=r.useState([]),[q,D]=r.useState([]),[ee,he]=r.useState([]),[pe,ne]=r.useState([]),[te,ge]=r.useState([]);r.useEffect(()=>{(async()=>{try{const d=(await se.get("https://gecxc.com:4041/API/Common/GetPrePlanningLookUp?appID=1")).data.result[0];W(d.componentList),D(d.colorList),j(d.fabricList),ne(d.noOfHeadsList),he(d.uom)}catch(c){console.error("Error fetching pre-planning lookup data:",c)}})()},[]),r.useEffect(()=>{const m=async c=>{try{const d=await se.get(`https://gecxc.com:4041/api/PrePlanning/GetPrePlanningHeaderByDesignId?designId=${c}`);console.log(d.data),ge(d.data.result)}catch(d){console.error("Error fetching pre-planning lookup data:",d)}};h.designId&&m(h.designId)},[h.designId,h.planningHeaderId]),r.useEffect(()=>{const m=()=>{const l=parseFloat(h.repeats)||0,b=parseFloat(h.repeatSize)||0,y=(l*b).toFixed(2);return parseFloat(y).toLocaleString()};w(l=>({...l,totalFabric:m()}));const c=()=>{const l=parseFloat(h.totalFabric.replace(/,/g,""))||0,b=parseFloat(h.shrinkage)||0,y=parseFloat(h.wastage)||0,M=(l*(100+(b+y))/100).toFixed(2);return parseFloat(M).toLocaleString()};w(l=>({...l,total:c()}));const d=()=>(parseFloat(h.repeats),(.9144*(parseFloat(h.repeatSize)||0)).toFixed(2));w(l=>({...l,repeatsInMtr:d()}));const f=()=>{const l=parseFloat(h.repeats)||0;return((parseFloat(h.repeatsInMtr)||0)*l).toFixed(2)};w(l=>({...l,totalFabric:l.isSchiffili?f():m()}))},[h.repeats,h.repeatSize,h.totalFabric,h.shrinkage,h.wastage,h.repeatsInMtr,h.isSchiffili]);const[ae,ie]=r.useState(!1);r.useState(!1);const E=m=>{const{name:c,value:d}=m.target;if(c==="collectionId"){const f=O.find(l=>l.collectionId===parseInt(d));v(!0),Q(d),w({...h,componentId:"",cuttingSize:"",colorId:"",fabricId:"",noOfHeads:"",repeats:"",repeatSize:"",uomId:"",totalFabric:"",shrinkage:"",wastage:"",total:"",collectionId:d,noOfDesigns:f?f.noOfDesigns:"",noOfColors:f?f.noOfColors:""})}else if(c==="designId"){const f=T.find(l=>l.designId===parseInt(d));w({...h,componentId:"",cuttingSize:"",colorId:"",fabricId:"",noOfHeads:"",repeats:"",repeatSize:"",uomId:"",totalFabric:"",shrinkage:"",wastage:"",total:"",designId:d,baseColorId:f?f.colorId:"",baseColorName:f?f.colorName:""})}else if(c==="batchNo"){const f=te.find(l=>l.batchNo===d);w({...h,componentId:"",cuttingSize:"",colorId:"",fabricId:"",noOfHeads:"",repeats:"",repeatSize:"",uomId:"",totalFabric:"",shrinkage:"",wastage:"",total:"",batchNo:d,planningHeaderId:f?f.planningHeaderId:""}),ie(!0),v(!1)}else w({...h,[c]:d})},[L,re]=r.useState({}),oe=async()=>{const m=B();if(Object.keys(m).length>0){re(m);return}try{const c={...h,totalFabric:parseFloat(h.totalFabric.replace(/,/g,"")),total:parseFloat(h.total.replace(/,/g,""))},d=await se.post("https://gecxc.com:4041/api/PrePlanning/SavePrePlanning",c);console.log("Data saved successfully:",d.data),console.log("Save response:",d.data),d.data.success?C("Fabrication saved successfully!",{variant:"success",autoHideDuration:5e3}):(C(`${d.data.message} !`,{variant:"error",autoHideDuration:5e3}),console.log("response.message",d.data.message)),w(f=>({planningId:0,collectionId:f.collectionId,designId:f.designId,batchNo:f.batchNo,planningHeaderId:f.planningHeaderId,baseColorId:f.baseColorId,baseColorName:f.baseColorName,noOfDesigns:f.noOfDesigns,noOfColors:f.noOfColors,componentId:"",cuttingSize:"",colorId:"",fabricId:"",noOfHeads:"",repeats:"",repeatSize:"",uomId:"",totalFabric:"",shrinkage:"",wastage:"",total:"",appId:1,createdOn:new Date().toISOString(),createdBy:g.empId,lastUpdatedOn:new Date().toISOString(),lastUpdatedBy:g.empId,isSchiffili:!1,repeatsInMtr:""})),V()}catch(c){console.error("Error saving data:",c),C("Pre Planning not saved successfully!",{variant:"error",autoHideDuration:5e3})}},B=()=>{const m={};return h.componentId||(m.componentId="componentId is required"),h.colorId||(m.colorId="colorId is required"),h.fabricId||(m.fabricId="fabricId is required"),h.cuttingSize||(m.cuttingSize="cuttingSize is required"),h.noOfHeads||(m.noOfHeads="noOfHeads is required"),h.repeats||(m.repeats="repeats is required"),h.repeatSize||(m.repeatSize="repeatSize is required"),h.uomId||(m.uomId="uomId is required"),h.shrinkage||(m.shrinkage="shrinkage is required"),h.wastage||(m.wastage="wastage is required"),m},Y=m=>{const{name:c,checked:d}=m.target;w(f=>({...f,[c]:d,uomId:d?139:f.uomId}))};console.log("initialRows",s);const fe=s.reduce((m,c)=>m+(c.totalFabric??0),0).toFixed(2),ce=parseFloat(fe).toLocaleString();console.log("localizedTotalFabric",ce);const ue=s.reduce((m,c)=>m+(c.total??0),0).toFixed(2),le=parseFloat(ue).toLocaleString(),N=[...s,{id:"TOTAL_FABRIC",label:"Total Fabric",totalFabric:ce,total:le}],I={sortable:!1,pinnable:!1,hideable:!1};console.log("rows",N);const p=[{field:"componentName",headerName:"Component",...I,colSpan:(m,c)=>{if(c.id==="TOTAL_FABRIC")return 7},valueGetter:(m,c)=>c.id==="TOTAL_FABRIC"?c.label:m},{field:"color",headerName:"Color",...I},{field:"cuttingSize",headerName:"Cutting Size",...I},{field:"fabric",headerName:"Fabrication",...I},{field:"noOfHeadName",headerName:"No. Of Heads",...I},{field:"repeats",headerName:"Repeats",valueGetter:m=>m.toLocaleString(),...I},{field:"repeatSize",headerName:"Repeat Size",valueGetter:m=>m.toLocaleString(),...I},{field:"totalFabric",headerName:"Total Fabric",valueGetter:m=>m.toLocaleString(),...I},{field:"uom",headerName:"UOM",colSpan:(m,c)=>{if(c.id==="TOTAL_FABRIC")return 4},valueGetter:(m,c)=>c.id==="TOTAL_FABRIC"?"OverAll Total":m},{field:"isSchiffili",headerName:"Is Shiffili"},{field:"shrinkage",headerName:"Shrinkage %"},{field:"wastage",headerName:"Wastage %"},{field:"total",headerName:"Total",valueGetter:m=>m.toLocaleString(),colSpan:(m,c)=>{if(c.id==="TOTAL_FABRIC")return 2}}],S=({row:m,field:c})=>m.id==="TOTAL_FABRIC"&&(c==="componentName"||c==="uom")?"bold":"";console.log("batchList:",te);const F="https://gecxc.com:4041/api/PrePlanning/DeletePreplanningByPlanningId?PlanningId=",H=(m,c)=>{ie(!ae)};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"CardHeader",children:e.jsxs(Z,{variant:"outlined",children:[e.jsx(K,{className:"css-4rfrnx-MuiCardHeader-root",avatar:e.jsx(Ke,{}),title:"Pre Planning",titleTypographyProps:{style:{color:"white"}},children:" "}),e.jsxs(a,{container:!0,spacing:2,width:"Inherit",sx:{paddingY:2,paddingX:2},children:[e.jsxs(a,{item:!0,xs:12,md:2,children:[e.jsx(n,{fullWidth:!0,select:!0,label:"Select Collection",name:"collectionId",value:h.collectionId,onChange:E,size:"small",required:!0,children:O.map(m=>e.jsx(P,{value:m.collectionId,children:m.collectionName},m.collectionId))})," "]}),e.jsx(a,{item:!0,xs:12,md:2,children:e.jsx(n,{fullWidth:!0,select:!0,label:"Select Design",name:"designId",value:h.designId,onChange:E,size:"small",required:!0,children:T.map(m=>e.jsx(P,{value:m.designId,children:m.designNo},m.designId))})}),e.jsxs(a,{item:!0,xs:12,md:2,children:[e.jsx(n,{fullWidth:!0,select:!0,label:"Batch No.",name:"batchNo",value:h.batchNo,onChange:E,size:"small",required:!0,children:te.map(m=>e.jsx(P,{value:m.batchNo,children:m.batchNo},m.batchNo))})," "]}),e.jsx(a,{item:!0,xs:12,md:2,children:e.jsx(n,{label:"No of Design",fullWidth:!0,size:"small",name:"noOfDesigns",value:h.noOfDesigns,onChange:E,disabled:!0})}),e.jsx(a,{item:!0,xs:12,md:2,children:e.jsx(n,{label:"No of Color",fullWidth:!0,size:"small",name:"noOfColors",value:h.noOfColors,onChange:E,disabled:!0})}),e.jsx(a,{item:!0,xs:12,md:2,children:e.jsx(n,{label:"Base Color",fullWidth:!0,size:"small",name:"baseColorName",value:h.baseColorName,onChange:E,disabled:!0})})]})]})}),e.jsxs(Z,{variant:"outlined",children:[e.jsx(K,{className:"MainCard",avatar:e.jsx(Te,{}),title:"Add Pre Planning",titleTypographyProps:{style:{color:"white"}},action:e.jsx(ye,{onClick:H,sx:{mt:"-18px"},children:e.jsx(me,{style:{color:"white"}})}),sx:{display:"flex",alignItems:"center",justifyContent:"space-between"}}),e.jsxs(ke,{expanded:ae,onChange:H,sx:{},children:[e.jsx(ze,{expandIcon:e.jsx(me,{}),"aria-controls":"panel1-content",id:"panel1-header",sx:{display:"none"}}),e.jsx(we,{children:e.jsxs(a,{container:!0,spacing:2,width:"Inherit",sx:{paddingY:2,paddingX:2},children:[e.jsx(a,{item:!0,xs:12,md:2,children:e.jsx(He,{fullWidth:!0,options:z,getOptionLabel:m=>m.lookUpName,value:z.find(m=>m.lookUpId===h.componentId)||null,onChange:(m,c)=>{E({target:{name:"componentId",value:c?c.lookUpId:""}})},renderInput:m=>e.jsx(n,{...m,label:"Select Component",size:"small",name:"componentId",value:h.componentId,required:!0,error:!!L.componentId,helperText:L.componentId})})}),e.jsxs(a,{item:!0,xs:12,md:2,children:[" ",e.jsx(He,{fullWidth:!0,options:q,getOptionLabel:m=>m.lookUpName,value:q.find(m=>m.lookUpId===h.colorId)||null,onChange:(m,c)=>{E({target:{name:"colorId",value:c?c.lookUpId:""}})},renderInput:m=>e.jsx(n,{...m,label:"Color",size:"small",value:h.colorId,name:"colorId",required:!0,error:!!L.colorId,helperText:L.colorId})})]}),e.jsx(a,{item:!0,xs:12,md:2,children:e.jsx(n,{label:"Cutting Size",fullWidth:!0,size:"small",name:"cuttingSize",type:"number",value:h.cuttingSize,onChange:E,required:!0,error:!!L.cuttingSize,helperText:L.cuttingSize})}),e.jsx(a,{item:!0,xs:12,md:2,children:e.jsx(He,{fullWidth:!0,options:G,getOptionLabel:m=>m.lookUpName,value:G.find(m=>m.lookUpId===h.fabricId)||null,onChange:(m,c)=>{E({target:{name:"fabricId",value:c?c.lookUpId:""}})},renderInput:m=>e.jsx(n,{...m,label:"Fabrication",size:"small",name:"fabricId",value:h.fabricId,required:!0,error:!!L.fabricId,helperText:L.fabricId})})}),e.jsx(a,{item:!0,xs:12,md:2,children:e.jsx(n,{fullWidth:!0,select:!0,label:"No of Heads",defaultValue:"",size:"small",name:"noOfHeads",value:h.noOfHeads,onChange:E,error:!!L.noOfHeads,helperText:L.noOfHeads,required:!0,children:pe.map(m=>e.jsx(P,{value:m.lookUpId,children:m.lookUpName},m.lookUpId))})}),e.jsx(a,{item:!0,xs:12,md:2,children:e.jsx(n,{label:"Repeats",fullWidth:!0,size:"small",name:"repeats",type:"number",value:h.repeats,onChange:E,error:!!L.repeats,helperText:L.repeats,required:!0})}),e.jsx(a,{item:!0,xs:12,md:2,children:e.jsx(n,{label:"Repeat Size",fullWidth:!0,type:"number",size:"small",name:"repeatSize",value:h.repeatSize,onChange:E,error:!!L.repeatSize,helperText:L.repeatSize,required:!0})}),e.jsx(a,{item:!0,xs:12,md:2,children:e.jsx(n,{label:"Total Fabric",fullWidth:!0,size:"small",name:"totalFabric",value:h.totalFabric,onChange:E})}),e.jsx(a,{item:!0,xs:12,md:2,children:e.jsx(n,{fullWidth:!0,select:!0,label:"UOM",type:"number",defaultValue:"",size:"small",name:"uomId",value:h.uomId,onChange:E,error:!!L.uomId,helperText:L.uomId,required:!0,disabled:h.isSchiffili,children:ee.map(m=>e.jsx(P,{value:m.lookUpId,children:m.lookUpName},m.lookUpId))})}),e.jsx(a,{item:!0,xs:12,md:2,children:e.jsx(n,{label:"Shrinkage %",fullWidth:!0,size:"small",type:"number",name:"shrinkage",value:h.shrinkage,onChange:E,error:!!L.shrinkage,helperText:L.shrinkage,required:!0})}),e.jsx(a,{item:!0,xs:12,md:2,children:e.jsx(n,{label:"Wastage %",fullWidth:!0,size:"small",type:"number",name:"wastage",value:h.wastage,onChange:E,error:!!L.wastage,helperText:L.wastage,required:!0})}),e.jsx(a,{item:!0,xs:12,md:2,children:e.jsx(n,{label:"Total",fullWidth:!0,size:"small",name:"total",value:h.total,onChange:E})}),e.jsx(a,{item:!0,xs:12,md:2,textAlign:"right",children:e.jsx(Qe,{control:e.jsx(Ge,{checked:h.isSchiffili,onChange:Y,name:"isSchiffili"}),label:"Is Schiffli"})}),h.isSchiffili?e.jsx(a,{item:!0,xs:12,md:6,children:e.jsx(a,{container:!0,spacing:1,width:"Inherit",children:e.jsx(a,{item:!0,xs:12,md:4,children:e.jsx(n,{label:"repeat in mtr",fullWidth:!0,size:"small",name:"repeatsInMtr",disabled:!0,value:h.repeatsInMtr,onChange:E})})})}):null,e.jsx(a,{item:!0,xs:12,textAlign:"right",children:e.jsx(_,{variant:"contained",size:"small",onClick:oe,children:"Save"})})]})})]})]}),e.jsx(a,{item:!0,xs:12,md:12,children:e.jsx(de,{sx:{height:1,width:"100%",marginTop:1,marginBottom:0}})}),e.jsxs(Z,{variant:"outlined",children:[e.jsx(K,{className:"MainCard",avatar:e.jsx(Re,{}),title:"View",titleTypographyProps:{style:{color:"white"}}}),e.jsx(a,{sx:{paddingY:1,paddingX:1},children:e.jsx(a,{sx:{},item:!0,xs:12,children:J?e.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"},children:e.jsx("img",{src:We,alt:"Loading",style:{width:200,height:200}})}):e.jsx(Pe,{iColumns:p,initialRows:N,setInitialData:u,deleteApi:F,deleteBy:"planningId",refetch:V,getCellClassName:S,setAccordionExpanded:ie,fileName:"PrePlanningList"})})})]})]})},kt=Tt,zt="/assets/roller-ezgif.com-instagif-CY-x4C-U.gif",wt=()=>{const{user:g}=Ce();console.log("user",g);const[t,u]=r.useState([]),[s,i]=r.useState({dpId:0,designId:"",batchNo:"",planningHeaderId:"",fabricId:"",colorId:"",color:"",vendorId:"",processType:"",AvailableQty:"",Shrinkage:"",Wastage:"",OutputQty:"",UOM:"",uomId:"",RatePerUOM:"",UnitRatePerPo:"",TotalExclGst:"",GST:"0",TotalIncludingGst:"",poPcs:"",baseColorName:"",createdBy:g.empId,createdOn:new Date().toISOString(),lastUpdatedOn:new Date().toISOString(),lastUpdatedBy:g.empId});r.useEffect(()=>{i({dpId:t.dpId||0,designId:(t==null?void 0:t.designId)||"",planningHeaderId:(t==null?void 0:t.planningHeaderId)||0,batchNo:(t==null?void 0:t.batchNo)||"",fabricId:(t==null?void 0:t.fabricId)||"",colorId:(t==null?void 0:t.colorId)||"",color:(t==null?void 0:t.color)||"",vendorId:(t==null?void 0:t.vendorId)||"",processType:(t==null?void 0:t.processType)||"",AvailableQty:(t==null?void 0:t.availableQty)||"",Shrinkage:(t==null?void 0:t.shrinkage)||"",Wastage:(t==null?void 0:t.wastage)||"",OutputQty:(t==null?void 0:t.outputQty)||0,UOM:(t==null?void 0:t.uom)||0,uomId:(t==null?void 0:t.uomId)||"",RatePerUOM:(t==null?void 0:t.ratePerUOM)||0,UnitRatePerPo:(t==null?void 0:t.unitRatePerPo)||"",TotalExclGst:(t==null?void 0:t.totalExclGst)||"",GST:(t==null?void 0:t.gst)||"",TotalIncludingGst:(t==null?void 0:t.totalIncludingGst)||"",poPcs:(t==null?void 0:t.poPcs)||0,baseColorName:(t==null?void 0:t.baseColorName)||0,createdOn:(t==null?void 0:t.createdOn)||new Date().toISOString(),createdBy:(t==null?void 0:t.createdBy)||g.empId,lastUpdatedOn:new Date().toISOString(),lastUpdatedBy:g.empId})},[t]);const{enqueueSnackbar:h}=Ne(),[w,o]=r.useState(!1);console.log("Dyeing form data to send",s);const{data:x}=Ae(),[Q,X]=r.useState(""),{data:k}=Se(),{data:A,refetch:V}=Oe(Q,{skip:!Q}),{data:T,refetch:R}=Ue(s.designId,{skip:!s.designId}),{data:C}=at(s.planningHeaderId,{skip:!s.planningHeaderId}),{data:O}=rt({fabricId:s.fabricId,planningHeaderId:s.planningHeaderId},{skip:!s.fabricId||!s.planningHeaderId}),{data:J,refetch:v}=ot(s.planningHeaderId,{skip:!s.planningHeaderId}),[z,W]=r.useState([]),[G,j]=r.useState([]),[q,D]=r.useState([]),[ee,he]=r.useState([]),[pe,ne]=r.useState([]),[te,ge]=r.useState([]),[ae,ie]=r.useState([]),[E,L]=r.useState(!1);console.log("batchList",G),console.log("formData",s);const re=(p,S)=>{L(!E)};r.useEffect(()=>{A&&W(A.result)},[A]),r.useEffect(()=>{T&&j(T.result)},[T]),r.useEffect(()=>{C&&D(C.result)},[C]),r.useEffect(()=>{O&&ge(O.result)},[O]),r.useEffect(()=>{k&&ie(k.result[0].vendorList)},[C]),console.log(ae),r.useEffect(()=>{J&&ne(J.result.map((p,S)=>({id:S,...p})))},[J,v]),r.useEffect(()=>{if(k){const p=k.result[0];he(p.uomList)}},[k]);const oe=(x==null?void 0:x.result)||[],B=p=>{const{name:S,value:F}=p.target;if(S==="collectionId")oe.find(H=>H.collectionId===parseInt(F)),X(F),o(!0),i({...s,collectionId:F,designId:"",batchNo:"",planningHeaderId:"",fabricId:"",colorId:"",color:"",vendorId:"",processType:"",AvailableQty:"",Shrinkage:"",Wastage:"",OutputQty:"",UOM:"",uomId:"",RatePerUOM:"",UnitRatePerPo:"",TotalExclGst:"",GST:"0",TotalIncludingGst:"",poPcs:"",baseColorName:""});else if(S==="designId"){const H=z.find(m=>m.designId===parseInt(F));i({...s,designId:F,baseColorId:H?H.colorId:"",baseColorName:H?H.colorName:"",batchNo:"",planningHeaderId:"",fabricId:"",colorId:"",color:"",vendorId:"",processType:"",AvailableQty:"",Shrinkage:"",Wastage:"",OutputQty:"",UOM:"",uomId:"",RatePerUOM:"",UnitRatePerPo:"",TotalExclGst:"",GST:"0",TotalIncludingGst:"",poPcs:""})}else if(S==="batchNo"){const H=G.find(m=>m.batchNo===F);i({...s,batchNo:F,planningHeaderId:H?H.planningHeaderId:"",poPcs:H?H.poPcs:"",fabricId:"",colorId:"",color:"",vendorId:"",processType:"",AvailableQty:"",Shrinkage:"",Wastage:"",OutputQty:"",UOM:"",uomId:"",RatePerUOM:"",UnitRatePerPo:"",TotalExclGst:"",GST:"0",TotalIncludingGst:""}),L(!0),o(!1)}else if(S==="fabricId")q.find(H=>H.fabricId===F),console.log("Selected Fabric:",q),i({...s,fabricId:F});else if(S==="ColorId"){const H=te.find(m=>m.colorId===F.colorId);i({...s,ColorId:F.colorId,color:H.color,AvailableQty:H.total,UOM:H.uom,Shrinkage:H.shrinkage,Wastage:H.wastage})}else i(S==="processType"?{...s,processType:F}:S==="vendorId"?{...s,vendorId:F}:{...s,[S]:F})};r.useEffect(()=>{const p=()=>{const b=parseFloat(s.AvailableQty)||0,y=parseFloat(s.Shrinkage)||0,M=parseFloat(s.Wastage)||0;return(b*(100-(y+M))/100).toFixed(2)},S=()=>{const b=parseFloat(s.AvailableQty)||0,y=parseFloat(s.RatePerUOM)||0;return(b*y).toFixed(2)},F=(b,y)=>(b*(1+y/100)).toFixed(2),H=p(),m=S(),c=parseFloat(s.GST)||0,d=F(m,c),f=parseFloat(s.poPcs)||0,l=f?d/f:0;i(b=>({...b,OutputQty:H,TotalExclGst:m,TotalIncludingGst:d,UnitRatePerPo:l.toFixed(2)}))},[s.AvailableQty,s.Shrinkage,s.Wastage,s.RatePerUOM,s.GST,s.poPcs,s.UnitRatePerPo]);const[Y,fe]=r.useState({}),ce=async()=>{const p=ue();if(Object.keys(p).length>0){fe(p);return}try{const S=await se.post("https://gecxc.com:4041/api/DyeingPrinting/SaveDyeingPrinting",s);console.log("Save response:",S.data),S.data.success?h("Fabrication saved successfully!",{variant:"success",autoHideDuration:5e3}):(h(`${S.data.message} !`,{variant:"error",autoHideDuration:5e3}),console.log("response.message",S.data.message)),i(F=>({designId:F.designId,planningHeaderId:F.planningHeaderId,batchNo:F.batchNo,dpId:0,fabricId:"",colorId:"",color:"",vendorId:"",processType:"",AvailableQty:"",Shrinkage:"",Wastage:"",OutputQty:"",UOM:"",uomId:"",RatePerUOM:"",UnitRatePerPo:"",TotalExclGst:"",GST:"0",TotalIncludingGst:"",poPcs:F.poPcs,baseColorName:"",createdOn:new Date().toISOString(),createdBy:g.empId,lastUpdatedOn:new Date().toISOString(),lastUpdatedBy:g.empId})),v()}catch(S){console.error("Error saving data:",S),h("Dyeing not saved successfully!",{variant:"error",autoHideDuration:5e3})}},ue=()=>{const p={};return s.fabricId||(p.fabricId="fabricId is required"),s.colorId||(p.colorId="colorId is required"),s.vendorId||(p.vendorId="vendorId is required"),s.processType||(p.processType="processType is required"),s.GST||(p.GST="GST is required"),s.RatePerUOM||(p.RatePerUOM="RatePerUOM is required"),p},le=[{value:"Dyeing",label:"Dyeing"},{value:"Printing",label:"Printing"}],N=[{field:"fabricName",headerName:"Fabric"},{field:"colorName",headerName:"Color"},{field:"vendorName",headerName:"Vendor"},{field:"processType",headerName:"Process Type"},{field:"uom",headerName:"uom"},{field:"availableQty",headerName:"Available Quantitity"},{field:"shrinkage",headerName:"Shrinkage"},{field:"wastage",headerName:"Wastage"},{field:"outputQty",headerName:"Output Qty"},{field:"ratePerUOM",headerName:"Rate"},{field:"totalExclGst",headerName:"Total Excl. Gst"},{field:"gst",headerName:"GST"},{field:"totalIncludingGst",headerName:"Total Including GST"},{field:"unitRatePerPo",headerName:"UnitRate Per Po."}];return e.jsxs(e.Fragment,{children:[e.jsxs(Z,{variant:"outlined",children:[e.jsx(K,{className:"css-4rfrnx-MuiCardHeader-root",avatar:e.jsx(Le,{src:zt,sx:{background:"transparent"}}),title:"Dyeing ",titleTypographyProps:{style:{color:"white"}}}),e.jsxs(a,{container:!0,spacing:2,width:"Inherit",sx:{paddingY:2,paddingX:2},children:[e.jsxs(a,{item:!0,xs:12,md:3,children:[e.jsx(n,{fullWidth:!0,select:!0,label:"Select Collection",name:"collectionId",value:Q,onChange:B,size:"small",children:oe.map(p=>e.jsx(P,{value:p.collectionId,children:p.collectionName},p.collectionId))})," "]}),e.jsx(a,{item:!0,xs:12,md:3,children:e.jsx(n,{fullWidth:!0,select:!0,label:"Select Design",name:"designId",value:s.designId,onChange:B,size:"small",children:z.map(p=>e.jsx(P,{value:p.designId,children:p.designNo},p.designId))})}),e.jsxs(a,{item:!0,xs:12,md:3,children:[e.jsx(n,{fullWidth:!0,select:!0,label:"Batch No.",name:"batchNo",value:s.batchNo,onChange:B,size:"small",children:G.map(p=>e.jsx(P,{value:p.batchNo,children:p.batchNo},p.batchNo))})," "]}),e.jsx(a,{item:!0,xs:12,md:3,children:e.jsx(n,{label:"Base Color",fullWidth:!0,size:"small",name:"baseColorName",value:s.baseColorName,onChange:B,disabled:!0})}),e.jsx(a,{item:!0,xs:12,md:3,children:e.jsx(n,{fullWidth:!0,select:!0,label:"Select Fabric",defaultValue:"",size:"small",name:"fabricId",value:s.fabricId,onChange:B,error:!!Y.fabricId,helperText:Y.fabricId,required:!0,children:q.map(p=>e.jsx(P,{value:p.fabricId,children:p.fabric},p.fabricId))})}),e.jsx(a,{item:!0,xs:12,md:3,children:e.jsx(yt,{fullWidth:!0,options:te,getOptionLabel:p=>p.color||"",renderInput:p=>e.jsx(n,{...p,label:"Color",name:"colorId",size:"small",error:!!Y.colorId,helperText:Y.colorId,required:!0}),value:te.find(p=>p.colorId===s.colorId)||null,onChange:(p,S)=>{i(F=>({...F,colorId:S?S.colorId:"",color:S?S.color:"",AvailableQty:S?S.total:"",UOM:S?S.uom:"",uomId:S?S.uomId:"",Shrinkage:S?S.shrinkage:"",Wastage:S?S.wastage:""}))}})})]})]}),e.jsx(de,{color:"#cc8587",sx:{height:1,width:"100%",mt:2}}),e.jsxs(Z,{variant:"outlined",children:[e.jsx(K,{className:"css-4rfrnx-MuiCardHeader-root",avatar:e.jsx(Te,{}),title:"Add Dyeing ",titleTypographyProps:{style:{color:"white"}},action:e.jsx(ye,{onClick:re,sx:{mt:"-18px"},children:e.jsx(me,{style:{color:"white"}})}),sx:{display:"flex",alignItems:"center",justifyContent:"space-between"}}),e.jsxs(ke,{expanded:E,onChange:re,sx:{},children:[e.jsx(ze,{expandIcon:e.jsx(me,{}),"aria-controls":"panel1-content",id:"panel1-header",sx:{display:"none"}}),e.jsx(we,{children:e.jsxs(a,{container:!0,spacing:2,width:"Inherit",sx:{paddingY:2,paddingX:2},children:[e.jsx(a,{item:!0,xs:12,md:3,children:e.jsx(n,{fullWidth:!0,select:!0,label:"Vendor Name",size:"small",name:"vendorId",value:s.vendorId,onChange:B,error:!!Y.vendorId,helperText:Y.vendorId,required:!0,children:ae.map(p=>e.jsx(P,{value:p.lookUpId,children:p.lookUpName},p.lookUpId))})}),e.jsx(a,{item:!0,xs:12,md:3,children:e.jsx(n,{fullWidth:!0,select:!0,label:"Process Type",size:"small",name:"processType",value:s.processType,onChange:B,error:!!Y.processType,helperText:Y.processType,required:!0,children:le.map(p=>e.jsx(P,{value:p.value,children:p.label},p.value))})}),e.jsx(a,{item:!0,xs:12,md:3,children:e.jsx(n,{label:"Po Pcs",fullWidth:!0,size:"small",name:"poPcs",value:s.poPcs,onChange:B,disabled:!0})}),e.jsx(a,{item:!0,xs:12,md:1.5,children:e.jsx(n,{label:"UOM",fullWidth:!0,size:"small",name:"UOM",value:s.UOM,onChange:B})}),e.jsx(a,{item:!0,xs:12,md:1.5,children:e.jsx(n,{label:"AvailableQty",fullWidth:!0,size:"small",type:"number",name:"AvailableQty",value:s.AvailableQty,onChange:B})}),e.jsx(a,{item:!0,xs:12,md:1.5,children:e.jsx(n,{label:"Shrinkage%",type:"number",fullWidth:!0,size:"small",name:"Shrinkage",value:s.Shrinkage,onChange:B})}),e.jsx(a,{item:!0,xs:12,md:1.5,children:e.jsx(n,{label:"Wastage%",fullWidth:!0,size:"small",type:"number",name:"Wastage",value:s.Wastage,onChange:B})}),e.jsx(a,{item:!0,xs:12,md:1.5,children:e.jsx(n,{label:"Output Qty",fullWidth:!0,size:"small",name:"OutputQty",type:"number",value:s.OutputQty,onChange:B})}),e.jsx(a,{item:!0,xs:12,md:1.5,children:e.jsx(n,{label:"Rate",fullWidth:!0,size:"small",type:"number",name:"RatePerUOM",value:s.RatePerUOM,onChange:B,error:!!Y.RatePerUOM,helperText:Y.RatePerUOM,required:!0})}),e.jsx(a,{item:!0,xs:12,md:1.5,children:e.jsx(n,{label:"Total Excluding GST",type:"number",fullWidth:!0,size:"small",name:"TotalExclGst",value:s.TotalExclGst,onChange:B})}),e.jsxs(a,{item:!0,xs:12,md:1.5,children:[e.jsx(n,{label:"GST",fullWidth:!0,type:"number",size:"small",name:"GST",value:s.GST,onChange:B,error:!!Y.GST,helperText:Y.GST,required:!0})," "]}),e.jsx(a,{item:!0,xs:12,md:1.5,children:e.jsx(n,{label:"Total:Including Gst",fullWidth:!0,size:"small",name:"TotalExclGst",value:s.TotalIncludingGst,onChange:B})}),e.jsx(a,{item:!0,xs:12,md:1.5,children:e.jsx(n,{label:"Unit P: T/Po PC's",fullWidth:!0,size:"small",name:"UnitRatePerPo",value:s.UnitRatePerPo,onChange:B})}),e.jsx(a,{item:!0,xs:12,md:12,textAlign:"right",children:e.jsx(_,{variant:"contained",color:"primary",size:"small",onClick:ce,children:"Save"})})]})})]})]}),e.jsx(a,{item:!0,xs:12,md:12,children:e.jsx(de,{sx:{height:1,width:"100%",marginTop:1,marginBottom:0}})}),e.jsxs(Z,{variant:"outlined",children:[e.jsx(K,{className:"css-4rfrnx-MuiCardHeader-root",avatar:e.jsx(Re,{}),title:"View Dyeing ",titleTypographyProps:{style:{color:"white"}}})," ",e.jsx(a,{container:!0,spacing:2,width:"Inherit",sx:{paddingY:2,paddingX:2},children:e.jsx(a,{item:!0,xs:12,md:12,paddingTop:1,children:w?e.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"},children:e.jsx("img",{src:We,alt:"Loading",style:{width:200,height:200}})}):e.jsx(Pe,{iColumns:N,initialRows:pe,setInitialData:u,deleteApi:"https://gecxc.com:4041/api/DyeingPrinting/DeleteDyeingPrintingById?DPId=",deleteBy:"dpId",refetch:v,setAccordionExpanded:L,fileName:"Dyeing&PrintingList"})})})]})]})},Rt=wt,_e="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAACXBIWXMAAAsTAAALEwEAmpwYAAADr0lEQVR4nNXXaciVVRAH8Kv1Jtoi5psFZZYUtoimhUVlaJHZghK2UBFCtGkbZdgiBG1GHyowaaEdWogWElvMFjJpw4oWwrJsVetDtNNevxjeuXW8PPe991rvh/5w4TznnDkzZ87Mf+bWav8H4Dgcgc9wfcPanViFidioL5Rvj2/wIqbgCyzA3XgKH+BI/+DWijMGpYEjO1U+FH8Uh++Jj6yPNzG5YW5wccYxWItF6anwWP9OjJiE7/FuYcCTeDnHjQYsLWR3w8cYi/OxP57AzE49cSGewzgswfJ0/0u4HwfgWYyq3w5deBXH4wXchHU4GgvbVdwPR+EVPI1NMCDesviFos3SqIiTaSl7BW5Pw5/Ho3gYl2Nuu8G3NG+8X85tgcMxCxfhLBxWf/N08bJU+h52xRrciGdwdj7bsFbKx+fbnZTfe+cNflGNX/EQJqQ3Pi+MPgN3pAd/x8GtlO+BT/I2A1P4T+0hMuYdzC/Om56XCW/NyOCt5gs9Lo5oPxBD8u07xesZK5vjtjRqXKEj0vGEZgYsxGXYOKO8U/yE3ZN0PsSVuCHOLHTsgxVVykdmgAzKAGuFryvmLsDVBXnF+w9OCt+60BXcMarRgBA8D91Jvc2URrqNSZkJ+f1dUvRbDfu/wqbpiXmFrluCIUvlke+rsS3OaaJ8WUmxhewO+LYXT52KneLWhcx167EhRtQ3JKNVYUqTuAkmfDBStoncI7kvMmvLHAcdTywPORT35rjqbdfWySPzfDF+wAPF/Hb4skJ2Xa6HzL45fiwCvTRgJq7NvK/CmcXeuQ1rpxdrF1fIBvn0z5ScXuXFGk7Md4nbVeGUYu8lDWvnFmtzKmR/C+JpZcA03JXjqoBaWfD9VplGkqjq890VvUJgTfHuezUzYMdgsBxHRavCpAaZoQ3fQblVWJLrK0suaDSgXwbakCSTKkQp7WoiP6AX5pyVJPd3GjYzYgFmZzT/2OSwVdkLblOU7PuauF4+Z3fGxqWtDBiblawrWbE3hIFv4OcW++Ylta9uqyHVU3rnpNBr/h2WZ1WMrLmmpfJABEnW7uD44dlybwjCk8OyWX0/YqvWLvSUy3jTXbIt77QsL8q+YnReZnTbyuvA1OTuqZkhMyoqXSNWRH+Y8sem8sm1DYWehvLtjPrhObdzZspVuDnL7GnBI4XMPUlQIzZYeR3ZGc1ObzyeFW981viByRtjsttdnO3cyRF8tf8Serj8oPhjmu11tNqfZnpFzz8fh/TJn9O+xl9lMwg6mBWmPgAAAABJRU5ErkJggg==",Ft=()=>{const{user:g}=Ce(),{enqueueSnackbar:t}=Ne(),[u,s]=r.useState([]),[i,h]=r.useState({schiffiliId:0,designId:"",planningHeaderId:0,batchNo:"",componentId:"",poPcs:"",baseColorName:"",fabricId:"",vendorId:"",colorId:"",availableQty:"",thaanQty:0,operatingMachineId:0,operatingMachine:"",workingHeadId:0,cuttingSize:"",rate:"",costPerComponent:"",totalEmbroidry:0,noOfItemPerThaan:0,noOfStichesPerYard:0,amountPerYard:0,totalPcs:0,laserCut:!1,laserCutRate:0,pcsForLaserCut:0,totalAmount:0,createdBy:g.empId,createdOn:new Date().toISOString(),lastUpdatedOn:new Date().toISOString(),lastUpdatedBy:g.empId});r.useEffect(()=>{h({schiffiliId:u.schiffiliId||0,designId:(u==null?void 0:u.designId)||"",planningHeaderId:(u==null?void 0:u.planningHeaderId)||0,batchNo:(u==null?void 0:u.batchNo)||"",componentId:(u==null?void 0:u.componentId)||"",poPcs:(u==null?void 0:u.poPcs)||"",baseColorName:(u==null?void 0:u.baseColorName)||"",fabricId:(u==null?void 0:u.fabricId)||"",vendorId:(u==null?void 0:u.vendorId)||"",colorId:(u==null?void 0:u.colorId)||"",availableQty:(u==null?void 0:u.availableQty)||"",thaanQty:(u==null?void 0:u.thaanQty)||0,operatingMachineId:(u==null?void 0:u.operatingMachineId)||0,operatingMachine:(u==null?void 0:u.operatingMachine)||"",workingHeadId:(u==null?void 0:u.workingHeadId)||0,cuttingSize:(u==null?void 0:u.cuttingSize)||"",rate:(u==null?void 0:u.rate)||"",costPerComponent:(u==null?void 0:u.costPerComponent)||"",totalEmbroidry:(u==null?void 0:u.totalEmbroidry)||0,noOfItemPerThaan:(u==null?void 0:u.noOfItemPerThaan)||0,noOfStichesPerYard:(u==null?void 0:u.noOfStichesPerYard)||0,amountPerYard:(u==null?void 0:u.amountPerYard)||0,totalPcs:(u==null?void 0:u.totalPcs)||0,laserCut:(u==null?void 0:u.laserCut)||!1,laserCutRate:(u==null?void 0:u.laserCutRate)||0,pcsForLaserCut:(u==null?void 0:u.pcsForLaserCut)||0,totalAmount:(u==null?void 0:u.totalAmount)||0,createdOn:(u==null?void 0:u.createdOn)||new Date().toISOString(),createdBy:(u==null?void 0:u.createdBy)||g.empId,lastUpdatedOn:new Date().toISOString(),lastUpdatedBy:g.empId})},[u]);const[w,o]=r.useState(!1),x=(c,d)=>{o(!w)},[Q,X]=r.useState(!1),{data:k}=Ae(),[A,V]=r.useState(""),{data:T}=Se(),{data:R,refetch:C}=Oe(A,{skip:!A}),{data:O,refetch:J}=Ue(i.designId,{skip:!i.designId}),{data:v}=Ee({batchNo:i.planningHeaderId,componentId:i.componentId},{skip:!i.planningHeaderId||!i.componentId}),{data:z}=Be({batchNo:i.planningHeaderId,componentId:i.componentId,fabricId:i.fabricId},{skip:!i.planningHeaderId||!i.componentId||!i.fabricId}),{data:W,refetch:G}=nt(i.planningHeaderId,{skip:!i.planningHeaderId}),{data:j}=Me(i.planningHeaderId,{skip:!i.planningHeaderId});console.log("formData.planningHeaderId",i.planningHeaderId),console.log("collectionData",k),console.log("schiffliList",W);const[q,D]=r.useState([]),[ee,he]=r.useState([]),[pe,ne]=r.useState([]),[te,ge]=r.useState([]),[ae,ie]=r.useState([]),[E,L]=r.useState([]),[re,oe]=r.useState([]),[B,Y]=r.useState([]),[fe,ce]=r.useState([]);r.useEffect(()=>{R&&D(R.result)},[R]),r.useEffect(()=>{O&&he(O.result)},[O]),r.useEffect(()=>{v&&ne(v.result)},[v]),r.useEffect(()=>{z&&oe(v.result)},[z]),r.useEffect(()=>{j&&ce(j.result)},[j]),r.useEffect(()=>{W&&Y(W.result.map((c,d)=>({id:d,...c})))},[W,G]),r.useEffect(()=>{if(T){const c=T.result[0];ge(c.vendorList),ie(c.operatingMachineList),L(c.workingHeadList)}},[T]),console.log("initialRows",B);const ue=(k==null?void 0:k.result)||[];r.useEffect(()=>{const c=()=>{const y=parseFloat(i.thaanQty)||0,M=parseFloat(i.operatingMachine)||0;return(y*M).toFixed(2)};h(y=>({...y,totalEmbroidry:c()}));const d=()=>{const y=parseFloat(i.thaanQty)||0,M=parseFloat(i.noOfStichesPerYard)||0;return(y*M).toFixed(2)};h(y=>({...y,totalPcs:d()}));const f=()=>{const y=parseFloat(i.noOfStichesPerYard)||0,M=parseFloat(i.rate)||0;return(y/1e3*M).toFixed(2)};h(y=>({...y,amountPerYard:f()}));const l=()=>{const y=parseFloat(i.totalAmount)||0,M=parseFloat(i.totalPcs)||0;return(y/M).toFixed(2)};h(y=>({...y,costPerComponent:l()}));const b=()=>{const y=parseFloat(i.amountPerYard)||0,M=parseFloat(i.totalEmbroidry)||0,ve=parseFloat(i.laserCutRate)||0,qe=parseFloat(i.pcsForLaserCut)||0;return(y*M+qe*ve).toFixed(2)};h(y=>({...y,totalAmount:b()}))},[i.thaanQty,i.operatingMachine,i.noOfStichesPerYard,i.rate,i.totalAmount,i.totalPcs,i.amountPerYard,i.totalEmbroidry,i.laserCutRate,i.pcsForLaserCut]);const le=c=>{const{name:d,checked:f}=c.target;h(l=>({...l,[d]:f}))},N=c=>{const{name:d,value:f}=c.target;if(d==="collectionId")ue.find(l=>l.collectionId===parseInt(f)),V(f),X(!0),h({...i,collectionId:f,designId:"",planningHeaderId:0,batchNo:"",componentId:"",poPcs:"",baseColorName:"",fabricId:"",vendorId:"",colorId:"",availableQty:"",thaanQty:0,operatingMachineId:0,operatingMachine:"",workingHeadId:0,cuttingSize:"",rate:"",costPerComponent:"",totalEmbroidry:0,noOfItemPerThaan:0,noOfStichesPerYard:0,amountPerYard:0,totalPcs:0,laserCut:!1,laserCutRate:0,pcsForLaserCut:0,totalAmount:0});else if(d==="designId"){const l=q.find(b=>b.designId===parseInt(f));h({...i,designId:f,baseColorId:l?l.colorId:"",baseColorName:l?l.colorName:"",planningHeaderId:0,batchNo:"",componentId:"",poPcs:"",fabricId:"",vendorId:"",colorId:"",availableQty:"",thaanQty:0,operatingMachineId:0,operatingMachine:"",workingHeadId:0,cuttingSize:"",rate:"",costPerComponent:"",totalEmbroidry:0,noOfItemPerThaan:0,noOfStichesPerYard:0,amountPerYard:0,totalPcs:0,laserCut:!1,laserCutRate:0,pcsForLaserCut:0,totalAmount:0})}else if(d==="batchNo"){const l=ee.find(b=>b.batchNo===f);h({...i,batchNo:f,planningHeaderId:l?l.planningHeaderId:"",poPcs:l?l.poPcs:"",componentId:"",baseColorName:"",fabricId:"",vendorId:"",colorId:"",availableQty:"",thaanQty:0,operatingMachineId:0,operatingMachine:"",workingHeadId:0,cuttingSize:"",rate:"",costPerComponent:"",totalEmbroidry:0,noOfItemPerThaan:0,noOfStichesPerYard:0,amountPerYard:0,totalPcs:0,laserCut:!1,laserCutRate:0,pcsForLaserCut:0,totalAmount:0}),o(!0),X(!1)}else if(d==="colorId"){const l=re.find(b=>b.colorId===f);h({...i,colorId:f,availableQty:l?l.total:"",cuttingSize:l?l.cuttingSize:"",repeats:l?l.repeats:""})}else if(d==="operatingMachineId"){const l=ae.find(b=>b.lookUpId===f);h({...i,operatingMachineId:f,operatingMachine:l?l.lookUpName:""})}else h({...i,[d]:f})};console.log("colors",re);const[I,p]=r.useState({}),S=async()=>{const c=F();if(Object.keys(c).length>0){p(c);return}try{const d=await se.post("https://gecxc.com:4041/api/Schiffli/SaveSchiffili",i);console.log("Save response:",d.data),d.data.success?t("Fabrication saved successfully!",{variant:"success",autoHideDuration:5e3}):(t(`${d.data.message} !`,{variant:"error",autoHideDuration:5e3}),console.log("response.message",d.data.message)),h(f=>({designId:f.designId,planningHeaderId:f.planningHeaderId,batchNo:f.batchNo,baseColorName:f.baseColorName,schiffiliId:0,componentId:"",poPcs:f.poPcs,fabricId:"",vendorId:"",colorId:"",availableQty:"",thaanQty:0,operatingMachineId:0,operatingMachine:"",workingHeadId:0,cuttingSize:"",rate:"",costPerComponent:"",totalEmbroidry:0,noOfItemPerThaan:0,noOfStichesPerYard:0,amountPerYard:0,totalPcs:0,laserCut:!1,laserCutRate:0,pcsForLaserCut:0,totalAmount:0,createdOn:new Date().toISOString(),createdBy:g.empId,lastUpdatedOn:new Date().toISOString(),lastUpdatedBy:g.empId})),G()}catch(d){console.error("Error saving data:",d),t("Dyeing not saved successfully!",{variant:"error",autoHideDuration:5e3})}},F=()=>{const c={};return i.fabricId||(c.fabricId="fabricId is required"),i.colorId||(c.colorId="colorId is required"),i.vendorId||(c.vendorId="vendorId is required"),i.componentId||(c.componentId="componentId is required"),i.thaanQty||(c.thaanQty="thaanQty is required"),i.workingHeadId||(c.workingHeadId="workingHeadId is required"),i.rate||(c.rate="rate is required"),i.operatingMachineId||(c.operatingMachineId="operatingMachineId is required"),i.noOfStichesPerYard||(c.noOfStichesPerYard="noOfStichesPerYard is required"),i.noOfItemPerThaan||(c.noOfItemPerThaan="noOfItemPerThaan is required"),c};console.log("formData",i);const H=[{field:"componentName",headerName:"Component"},{field:"fabricName",headerName:"Fabric"},{field:"vendorName",headerName:"Vendor"},{field:"colourName",headerName:"Color"},{field:"thaanQty",headerName:"Thaan Quantity"},{field:"availableQty",headerName:"Available Quantitity"},{field:"operatingMachineName",headerName:"Operating Machine"},{field:"noOfHeadsName",headerName:"Working Head"},{field:"cuttingSize",headerName:"Cutting Size"},{field:"rate",headerName:"Rate"},{field:"noOfStichesPerYard",headerName:"No. Of Stiches Per Yard"},{field:"noOfItemPerThaan",headerName:"No. Of Item Per Thaan"},{field:"totalEmbroidry",headerName:"Total Embroidry"},{field:"amountPerYard",headerName:"Amount Per Yard"},{field:"totalPcs",headerName:"Total Pcs"},{field:"totalAmount",headerName:"Total Amount"},{field:"costPerComponent",headerName:"Cost Per Component"},{field:"laserCutRate",headerName:"LaserCut Rate"},{field:"pcsForLaserCut",headerName:"Pcs.For Laser Cut"}];return e.jsxs(e.Fragment,{children:[e.jsxs(Z,{variant:"outlined",children:[e.jsx(K,{className:"css-4rfrnx-MuiCardHeader-root",avatar:e.jsx(Le,{src:_e,sx:{background:"transparent"}}),title:"Schiffli ",titleTypographyProps:{style:{color:"white"}}}),e.jsxs(a,{container:!0,spacing:2,width:"Inherit",sx:{paddingY:2,paddingX:2},children:[e.jsxs(a,{item:!0,xs:12,md:3,children:[e.jsx(n,{fullWidth:!0,select:!0,label:"Select Collection",name:"collectionId",value:A,onChange:N,size:"small",children:ue.map(c=>e.jsx(P,{value:c.collectionId,children:c.collectionName},c.collectionId))})," "]}),e.jsx(a,{item:!0,xs:12,md:3,children:e.jsx(n,{fullWidth:!0,select:!0,label:"Select Design",name:"designId",value:i.designId,onChange:N,size:"small",children:q.map(c=>e.jsx(P,{value:c.designId,children:c.designNo},c.designId))})}),e.jsxs(a,{item:!0,xs:12,md:3,children:[e.jsx(n,{fullWidth:!0,select:!0,label:"Batch No.",name:"batchNo",value:i.batchNo,onChange:N,size:"small",children:ee.map(c=>e.jsx(P,{value:c.batchNo,children:c.batchNo},c.batchNo))})," "]}),e.jsxs(a,{item:!0,xs:12,md:3,children:[e.jsx(n,{fullWidth:!0,select:!0,label:"Components",name:"componentId",value:i.componentId,onChange:N,size:"small",required:!0,error:!!I.componentId,helperText:I.componentId,children:fe.map(c=>e.jsx(P,{value:c.componentId,children:c.componentName},c.componentId))})," "]}),e.jsx(a,{item:!0,xs:12,md:3,children:e.jsx(n,{label:"Base Color",fullWidth:!0,size:"small",name:"baseColorName",value:i.baseColorName,onChange:N,disabled:!0})})]})]}),e.jsx(de,{color:"#cc8587",sx:{height:1,width:"100%",mt:2}}),e.jsxs(Z,{variant:"outlined",children:[e.jsx(K,{className:"css-4rfrnx-MuiCardHeader-root",avatar:e.jsx(Te,{}),title:"Add Schiffli ",titleTypographyProps:{style:{color:"white"}},action:e.jsx(ye,{onClick:x,sx:{mt:"-18px"},children:e.jsx(me,{style:{color:"white"}})}),sx:{display:"flex",alignItems:"center",justifyContent:"space-between"}})," ",e.jsxs(ke,{expanded:w,onChange:x,sx:{},children:[e.jsx(ze,{expandIcon:e.jsx(me,{}),"aria-controls":"panel1-content",id:"panel1-header",sx:{display:"none"}}),e.jsx(we,{children:e.jsxs(a,{container:!0,spacing:2,width:"Inherit",sx:{paddingY:2,paddingX:2},children:[e.jsx(a,{item:!0,xs:12,md:3,children:e.jsx(n,{fullWidth:!0,select:!0,label:"Select Fabric",defaultValue:"",size:"small",name:"fabricId",value:i.fabricId,onChange:N,required:!0,error:!!I.fabricId,helperText:I.fabricId,children:pe.map(c=>e.jsx(P,{value:c.fabricId,children:c.fabric},c.fabricId))})}),e.jsx(a,{item:!0,xs:12,md:3,children:e.jsx(n,{fullWidth:!0,select:!0,label:"Vendors",defaultValue:"",size:"small",name:"vendorId",value:i.vendorId,onChange:N,required:!0,error:!!I.vendorId,helperText:I.vendorId,children:te.map(c=>e.jsx(P,{value:c.lookUpId,children:c.lookUpName},c.lookUpId))})}),e.jsx(a,{item:!0,xs:12,md:3,children:e.jsx(n,{fullWidth:!0,select:!0,label:"Color",size:"small",name:"colorId",value:i.colorId,onChange:N,required:!0,error:!!I.colorId,helperText:I.colorId,children:re.map(c=>e.jsx(P,{value:c.colorId,children:c.color},c.colorId))})}),e.jsx(a,{item:!0,xs:12,md:1.5,children:e.jsx(n,{label:"Po Pcs",fullWidth:!0,size:"small",name:"poPcs",value:i.poPcs,disabled:!0,onChange:N})}),e.jsx(a,{item:!0,xs:12,md:1.5,children:e.jsx(n,{label:"Available Quantity",fullWidth:!0,size:"small",name:"availableQty",value:i.availableQty,onChange:N})}),e.jsx(a,{item:!0,xs:12,md:1.5,children:e.jsx(n,{label:"Thaan Quantity",fullWidth:!0,type:"number",size:"small",name:"thaanQty",value:i.thaanQty,onChange:N,required:!0,error:!!I.thaanQty,helperText:I.thaanQty})}),e.jsx(a,{item:!0,xs:12,md:1.5,children:e.jsx(n,{fullWidth:!0,select:!0,label:"operatingMachineId",defaultValue:"",size:"small",name:"operatingMachineId",value:i.operatingMachineId,onChange:N,required:!0,error:!!I.operatingMachineId,helperText:I.operatingMachineId,children:ae.map(c=>e.jsx(P,{value:c.lookUpId,children:c.lookUpName},c.lookUpId))})}),e.jsx(a,{item:!0,xs:12,md:1.5,children:e.jsx(n,{fullWidth:!0,select:!0,label:"workingHeadId",defaultValue:"",size:"small",name:"workingHeadId",value:i.workingHeadId,onChange:N,required:!0,error:!!I.workingHeadId,helperText:I.workingHeadId,children:E.map(c=>e.jsx(P,{value:c.lookUpId,children:c.lookUpName},c.lookUpId))})}),e.jsx(a,{item:!0,xs:12,md:1.5,children:e.jsx(n,{label:"Cutting Size",fullWidth:!0,type:"number",size:"small",name:"cuttingSize",value:i.cuttingSize,onChange:N})}),e.jsx(a,{item:!0,xs:12,md:1.5,children:e.jsx(n,{label:"Rate",type:"number",fullWidth:!0,size:"small",name:"rate",value:i.rate,onChange:N,required:!0,error:!!I.rate,helperText:I.rate})}),e.jsx(a,{item:!0,xs:12,md:1.5,children:e.jsx(n,{label:"No. Of Stiches Per Yard",fullWidth:!0,type:"number",size:"small",name:"noOfStichesPerYard",value:i.noOfStichesPerYard,onChange:N,required:!0,error:!!I.noOfStichesPerYard,helperText:I.noOfStichesPerYard})}),e.jsx(a,{item:!0,xs:12,md:1.5,children:e.jsx(n,{label:"No. Of Items Per Thaan",fullWidth:!0,size:"small",type:"number",name:"noOfItemPerThaan",value:i.noOfItemPerThaan,onChange:N,required:!0,error:!!I.noOfItemPerThaan,helperText:I.noOfItemPerThaan})}),e.jsx(a,{item:!0,xs:12,md:1.5,children:e.jsx(n,{label:"Total Embroidry",fullWidth:!0,size:"small",name:"totalEmbroidry",type:"number",value:i.totalEmbroidry,onChange:N})}),e.jsx(a,{item:!0,xs:12,md:1.5,children:e.jsx(n,{label:"Amount Per Yard",fullWidth:!0,type:"number",size:"small",name:"amountPerYard",value:i.amountPerYard,onChange:N})}),e.jsx(a,{item:!0,xs:12,md:1.5,children:e.jsx(n,{label:"Total Pcs",fullWidth:!0,size:"small",name:"totalPcs",value:i.totalPcs,onChange:N})}),e.jsx(a,{item:!0,xs:12,md:1.5,children:e.jsx(n,{label:"Cost Per Component",fullWidth:!0,size:"small",name:"costPerComponent",value:i.costPerComponent,onChange:N})}),e.jsx(a,{item:!0,xs:12,md:1.5,children:e.jsx(n,{label:"Total Amount",fullWidth:!0,size:"small",type:"number",name:"totalAmount",value:i.totalAmount,onChange:N})}),e.jsx(a,{item:!0,xs:12,md:1.5,children:e.jsx(Qe,{control:e.jsx(Ge,{checked:i.laserCut,onChange:le,name:"laserCut"}),label:"Laser Cut"})}),i.laserCut?e.jsx(a,{item:!0,xs:12,md:4.5,children:e.jsxs(a,{container:!0,spacing:1,width:"Inherit",children:[e.jsx(a,{item:!0,xs:12,md:6,children:e.jsx(n,{label:"Laser Cut Rate",fullWidth:!0,size:"small",name:"laserCutRate",value:i.laserCutRate,onChange:N})}),e.jsx(a,{item:!0,xs:12,md:6,children:e.jsx(n,{label:"Pcs For LaserCut",fullWidth:!0,size:"small",name:"pcsForLaserCut",value:i.pcsForLaserCut,onChange:N})})]})}):null,e.jsx(a,{item:!0,xs:12,textAlign:"right",sx:{mt:2},children:e.jsx(_,{variant:"contained",size:"small",onClick:S,children:"Save"})})]})})]})]}),e.jsx(a,{item:!0,xs:12,md:12,children:e.jsx(de,{sx:{height:1,width:"100%",marginTop:1,marginBottom:0}})}),e.jsxs(Z,{variant:"outlined",children:[e.jsx(K,{className:"css-4rfrnx-MuiCardHeader-root",avatar:e.jsx(Re,{}),title:"View Schiffli ",titleTypographyProps:{style:{color:"white"}}}),e.jsx(a,{container:!0,spacing:2,width:"Inherit",sx:{paddingY:2,paddingX:2},children:e.jsx(a,{sx:{marginTop:2},item:!0,xs:12,children:Q?e.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"},children:e.jsx("img",{src:We,alt:"Loading",style:{width:200,height:200}})}):e.jsx(Pe,{iColumns:H,initialRows:B,setInitialData:s,deleteApi:"https://gecxc.com:4041/api/Schiffli/DeleteSchiffiById?schiffiId=",deleteBy:"schiffiliId",refetch:G,setAccordionExpanded:o,fileName:"Schffili List"})})})]})]})},Ht=Ft,Ut=({additionalProcessData:g,setAdditionalProcessData:t,refetchAdditionalProcessList:u,handleClickOpen:s})=>{const{user:i}=Ce(),[h,w]=r.useState([]),o=h.reduce((v,z)=>v+(z.quantity??0),0).toFixed(2);console.log("Quantity",o);const[x,Q]=r.useState({additionalProcessDetId:0,additionalProcessId:g.additionalProcessId||0,designId:g.designId||"",planningHeaderId:g.planningHeaderId||0,batchNo:g.batchNo||"",componentName:g.componentName||"",componentId:g.componentId||"",colorName:g.colorName||"",colorId:g.colorId||"",fabricName:g.fabricName||"",fabricId:g.fabricId||"",uomId:g.uomId||"",uom:g.uom||"",vendorId:"",pcsPerComponent:g.pcsPerComponent||"",remainingPcsPerComponent:g.pcsPerComponent-o||"",processTypeName:g.processTypeName||"",processTypeId:g.processTypeId||"",quantity:"",ratePerPcs:0,totalAmount:0,costPerComponent:"",createdOn:new Date().toISOString(),createdBy:i.empId,lastUpdatedOn:new Date().toISOString(),LastUpdatedBy:i.empId});r.useEffect(()=>{Q({...x,remainingPcsPerComponent:g.pcsPerComponent-o||""})},[h]);const{data:X}=Se(),{data:k,refetch:A}=lt(x.additionalProcessId,{skip:!x.additionalProcessId}),[V,T]=r.useState([]);r.useEffect(()=>{if(X){const v=X.result[0];T(v.vendorList)}},[X]),r.useEffect(()=>{k&&w(k.result.map((v,z)=>({id:z,...v})))},[k,A]),console.log("initialRows",h);const R=v=>{const{name:z,value:W}=v.target;Q({...x,[z]:W})};r.useEffect(()=>{const v=()=>{const W=parseFloat(x.quantity)||0,G=parseFloat(x.ratePerPcs)||0;return(W*G).toFixed(2)};Q(W=>({...W,totalAmount:v()}));const z=()=>{const W=parseFloat(x.totalAmount)||0,G=parseFloat(x.poPcs)||0;return(W/G).toFixed(2)};Q(W=>({...W,costPerComponent:z()}))},[x.quantity,x.ratePerPcs,x.totalAmount]);const C=async()=>{console.log(x);try{const v=await se.post("https://gecxc.com:4041/api/AdditionalProcess/SaveAdditionalProcessDetails",x);console.log("Save response:",v.data),A(),Q(z=>({...z,vendorId:"",pcsPerComponent:g.pcsPerComponent||"",quantity:"",ratePerPcs:0,totalAmount:0,costPerComponent:"",createdOn:new Date().toISOString(),createdBy:i.empId,lastUpdatedOn:new Date().toISOString(),LastUpdatedBy:i.empId})),u(),setAccordionExpanded(!1)}catch(v){console.error("Error saving data:",v)}},O=[{field:"vendorName",headerName:"Vendor",flex:2},{field:"processType",headerName:"Process Type",flex:1},{field:"pcsPerComponent",headerName:" Pcs. Per Component",flex:1},{field:"quantity",headerName:"Quantitity",flex:1},{field:"ratePerPcs",headerName:"Rate Per Pcs.",flex:1},{field:"totalAmount",headerName:"Total Amount",flex:1}];return e.jsxs(Ie,{noValidate:!0,component:"form",sx:{display:"flex",flexDirection:"column",m:"auto",width:"Inherit"},children:[e.jsxs(a,{container:!0,spacing:2,width:"Inherit",sx:{paddingY:2,paddingX:2},children:[e.jsxs(a,{item:!0,xs:12,md:3,children:[e.jsx(n,{fullWidth:!0,label:"Select Collection",name:"collectionId",value:x.selectedCollectionId,onChange:R,size:"small",disabled:!0})," "]}),e.jsx(a,{item:!0,xs:12,md:3,children:e.jsx(n,{fullWidth:!0,label:"Select Design",name:"designId",value:x.designId,onChange:R,size:"small",disabled:!0})}),e.jsxs(a,{item:!0,xs:12,md:3,children:[e.jsx(n,{fullWidth:!0,label:"Batch No.",name:"batchNo",value:x.batchNo,onChange:R,size:"small",disabled:!0})," "]}),e.jsxs(a,{item:!0,xs:12,md:3,children:[e.jsx(n,{fullWidth:!0,label:"Components",name:"componentName",value:x.componentName,onChange:R,size:"small",disabled:!0})," "]}),e.jsx(a,{item:!0,xs:12,md:3,children:e.jsx(n,{fullWidth:!0,label:"Select Fabric",defaultValue:"",size:"small",name:"fabricName",value:x.fabricName,onChange:R,disabled:!0})}),e.jsx(a,{item:!0,xs:12,md:3,children:e.jsx(n,{fullWidth:!0,label:"Color",size:"small",name:"colorName",value:x.colorName,onChange:R,disabled:!0})}),e.jsx(a,{item:!0,xs:12,md:3,children:e.jsx(n,{fullWidth:!0,label:"Process Type",defaultValue:"",size:"small",name:"processTypeName",value:x.processTypeName,onChange:R,disabled:!0})}),e.jsx(a,{item:!0,xs:12,md:1.5,children:e.jsx(n,{label:"Pcs. Per Component",fullWidth:!0,size:"small",name:"pcsPerComponent",value:x.pcsPerComponent,onChange:R,disabled:!0})}),e.jsx(a,{item:!0,xs:12,md:1.5,children:e.jsx(n,{label:"Remaining Pcs. Per Component",fullWidth:!0,size:"small",name:"remainingPcsPerComponent",value:x.remainingPcsPerComponent,onChange:R,disabled:!0})})]}),e.jsx(de,{color:"#921e22",sx:{height:2,width:"100%"}}),e.jsxs(a,{container:!0,spacing:2,width:"Inherit",sx:{paddingY:2,paddingX:2},children:[e.jsx(a,{item:!0,xs:12,md:3,children:e.jsx(n,{fullWidth:!0,select:!0,label:"Vendors",size:"small",name:"vendorId",value:x.vendorId,onChange:R,children:V.map(v=>e.jsx(P,{value:v.lookUpId,children:v.lookUpName},v.lookUpId))})}),e.jsx(a,{item:!0,xs:12,md:3,children:e.jsx(n,{label:"Quantity",fullWidth:!0,type:"number",size:"small",name:"quantity",value:x.quantity,onChange:R})}),e.jsx(a,{item:!0,xs:12,md:3,children:e.jsx(n,{label:"Rate Per Pcs",type:"number",fullWidth:!0,size:"small",name:"ratePerPcs",value:x.ratePerPcs,onChange:R})}),e.jsx(a,{item:!0,xs:12,md:3,children:e.jsx(n,{label:"Total Amount",fullWidth:!0,type:"number",size:"small",name:"totalAmount",value:x.totalAmount,onChange:R})}),e.jsx(a,{item:!0,xs:12,md:3,children:e.jsx(n,{label:"UOM",fullWidth:!0,size:"small",name:"uom",value:x.uom,onChange:R,disabled:!0})}),e.jsx(a,{item:!0,xs:12,textAlign:"right",sx:{mt:2},children:e.jsx(_,{variant:"contained",size:"small",onClick:C,children:"Save"})})]}),e.jsx(a,{container:!0,spacing:2,width:"Inherit",sx:{paddingY:2,paddingX:2},children:e.jsx(a,{sx:{marginTop:2},item:!0,xs:12,children:e.jsx(Pe,{iColumns:O,initialRows:h,deleteApi:"https://gecxc.com:4041/api/AdditionalProcess/DeleteAdditionalProcessDetails?apdId=",deleteBy:"additionalProcessDetId",refetch:A})})})]})};var Xe={},Lt=Ze;Object.defineProperty(Xe,"__esModule",{value:!0});var $e=Xe.default=void 0,Wt=Lt(Je()),qt=e;$e=Xe.default=(0,Wt.default)((0,qt.jsx)("path",{d:"M13 8c0-2.21-1.79-4-4-4S5 5.79 5 8s1.79 4 4 4 4-1.79 4-4m-2 0c0 1.1-.9 2-2 2s-2-.9-2-2 .9-2 2-2 2 .9 2 2M1 18v2h16v-2c0-2.66-5.33-4-8-4s-8 1.34-8 4m2 0c.2-.71 3.3-2 6-2 2.69 0 5.78 1.28 6 2zm17-3v-3h3v-2h-3V7h-2v3h-3v2h3v3z"}),"PersonAddAlt1Outlined");const Et=()=>{const{user:g}=Ce(),[t,u]=r.useState([]),[s,i]=r.useState({additionalProcessId:0,designId:"",planningHeaderId:0,batchNo:"",componentId:"",colorId:"",fabricId:"",uomId:"",baseColorName:"",poPcs:"",pcsPerComponent:"",processTypeId:"",createdOn:new Date().toISOString(),createdBy:g.empId,lastUpdatedOn:new Date().toISOString(),LastUpdatedBy:g.empId});console.log("initialData",t),r.useEffect(()=>{i({additionalProcessId:(t==null?void 0:t.additionalProcessId)||0,designId:(t==null?void 0:t.designId)||"",planningHeaderId:(t==null?void 0:t.planningHeaderId)||0,batchNo:(t==null?void 0:t.batchNo)||"",componentId:(t==null?void 0:t.componentId)||"",fabricId:(t==null?void 0:t.fabricId)||"",colorId:(t==null?void 0:t.colorId)||"",poPcs:(t==null?void 0:t.poPcs)||"",baseColorName:(t==null?void 0:t.baseColorName)||"",pcsPerComponent:(t==null?void 0:t.pcsPerComponent)||"",uomId:(t==null?void 0:t.uomId)||"",processTypeId:(t==null?void 0:t.processTypeId)||"",createdOn:(t==null?void 0:t.createdOn)||new Date().toISOString(),createdBy:(t==null?void 0:t.createdBy)||g.empId,lastUpdatedOn:new Date().toISOString(),LastUpdatedBy:g.empId})},[t]);const[h,w]=r.useState(!1),o=(l,b)=>{w(!h)},{data:x}=Ae(),[Q,X]=r.useState(""),{data:k}=Se(),{data:A,refetch:V}=Oe(Q,{skip:!Q}),{data:T,refetch:R}=Ue(s.designId,{skip:!s.designId}),{data:C}=Ee({batchNo:s.planningHeaderId,componentId:s.componentId},{skip:!s.planningHeaderId||!s.componentId}),{data:O}=Be({batchNo:s.planningHeaderId,componentId:s.componentId,fabricId:s.fabricId},{skip:!s.planningHeaderId||!s.componentId||!s.fabricId}),{data:J,refetch:v}=dt(s.planningHeaderId,{skip:!s.planningHeaderId}),{data:z}=Me(s.planningHeaderId,{skip:!s.planningHeaderId});console.log("lookupData",k),console.log("collectionData",x),console.log("colorData",O);const[W,G]=r.useState([]),[j,q]=r.useState([]),[D,ee]=r.useState([]),[he,pe]=r.useState([]),[ne,te]=r.useState([]),[ge,ae]=r.useState([]),[ie,E]=r.useState([]),[L,re]=r.useState([]),[oe,B]=r.useState([]),[Y,fe]=r.useState([]),[ce,ue]=r.useState([]);console.log("batchData",T),r.useEffect(()=>{A&&G(A.result)},[A]),r.useEffect(()=>{T&&q(T.result)},[T]),r.useEffect(()=>{C&&ee(C.result)},[C]),r.useEffect(()=>{O&&B(O.result)},[O]),r.useEffect(()=>{z&&ue(z.result)},[z]),r.useEffect(()=>{if(k){const l=k.result[0];te(l.uomList),ae(l.processList)}},[k]),r.useEffect(()=>{J&&fe(J.result.map((l,b)=>({id:b,...l})))},[J,v]),r.useEffect(()=>{if(k){const l=k.result[0];pe(l.vendorList),E(l.operatingMachineList),re(l.workingHeadList)}},[k]),console.log("initialRows",Y);const le=(x==null?void 0:x.result)||[],N=l=>{const{name:b,value:y}=l.target;if(b==="collectionId")le.find(M=>M.collectionId===parseInt(y)),X(y),i({...s,collectionId:y});else if(b==="designId"){const M=W.find(ve=>ve.designId===parseInt(y));i({...s,designId:y,baseColorId:M?M.colorId:"",baseColorName:M?M.colorName:""})}else if(b==="batchNo"){const M=j.find(ve=>ve.batchNo===y);i({...s,batchNo:y,planningHeaderId:M?M.planningHeaderId:"",poPcs:M?M.poPcs:""}),w(!0)}else i({...s,[b]:y})};console.log("colors",oe);const I=async()=>{console.log("formData",s);try{const l=await se.post("https://gecxc.com:4041/api/AdditionalProcess/SaveAdditionalProcess",s);console.log("Save response:",l.data),i(b=>({additionalProcessId:0,designId:b.designId,planningHeaderId:b.planningHeaderId,batchNo:b.batchNo,baseColorName:b.baseColorName,poPcs:b.poPcs,componentId:"",colorId:"",fabricId:"",uomId:"",pcsPerComponent:"",processTypeId:"",createdOn:new Date().toISOString(),createdBy:g.empId,lastUpdatedOn:new Date().toISOString(),LastUpdatedBy:g.empId})),v()}catch(l){console.error("Error saving data:",l)}};console.log("formData",s),r.forwardRef(function(b,y){return e.jsx(it,{direction:"up",ref:y,...b})});const[p,S]=r.useState({}),[F,H]=r.useState(!1),m=l=>{S(l),H(!0)},c=()=>{H(!1),S({}),v()},d=[{field:"designNo",headerName:"Design"},{field:"batchNo",headerName:"Batch"},{field:"componentName",headerName:"Component"},{field:"fabricName",headerName:"Fabric"},{field:"colorName",headerName:"Color"},{field:"processTypeName",headerName:"Process Type"},{field:"pcsPerComponent",headerName:"Pcs Per Component"},{field:"assignedQty",headerName:"Assigned Quantity"},{field:"AddVendor",headerName:"Add Vendor",renderCell:l=>e.jsx("div",{style:{display:"flex",justifyContent:"space-around"},children:e.jsx(ye,{color:"primary",onClick:()=>m(l.row),children:e.jsx($e,{})})})}];return e.jsxs(e.Fragment,{children:[e.jsxs(Z,{variant:"outlined",children:[e.jsx(K,{className:"css-4rfrnx-MuiCardHeader-root",avatar:e.jsx(Le,{src:_e,sx:{background:"transparent"}}),title:"Additional Process ",titleTypographyProps:{style:{color:"white"}}}),e.jsxs(a,{container:!0,spacing:2,width:"Inherit",sx:{paddingY:2,paddingX:2},children:[e.jsxs(a,{item:!0,xs:12,md:3,children:[e.jsx(n,{fullWidth:!0,select:!0,label:"Select Collection",name:"collectionId",value:Q,onChange:N,size:"small",children:le.map(l=>e.jsx(P,{value:l.collectionId,children:l.collectionName},l.collectionId))})," "]}),e.jsx(a,{item:!0,xs:12,md:3,children:e.jsx(n,{fullWidth:!0,select:!0,label:"Select Design",name:"designId",value:s.designId,onChange:N,size:"small",children:W.map(l=>e.jsx(P,{value:l.designId,children:l.designNo},l.designId))})}),e.jsxs(a,{item:!0,xs:12,md:3,children:[e.jsx(n,{fullWidth:!0,select:!0,label:"Batch No.",name:"batchNo",value:s.batchNo,onChange:N,size:"small",children:j.map(l=>e.jsx(P,{value:l.batchNo,children:l.batchNo},l.batchNo))})," "]}),e.jsxs(a,{item:!0,xs:12,md:3,children:[e.jsx(n,{fullWidth:!0,select:!0,label:"Components",name:"componentId",value:s.componentId,onChange:N,size:"small",children:ce.map(l=>e.jsx(P,{value:l.componentId,children:l.componentName},l.componentId))})," "]}),e.jsx(a,{item:!0,xs:12,md:3,children:e.jsx(n,{label:"Base Color",fullWidth:!0,size:"small",name:"baseColorName",value:s.baseColorName,onChange:N,disabled:!0})})]})]}),e.jsx(de,{color:"#cc8587",sx:{height:1,width:"100%",mt:2}}),e.jsxs(Z,{variant:"outlined",children:[e.jsx(K,{className:"css-4rfrnx-MuiCardHeader-root",avatar:e.jsx(Te,{}),title:"Add Additional Process ",titleTypographyProps:{style:{color:"white"}},action:e.jsx(ye,{onClick:o,sx:{mt:"-18px"},children:e.jsx(me,{style:{color:"white"}})}),sx:{display:"flex",alignItems:"center",justifyContent:"space-between"}})," ",e.jsxs(ke,{expanded:h,onChange:o,sx:{},children:[e.jsx(ze,{expandIcon:e.jsx(me,{}),"aria-controls":"panel1-content",id:"panel1-header",sx:{display:"none"}}),e.jsx(we,{children:e.jsxs(a,{container:!0,spacing:2,width:"Inherit",sx:{paddingY:2,paddingX:2},children:[e.jsx(a,{item:!0,xs:12,md:3,children:e.jsx(n,{fullWidth:!0,select:!0,label:"Select Fabric",defaultValue:"",size:"small",name:"fabricId",value:s.fabricId,onChange:N,children:D.map(l=>e.jsx(P,{value:l.fabricId,children:l.fabric},l.fabricId))})}),e.jsx(a,{item:!0,xs:12,md:3,children:e.jsx(n,{fullWidth:!0,select:!0,label:"Color",size:"small",name:"colorId",value:s.colorId,onChange:N,children:oe.map(l=>e.jsx(P,{value:l.colorId,children:l.color},l.colorId))})}),e.jsx(a,{item:!0,xs:12,md:1.5,children:e.jsx(n,{label:"Po Pcs",fullWidth:!0,size:"small",name:"poPcs",value:s.poPcs,onChange:N,disabled:!0})}),e.jsx(a,{item:!0,xs:12,md:1.5,children:e.jsx(n,{label:"Pcs. Per Component",fullWidth:!0,size:"small",name:"pcsPerComponent",value:s.pcsPerComponent,onChange:N})}),e.jsx(a,{item:!0,xs:12,md:2,children:e.jsx(n,{fullWidth:!0,select:!0,label:"UOM",type:"number",defaultValue:140,size:"small",name:"uomId",value:s.uomId,onChange:N,children:ne.map(l=>e.jsx(P,{value:l.lookUpId,children:l.lookUpName},l.lookUpId))})}),e.jsx(a,{item:!0,xs:12,md:3,children:e.jsx(n,{fullWidth:!0,select:!0,label:"Process Type",size:"small",name:"processTypeId",value:s.processTypeId,onChange:N,children:ge.map(l=>e.jsx(P,{value:l.lookUpId,children:l.lookUpName},l.lookUpId))})}),e.jsx(a,{item:!0,xs:12,textAlign:"right",sx:{mt:2},children:e.jsx(_,{variant:"contained",size:"small",onClick:I,children:"Save"})})]})})]})]}),e.jsx(de,{color:"#cc8587",sx:{height:1,width:"100%",mt:2}}),e.jsxs(Z,{variant:"outlined",children:[e.jsx(K,{className:"css-4rfrnx-MuiCardHeader-root",avatar:e.jsx(Re,{}),title:"View Additional Process ",titleTypographyProps:{style:{color:"white"}}}),e.jsx(a,{container:!0,spacing:2,width:"Inherit",sx:{paddingY:2,paddingX:2},children:e.jsxs(a,{sx:{marginTop:2},item:!0,xs:12,children:[e.jsx(Pe,{iColumns:d,initialRows:Y,setInitialData:u,deleteApi:"https://gecxc.com:4041/api/AdditionalProcess/DeleteAdditionalProcess?adId=",deleteBy:"additionalProcessId",refetch:v,setAccordionExpanded:w,fileName:"AdditionalProcess"}),e.jsxs(ct,{open:F,onClose:c,fullWidth:!0,maxWidth:"lg",children:[e.jsxs(ut,{sx:{backgroundColor:"#A11F23",color:"#ffffff",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx(be,{variant:"h6",component:"div",color:"#ffffff",children:"Assign Vendors "}),e.jsx(ye,{onClick:c,sx:{color:"#ffffff"},children:e.jsx(vt,{})})]}),e.jsxs(mt,{children:[e.jsx(ht,{id:"alert-dialog-slide-description"}),e.jsx(Ut,{additionalProcessData:p,setAdditionalProcessData:S,refetchAdditionalProcessList:v,handleClickOpen:m})]})]})]})})]})]})},Bt=Et;function Mt({onSaveSuccess:g}){const{data:t}=Se(),[u,s]=r.useState([]),[i,h]=r.useState([]),[w,o]=r.useState([]),[x,Q]=r.useState([]),[X,k]=r.useState([]);r.useEffect(()=>{t&&(o(t.result[0].vendorList),h(t.result[0].serviceList),s(t.result[0].serviceTypeList),k(t.result[0].uomList))},[t]);const[A,V]=r.useState({collectionId:"",serviceTypeId:0,serviceListId:"",vendorId:"",poPcs:"",qty:"",uomId:"string",rate:"",totalAmount:"",costperPiece:"",uom:"",createdBy:0,createdOn:new Date().toISOString()}),T=async C=>{const{name:O,value:J}=C.target;if(console.log(`Updating ${O} to ${J}`),V({...A,[O]:J}),O==="collectionId"){const v=x.find(z=>z.collectionId===J);v&&V(z=>({...z,poPcs:v.poPcs}))}},R=async()=>{const C={...A,serviceTypeId:0};console.log(C);try{const O=await se.post("https://gecxc.com:4041/api/AdditionalServices/SaveAdditionalServices",C);console.log("Form data saved:",O.data),V({collectionId:"",serviceTypeId:0,serviceListId:"",vendorId:"",poPcs:"",qty:"",uomId:"string",rate:"",totalAmount:"",costperPiece:""}),g&&g()}catch(O){console.error("Error saving data:",O)}};return r.useEffect(()=>{(async()=>{try{const O=await se.get("https://gecxc.com:4041/api/CollectionRegistration/GetCollectionList?appId=1");console.log("GetCollectionFromPlanningHeader",O),Q(O.data.result)}catch(O){console.error("Error fetching design options:",O)}})()},[]),e.jsxs(a,{container:!0,spacing:2,width:"Inherit",sx:{paddingY:2,paddingX:2},children:[e.jsx(a,{item:!0,xs:12,md:4,children:e.jsx(n,{fullWidth:!0,select:!0,label:"Select Collection",name:"collectionId",value:A.collectionId,onChange:T,size:"small",children:x.length>0?x.map(C=>e.jsx(P,{id:"collectionId",value:C.collectionId,children:C.collectionName},C.collectionId)):e.jsx(P,{disabled:!0,children:"No Collections Available"})})}),e.jsx(a,{item:!0,md:4,width:"inherit",paddingX:1,children:e.jsx(n,{id:"outlined-select-option",select:!0,label:"Service Type",name:"serviceTypeId",value:A.serviceTypeId,onChange:T,variant:"outlined",size:"small",fullWidth:!0,children:u.map(C=>e.jsx(P,{value:C.lookUpId,children:C.lookUpName},C.lookUpId))})}),e.jsx(a,{item:!0,md:4,width:"inherit",paddingX:1,children:e.jsx(n,{id:"outlined-select-option",select:!0,label:"Service List Id",name:"serviceListId",value:A.serviceListId,onChange:T,variant:"outlined",size:"small",fullWidth:!0,children:i.map(C=>e.jsx(P,{value:C.lookUpId,children:C.lookUpName},C.lookUpId))})}),e.jsx(a,{item:!0,xs:12,md:4,children:e.jsx(n,{fullWidth:!0,select:!0,label:"Vendor Name",size:"small",name:"vendorId",value:A.vendorId,onChange:T,children:w.map(C=>e.jsx(P,{value:C.lookUpId,children:C.lookUpName},C.lookUpId))})}),e.jsx(a,{item:!0,md:2,width:"inherit",paddingX:1,children:e.jsx(n,{id:"outlined-required",label:"PO PC's",name:"poPcs",value:A.poPcs,onChange:T,type:"number",size:"small",fullWidth:!0,disabled:!0})}),e.jsx(a,{item:!0,md:2,width:"inherit",paddingX:1,children:e.jsx(n,{id:"outlined-required",label:"Qty",name:"qty",value:A.qty,onChange:T,type:"number",size:"small",required:!0,fullWidth:!0})}),e.jsx(a,{item:!0,md:2,width:"inherit",paddingX:1,children:e.jsx(n,{fullWidth:!0,select:!0,label:"UOM",defaultValue:"",size:"small",name:"uomId",value:A.uomId,onChange:T,children:X.map(C=>e.jsx(P,{value:C.lookUpId,children:C.lookUpName},C.lookUpId))})}),e.jsx(a,{item:!0,md:2,width:"inherit",paddingX:1,children:e.jsx(n,{id:"outlined-required",label:"Rate",name:"rate",value:A.rate,onChange:T,type:"number",size:"small",fullWidth:!0,required:!0})}),e.jsx(a,{item:!0,md:2,width:"inherit",paddingX:1,children:e.jsx(n,{id:"outlined-required",label:"Total Amount",name:"totalAmount",value:A.totalAmount,onChange:T,type:"number",size:"small",fullWidth:!0,required:!0})}),e.jsx(a,{item:!0,md:2,width:"inherit",paddingX:1,children:e.jsx(n,{id:"outlined-required",label:"Cost per Piece",name:"costperPiece",value:A.costperPiece,onChange:T,type:"number",size:"small",required:!0,fullWidth:!0})}),e.jsx(a,{item:!0,md:12,width:"inherit",paddingX:1,textAlign:"right",children:e.jsx(_,{variant:"contained",color:"primary",size:"small",onClick:R,children:"Save"})})]})}function Qt(){const[g,t]=r.useState([]),u=r.useCallback(async()=>{try{const h=(await se.get("https://gecxc.com:4041/api/AdditionalServices/GetdditionalServicesListByServiceTypeId?serviceTypeId=1")).data.result.map((w,o)=>({id:o,...w}));t(h)}catch(i){console.error("Error fetching data:",i)}},[]);r.useEffect(()=>{u()},[u]);const s=[{field:"serviceTypeId",headerName:"Service Type"},{field:"serviceList",headerName:"Service List"},{field:"vendorId",headerName:"Vendor"},{field:"qty",headerName:"Qty"},{field:"uom",headerName:"UOM"},{field:"rate",headerName:"Rate"},{field:"totalAmount",headerName:"Total Amount"},{field:"uomId",headerName:"UOM Id"},{field:"quantity",headerName:"quantity"},{field:"ratePerPcs",headerName:"rate Per Pcs"},{field:"costperPiece",headerName:"cost per Piece"},{field:"vendor",headerName:"Vendor"},{field:"serviceType",headerName:"Service Type"},{field:"serviceListName",headerName:"Service List Name"}];return e.jsx("div",{style:{height:"auto",width:"100%"},children:e.jsx(bt,{rows:g,columns:s,autoHeight:!0,initialState:{pagination:{paginationModel:{page:0,pageSize:10}}},pageSizeOptions:[10,15],localeText:{toolbarDensity:"Size",toolbarDensityLabel:"Size",toolbarDensityCompact:"Small",toolbarDensityStandard:"Medium",toolbarDensityComfortable:"Large"},components:{Toolbar:jt}})})}function Gt(g){return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"CardHeader",children:[e.jsxs(Z,{variant:"outlined",children:[e.jsx(K,{className:"css-4rfrnx-MuiCardHeader-root",title:"Additional Services",titleTypographyProps:{style:{color:"white"}}}),e.jsx(Mt,{})]}),e.jsx(de,{color:"#cc8587",sx:{height:1,width:"100%",mt:2}}),e.jsxs(Z,{variant:"outlined",children:[e.jsx(K,{className:"css-4rfrnx-MuiCardHeader-root",title:"View Additional Services",titleTypographyProps:{style:{color:"white"}}}),e.jsx(Qt,{fetchData:g})]})]})})}const Fe=["Pre Planning","Fabrication","Dyeing/Printing  ","Embroidery ","Schiffli","Additional Process","Additional Services"];function ss(){const[g,t]=r.useState(0),[u,s]=r.useState(new Set),[i,h]=r.useState(null),[w,o]=r.useState([]),{enqueueSnackbar:x}=Ne(),Q=j=>{h(j.currentTarget)},X=()=>{h(null)},k=!!i,A=k?"simple-popover":void 0,V=j=>j===1,T=j=>u.has(j),R=()=>{let j=u;T(g)&&(j=new Set(j.values()),j.delete(g)),t(q=>q+1),s(j)},C=()=>{t(j=>j-1)},O=()=>{if(!V(g))throw new Error("You can't skip a step that isn't optional.");t(j=>j+1),s(j=>{const q=new Set(j.values());return q.add(g),q})},J=()=>{t(0)},[v,z]=r.useState({lookUpId:"",lookUpName:"",lookUpDomain:"",lookUpCategory:"",enabled:"",createdOn:new Date().toISOString()}),W=async()=>{if(!v.lookUpDomain||!v.lookUpName){x("Please fill in all required fields.",{variant:"error",autoHideDuration:5e3});return}try{const j=await se.get(`https://gecxc.com:4041/api/Common/SaveLookUp?lookupDomain=${v.lookUpDomain}&LookUpName=${v.lookUpName}&appId=1`);return console.log("Form data saved:",j.data),x("Lookup saved successfully!",{variant:"success",autoHideDuration:5e3}),z({lookUpId:"",lookUpName:"",lookUpDomain:"",lookUpCategory:"",enabled:"",createdOn:new Date().toISOString()}),j.data}catch(j){throw console.error("Error saving data:",j),x("Error saving data. Please try again.",{variant:"error",autoHideDuration:5e3}),j}},G=j=>{z({...v,[j.target.name]:j.target.value})};return r.useEffect(()=>{(async()=>{try{const q=await se.get("https://gecxc.com:4041/api/Common/GetLookUpDomains?appId=1");console.log("LookupData",q),o(q.data.result)}catch(q){console.error("Error fetching design options:",q)}})()},[]),e.jsxs(Ie,{sx:{width:"100%"},children:[e.jsxs(a,{container:!0,spacing:1,width:"Inherit",children:[e.jsx(a,{item:!0,sm:6,children:e.jsx(be,{variant:"h2",gutterBottom:!0,children:"Planning Process"})}),e.jsxs(a,{item:!0,sm:6,textAlign:"right",children:[e.jsx(_,{"aria-describedby":A,variant:"outlined",size:"small",onClick:Q,children:"+Lookup"}),e.jsx(It,{id:"mouse-over-popover",open:k,anchorEl:i,onClose:X,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"right"},sx:{".MuiPopover-paper":{width:"300px",padding:"16px"}},children:e.jsxs(a,{container:!0,spacing:3,width:"Inherit",children:[e.jsx(a,{item:!0,sm:12,children:e.jsx(n,{fullWidth:!0,id:"outlined-select-currency",select:!0,label:"Select Lookup",size:"small",value:v.lookUpDomain,name:"lookUpDomain",onChange:G,children:w.map(j=>e.jsx(P,{value:j.lookUpDomain,children:j.lookUpDomain},j.lookUpDomain))})}),e.jsx(a,{item:!0,sm:12,children:e.jsx(n,{fullWidth:!0,label:"Add Lookup Description",value:v.lookUpName,onChange:G,name:"lookUpName",size:"small"})}),e.jsx(a,{item:!0,sm:3,textAlign:"right",children:e.jsx(_,{variant:"contained",size:"small",onClick:W,children:"Save"})})]})})]})]}),e.jsx(pt,{activeStep:g,children:Fe.map((j,q)=>{const D={},ee={};return V(q)&&(ee.optional=e.jsx(be,{variant:"caption",children:"Optional"})),T(q)&&(D.completed=!1),e.jsx(gt,{...D,children:e.jsxs(ft,{...ee,onClick:()=>t(q),style:{cursor:"pointer"},children:[" ",j]})},j)})}),e.jsxs(Ie,{sx:{display:"flex",flexDirection:"row",pt:2},children:[e.jsx(_,{color:"inherit",disabled:g===0,onClick:C,sx:{mr:1},children:"Back"}),e.jsx(Ie,{sx:{flex:"1 1 auto"}}),V(g)&&e.jsx(_,{color:"inherit",onClick:O,sx:{mr:1},children:"Skip"}),e.jsx(_,{onClick:R,children:g===Fe.length-1?"Finish":"Next"})]}),g===Fe.length?e.jsxs(r.Fragment,{children:[e.jsx(be,{sx:{mt:2,mb:1},children:"All steps completed - you're finished"}),e.jsxs(Ie,{sx:{display:"flex",flexDirection:"row",pt:2},children:[e.jsx(Ie,{sx:{flex:"1 1 auto"}}),e.jsx(_,{onClick:J,children:"Reset"})]})]}):e.jsxs(r.Fragment,{children:[g===0&&e.jsx(kt,{}),g===1&&e.jsx(xt,{}),g===2&&e.jsx(Rt,{}),g===3&&e.jsx(Ot,{}),g===4&&e.jsx(Ht,{}),g===5&&e.jsx(Bt,{}),g===6&&e.jsx(Gt,{}),e.jsxs(Ie,{sx:{display:"flex",flexDirection:"row",pt:2},children:[e.jsx(_,{color:"inherit",disabled:g===0,onClick:C,sx:{mr:1},children:"Back"}),e.jsx(Ie,{sx:{flex:"1 1 auto"}}),V(g)&&e.jsx(_,{color:"inherit",onClick:O,sx:{mr:1},children:"Skip"}),e.jsx(_,{onClick:R,children:g===Fe.length-1?"Finish":"Next"})]})]})]})}export{ss as default};
