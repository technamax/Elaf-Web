import{u as y,f as I,j as e,M as S,B as w,C as h,d as x,G as s,D as N}from"./index-CsWv3HX5.js";import{r as d}from"./vendor-BXCbSo2_.js";import{B as C,a as O}from"./axios-uGUsbY1x.js";import{d as R}from"./VisibilityOutlined-DOjPdcjl.js";import{R as B}from"./ReuseableDataGrid-A0FxphvC.js";import{T as m}from"./TextField-D_1a3A_1.js";import{M as D}from"./Skeleton-O8UzV6mH.js";import"./ExcelExport-D0hCkIKa.js";import"./DataGrid-D32CN7U9.js";function A(){const{user:o}=y(),[t,U]=d.useState([]),[r,n]=d.useState({roleId:0,roleName:"",description:"",enabled:"",createdOn:new Date().toISOString(),createdBy:o.empId,lastUpdatedOn:new Date().toISOString(),LastUpdatedBy:o.empId}),f=[{value:"Yes",label:"Yes"},{value:"No",label:"No"}];d.useEffect(()=>{n({roleId:(t==null?void 0:t.roleId)||0,roleName:(t==null?void 0:t.roleName)||"",description:(t==null?void 0:t.description)||"",enabled:(t==null?void 0:t.enabled)||"",createdOn:(t==null?void 0:t.createdOn)||new Date().toISOString(),createdBy:(t==null?void 0:t.createdBy)||o.empId,lastUpdatedOn:new Date().toISOString(),LastUpdatedBy:o.empId})},[t]);const[p,g]=d.useState([]);d.useState(!1);const{data:i,refetch:u}=I();d.useEffect(()=>{i&&g(i.result.map((a,l)=>({id:l,...a})))},[i,u]),console.log("initialRows",p);const c=a=>{const{name:l,value:b}=a.target;n({...r,[l]:b})},j=async()=>{console.log("formData",r);try{const a=await O.post("https://gecxc.com:4041/api/Role/SaveRole",r);console.log("Save response:",a.data),n(l=>({roleId:0,roleName:"",description:"",enabled:"",createdOn:new Date().toISOString(),createdBy:o.empId,lastUpdatedOn:new Date().toISOString(),LastUpdatedBy:o.empId})),u()}catch(a){console.error("Error saving data:",a)}};console.log("formData",r);const v=[{field:"roleName",headerName:"Role",flex:1},{field:"description",headerName:"Description",flex:1},{field:"enabled",headerName:"enabled",flex:1}];return e.jsx(S,{style:{borderWidth:1,borderStyle:"dotted",borderColor:"#a11f23",width:"auto",maxHeight:{xs:"80vh",md:"auto"},overflow:"auto"},children:e.jsxs(w,{sx:{width:"100%",typography:"body1"},children:[e.jsxs(h,{variant:"outlined",children:[e.jsx(x,{className:"css-4rfrnx-MuiCardHeader-root",title:"Add Role ",titleTypographyProps:{style:{color:"white"}}}),e.jsxs(s,{container:!0,spacing:2,width:"Inherit",sx:{paddingY:2,paddingX:2},children:[e.jsx(s,{item:!0,xs:12,md:4,children:e.jsx(m,{label:"* Role Name",fullWidth:!0,size:"small",name:"roleName",onChange:c,value:r.roleName})}),e.jsx(s,{item:!0,xs:12,md:4,children:e.jsx(m,{label:"* Description",fullWidth:!0,size:"small",name:"description",onChange:c,value:r.description})}),e.jsx(s,{item:!0,xs:12,md:4,children:e.jsx(m,{fullWidth:!0,select:!0,label:"enabled",name:"enabled",value:r.enabled,onChange:c,size:"small",children:f.map(a=>e.jsx(D,{value:a.value,children:a.label},a.value))})}),e.jsx(s,{item:!0,xs:12,textAlign:"right",sx:{mt:2},children:e.jsx(C,{variant:"contained",size:"small",onClick:j,children:"Save"})})]})," "]}),e.jsx(N,{color:"#cc8587",sx:{height:1,width:"100%",mt:2}}),e.jsxs(h,{variant:"outlined",children:[e.jsx(x,{className:"css-4rfrnx-MuiCardHeader-root",avatar:e.jsx(R,{}),title:"View Roles ",titleTypographyProps:{style:{color:"white"}}}),e.jsx(s,{container:!0,spacing:2,width:"Inherit",sx:{paddingY:2,paddingX:2},children:e.jsx(s,{item:!0,xs:12,children:e.jsx(B,{initialRows:p,iColumns:v,disableDelete:!0})})})," "]})]})})}export{A as default};
