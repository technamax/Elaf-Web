import{r,j as e,_ as Ve,$ as Je,a0 as Ze,Q as Ke,O as we,b as Ie,a1 as be,a as je,a2 as ve,a3 as We,a4 as Fe,a5 as Re,a6 as $e,a7 as Be,C as q,d as G,a8 as He,G as n,D as de,V as ye,T as xe,a9 as Ee,aa as _e,ab as De,ac as et,ad as tt,ae as Ge,B as fe}from"./index-BVF6sje3.js";import{a as re}from"./axios-BInNlfZe.js";import{d as Ce,c as ce,A as Se,e as Pe,f as Ne,g as Ae,l as Te,R as ke,S as st,a as nt,b as at,F as ot}from"./Fabrication-D7NAYops.js";import{T as d,B as Z,P as rt}from"./TextField-DM8qUbe7.js";import{M as j}from"./Skeleton-Dx8YCbP9.js";import{A as ze,C as Me,D as lt}from"./DataGrid-CM4g51FS.js";import"./dayjs.min-DRyXq4ez.js";import"./ExcelExport-JuOC5J0r.js";import{G as dt}from"./GridToolbar-DrgRJwXe.js";let qe=!1;const ct=r.forwardRef(function(s,a){return qe||(console.warn(["MUI: The Autocomplete component was moved from the lab to the core.","","You should use `import { Autocomplete } from '@mui/material'`","or `import Autocomplete from '@mui/material/Autocomplete'`"].join(`
`)),qe=!0),e.jsx(ze,Ve({ref:a},s))});var Qe={},it=Ze;Object.defineProperty(Qe,"__esModule",{value:!0});var Ye=Qe.default=void 0,ut=it(Je()),mt=e;Ye=Qe.default=(0,ut.default)((0,mt.jsx)("path",{d:"M21 10h-3L2 3v7l9 2-9 2v7l8-3.5V21c0 1.1.9 2 2 2h9c1.1 0 2-.9 2-2v-9c0-1.1-.9-2-2-2m0 11h-9v-9h9zm-4.5-1L13 16h2v-3h3v3h2z"}),"SendAndArchive");const ht="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAACXBIWXMAAAsTAAALEwEAmpwYAAACk0lEQVR4nO2WzU4UQRSFe14CgoiMKPIqolEiIQq+gEFgFPHnFVyILI3GnQIbxxhG3IkaYxT8iUZFoxuDbokoIaNE/czNnE6KSjdT07Yb40kqqa6qW+dW3XNvdRT9R4MAHgD3640Dh/MkHQTOqMWIv9PGydOBUeCsWoz4O208PwdcxCz1xoGBKG8Abc5JPwBrataP0fY3iLcCk8C6SF4DV4HzatZf1Ny6vrfkRd4PrABV4BywE9huKpc2rA0ARaATGAe+yebgn5IfB34BD0XQCzwlHU+AA1r7CPgJlLKS94n8GtAM3CIcFaAJKGuPviwxX9XJjfxlCtGMyJLwQrbzwNeGNEFNRFVdZdrJb2ttAbizyU10SBNXQslbgR8SnMXcxagEOGyxdmxs3ZDmxjybHmWKZUdriAOnZWhqf+ZtVgyw3+HZPAZ2qX8yxIGbwCudxsdwgH3JszERtqtOVEIc+ARMKbc3xNy79r1a+xHodsYtDec8W6sl01YxQxxYVfzdWM4krDPiGEveXMHLjhMqUGshDlQTHLDNCg06MJvgwJcQB96lhMBSrddZ1y0nloDdXkbc9WwPKQSLIQ7M6rGxGuBjKMB+JEGE24A3tnfUgIo7E+p+1jTsUn8wxIEWFaJxKdrFmBwrJRSiEc2d8mz2AxPas6WuAwbgkspncZNaPyexWbuXsuaGbuQ7cDEKBbVHZEVParMeliRUPLW7eK4XcUF7NQU7YAD26NrKciLtJtJObuTXtce+KAuAI9pgXq9aj0SVhgXFvEN9y4Cjmci9kvtZmpjQw9KuOhH/kvUr1bq0xmK+bLZRHqB2nZd1Gyinp5yfUuu/1ZyRX7CfmlzIXUgLx6SH93o3ltUv6z8hf+LoX8ZvSFCuNiG5hzcAAAAASUVORK5CYII=",pt=()=>{const c=Ke(),{user:s}=we(),{enqueueSnackbar:a}=Ie(),[t,m]=r.useState([]),[p,H]=r.useState(!1),[l,S]=r.useState({embroideryId:(t==null?void 0:t.embroideryId)||0,designId:(t==null?void 0:t.designId)||"",batchNo:(t==null?void 0:t.batchNo)||"",planningHeaderId:(t==null?void 0:t.planningHeaderId)||"",componentId:(t==null?void 0:t.componentId)||"",fabricId:(t==null?void 0:t.fabricId)||"",vendorId:(t==null?void 0:t.vendorId)||"",poPcs:(t==null?void 0:t.poPcs)||"",baseColorId:(t==null?void 0:t.baseColorId)||"",baseColorName:(t==null?void 0:t.baseColorName)||"",colorId:(t==null?void 0:t.colorId)||"",availableQty:(t==null?void 0:t.availableQty)||"",noOfHead:(t==null?void 0:t.noOfHead)||"",repeats:(t==null?void 0:t.repeats)||"",cuttingSize:(t==null?void 0:t.cuttingSize)||"",itemsPerRepeat:(t==null?void 0:t.itemsPerRepeat)||"",totalPcs:(t==null?void 0:t.totalPcs)||"",totalAmount:(t==null?void 0:t.totalAmount)||"",threadStiches:(t==null?void 0:t.threadStiches)||"",threadRate:(t==null?void 0:t.threadRate)||"",threadAmount:(t==null?void 0:t.threadAmount)||"",tillaStiches:(t==null?void 0:t.tillaStiches)||"",tilaRate:(t==null?void 0:t.tilaRate)||"",tilaAmount:(t==null?void 0:t.tilaAmount)||"",sequence:(t==null?void 0:t.sequence)||"",sequenceRate:(t==null?void 0:t.sequenceRate)||"",sequenceAmount:(t==null?void 0:t.sequenceAmount)||"",isSolving:(t==null?void 0:t.isSolving)||!1,solvingLayers:(t==null?void 0:t.solvingLayers)||0,solvingInMeters:(t==null?void 0:t.solvingInMeters)||"",solvingRate:(t==null?void 0:t.solvingRate)||0,solvingAmount:(t==null?void 0:t.solvingAmount)||"",threadAdditional:(t==null?void 0:t.threadAdditional)||[],costPerComponent:(t==null?void 0:t.costPerComponent)||"",createdBy:s.empId,createdOn:new Date().toISOString(),lastUpdatedOn:new Date().toISOString(),lastUpdatedBy:s.empId});r.useEffect(()=>{S({embroideryId:(t==null?void 0:t.embroideryId)||0,designId:(t==null?void 0:t.designId)||"",batchNo:(t==null?void 0:t.batchNo)||"",planningHeaderId:(t==null?void 0:t.planningHeaderId)||"",componentId:(t==null?void 0:t.componentId)||"",fabricId:(t==null?void 0:t.fabricId)||"",vendorId:(t==null?void 0:t.vendorId)||"",poPcs:(t==null?void 0:t.poPcs)||"",baseColorId:(t==null?void 0:t.baseColorId)||"",baseColorName:(t==null?void 0:t.baseColorName)||"",colorId:(t==null?void 0:t.colorId)||"",availableQty:(t==null?void 0:t.availableQty)||"",noOfHead:(t==null?void 0:t.noOfHead)||"",repeats:(t==null?void 0:t.repeats)||"",cuttingSize:(t==null?void 0:t.cuttingSize)||"",itemsPerRepeat:(t==null?void 0:t.itemsPerRepeat)||"",totalPcs:(t==null?void 0:t.totalPcs)||"",totalAmount:(t==null?void 0:t.totalAmount)||"",threadStiches:(t==null?void 0:t.threadStiches)||"",threadRate:(t==null?void 0:t.threadRate)||"",threadAmount:(t==null?void 0:t.threadAmount)||"",tillaStiches:(t==null?void 0:t.tillaStiches)||"",tilaRate:(t==null?void 0:t.tilaRate)||"",tilaAmount:(t==null?void 0:t.tilaAmount)||"",sequence:(t==null?void 0:t.sequence)||"",sequenceRate:(t==null?void 0:t.sequenceRate)||"",sequenceAmount:(t==null?void 0:t.sequenceAmount)||"",isSolving:(t==null?void 0:t.isSolving)||!1,solvingLayers:(t==null?void 0:t.solvingLayers)||0,solvingInMeters:(t==null?void 0:t.solvingInMeters)||"",solvingRate:(t==null?void 0:t.solvingRate)||0,solvingAmount:(t==null?void 0:t.solvingAmount)||"",threadAdditional:(t==null?void 0:t.threadAdditional)||[],costPerComponent:(t==null?void 0:t.costPerComponent)||"",createdOn:(t==null?void 0:t.createdOn)||new Date().toISOString(),createdBy:(t==null?void 0:t.createdBy)||s.empId,lastUpdatedOn:new Date().toISOString(),lastUpdatedBy:s.empId})},[t]);const X=["Boring","Pooni","Laser","Doori","Dissolving"];function M(u,v,b){return{fontWeight:v.indexOf(u)===-1?b.typography.fontWeightRegular:b.typography.fontWeightMedium}}const{data:U}=be(),[A,F]=r.useState(""),{data:z}=je(),{data:B,refetch:y}=ve(A,{skip:!A}),{data:P,refetch:Y}=We(l.designId,{skip:!l.designId}),{data:k}=Fe({batchNo:l.planningHeaderId,componentId:l.componentId},{skip:!l.planningHeaderId||!l.componentId}),{data:R}=Re({batchNo:l.planningHeaderId,componentId:l.componentId,fabricId:l.fabricId},{skip:!l.planningHeaderId||!l.componentId||!l.fabricId}),{data:Q,refetch:E}=$e(l.planningHeaderId,{skip:!l.planningHeaderId}),{data:I}=Be(l.planningHeaderId,{skip:!l.planningHeaderId});console.log("formData.planningHeaderId",l.planningHeaderId),console.log("collectionData",U);const[T,V]=r.useState(!1),K=(u,v)=>{V(!T)},[le,ie]=r.useState([]),[ae,D]=r.useState([]),[ue,$]=r.useState([]),[ee,W]=r.useState([]),[te,se]=r.useState([]),[oe,L]=r.useState([]),[ne,w]=r.useState([]),[me,he]=r.useState([]);console.log("batchList",ae),console.log("formData",l),r.useEffect(()=>{B&&ie(B.result)},[B]),r.useEffect(()=>{P&&D(P.result)},[P]),r.useEffect(()=>{k&&$(k.result)},[k]),r.useEffect(()=>{R&&L(k.result)},[R]),r.useEffect(()=>{I&&he(I.result)},[I]),r.useEffect(()=>{Q&&w(Q.result.map((u,v)=>({id:v,...u})))},[Q,E]),console.log("embroideryList",Q),console.log("initialRows",ne),r.useEffect(()=>{if(z){const u=z.result[0];W(u.vendorList),se(u.noOfHeadsList)}},[z]);const x=(U==null?void 0:U.result)||[];r.useEffect(()=>{const u=()=>{const O=parseFloat(l.repeats)||0,J=parseFloat(l.itemsPerRepeat)||0;return O*J};S(O=>({...O,totalPcs:u()}));const v=()=>{const O=parseFloat(l.threadStiches)||0,J=parseFloat(l.threadRate)||0,pe=parseFloat(l.noOfHead)||0,ge=parseFloat(l.repeats)||0;return O/1e3*(J*ge*pe)};S(O=>({...O,threadAmount:v()}));const b=()=>{const O=parseFloat(l.tillaStiches)||0,J=parseFloat(l.tilaRate)||0,pe=parseFloat(l.noOfHead)||0,ge=parseFloat(l.repeats)||0;return O/1e3*(J*ge*pe)};S(O=>({...O,tilaAmount:b()}));const C=()=>{const O=parseFloat(l.sequence)||0,J=parseFloat(l.sequenceRate)||0,pe=parseFloat(l.noOfHead)||0,ge=parseFloat(l.repeats)||0;return O/1e3*(J*ge*pe)};S(O=>({...O,sequenceAmount:C()}));const N=()=>{const O=parseFloat(l.repeats)||0,J=parseFloat(l.noOfHead)||0,pe=parseFloat(l.solvingLayers)||0;return O*J*13/39.37*pe};S(O=>({...O,solvingInMeters:N()}));const _=()=>{const O=parseFloat(l.solvingInMeters)||0,J=parseFloat(l.solvingRate)||0;return parseFloat(l.solvingLayers),O*J};S(O=>({...O,solvingAmount:_()}));const Le=()=>{const O=parseFloat(l.threadAmount)||0,J=parseFloat(l.tilaAmount)||0,pe=parseFloat(l.sequenceAmount)||0,ge=parseFloat(l.solvingAmount)||0;return O+J+pe+ge};S(O=>({...O,totalAmount:Le()}));const Ue=()=>{const O=parseFloat(l.totalAmount)||0,J=parseFloat(l.totalPcs)||0;return O/J};S(O=>({...O,costPerComponent:Ue()}))},[l.threadAmount,l.totalAmount,l.sequenceAmount,l.solvingAmount,l.repeats,l.tilaAmount,l.itemsPerRepeat,l.threadRate,l.threadStiches,l.noOfHead,l.tilaRate,l.tillaStiches,l.sequenceRate,l.sequence,l.solvingLayers,l.solvingInMeters,l.solvingRate]);const i=u=>{const{name:v,checked:b}=u.target;S(C=>({...C,[v]:b}))},o=u=>{const{name:v,value:b}=u.target;if(v==="collectionId")x.find(C=>C.collectionId===parseInt(b)),F(b),H(!0),S({...l,collectionId:b});else if(v==="designId"){const C=le.find(N=>N.designId===parseInt(b));S({...l,designId:b,baseColorId:C?C.colorId:"",baseColorName:C?C.colorName:""})}else if(v==="colorId"){const C=oe.find(N=>N.colorId===b);S({...l,colorId:b,availableQty:C?C.total:"",cuttingSize:C?C.cuttingSize:"",repeats:C?C.repeats:""})}else if(v==="batchNo"){const C=ae.find(N=>N.batchNo===b);S({...l,batchNo:b,planningHeaderId:C?C.planningHeaderId:"",poPcs:C?C.poPcs:""}),V(!0),H(!1)}else S({...l,[v]:b})},h=async()=>{try{const u=await re.post("https://gecxc.com:4041/api/Embroidery/SaveEmbroidery",{...l,threadAdditional:l.threadAdditional.join(", ")});console.log("Save response:",u.data),u.data.success?a("Fabrication saved successfully!",{variant:"success",autoHideDuration:5e3}):(a(`${u.data.message} !`,{variant:"error",autoHideDuration:5e3}),console.log("response.message",u.data.message)),V(!1),S(v=>({embroideryId:0,designId:v.designId,batchNo:v.batchNo,planningHeaderId:v.planningHeaderId,componentId:"",fabricId:"",vendorId:"",poPcs:"",baseColorId:"",baseColorName:"",colorId:"",availableQty:"",noOfHead:"",repeats:"",cuttingSize:"",itemsPerRepeat:"",totalPcs:"",totalAmount:"",threadStiches:"",threadRate:"",threadAmount:"",tillaStiches:"",tilaRate:"",tilaAmount:"",sequence:"",sequenceRate:"",sequenceAmount:"",isSolving:!1,solvingLayers:0,solvingInMeters:"",solvingRate:0,solvingAmount:"",threadAdditional:[],costPerComponent:"",createdOn:new Date().toISOString(),createdBy:s.empId,lastUpdatedOn:new Date().toISOString(),lastUpdatedBy:s.empId})),E()}catch(u){console.error("Error saving data:",u),a("Dyeing not saved successfully!",{variant:"error",autoHideDuration:5e3})}};console.log("initialRows",ne);const f=[{field:"designNo",headerName:"Design"},{field:"batchNo",headerName:"Batch No."},{field:"componentName",headerName:"Component "},{field:"fabricName",headerName:"Fabric "},{field:"vendorId",headerName:"Vendor"},{field:"poPcs",headerName:"Po Pcs"},{field:"colourName",headerName:"Color"},{field:"availableQty",headerName:"Available Qty"},{field:"noOfHeadsName",headerName:"No. Of Heads"},{field:"repeats",headerName:"Repeats"},{field:"cuttingSize",headerName:"Cutting Size"},{field:"itemsPerRepeat",headerName:"Items Per Repeat"},{field:"totalPcs",headerName:"Total Pcs"},{field:"threadStiches",headerName:"Thread Stitches"},{field:"threadRate",headerName:"Thread Rate"},{field:"threadAmount",headerName:"Thread Amount"},{field:"tillaStiches",headerName:"Tilla Stitches"},{field:"tilaRate",headerName:"Tilla Rate"},{field:"tilaAmount",headerName:"Tilla Amount"},{field:"sequence",headerName:"sequence"},{field:"sequenceRate",headerName:"Sequence Rate"},{field:"sequenceAmount",headerName:"Sequence Amount"},{field:"isSolving",headerName:"Is Solving"},{field:"solvingLayers",headerName:"Solving Layers"},{field:"solvingInMeters",headerName:"Solving In Meters"},{field:"solvingRate",headerName:"Solving Rate"},{field:"solvingAmount",headerName:"Solving Amount"},{field:"threadAdditional",headerName:"ThreadAdditional"},{field:"costPerComponent",headerName:"Cost Per Component"}];return e.jsxs(e.Fragment,{children:[e.jsxs(q,{variant:"outlined",children:[e.jsx(G,{className:"css-4rfrnx-MuiCardHeader-root",avatar:e.jsx(He,{src:ht,sx:{background:"transparent"}}),title:"Embroidery  ",titleTypographyProps:{style:{color:"white"}}}),e.jsxs(n,{container:!0,spacing:2,width:"Inherit",sx:{paddingY:2,paddingX:2},children:[" ",e.jsxs(n,{item:!0,xs:12,md:3,children:[e.jsx(d,{fullWidth:!0,select:!0,label:"Select Collection",name:"collectionId",value:A,onChange:o,size:"small",children:x.map(u=>e.jsx(j,{value:u.collectionId,children:u.collectionName},u.collectionId))})," "]}),e.jsx(n,{item:!0,xs:12,md:3,children:e.jsx(d,{fullWidth:!0,select:!0,label:"Select Design",name:"designId",value:l.designId,onChange:o,size:"small",children:le.map(u=>e.jsx(j,{value:u.designId,children:u.designNo},u.designId))})}),e.jsxs(n,{item:!0,xs:12,md:3,children:[e.jsx(d,{fullWidth:!0,select:!0,label:"Batch No.",name:"batchNo",value:l.batchNo,onChange:o,size:"small",children:ae.map(u=>e.jsx(j,{value:u.batchNo,children:u.batchNo},u.batchNo))})," "]}),e.jsx(n,{item:!0,xs:12,md:3,children:e.jsx(d,{label:"Base Color",fullWidth:!0,size:"small",name:"baseColorName",value:l.baseColorName,onChange:o,disabled:!0})})]})]}),e.jsx(n,{item:!0,xs:12,md:12,children:e.jsx(de,{color:"#cc8587",sx:{height:1,width:"100%",mt:2}})}),e.jsxs(q,{variant:"outlined",children:[e.jsx(G,{className:"css-4rfrnx-MuiCardHeader-root",avatar:e.jsx(Ce,{}),title:"Add Embroidery",titleTypographyProps:{style:{color:"white"}},action:e.jsx(ye,{onClick:K,children:e.jsx(ce,{style:{color:"white"}})}),sx:{display:"flex",alignItems:"center",justifyContent:"space-between"}})," ",e.jsxs(Se,{expanded:T,onChange:K,sx:{},children:[e.jsx(Pe,{expandIcon:e.jsx(ce,{}),"aria-controls":"panel1-content",id:"panel1-header",sx:{display:"none"}}),e.jsxs(Ne,{children:[e.jsxs(n,{container:!0,spacing:2,width:"Inherit",sx:{paddingY:2,paddingX:2},children:[" ",e.jsxs(n,{item:!0,xs:12,md:3,children:[e.jsx(d,{fullWidth:!0,select:!0,label:"Components",name:"componentId",value:l.componentId,onChange:o,size:"small",children:me.map(u=>e.jsx(j,{value:u.componentId,children:u.componentName},u.componentId))})," "]}),e.jsx(n,{item:!0,xs:12,md:3,children:e.jsx(d,{fullWidth:!0,select:!0,label:"Select Fabric",defaultValue:"",size:"small",name:"fabricId",value:l.fabricId,onChange:o,children:ue.map(u=>e.jsx(j,{value:u.fabricId,children:u.fabric},u.fabricId))})}),e.jsx(n,{item:!0,xs:12,md:3,children:e.jsx(d,{fullWidth:!0,select:!0,label:"Vendors",defaultValue:"",size:"small",name:"vendorId",value:l.vendorId,onChange:o,children:ee.map(u=>e.jsx(j,{value:u.lookUpId,children:u.lookUpName},u.lookUpId))})}),e.jsx(n,{item:!0,xs:12,md:3,children:e.jsx(d,{fullWidth:!0,select:!0,label:"Color",size:"small",name:"colorId",value:l.colorId,onChange:o,children:oe.map(u=>e.jsx(j,{value:u.colorId,children:u.color},u.colorId))})}),e.jsx(n,{item:!0,xs:12,md:1.5,children:e.jsx(d,{label:"Po Pcs",fullWidth:!0,size:"small",name:"poPcs",value:l.poPcs,onChange:o,disabled:!0})}),e.jsx(n,{item:!0,xs:12,md:1.5,children:e.jsx(d,{label:"Available Quantity",fullWidth:!0,size:"small",name:"availableQty",type:"number",value:l.availableQty,onChange:o})}),e.jsx(n,{item:!0,xs:12,md:1.5,children:e.jsx(d,{label:"Repeats",type:"number",fullWidth:!0,size:"small",name:"repeats",value:l.repeats,onChange:o})}),e.jsx(n,{item:!0,xs:12,md:1.5,children:e.jsx(d,{fullWidth:!0,select:!0,label:"Heads",defaultValue:"",size:"small",name:"noOfHead",value:l.noOfHead,onChange:o,children:te.map(u=>e.jsx(j,{value:u.lookUpId,children:u.lookUpName},u.lookUpId))})}),e.jsx(n,{item:!0,xs:12,md:1.5,children:e.jsx(d,{label:"Cutting Size",fullWidth:!0,size:"small",name:"cuttingSize",type:"number",value:l.cuttingSize,onChange:o})}),e.jsx(n,{item:!0,xs:12,md:1.5,children:e.jsx(d,{label:"itemsPerRepeat",fullWidth:!0,type:"number",size:"small",name:"itemsPerRepeat",value:l.itemsPerRepeat,onChange:o})}),e.jsx(n,{item:!0,xs:12,md:1.5,children:e.jsx(d,{label:"total Pcs.",fullWidth:!0,size:"small",type:"number",name:"totalPcs",value:l.totalPcs,onChange:o})}),e.jsx(n,{item:!0,xs:12,md:1.5,children:e.jsx(d,{label:"Total Amount",fullWidth:!0,type:"number",size:"small",name:"totalAmount",value:l.totalAmount,onChange:o})}),e.jsx(n,{item:!0,xs:12,md:1.5,children:e.jsx(d,{label:"Cost Per Component",fullWidth:!0,size:"small",name:"costPerComponent",value:l.costPerComponent,onChange:o})}),e.jsx(n,{item:!0,xs:12,md:3,children:e.jsx(d,{select:!0,label:"Additional",value:l.threadAdditional,name:"threadAdditional",size:"small",onChange:o,fullWidth:!0,SelectProps:{multiple:!0},children:X.map(u=>e.jsx(j,{value:u,style:M(u,l.threadAdditional,c),children:u},u))})}),e.jsx(n,{item:!0,xs:12,md:4}),e.jsx(n,{item:!0,xs:12,md:6,children:e.jsxs(n,{container:!0,spacing:1,width:"Inherit",children:[e.jsx(n,{item:!0,xs:12,md:12,children:e.jsx(xe,{variant:"h5",gutterBottom:!0,children:"Thread"})})," ",e.jsx(n,{item:!0,xs:12,md:4,children:e.jsx(d,{label:"Stitches",fullWidth:!0,size:"small",type:"number",name:"threadStiches",value:l.threadStiches,onChange:o})}),e.jsx(n,{item:!0,xs:12,md:4,children:e.jsx(d,{label:"Rate",type:"number",fullWidth:!0,size:"small",name:"threadRate",value:l.threadRate,onChange:o})}),e.jsx(n,{item:!0,xs:12,md:4,children:e.jsx(d,{label:"Amount",fullWidth:!0,size:"small",type:"number",name:"threadAmount",value:l.threadAmount,onChange:o})})]})}),e.jsx(n,{item:!0,xs:12,md:6,children:e.jsxs(n,{container:!0,spacing:1,width:"Inherit",children:[e.jsx(n,{item:!0,xs:12,md:12,children:e.jsx(xe,{variant:"h5",gutterBottom:!0,children:"Tilla"})})," ",e.jsx(n,{item:!0,xs:12,md:4,children:e.jsx(d,{label:"Stitches",fullWidth:!0,size:"small",type:"number",name:"tillaStiches",value:l.tillaStiches,onChange:o})}),e.jsx(n,{item:!0,xs:12,md:4,children:e.jsx(d,{label:"Rate",fullWidth:!0,size:"small",type:"number",name:"tilaRate",value:l.tilaRate,onChange:o})}),e.jsx(n,{item:!0,xs:12,md:4,children:e.jsx(d,{label:"Amount",fullWidth:!0,size:"small",name:"tilaAmount",value:l.tilaAmount,onChange:o})})]})}),e.jsxs(n,{item:!0,xs:12,md:6,children:[e.jsxs(n,{container:!0,spacing:1,width:"Inherit",children:[e.jsx(n,{item:!0,xs:12,md:12,children:e.jsx(xe,{variant:"h5",gutterBottom:!0,children:"Sequence"})})," ",e.jsx(n,{item:!0,xs:12,md:4,children:e.jsx(d,{label:"Sequence",fullWidth:!0,size:"small",name:"sequence",type:"number",value:l.sequence,onChange:o})}),e.jsx(n,{item:!0,xs:12,md:4,children:e.jsx(d,{label:"Rate",fullWidth:!0,type:"number",size:"small",name:"sequenceRate",value:l.sequenceRate,onChange:o})}),e.jsx(n,{item:!0,xs:12,md:4,children:e.jsx(d,{label:"Amount",fullWidth:!0,size:"small",name:"sequenceAmount",value:l.sequenceAmount,onChange:o})})]})," "]}),l.isSolving?e.jsx(n,{item:!0,xs:12,md:6,children:e.jsxs(n,{container:!0,spacing:1,width:"Inherit",children:[e.jsx(n,{item:!0,xs:12,md:12,children:e.jsx(xe,{variant:"h5",gutterBottom:!0,children:"Solving"})})," ",e.jsx(n,{item:!0,xs:12,md:3,children:e.jsx(d,{label:"Layers",fullWidth:!0,size:"small",type:"number",name:"solvingLayers",value:l.solvingLayers,onChange:o})}),e.jsx(n,{item:!0,xs:12,md:3,children:e.jsx(d,{label:"Meters",type:"number",fullWidth:!0,size:"small",name:"solvingInMeters",value:l.solvingInMeters,onChange:o})}),e.jsx(n,{item:!0,xs:12,md:3,children:e.jsx(d,{label:"Rate",fullWidth:!0,type:"number",size:"small",name:"solvingRate",value:l.solvingRate,onChange:o})}),e.jsx(n,{item:!0,xs:12,md:3,children:e.jsx(d,{label:"Amount",fullWidth:!0,size:"small",type:"number",name:"solvingAmount",value:l.solvingAmount,onChange:o})})]})}):null,e.jsx(n,{item:!0,xs:12,md:12,children:e.jsx(Ee,{control:e.jsx(Me,{checked:l.isSolving,onChange:i,name:"isSolving"}),label:"isSolving"})}),e.jsx(n,{item:!0,xs:12,textAlign:"right",sx:{mt:2},children:e.jsx(Z,{variant:"contained",size:"small",onClick:h,children:"Save"})})]})," "]})," "]})]}),e.jsx(de,{color:"#cc8587",sx:{height:1,width:"100%",mt:2}}),e.jsxs(q,{variant:"outlined",children:[e.jsx(G,{className:"css-4rfrnx-MuiCardHeader-root",avatar:e.jsx(Ae,{}),title:"View Embroidery ",titleTypographyProps:{style:{color:"white"}}})," ",e.jsx(n,{container:!0,spacing:2,width:"Inherit",sx:{paddingY:2,paddingX:2},children:e.jsxs(n,{sx:{marginTop:2},item:!0,xs:12,children:[" ",p?e.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"},children:e.jsx("img",{src:Te,alt:"Loading",style:{width:200,height:200}})}):e.jsx(ke,{iColumns:f,initialRows:ne,setInitialData:m,deleteApi:"https://gecxc.com:4041/api/Embroidery/DeleteEmbroideryById?embroideryId=",deleteBy:"embroideryId",refetch:E,setAccordionExpanded:V,fileName:"Embroidery List"})]})})]})]})},gt=pt,ft=()=>{const{user:c}=we();console.log("user",c);const[s,a]=r.useState([]),[t,m]=r.useState([]),[p,H]=r.useState({planningId:0,collectionId:"",baseColorId:"",baseColorName:"",noOfDesigns:"",noOfColors:"",planningHeaderId:"",designId:"",batchNo:"",componentId:"",cuttingSize:"",colorId:"",fabricId:"",noOfHeads:"",repeats:"",repeatSize:"",uomId:"",totalFabric:"",shrinkage:"",wastage:"",total:"",appId:1,createdOn:new Date().toISOString(),createdBy:c.empId,lastUpdatedBy:c.empId,lastUpdatedOn:new Date().toISOString(),isSchiffili:!1,repeatsInMtr:""});console.log("formData",p),r.useEffect(()=>{H({planningId:(s==null?void 0:s.planningId)||0,collectionId:(s==null?void 0:s.collectionId)||"",baseColorId:(s==null?void 0:s.baseColorId)||"",baseColorName:(s==null?void 0:s.baseColorName)||"",noOfDesigns:(s==null?void 0:s.noOfDesigns)||"",noOfColors:(s==null?void 0:s.noOfColors)||"",planningHeaderId:(s==null?void 0:s.planningHeaderId)||"",designId:(s==null?void 0:s.designId)||"",batchNo:(s==null?void 0:s.batchNo)||"",componentId:(s==null?void 0:s.componentId)||"",cuttingSize:(s==null?void 0:s.cuttingSize)||"",colorId:(s==null?void 0:s.colorId)||"",fabricId:(s==null?void 0:s.fabricId)||"",noOfHeads:(s==null?void 0:s.noOfHeads)||"",repeats:(s==null?void 0:s.repeats)||"",repeatSize:(s==null?void 0:s.repeatSize)||"",uomId:(s==null?void 0:s.uomId)||"",totalFabric:(s==null?void 0:s.totalFabric)||"",shrinkage:(s==null?void 0:s.shrinkage)||"",wastage:(s==null?void 0:s.wastage)||"",total:(s==null?void 0:s.total)||"",appId:1,createdOn:(s==null?void 0:s.createdOn)||new Date().toISOString(),createdBy:(s==null?void 0:s.createdBy)||c.empId,lastUpdatedBy:c.empId,lastUpdatedOn:new Date().toISOString(),isSchiffili:(s==null?void 0:s.isSchiffili)||!1,repeatsInMtr:(s==null?void 0:s.repeatsInMtr)||""})},[s]);const{data:l}=be(),[S,X]=r.useState(""),{data:M,refetch:U}=ve(S,{skip:!S}),{data:A,refetch:F}=_e(p.planningHeaderId,{skip:!p.planningHeaderId}),[z,B]=r.useState([]),{enqueueSnackbar:y}=Ie();r.useEffect(()=>{M&&(B(M.result),U())},[M]),r.useEffect(()=>{A&&m(A.result.map((o,h)=>({id:h,...o})))},[A,F]),console.log("designList",z),console.log("collectionData",l);const P=(l==null?void 0:l.result)||[],[Y,k]=r.useState(!1),[R,Q]=r.useState([]),[E,I]=r.useState([]),[T,V]=r.useState([]),[K,le]=r.useState([]),[ie,ae]=r.useState([]),[D,ue]=r.useState([]);r.useEffect(()=>{(async()=>{try{const f=(await re.get("https://gecxc.com:4041/API/Common/GetPrePlanningLookUp?appID=1")).data.result[0];Q(f.componentList),V(f.colorList),I(f.fabricList),ae(f.noOfHeadsList),le(f.uom)}catch(h){console.error("Error fetching pre-planning lookup data:",h)}})()},[]),r.useEffect(()=>{const o=async h=>{try{const f=await re.get(`https://gecxc.com:4041/api/PrePlanning/GetPrePlanningHeaderByDesignId?designId=${h}`);console.log(f.data),ue(f.data.result)}catch(f){console.error("Error fetching pre-planning lookup data:",f)}};p.designId&&o(p.designId)},[p.designId,p.planningHeaderId]),r.useEffect(()=>{const o=()=>{const u=parseFloat(p.repeats)||0,v=parseFloat(p.repeatSize)||0;return u*v};H(u=>({...u,totalFabric:o()}));const h=()=>{const u=parseFloat(p.totalFabric)||0,v=parseFloat(p.shrinkage)||0,b=parseFloat(p.wastage)||0;return u*(100+(v+b))/100};H(u=>({...u,total:h()}));const f=()=>(parseFloat(p.repeats),.9144*(parseFloat(p.repeatSize)||0));H(u=>({...u,repeatsInMtr:f()}));const g=()=>{const u=parseFloat(p.repeats)||0;return(parseFloat(p.repeatsInMtr)||0)*u};H(u=>({...u,totalFabric:u.isSchiffili?g():o()}))},[p.repeats,p.repeatSize,p.totalFabric,p.shrinkage,p.wastage,p.repeatsInMtr,p.isSchiffili]);const[$,ee]=r.useState(!1);r.useState(!1);const W=o=>{const{name:h,value:f}=o.target;if(h==="collectionId"){const g=P.find(u=>u.collectionId===parseInt(f));k(!0),X(f),H({...p,collectionId:f,noOfDesigns:g?g.noOfDesigns:"",noOfColors:g?g.noOfColors:""})}else if(h==="designId"){const g=z.find(u=>u.designId===parseInt(f));H({...p,designId:f,baseColorId:g?g.colorId:"",baseColorName:g?g.colorName:""})}else if(h==="batchNo"){const g=D.find(u=>u.batchNo===f);H({...p,batchNo:f,planningHeaderId:g?g.planningHeaderId:""}),ee(!0),k(!1)}else H({...p,[h]:f})},te=async()=>{try{const o=await re.post("https://gecxc.com:4041/api/PrePlanning/SavePrePlanning",p);console.log("Data saved successfully:",o.data),console.log("Save response:",o.data),o.data.success?y("Fabrication saved successfully!",{variant:"success",autoHideDuration:5e3}):(y(`${o.data.message} !`,{variant:"error",autoHideDuration:5e3}),console.log("response.message",o.data.message)),H(h=>({planningId:0,collectionId:h.collectionId,designId:h.designId,batchNo:h.batchNo,planningHeaderId:h.planningHeaderId,baseColorId:h.baseColorId,baseColorName:h.baseColorName,noOfDesigns:h.noOfDesigns,noOfColors:h.noOfColors,componentId:"",cuttingSize:"",colorId:"",fabricId:"",noOfHeads:"",repeats:"",repeatSize:"",uomId:"",totalFabric:"",shrinkage:"",wastage:"",total:"",appId:1,createdOn:new Date().toISOString(),createdBy:c.empId,lastUpdatedOn:new Date().toISOString(),lastUpdatedBy:c.empId,isSchiffili:!1,repeatsInMtr:""})),F(),ee(!1)}catch(o){console.error("Error saving data:",o),y("Pre Planning not saved successfully!",{variant:"error",autoHideDuration:5e3})}},se=o=>{const{name:h,checked:f}=o.target;H(g=>({...g,[h]:f,uomId:f?139:g.uomId}))};console.log("initialRows",t);const oe=t.reduce((o,h)=>o+(h.totalFabric??0),0).toFixed(2),L=t.reduce((o,h)=>o+(h.total??0),0).toFixed(2),ne=[...t,{id:"TOTAL_FABRIC",label:"Total Fabric",totalFabric:oe,total:L}],w={sortable:!1,pinnable:!1,hideable:!1};console.log("rows",ne);const me=[{field:"componentName",headerName:"Component",...w,colSpan:(o,h)=>{if(h.id==="TOTAL_FABRIC")return 7},valueGetter:(o,h)=>h.id==="TOTAL_FABRIC"?h.label:o},{field:"color",headerName:"Color",...w},{field:"cuttingSize",headerName:"Cutting Size",...w},{field:"fabric",headerName:"Fabrication",...w},{field:"noOfHeadName",headerName:"No. Of Heads",...w},{field:"repeats",headerName:"Repeats",...w},{field:"repeatSize",headerName:"Repeat Size",...w},{field:"totalFabric",headerName:"Total Fabric",...w},{field:"uom",headerName:"UOM",colSpan:(o,h)=>{if(h.id==="TOTAL_FABRIC")return 3},valueGetter:(o,h)=>h.id==="TOTAL_FABRIC"?"OverAll Total":o},{field:"shrinkage",headerName:"Shrinkage %"},{field:"wastage",headerName:"Wastage %"},{field:"total",headerName:"Total"}],he=({row:o,field:h})=>o.id==="TOTAL_FABRIC"&&(h==="componentName"||h==="uom")?"bold":"";console.log("batchList:",D);const x="https://gecxc.com:4041/api/PrePlanning/DeletePreplanningByPlanningId?PlanningId=",i=(o,h)=>{ee(!$)};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"CardHeader",children:e.jsxs(q,{variant:"outlined",children:[e.jsx(G,{className:"css-4rfrnx-MuiCardHeader-root",avatar:e.jsx(Ye,{}),title:"Pre Planning",titleTypographyProps:{style:{color:"white"}},children:" "}),e.jsxs(n,{container:!0,spacing:2,width:"Inherit",sx:{paddingY:2,paddingX:2},children:[e.jsxs(n,{item:!0,xs:12,md:2,children:[e.jsx(d,{fullWidth:!0,select:!0,label:"Select Collection",name:"collectionId",value:p.collectionId,onChange:W,size:"small",children:P.map(o=>e.jsx(j,{value:o.collectionId,children:o.collectionName},o.collectionId))})," "]}),e.jsx(n,{item:!0,xs:12,md:2,children:e.jsx(d,{fullWidth:!0,select:!0,label:"Select Design",name:"designId",value:p.designId,onChange:W,size:"small",children:z.map(o=>e.jsx(j,{value:o.designId,children:o.designNo},o.designId))})}),e.jsxs(n,{item:!0,xs:12,md:2,children:[e.jsx(d,{fullWidth:!0,select:!0,label:"Batch No.",name:"batchNo",value:p.batchNo,onChange:W,size:"small",children:D.map(o=>e.jsx(j,{value:o.batchNo,children:o.batchNo},o.batchNo))})," "]}),e.jsx(n,{item:!0,xs:12,md:2,children:e.jsx(d,{label:"No of Design",fullWidth:!0,size:"small",name:"noOfDesigns",value:p.noOfDesigns,onChange:W,disabled:!0})}),e.jsx(n,{item:!0,xs:12,md:2,children:e.jsx(d,{label:"No of Color",fullWidth:!0,size:"small",name:"noOfColors",value:p.noOfColors,onChange:W,disabled:!0})}),e.jsx(n,{item:!0,xs:12,md:2,children:e.jsx(d,{label:"Base Color",fullWidth:!0,size:"small",name:"baseColorName",value:p.baseColorName,onChange:W,disabled:!0})})]})]})}),e.jsxs(q,{variant:"outlined",children:[e.jsx(G,{className:"MainCard",avatar:e.jsx(Ce,{}),title:"Add Pre Planning",titleTypographyProps:{style:{color:"white"}},action:e.jsx(ye,{onClick:i,children:e.jsx(ce,{style:{color:"white"}})}),sx:{display:"flex",alignItems:"center",justifyContent:"space-between"}}),e.jsxs(Se,{expanded:$,onChange:i,sx:{},children:[e.jsx(Pe,{expandIcon:e.jsx(ce,{}),"aria-controls":"panel1-content",id:"panel1-header",sx:{display:"none"}}),e.jsx(Ne,{children:e.jsxs(n,{container:!0,spacing:2,width:"Inherit",sx:{paddingY:2,paddingX:2},children:[e.jsx(n,{item:!0,xs:12,md:2,children:e.jsx(ze,{fullWidth:!0,options:R,getOptionLabel:o=>o.lookUpName,value:R.find(o=>o.lookUpId===p.componentId)||null,onChange:(o,h)=>{W({target:{name:"componentId",value:h?h.lookUpId:""}})},renderInput:o=>e.jsx(d,{...o,label:"Select Component",size:"small",name:"componentId",value:p.componentId})})}),e.jsxs(n,{item:!0,xs:12,md:2,children:[" ",e.jsx(ze,{fullWidth:!0,options:T,getOptionLabel:o=>o.lookUpName,value:T.find(o=>o.lookUpId===p.colorId)||null,onChange:(o,h)=>{W({target:{name:"colorId",value:h?h.lookUpId:""}})},renderInput:o=>e.jsx(d,{...o,label:"Color",size:"small",value:p.colorId,name:"colorId"})})]}),e.jsx(n,{item:!0,xs:12,md:2,children:e.jsx(d,{label:"Cutting Size",fullWidth:!0,size:"small",name:"cuttingSize",type:"number",value:p.cuttingSize,onChange:W})}),e.jsx(n,{item:!0,xs:12,md:2,children:e.jsx(ze,{fullWidth:!0,options:E,getOptionLabel:o=>o.lookUpName,value:E.find(o=>o.lookUpId===p.fabricId)||null,onChange:(o,h)=>{W({target:{name:"fabricId",value:h?h.lookUpId:""}})},renderInput:o=>e.jsx(d,{...o,label:"Fabrication",size:"small",name:"fabricId",value:p.fabricId})})}),e.jsx(n,{item:!0,xs:12,md:2,children:e.jsx(d,{fullWidth:!0,select:!0,label:"No of Heads",defaultValue:"",size:"small",name:"noOfHeads",value:p.noOfHeads,onChange:W,children:ie.map(o=>e.jsx(j,{value:o.lookUpId,children:o.lookUpName},o.lookUpId))})}),e.jsx(n,{item:!0,xs:12,md:2,children:e.jsx(d,{label:"Repeats",fullWidth:!0,size:"small",name:"repeats",type:"number",value:p.repeats,onChange:W})}),e.jsx(n,{item:!0,xs:12,md:2,children:e.jsx(d,{label:"Repeat Size",fullWidth:!0,type:"number",size:"small",name:"repeatSize",value:p.repeatSize,onChange:W})}),e.jsx(n,{item:!0,xs:12,md:2,children:e.jsx(d,{label:"Total Fabric",fullWidth:!0,size:"small",name:"totalFabric",value:p.totalFabric,onChange:W})}),e.jsx(n,{item:!0,xs:12,md:2,children:e.jsx(d,{fullWidth:!0,select:!0,label:"UOM",type:"number",defaultValue:"",size:"small",name:"uomId",value:p.uomId,onChange:W,disabled:p.isSchiffili,children:K.map(o=>e.jsx(j,{value:o.lookUpId,children:o.lookUpName},o.lookUpId))})}),e.jsx(n,{item:!0,xs:12,md:2,children:e.jsx(d,{label:"Shrinkage %",fullWidth:!0,size:"small",type:"number",name:"shrinkage",value:p.shrinkage,onChange:W})}),e.jsx(n,{item:!0,xs:12,md:2,children:e.jsx(d,{label:"Wastage %",fullWidth:!0,size:"small",type:"number",name:"wastage",value:p.wastage,onChange:W})}),e.jsx(n,{item:!0,xs:12,md:2,children:e.jsx(d,{label:"Total",fullWidth:!0,type:"number",size:"small",name:"total",value:p.total,onChange:W})}),e.jsx(n,{item:!0,xs:12,md:2,textAlign:"right",children:e.jsx(Ee,{control:e.jsx(Me,{checked:p.isSchiffili,onChange:se,name:"isSchiffili"}),label:"Is Schiffli"})}),p.isSchiffili?e.jsx(n,{item:!0,xs:12,md:6,children:e.jsx(n,{container:!0,spacing:1,width:"Inherit",children:e.jsx(n,{item:!0,xs:12,md:4,children:e.jsx(d,{label:"repeat in mtr",fullWidth:!0,size:"small",name:"repeatsInMtr",disabled:!0,value:p.repeatsInMtr,onChange:W})})})}):null,e.jsx(n,{item:!0,xs:12,textAlign:"right",children:e.jsx(Z,{variant:"contained",size:"small",onClick:te,children:"Save"})})]})})]})]}),e.jsx(n,{item:!0,xs:12,md:12,children:e.jsx(de,{sx:{height:1,width:"100%",marginTop:1,marginBottom:0}})}),e.jsxs(q,{variant:"outlined",children:[e.jsx(G,{className:"MainCard",avatar:e.jsx(Ae,{}),title:"View",titleTypographyProps:{style:{color:"white"}}}),e.jsx(n,{sx:{paddingY:1,paddingX:1},children:e.jsx(n,{sx:{},item:!0,xs:12,children:Y?e.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"},children:e.jsx("img",{src:Te,alt:"Loading",style:{width:200,height:200}})}):e.jsx(ke,{iColumns:me,initialRows:ne,setInitialData:a,deleteApi:x,deleteBy:"planningId",refetch:F,getCellClassName:he,setAccordionExpanded:ee,fileName:"PrePlanningList"})})})]})]})},xt=ft,It="/assets/roller-ezgif.com-instagif-CY-x4C-U.gif",bt=()=>{const{user:c}=we();console.log("user",c);const[s,a]=r.useState([]),[t,m]=r.useState({dpId:0,designId:"",batchNo:"",planningHeaderId:"",fabricId:"",colorId:"",color:"",vendorId:"",processType:"",AvailableQty:"",Shrinkage:"",Wastage:"",OutputQty:"",UOM:"",uomId:"",RatePerUOM:"",UnitRatePerPo:"",TotalExclGst:"",GST:"0",TotalIncludingGst:"",poPcs:"",baseColorName:"",createdBy:c.empId,createdOn:new Date().toISOString(),lastUpdatedOn:new Date().toISOString(),lastUpdatedBy:c.empId});r.useEffect(()=>{m({dpId:s.dpId||0,designId:(s==null?void 0:s.designId)||"",planningHeaderId:(s==null?void 0:s.planningHeaderId)||0,batchNo:(s==null?void 0:s.batchNo)||"",fabricId:(s==null?void 0:s.fabricId)||"",colorId:(s==null?void 0:s.colorId)||"",color:(s==null?void 0:s.color)||"",vendorId:(s==null?void 0:s.vendorId)||"",processType:(s==null?void 0:s.processType)||"",AvailableQty:(s==null?void 0:s.availableQty)||"",Shrinkage:(s==null?void 0:s.shrinkage)||"",Wastage:(s==null?void 0:s.wastage)||"",OutputQty:(s==null?void 0:s.outputQty)||0,UOM:(s==null?void 0:s.uom)||0,uomId:(s==null?void 0:s.uomId)||"",RatePerUOM:(s==null?void 0:s.ratePerUOM)||0,UnitRatePerPo:(s==null?void 0:s.unitRatePerPo)||"",TotalExclGst:(s==null?void 0:s.totalExclGst)||"",GST:(s==null?void 0:s.gst)||"",TotalIncludingGst:(s==null?void 0:s.totalIncludingGst)||"",poPcs:(s==null?void 0:s.poPcs)||0,baseColorName:(s==null?void 0:s.baseColorName)||0,createdOn:(s==null?void 0:s.createdOn)||new Date().toISOString(),createdBy:(s==null?void 0:s.createdBy)||c.empId,lastUpdatedOn:new Date().toISOString(),lastUpdatedBy:c.empId})},[s]);const{enqueueSnackbar:p}=Ie(),[H,l]=r.useState(!1);console.log("Dyeing form data to send",t);const{data:S}=be(),[X,M]=r.useState(""),{data:U}=je(),{data:A,refetch:F}=ve(X,{skip:!X}),{data:z,refetch:B}=We(t.designId,{skip:!t.designId}),{data:y}=De(t.planningHeaderId,{skip:!t.planningHeaderId}),{data:P}=et({fabricId:t.fabricId,planningHeaderId:t.planningHeaderId},{skip:!t.fabricId||!t.planningHeaderId}),{data:Y,refetch:k}=tt(t.planningHeaderId,{skip:!t.planningHeaderId}),[R,Q]=r.useState([]),[E,I]=r.useState([]),[T,V]=r.useState([]),[K,le]=r.useState([]),[ie,ae]=r.useState([]),[D,ue]=r.useState([]),[$,ee]=r.useState([]),[W,te]=r.useState(!1);console.log("batchList",E),console.log("formData",t);const se=(x,i)=>{te(!W)};r.useEffect(()=>{A&&Q(A.result)},[A]),r.useEffect(()=>{z&&I(z.result)},[z]),r.useEffect(()=>{y&&V(y.result)},[y]),r.useEffect(()=>{P&&ue(P.result)},[P]),r.useEffect(()=>{U&&ee(U.result[0].vendorList)},[y]),console.log($),r.useEffect(()=>{Y&&ae(Y.result.map((x,i)=>({id:i,...x})))},[Y,k]),r.useEffect(()=>{if(U){const x=U.result[0];le(x.uomList)}},[U]);const oe=(S==null?void 0:S.result)||[],L=x=>{const{name:i,value:o}=x.target;if(i==="collectionId")oe.find(h=>h.collectionId===parseInt(o)),M(o),l(!0),m({...t,collectionId:o});else if(i==="designId"){const h=R.find(f=>f.designId===parseInt(o));m({...t,designId:o,baseColorId:h?h.colorId:"",baseColorName:h?h.colorName:""})}else if(i==="batchNo"){const h=E.find(f=>f.batchNo===o);m({...t,batchNo:o,planningHeaderId:h?h.planningHeaderId:"",poPcs:h?h.poPcs:""}),te(!0),l(!1)}else if(i==="fabricId")T.find(h=>h.fabricId===o),console.log("Selected Fabric:",T),m({...t,fabricId:o});else if(i==="ColorId"){const h=D.find(f=>f.colorId===o.colorId);m({...t,ColorId:o.colorId,color:h.color,AvailableQty:h.total,UOM:h.uom,Shrinkage:h.shrinkage,Wastage:h.wastage})}else m(i==="processType"?{...t,processType:o}:i==="vendorId"?{...t,vendorId:o}:{...t,[i]:o})};r.useEffect(()=>{const x=()=>{const C=parseFloat(t.AvailableQty)||0,N=parseFloat(t.Shrinkage)||0,_=parseFloat(t.Wastage)||0;return C*(100-(N+_))/100},i=()=>{const C=parseFloat(t.AvailableQty)||0,N=parseFloat(t.RatePerUOM)||0;return C*N},o=(C,N)=>C*(1+N/100),h=x(),f=i(),g=parseFloat(t.GST)||0,u=o(f,g),v=parseFloat(t.poPcs)||0,b=v?u/v:0;m(C=>({...C,OutputQty:h,TotalExclGst:f.toFixed(2),TotalIncludingGst:u.toFixed(2),UnitRatePerPo:b.toFixed(2)}))},[t.AvailableQty,t.Shrinkage,t.Wastage,t.RatePerUOM,t.GST,t.poPcs,t.UnitRatePerPo]);const ne=async()=>{if(!t.designId||!t.batchNo){alert("Please fill all required fields.");return}try{const x=await re.post("https://gecxc.com:4041/api/DyeingPrinting/SaveDyeingPrinting",t);console.log("Save response:",x.data),x.data.success?p("Fabrication saved successfully!",{variant:"success",autoHideDuration:5e3}):(p(`${x.data.message} !`,{variant:"error",autoHideDuration:5e3}),console.log("response.message",x.data.message)),m(i=>({designId:i.designId,planningHeaderId:i.planningHeaderId,batchNo:i.batchNo,dpId:0,fabricId:"",colorId:"",color:"",vendorId:"",processType:"",AvailableQty:"",Shrinkage:"",Wastage:"",OutputQty:"",UOM:"",uomId:"",RatePerUOM:"",UnitRatePerPo:"",TotalExclGst:"",GST:"0",TotalIncludingGst:"",poPcs:"",baseColorName:"",createdOn:new Date().toISOString(),createdBy:c.empId,lastUpdatedOn:new Date().toISOString(),lastUpdatedBy:c.empId})),k(),te(!1)}catch(x){console.error("Error saving data:",x),p("Dyeing not saved successfully!",{variant:"error",autoHideDuration:5e3})}},w=[{value:"Dyeing",label:"Dyeing"},{value:"Printing",label:"Printing"}],me=[{field:"fabricName",headerName:"Fabric"},{field:"colorName",headerName:"Color"},{field:"vendorName",headerName:"Vendor"},{field:"processType",headerName:"Process Type"},{field:"uom",headerName:"uom"},{field:"availableQty",headerName:"Available Quantitity"},{field:"shrinkage",headerName:"Shrinkage"},{field:"wastage",headerName:"Wastage"},{field:"outputQty",headerName:"Output Qty"},{field:"ratePerUOM",headerName:"Rate"},{field:"totalExclGst",headerName:"Total Excl. Gst"},{field:"gst",headerName:"GST"},{field:"totalIncludingGst",headerName:"Total Including GST"},{field:"unitRatePerPo",headerName:"UnitRate Per Po."}];return e.jsxs(e.Fragment,{children:[e.jsxs(q,{variant:"outlined",children:[e.jsx(G,{className:"css-4rfrnx-MuiCardHeader-root",avatar:e.jsx(He,{src:It,sx:{background:"transparent"}}),title:"Dyeing ",titleTypographyProps:{style:{color:"white"}}}),e.jsxs(n,{container:!0,spacing:2,width:"Inherit",sx:{paddingY:2,paddingX:2},children:[e.jsxs(n,{item:!0,xs:12,md:3,children:[e.jsx(d,{fullWidth:!0,select:!0,label:"Select Collection",name:"collectionId",value:X,onChange:L,size:"small",children:oe.map(x=>e.jsx(j,{value:x.collectionId,children:x.collectionName},x.collectionId))})," "]}),e.jsx(n,{item:!0,xs:12,md:3,children:e.jsx(d,{fullWidth:!0,select:!0,label:"Select Design",name:"designId",value:t.designId,onChange:L,size:"small",children:R.map(x=>e.jsx(j,{value:x.designId,children:x.designNo},x.designId))})}),e.jsxs(n,{item:!0,xs:12,md:3,children:[e.jsx(d,{fullWidth:!0,select:!0,label:"Batch No.",name:"batchNo",value:t.batchNo,onChange:L,size:"small",children:E.map(x=>e.jsx(j,{value:x.batchNo,children:x.batchNo},x.batchNo))})," "]}),e.jsx(n,{item:!0,xs:12,md:3,children:e.jsx(d,{label:"Base Color",fullWidth:!0,size:"small",name:"baseColorName",value:t.baseColorName,onChange:L,disabled:!0})}),e.jsx(n,{item:!0,xs:12,md:3,children:e.jsx(d,{fullWidth:!0,select:!0,label:"Select Fabric",defaultValue:"",size:"small",name:"fabricId",value:t.fabricId,onChange:L,children:T.map(x=>e.jsx(j,{value:x.fabricId,children:x.fabric},x.fabricId))})}),e.jsx(n,{item:!0,xs:12,md:3,children:e.jsx(ct,{fullWidth:!0,options:D,getOptionLabel:x=>x.color||"",renderInput:x=>e.jsx(d,{...x,label:"Color",name:"colorId",size:"small"}),value:D.find(x=>x.colorId===t.colorId)||null,onChange:(x,i)=>{m(o=>({...o,colorId:i?i.colorId:"",color:i?i.color:"",AvailableQty:i?i.total:"",UOM:i?i.uom:"",uomId:i?i.uomId:"",Shrinkage:i?i.shrinkage:"",Wastage:i?i.wastage:""}))}})})]})]}),e.jsx(de,{color:"#cc8587",sx:{height:1,width:"100%",mt:2}}),e.jsxs(q,{variant:"outlined",children:[e.jsx(G,{className:"css-4rfrnx-MuiCardHeader-root",avatar:e.jsx(Ce,{}),title:"Add Dyeing ",titleTypographyProps:{style:{color:"white"}},action:e.jsx(ye,{onClick:se,children:e.jsx(ce,{style:{color:"white"}})}),sx:{display:"flex",alignItems:"center",justifyContent:"space-between"}}),e.jsxs(Se,{expanded:W,onChange:se,sx:{},children:[e.jsx(Pe,{expandIcon:e.jsx(ce,{}),"aria-controls":"panel1-content",id:"panel1-header",sx:{display:"none"}}),e.jsx(Ne,{children:e.jsxs(n,{container:!0,spacing:2,width:"Inherit",sx:{paddingY:2,paddingX:2},children:[e.jsx(n,{item:!0,xs:12,md:3,children:e.jsx(d,{fullWidth:!0,select:!0,label:"Vendor Name",size:"small",name:"vendorId",value:t.vendorId,onChange:L,children:$.map(x=>e.jsx(j,{value:x.lookUpId,children:x.lookUpName},x.lookUpId))})}),e.jsx(n,{item:!0,xs:12,md:3,children:e.jsx(d,{fullWidth:!0,select:!0,label:"Process Type",size:"small",name:"processType",value:t.processType,onChange:L,children:w.map(x=>e.jsx(j,{value:x.value,children:x.label},x.value))})}),e.jsx(n,{item:!0,xs:12,md:3,children:e.jsx(d,{label:"Po Pcs",fullWidth:!0,size:"small",name:"poPcs",value:t.poPcs,onChange:L,disabled:!0})}),e.jsx(n,{item:!0,xs:12,md:1.5,children:e.jsx(d,{label:"UOM",fullWidth:!0,size:"small",name:"UOM",value:t.UOM,onChange:L})}),e.jsx(n,{item:!0,xs:12,md:1.5,children:e.jsx(d,{label:"AvailableQty",fullWidth:!0,size:"small",type:"number",name:"AvailableQty",value:t.AvailableQty,onChange:L})}),e.jsx(n,{item:!0,xs:12,md:1.5,children:e.jsx(d,{label:"Shrinkage%",type:"number",fullWidth:!0,size:"small",name:"Shrinkage",value:t.Shrinkage,onChange:L})}),e.jsx(n,{item:!0,xs:12,md:1.5,children:e.jsx(d,{label:"Wastage%",fullWidth:!0,size:"small",type:"number",name:"Wastage",value:t.Wastage,onChange:L})}),e.jsx(n,{item:!0,xs:12,md:1.5,children:e.jsx(d,{label:"Output Qty",fullWidth:!0,size:"small",name:"OutputQty",type:"number",value:t.OutputQty,onChange:L})}),e.jsx(n,{item:!0,xs:12,md:1.5,children:e.jsx(d,{label:"Rate",fullWidth:!0,size:"small",type:"number",name:"RatePerUOM",value:t.RatePerUOM,onChange:L})}),e.jsx(n,{item:!0,xs:12,md:1.5,children:e.jsx(d,{label:"Total Excluding GST",type:"number",fullWidth:!0,size:"small",name:"TotalExclGst",value:t.TotalExclGst,onChange:L})}),e.jsxs(n,{item:!0,xs:12,md:1.5,children:[e.jsx(d,{label:"GST",fullWidth:!0,type:"number",size:"small",name:"GST",value:t.GST,onChange:L})," "]}),e.jsx(n,{item:!0,xs:12,md:1.5,children:e.jsx(d,{label:"Total:Including Gst",fullWidth:!0,size:"small",name:"TotalExclGst",value:t.TotalIncludingGst,onChange:L})}),e.jsx(n,{item:!0,xs:12,md:1.5,children:e.jsx(d,{label:"Unit P: T/Po PC's",fullWidth:!0,size:"small",name:"UnitRatePerPo",value:t.UnitRatePerPo,onChange:L})}),e.jsx(n,{item:!0,xs:12,md:12,textAlign:"right",children:e.jsx(Z,{variant:"contained",color:"primary",size:"small",onClick:ne,children:"Save"})})]})})]})]}),e.jsx(de,{color:"#cc8587",sx:{height:1,width:"100%",mt:2}}),e.jsxs(q,{variant:"outlined",children:[e.jsx(G,{className:"css-4rfrnx-MuiCardHeader-root",avatar:e.jsx(Ae,{}),title:"View Dyeing ",titleTypographyProps:{style:{color:"white"}}})," ",e.jsx(n,{container:!0,spacing:2,width:"Inherit",sx:{paddingY:2,paddingX:2},children:e.jsx(n,{item:!0,xs:12,md:12,paddingTop:1,children:H?e.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"},children:e.jsx("img",{src:Te,alt:"Loading",style:{width:200,height:200}})}):e.jsx(ke,{iColumns:me,initialRows:ie,setInitialData:a,deleteApi:"https://gecxc.com:4041/api/DyeingPrinting/DeleteDyeingPrintingById?DPId=",deleteBy:"dpId",refetch:k,setAccordionExpanded:te,fileName:"Dyeing&PrintingList"})})})]})]})},jt=bt,Xe="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAACXBIWXMAAAsTAAALEwEAmpwYAAADr0lEQVR4nNXXaciVVRAH8Kv1Jtoi5psFZZYUtoimhUVlaJHZghK2UBFCtGkbZdgiBG1GHyowaaEdWogWElvMFjJpw4oWwrJsVetDtNNevxjeuXW8PPe991rvh/5w4TznnDkzZ87Mf+bWav8H4Dgcgc9wfcPanViFidioL5Rvj2/wIqbgCyzA3XgKH+BI/+DWijMGpYEjO1U+FH8Uh++Jj6yPNzG5YW5wccYxWItF6anwWP9OjJiE7/FuYcCTeDnHjQYsLWR3w8cYi/OxP57AzE49cSGewzgswfJ0/0u4HwfgWYyq3w5deBXH4wXchHU4GgvbVdwPR+EVPI1NMCDesviFos3SqIiTaSl7BW5Pw5/Ho3gYl2Nuu8G3NG+8X85tgcMxCxfhLBxWf/N08bJU+h52xRrciGdwdj7bsFbKx+fbnZTfe+cNflGNX/EQJqQ3Pi+MPgN3pAd/x8GtlO+BT/I2A1P4T+0hMuYdzC/Om56XCW/NyOCt5gs9Lo5oPxBD8u07xesZK5vjtjRqXKEj0vGEZgYsxGXYOKO8U/yE3ZN0PsSVuCHOLHTsgxVVykdmgAzKAGuFryvmLsDVBXnF+w9OCt+60BXcMarRgBA8D91Jvc2URrqNSZkJ+f1dUvRbDfu/wqbpiXmFrluCIUvlke+rsS3OaaJ8WUmxhewO+LYXT52KneLWhcx167EhRtQ3JKNVYUqTuAkmfDBStoncI7kvMmvLHAcdTywPORT35rjqbdfWySPzfDF+wAPF/Hb4skJ2Xa6HzL45fiwCvTRgJq7NvK/CmcXeuQ1rpxdrF1fIBvn0z5ScXuXFGk7Md4nbVeGUYu8lDWvnFmtzKmR/C+JpZcA03JXjqoBaWfD9VplGkqjq890VvUJgTfHuezUzYMdgsBxHRavCpAaZoQ3fQblVWJLrK0suaDSgXwbakCSTKkQp7WoiP6AX5pyVJPd3GjYzYgFmZzT/2OSwVdkLblOU7PuauF4+Z3fGxqWtDBiblawrWbE3hIFv4OcW++Ylta9uqyHVU3rnpNBr/h2WZ1WMrLmmpfJABEnW7uD44dlybwjCk8OyWX0/YqvWLvSUy3jTXbIt77QsL8q+YnReZnTbyuvA1OTuqZkhMyoqXSNWRH+Y8sem8sm1DYWehvLtjPrhObdzZspVuDnL7GnBI4XMPUlQIzZYeR3ZGc1ObzyeFW981viByRtjsttdnO3cyRF8tf8Serj8oPhjmu11tNqfZnpFzz8fh/TJn9O+xl9lMwg6mBWmPgAAAABJRU5ErkJggg==",vt=()=>{const{user:c}=we(),{enqueueSnackbar:s}=Ie(),[a,t]=r.useState([]),[m,p]=r.useState({schiffiliId:0,designId:"",planningHeaderId:0,batchNo:"",componentId:"",poPcs:"",baseColorName:"",fabricId:"",vendorId:"",colorId:"",availableQty:"",thaanQty:0,operatingMachineId:0,operatingMachine:"",workingHeadId:0,cuttingSize:"",rate:"",costPerComponent:"",totalEmbroidry:0,noOfItemPerThaan:0,noOfStichesPerYard:0,amountPerYard:0,totalPcs:0,laserCut:!1,laserCutRate:0,pcsForLaserCut:0,totalAmount:0,createdBy:c.empId,createdOn:new Date().toISOString(),lastUpdatedOn:new Date().toISOString(),lastUpdatedBy:c.empId});r.useEffect(()=>{p({schiffiliId:a.schiffiliId||0,designId:(a==null?void 0:a.designId)||"",planningHeaderId:(a==null?void 0:a.planningHeaderId)||0,batchNo:(a==null?void 0:a.batchNo)||"",componentId:(a==null?void 0:a.componentId)||"",poPcs:(a==null?void 0:a.poPcs)||"",baseColorName:(a==null?void 0:a.baseColorName)||"",fabricId:(a==null?void 0:a.fabricId)||"",vendorId:(a==null?void 0:a.vendorId)||"",colorId:(a==null?void 0:a.colorId)||"",availableQty:(a==null?void 0:a.availableQty)||"",thaanQty:(a==null?void 0:a.thaanQty)||0,operatingMachineId:(a==null?void 0:a.operatingMachineId)||0,operatingMachine:(a==null?void 0:a.operatingMachine)||"",workingHeadId:(a==null?void 0:a.workingHeadId)||0,cuttingSize:(a==null?void 0:a.cuttingSize)||"",rate:(a==null?void 0:a.rate)||"",costPerComponent:(a==null?void 0:a.costPerComponent)||"",totalEmbroidry:(a==null?void 0:a.totalEmbroidry)||0,noOfItemPerThaan:(a==null?void 0:a.noOfItemPerThaan)||0,noOfStichesPerYard:(a==null?void 0:a.noOfStichesPerYard)||0,amountPerYard:(a==null?void 0:a.amountPerYard)||0,totalPcs:(a==null?void 0:a.totalPcs)||0,laserCut:(a==null?void 0:a.laserCut)||!1,laserCutRate:(a==null?void 0:a.laserCutRate)||0,pcsForLaserCut:(a==null?void 0:a.pcsForLaserCut)||0,totalAmount:(a==null?void 0:a.totalAmount)||0,createdOn:(a==null?void 0:a.createdOn)||new Date().toISOString(),createdBy:(a==null?void 0:a.createdBy)||c.empId,lastUpdatedOn:new Date().toISOString(),lastUpdatedBy:c.empId})},[a]);const[H,l]=r.useState(!1),S=(g,u)=>{l(!H)},[X,M]=r.useState(!1),{data:U}=be(),[A,F]=r.useState(""),{data:z}=je(),{data:B,refetch:y}=ve(A,{skip:!A}),{data:P,refetch:Y}=We(m.designId,{skip:!m.designId}),{data:k}=Fe({batchNo:m.planningHeaderId,componentId:m.componentId},{skip:!m.planningHeaderId||!m.componentId}),{data:R}=Re({batchNo:m.planningHeaderId,componentId:m.componentId,fabricId:m.fabricId},{skip:!m.planningHeaderId||!m.componentId||!m.fabricId}),{data:Q,refetch:E}=Ge(m.planningHeaderId,{skip:!m.planningHeaderId}),{data:I}=Be(m.planningHeaderId,{skip:!m.planningHeaderId});console.log("formData.planningHeaderId",m.planningHeaderId),console.log("collectionData",U),console.log("schiffliList",Q);const[T,V]=r.useState([]),[K,le]=r.useState([]),[ie,ae]=r.useState([]),[D,ue]=r.useState([]),[$,ee]=r.useState([]),[W,te]=r.useState([]),[se,oe]=r.useState([]),[L,ne]=r.useState([]),[w,me]=r.useState([]);r.useEffect(()=>{B&&V(B.result)},[B]),r.useEffect(()=>{P&&le(P.result)},[P]),r.useEffect(()=>{k&&ae(k.result)},[k]),r.useEffect(()=>{R&&oe(k.result)},[R]),r.useEffect(()=>{I&&me(I.result)},[I]),r.useEffect(()=>{Q&&ne(Q.result.map((g,u)=>({id:u,...g})))},[Q,E]),r.useEffect(()=>{if(z){const g=z.result[0];ue(g.vendorList),ee(g.operatingMachineList),te(g.workingHeadList)}},[z]),console.log("initialRows",L);const he=(U==null?void 0:U.result)||[];r.useEffect(()=>{const g=()=>{const N=parseFloat(m.thaanQty)||0,_=parseFloat(m.operatingMachine)||0;return N*_};p(N=>({...N,totalEmbroidry:g()}));const u=()=>{const N=parseFloat(m.thaanQty)||0,_=parseFloat(m.noOfStichesPerYard)||0;return N*_};p(N=>({...N,totalPcs:u()}));const v=()=>{const N=parseFloat(m.noOfStichesPerYard)||0,_=parseFloat(m.rate)||0;return N/1e3*_};p(N=>({...N,amountPerYard:v()}));const b=()=>{const N=parseFloat(m.totalAmount)||0,_=parseFloat(m.totalPcs)||0;return N/_};p(N=>({...N,costPerComponent:b()}));const C=()=>{const N=parseFloat(m.amountPerYard)||0,_=parseFloat(m.totalEmbroidry)||0,Le=parseFloat(m.laserCutRate)||0,Ue=parseFloat(m.pcsForLaserCut)||0;return N*_+Ue*Le};p(N=>({...N,totalAmount:C()}))},[m.thaanQty,m.operatingMachine,m.noOfStichesPerYard,m.rate,m.totalAmount,m.totalPcs,m.amountPerYard,m.totalEmbroidry,m.laserCutRate,m.pcsForLaserCut]);const x=g=>{const{name:u,checked:v}=g.target;p(b=>({...b,[u]:v}))},i=g=>{const{name:u,value:v}=g.target;if(u==="collectionId")he.find(b=>b.collectionId===parseInt(v)),F(v),M(!0),p({...m,collectionId:v});else if(u==="designId"){const b=T.find(C=>C.designId===parseInt(v));p({...m,designId:v,baseColorId:b?b.colorId:"",baseColorName:b?b.colorName:""})}else if(u==="batchNo"){const b=K.find(C=>C.batchNo===v);p({...m,batchNo:v,planningHeaderId:b?b.planningHeaderId:"",poPcs:b?b.poPcs:""}),l(!0),M(!1)}else if(u==="colorId"){const b=se.find(C=>C.colorId===v);p({...m,colorId:v,availableQty:b?b.total:"",cuttingSize:b?b.cuttingSize:"",repeats:b?b.repeats:""})}else if(u==="operatingMachineId"){const b=$.find(C=>C.lookUpId===v);p({...m,operatingMachineId:v,operatingMachine:b?b.lookUpName:""})}else p({...m,[u]:v})};console.log("colors",se);const o=async()=>{try{const g=await re.post("https://gecxc.com:4041/api/Schiffli/SaveSchiffili",m);console.log("Save response:",g.data),g.data.success?s("Fabrication saved successfully!",{variant:"success",autoHideDuration:5e3}):(s(`${g.data.message} !`,{variant:"error",autoHideDuration:5e3}),console.log("response.message",g.data.message)),p(u=>({designId:u.designId,planningHeaderId:u.planningHeaderId,batchNo:u.batchNo,baseColorName:u.baseColorName,schiffiliId:0,componentId:"",poPcs:"",fabricId:"",vendorId:"",colorId:"",availableQty:"",thaanQty:0,operatingMachineId:0,operatingMachine:"",workingHeadId:0,cuttingSize:"",rate:"",costPerComponent:"",totalEmbroidry:0,noOfItemPerThaan:0,noOfStichesPerYard:0,amountPerYard:0,totalPcs:0,laserCut:!1,laserCutRate:0,pcsForLaserCut:0,totalAmount:0,createdOn:new Date().toISOString(),createdBy:c.empId,lastUpdatedOn:new Date().toISOString(),lastUpdatedBy:c.empId})),E(),l(!1)}catch(g){console.error("Error saving data:",g),s("Dyeing not saved successfully!",{variant:"error",autoHideDuration:5e3})}};console.log("formData",m);const h=[{field:"componentName",headerName:"Component"},{field:"fabricName",headerName:"Fabric"},{field:"vendorName",headerName:"Vendor"},{field:"colourName",headerName:"Color"},{field:"thaanQty",headerName:"Thaan Quantity"},{field:"availableQty",headerName:"Available Quantitity"},{field:"operatingMachineName",headerName:"Operating Machine"},{field:"noOfHeadsName",headerName:"Working Head"},{field:"cuttingSize",headerName:"Cutting Size"},{field:"rate",headerName:"Rate"},{field:"noOfStichesPerYard",headerName:"No. Of Stiches Per Yard"},{field:"noOfItemPerThaan",headerName:"No. Of Item Per Thaan"},{field:"totalEmbroidry",headerName:"Total Embroidry"},{field:"amountPerYard",headerName:"Amount Per Yard"},{field:"totalPcs",headerName:"Total Pcs"},{field:"totalAmount",headerName:"Total Amount"},{field:"costPerComponent",headerName:"Cost Per Component"},{field:"laserCutRate",headerName:"LaserCut Rate"},{field:"pcsForLaserCut",headerName:"Pcs.For Laser Cut"}];return e.jsxs(e.Fragment,{children:[e.jsxs(q,{variant:"outlined",children:[e.jsx(G,{className:"css-4rfrnx-MuiCardHeader-root",avatar:e.jsx(He,{src:Xe,sx:{background:"transparent"}}),title:"Schiffli ",titleTypographyProps:{style:{color:"white"}}}),e.jsxs(n,{container:!0,spacing:2,width:"Inherit",sx:{paddingY:2,paddingX:2},children:[e.jsxs(n,{item:!0,xs:12,md:3,children:[e.jsx(d,{fullWidth:!0,select:!0,label:"Select Collection",name:"collectionId",value:A,onChange:i,size:"small",children:he.map(g=>e.jsx(j,{value:g.collectionId,children:g.collectionName},g.collectionId))})," "]}),e.jsx(n,{item:!0,xs:12,md:3,children:e.jsx(d,{fullWidth:!0,select:!0,label:"Select Design",name:"designId",value:m.designId,onChange:i,size:"small",children:T.map(g=>e.jsx(j,{value:g.designId,children:g.designNo},g.designId))})}),e.jsxs(n,{item:!0,xs:12,md:3,children:[e.jsx(d,{fullWidth:!0,select:!0,label:"Batch No.",name:"batchNo",value:m.batchNo,onChange:i,size:"small",children:K.map(g=>e.jsx(j,{value:g.batchNo,children:g.batchNo},g.batchNo))})," "]}),e.jsxs(n,{item:!0,xs:12,md:3,children:[e.jsx(d,{fullWidth:!0,select:!0,label:"Components",name:"componentId",value:m.componentId,onChange:i,size:"small",children:w.map(g=>e.jsx(j,{value:g.componentId,children:g.componentName},g.componentId))})," "]}),e.jsx(n,{item:!0,xs:12,md:3,children:e.jsx(d,{label:"Base Color",fullWidth:!0,size:"small",name:"baseColorName",value:m.baseColorName,onChange:i,disabled:!0})})]})]}),e.jsx(de,{color:"#cc8587",sx:{height:1,width:"100%",mt:2}}),e.jsxs(q,{variant:"outlined",children:[e.jsx(G,{className:"css-4rfrnx-MuiCardHeader-root",avatar:e.jsx(Ce,{}),title:"Add Schiffli ",titleTypographyProps:{style:{color:"white"}},action:e.jsx(ye,{onClick:S,children:e.jsx(ce,{style:{color:"white"}})}),sx:{display:"flex",alignItems:"center",justifyContent:"space-between"}})," ",e.jsxs(Se,{expanded:H,onChange:S,sx:{},children:[e.jsx(Pe,{expandIcon:e.jsx(ce,{}),"aria-controls":"panel1-content",id:"panel1-header",sx:{display:"none"}}),e.jsx(Ne,{children:e.jsxs(n,{container:!0,spacing:2,width:"Inherit",sx:{paddingY:2,paddingX:2},children:[e.jsx(n,{item:!0,xs:12,md:3,children:e.jsx(d,{fullWidth:!0,select:!0,label:"Select Fabric",defaultValue:"",size:"small",name:"fabricId",value:m.fabricId,onChange:i,children:ie.map(g=>e.jsx(j,{value:g.fabricId,children:g.fabric},g.fabricId))})}),e.jsx(n,{item:!0,xs:12,md:3,children:e.jsx(d,{fullWidth:!0,select:!0,label:"Vendors",defaultValue:"",size:"small",name:"vendorId",value:m.vendorId,onChange:i,children:D.map(g=>e.jsx(j,{value:g.lookUpId,children:g.lookUpName},g.lookUpId))})}),e.jsx(n,{item:!0,xs:12,md:3,children:e.jsx(d,{fullWidth:!0,select:!0,label:"Color",size:"small",name:"colorId",value:m.colorId,onChange:i,children:se.map(g=>e.jsx(j,{value:g.colorId,children:g.color},g.colorId))})}),e.jsx(n,{item:!0,xs:12,md:1.5,children:e.jsx(d,{label:"Po Pcs",fullWidth:!0,size:"small",name:"poPcs",value:m.poPcs,disabled:!0,onChange:i})}),e.jsx(n,{item:!0,xs:12,md:1.5,children:e.jsx(d,{label:"Available Quantity",fullWidth:!0,size:"small",name:"availableQty",value:m.availableQty,onChange:i})}),e.jsx(n,{item:!0,xs:12,md:1.5,children:e.jsx(d,{label:"Thaan Quantity",fullWidth:!0,type:"number",size:"small",name:"thaanQty",value:m.thaanQty,onChange:i})}),e.jsx(n,{item:!0,xs:12,md:1.5,children:e.jsx(d,{fullWidth:!0,select:!0,label:"operatingMachineId",defaultValue:"",size:"small",name:"operatingMachineId",value:m.operatingMachineId,onChange:i,children:$.map(g=>e.jsx(j,{value:g.lookUpId,children:g.lookUpName},g.lookUpId))})}),e.jsx(n,{item:!0,xs:12,md:1.5,children:e.jsx(d,{fullWidth:!0,select:!0,label:"workingHeadId",defaultValue:"",size:"small",name:"workingHeadId",value:m.workingHeadId,onChange:i,children:W.map(g=>e.jsx(j,{value:g.lookUpId,children:g.lookUpName},g.lookUpId))})}),e.jsx(n,{item:!0,xs:12,md:1.5,children:e.jsx(d,{label:"Cutting Size",fullWidth:!0,type:"number",size:"small",name:"cuttingSize",value:m.cuttingSize,onChange:i})}),e.jsx(n,{item:!0,xs:12,md:1.5,children:e.jsx(d,{label:"Rate",type:"number",fullWidth:!0,size:"small",name:"rate",value:m.rate,onChange:i})}),e.jsx(n,{item:!0,xs:12,md:1.5,children:e.jsx(d,{label:"No. Of Stiches Per Yard",fullWidth:!0,type:"number",size:"small",name:"noOfStichesPerYard",value:m.noOfStichesPerYard,onChange:i})}),e.jsx(n,{item:!0,xs:12,md:1.5,children:e.jsx(d,{label:"No. Of Items Per Thaan",fullWidth:!0,size:"small",type:"number",name:"noOfItemPerThaan",value:m.noOfItemPerThaan,onChange:i})}),e.jsx(n,{item:!0,xs:12,md:1.5,children:e.jsx(d,{label:"Total Embroidry",fullWidth:!0,size:"small",name:"totalEmbroidry",type:"number",value:m.totalEmbroidry,onChange:i})}),e.jsx(n,{item:!0,xs:12,md:1.5,children:e.jsx(d,{label:"Amount Per Yard",fullWidth:!0,type:"number",size:"small",name:"amountPerYard",value:m.amountPerYard,onChange:i})}),e.jsx(n,{item:!0,xs:12,md:1.5,children:e.jsx(d,{label:"Total Pcs",fullWidth:!0,size:"small",name:"totalPcs",value:m.totalPcs,onChange:i})}),e.jsx(n,{item:!0,xs:12,md:1.5,children:e.jsx(d,{label:"Cost Per Component",fullWidth:!0,size:"small",name:"costPerComponent",value:m.costPerComponent,onChange:i})}),e.jsx(n,{item:!0,xs:12,md:1.5,children:e.jsx(d,{label:"Total Amount",fullWidth:!0,size:"small",type:"number",name:"totalAmount",value:m.totalAmount,onChange:i})}),e.jsx(n,{item:!0,xs:12,md:1.5,children:e.jsx(Ee,{control:e.jsx(Me,{checked:m.laserCut,onChange:x,name:"laserCut"}),label:"Laser Cut"})}),m.laserCut?e.jsx(n,{item:!0,xs:12,md:4.5,children:e.jsxs(n,{container:!0,spacing:1,width:"Inherit",children:[e.jsx(n,{item:!0,xs:12,md:6,children:e.jsx(d,{label:"Laser Cut Rate",fullWidth:!0,size:"small",name:"laserCutRate",value:m.laserCutRate,onChange:i})}),e.jsx(n,{item:!0,xs:12,md:6,children:e.jsx(d,{label:"Pcs For LaserCut",fullWidth:!0,size:"small",name:"pcsForLaserCut",value:m.pcsForLaserCut,onChange:i})})]})}):null,e.jsx(n,{item:!0,xs:12,textAlign:"right",sx:{mt:2},children:e.jsx(Z,{variant:"contained",size:"small",onClick:o,children:"Save"})})]})})]})]}),e.jsx(de,{color:"#cc8587",sx:{height:1,width:"100%",mt:2}}),e.jsxs(q,{variant:"outlined",children:[e.jsx(G,{className:"css-4rfrnx-MuiCardHeader-root",avatar:e.jsx(Ae,{}),title:"View Schiffli ",titleTypographyProps:{style:{color:"white"}}}),e.jsx(n,{container:!0,spacing:2,width:"Inherit",sx:{paddingY:2,paddingX:2},children:e.jsx(n,{sx:{marginTop:2},item:!0,xs:12,children:X?e.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"},children:e.jsx("img",{src:Te,alt:"Loading",style:{width:200,height:200}})}):e.jsx(ke,{iColumns:h,initialRows:L,setInitialData:t,deleteApi:"https://gecxc.com:4041/api/Schiffli/DeleteSchiffiById?schiffiId=",deleteBy:"schiffiliId",refetch:E,setAccordionExpanded:l,fileName:"Schffili List"})})})]})]})},yt=vt,Ct=()=>{const[c,s]=r.useState([]),[a,t]=r.useState({additionalProcessId:0,designId:"",planningHeaderId:0,batchNo:"",componentId:"",colorId:"",fabricId:"",vendorId:"",baseColorName:"",poPcs:"",pcsPerComponent:"",processTypeId:"",quantity:"",ratePerPcs:0,totalAmount:0,costPerComponent:"",createdOn:new Date().toISOString(),createdBy:0,lastUpdatedOn:new Date().toISOString(),LastUpdatedBy:0});r.useEffect(()=>{t({additionalProcessId:(c==null?void 0:c.additionalProcessId)||0,designId:(c==null?void 0:c.designId)||"",planningHeaderId:(c==null?void 0:c.planningHeaderId)||0,batchNo:(c==null?void 0:c.batchNo)||"",componentId:(c==null?void 0:c.componentId)||"",vendorId:(c==null?void 0:c.vendorId)||"",fabricId:(c==null?void 0:c.fabricId)||"",colorId:(c==null?void 0:c.colorId)||"",poPcs:(c==null?void 0:c.poPcs)||"",baseColorName:(c==null?void 0:c.baseColorName)||"",pcsPerComponent:(c==null?void 0:c.baseColorName)||"",processTypeId:(c==null?void 0:c.processTypeId)||"",quantity:(c==null?void 0:c.quantity)||"",ratePerPcs:(c==null?void 0:c.ratePerPcs)||0,totalAmount:(c==null?void 0:c.totalAmount)||0,costPerComponent:(c==null?void 0:c.costPerComponent)||"",createdOn:(c==null?void 0:c.createdOn)||new Date().toISOString(),createdBy:(c==null?void 0:c.createdBy)||0,lastUpdatedOn:new Date().toISOString(),LastUpdatedBy:0})},[c]);const[m,p]=r.useState(!1),H=(i,o)=>{p(!m)},{data:l}=be(),[S,X]=r.useState(""),{data:M}=je(),{data:U,refetch:A}=ve(S,{skip:!S}),{data:F,refetch:z}=We(a.designId,{skip:!a.designId}),{data:B}=Fe({batchNo:a.planningHeaderId,componentId:a.componentId},{skip:!a.planningHeaderId||!a.componentId}),{data:y}=Re({batchNo:a.planningHeaderId,componentId:a.componentId,fabricId:a.fabricId},{skip:!a.planningHeaderId||!a.componentId||!a.fabricId}),{data:P,refetch:Y}=Ge(a.planningHeaderId,{skip:!a.planningHeaderId}),{data:k}=Be(a.planningHeaderId,{skip:!a.planningHeaderId});console.log("formData.planningHeaderId",a.planningHeaderId),console.log("collectionData",l),console.log("schiffliList",P);const[R,Q]=r.useState([]),[E,I]=r.useState([]),[T,V]=r.useState([]),[K,le]=r.useState([]),[ie,ae]=r.useState([]),[D,ue]=r.useState([]),[$,ee]=r.useState([]),[W,te]=r.useState([]),[se,oe]=r.useState([]);console.log("batchData",F),r.useEffect(()=>{U&&Q(U.result)},[U]),r.useEffect(()=>{F&&I(F.result)},[F]),r.useEffect(()=>{B&&V(B.result)},[B]),r.useEffect(()=>{y&&ee(B.result)},[y]),r.useEffect(()=>{k&&oe(k.result)},[k]),r.useEffect(()=>{P&&te(P.result.map((i,o)=>({id:o,...i})))},[P,Y]),r.useEffect(()=>{if(M){const i=M.result[0];le(i.vendorList),ae(i.operatingMachineList),ue(i.workingHeadList)}},[M]),console.log("initialRows",W);const L=(l==null?void 0:l.result)||[],ne=a.pcsPerComponent;r.useEffect(()=>{const i=()=>{const f=parseFloat(a.quantity)||0;return ne-f};t(f=>({...f,pcsPerComponent:i()}));const o=()=>{const f=parseFloat(a.quantity)||0,g=parseFloat(a.ratePerPcs)||0;return f*g};t(f=>({...f,totalAmount:o()}));const h=()=>{const f=parseFloat(a.totalAmount)||0,g=parseFloat(a.poPcs)||0;return f/g};t(f=>({...f,costPerComponent:h()}))},[a.quantity,a.ratePerPcs,a.totalAmount,a.poPcs]);const w=i=>{const{name:o,value:h}=i.target;if(o==="collectionId")L.find(f=>f.collectionId===parseInt(h)),X(h),t({...a,collectionId:h});else if(o==="designId"){const f=R.find(g=>g.designId===parseInt(h));t({...a,designId:h,baseColorId:f?f.colorId:"",baseColorName:f?f.colorName:""})}else if(o==="batchNo"){const f=E.find(g=>g.batchNo===h);t({...a,batchNo:h,planningHeaderId:f?f.planningHeaderId:"",poPcs:f?f.poPcs:""}),p(!0)}else t({...a,[o]:h})};console.log("colors",$);const me=async()=>{console.log("formData",a)};console.log("formData",a);const he=[{field:"componentName",headerName:"Component"},{field:"fabricName",headerName:"Fabric"},{field:"vendorName",headerName:"Vendor"},{field:"colourName",headerName:"Color"},{field:"thaanQty",headerName:"Thaan Quantity"},{field:"availableQty",headerName:"Available Quantitity"},{field:"operatingMachineName",headerName:"Operating Machine"},{field:"noOfHeadsName",headerName:"Working Head"},{field:"cuttingSize",headerName:"Cutting Size"},{field:"rate",headerName:"Rate"},{field:"noOfStichesPerYard",headerName:"No. Of Stiches Per Yard"},{field:"noOfItemPerThaan",headerName:"No. Of Item Per Thaan"},{field:"totalEmbroidry",headerName:"Total Embroidry"},{field:"amountPerYard",headerName:"Amount Per Yard"},{field:"totalPcs",headerName:"Total Pcs"},{field:"totalAmount",headerName:"Total Amount"},{field:"costPerComponent",headerName:"Cost Per Component"},{field:"laserCutRate",headerName:"LaserCut Rate"},{field:"pcsForLaserCut",headerName:"Pcs.For Laser Cut"}];return e.jsxs(e.Fragment,{children:[e.jsxs(q,{variant:"outlined",children:[e.jsx(G,{className:"css-4rfrnx-MuiCardHeader-root",avatar:e.jsx(He,{src:Xe,sx:{background:"transparent"}}),title:"Additional Process ",titleTypographyProps:{style:{color:"white"}}}),e.jsxs(n,{container:!0,spacing:2,width:"Inherit",sx:{paddingY:2,paddingX:2},children:[e.jsxs(n,{item:!0,xs:12,md:3,children:[e.jsx(d,{fullWidth:!0,select:!0,label:"Select Collection",name:"collectionId",value:S,onChange:w,size:"small",children:L.map(i=>e.jsx(j,{value:i.collectionId,children:i.collectionName},i.collectionId))})," "]}),e.jsx(n,{item:!0,xs:12,md:3,children:e.jsx(d,{fullWidth:!0,select:!0,label:"Select Design",name:"designId",value:a.designId,onChange:w,size:"small",children:R.map(i=>e.jsx(j,{value:i.designId,children:i.designNo},i.designId))})}),e.jsxs(n,{item:!0,xs:12,md:3,children:[e.jsx(d,{fullWidth:!0,select:!0,label:"Batch No.",name:"batchNo",value:a.batchNo,onChange:w,size:"small",children:E.map(i=>e.jsx(j,{value:i.batchNo,children:i.batchNo},i.batchNo))})," "]}),e.jsxs(n,{item:!0,xs:12,md:3,children:[e.jsx(d,{fullWidth:!0,select:!0,label:"Components",name:"componentId",value:a.componentId,onChange:w,size:"small",children:se.map(i=>e.jsx(j,{value:i.componentId,children:i.componentName},i.componentId))})," "]}),e.jsx(n,{item:!0,xs:12,md:3,children:e.jsx(d,{label:"Base Color",fullWidth:!0,size:"small",name:"baseColorName",value:a.baseColorName,onChange:w,disabled:!0})})]})]}),e.jsx(de,{color:"#cc8587",sx:{height:1,width:"100%",mt:2}}),e.jsxs(q,{variant:"outlined",children:[e.jsx(G,{className:"css-4rfrnx-MuiCardHeader-root",avatar:e.jsx(Ce,{}),title:"Add Additional Process ",titleTypographyProps:{style:{color:"white"}},action:e.jsx(ye,{onClick:H,children:e.jsx(ce,{style:{color:"white"}})}),sx:{display:"flex",alignItems:"center",justifyContent:"space-between"}})," ",e.jsxs(Se,{expanded:m,onChange:H,sx:{},children:[e.jsx(Pe,{expandIcon:e.jsx(ce,{}),"aria-controls":"panel1-content",id:"panel1-header",sx:{display:"none"}}),e.jsx(Ne,{children:e.jsxs(n,{container:!0,spacing:2,width:"Inherit",sx:{paddingY:2,paddingX:2},children:[e.jsx(n,{item:!0,xs:12,md:3,children:e.jsx(d,{fullWidth:!0,select:!0,label:"Select Fabric",defaultValue:"",size:"small",name:"fabricId",value:a.fabricId,onChange:w,children:T.map(i=>e.jsx(j,{value:i.fabricId,children:i.fabric},i.fabricId))})}),e.jsx(n,{item:!0,xs:12,md:3,children:e.jsx(d,{fullWidth:!0,select:!0,label:"Vendors",defaultValue:"",size:"small",name:"vendorId",value:a.vendorId,onChange:w,children:K.map(i=>e.jsx(j,{value:i.lookUpId,children:i.lookUpName},i.lookUpId))})}),e.jsx(n,{item:!0,xs:12,md:3,children:e.jsx(d,{fullWidth:!0,select:!0,label:"Color",size:"small",name:"colorId",value:a.colorId,onChange:w,children:$.map(i=>e.jsx(j,{value:i.colorId,children:i.color},i.colorId))})}),e.jsx(n,{item:!0,xs:12,md:1.5,children:e.jsx(d,{label:"Po Pcs",fullWidth:!0,size:"small",name:"poPcs",value:a.poPcs,onChange:w,disabled:!0})}),e.jsx(n,{item:!0,xs:12,md:1.5,children:e.jsx(d,{label:"Pcs. Per Component",fullWidth:!0,size:"small",name:"pcsPerComponent",value:a.pcsPerComponent,onChange:w})}),e.jsx(n,{item:!0,xs:12,md:3,children:e.jsx(d,{fullWidth:!0,select:!0,label:"Process Type",defaultValue:"",size:"small",name:"processTypeId",value:a.processTypeId,onChange:w,children:ie.map(i=>e.jsx(j,{value:i.lookUpId,children:i.lookUpName},i.lookUpId))})}),e.jsx(n,{item:!0,xs:12,md:1.5,children:e.jsx(d,{label:"Quantity",fullWidth:!0,type:"number",size:"small",name:"quantity",value:a.quantity,onChange:w})}),e.jsx(n,{item:!0,xs:12,md:1.5,children:e.jsx(d,{label:"Rate Per Pcs",type:"number",fullWidth:!0,size:"small",name:"ratePerPcs",value:a.ratePerPcs,onChange:w})}),e.jsx(n,{item:!0,xs:12,md:1.5,children:e.jsx(d,{label:"Total Amount",fullWidth:!0,type:"number",size:"small",name:"totalAmount",value:a.totalAmount,onChange:w})}),e.jsx(n,{item:!0,xs:12,md:1.5,children:e.jsx(d,{label:"Cost Per Component",fullWidth:!0,size:"small",type:"number",name:"costPerComponent",value:a.costPerComponent,onChange:w})}),e.jsx(n,{item:!0,xs:12,textAlign:"right",sx:{mt:2},children:e.jsx(Z,{variant:"contained",size:"small",onClick:me,children:"Save"})})]})})]})]}),e.jsx(de,{color:"#cc8587",sx:{height:1,width:"100%",mt:2}}),e.jsxs(q,{variant:"outlined",children:[e.jsx(G,{className:"css-4rfrnx-MuiCardHeader-root",avatar:e.jsx(Ae,{}),title:"View Additional Process ",titleTypographyProps:{style:{color:"white"}}}),e.jsx(n,{container:!0,spacing:2,width:"Inherit",sx:{paddingY:2,paddingX:2},children:e.jsx(n,{sx:{marginTop:2},item:!0,xs:12,children:e.jsx(ke,{iColumns:he,initialRows:W,setInitialData:s,deleteApi:"https://gecxc.com:4041/api/Schiffli/DeleteSchiffiById?schiffiId=",deleteBy:"additionalProcessId",refetch:Y,setAccordionExpanded:p,fileName:"AdditionalProcess"})})})]})]})},St=Ct;function Pt({onSaveSuccess:c}){const{data:s}=je(),[a,t]=r.useState([]),[m,p]=r.useState([]),[H,l]=r.useState([]),[S,X]=r.useState([]),[M,U]=r.useState([]);r.useEffect(()=>{s&&(l(s.result[0].vendorList),p(s.result[0].serviceList),t(s.result[0].serviceTypeList),U(s.result[0].uomList))},[s]);const[A,F]=r.useState({collectionId:"",serviceTypeId:0,serviceListId:"",vendorId:"",poPcs:"",qty:"",uomId:"string",rate:"",totalAmount:"",costperPiece:"",uom:"",createdBy:0,createdOn:new Date().toISOString()}),z=async y=>{const{name:P,value:Y}=y.target;if(console.log(`Updating ${P} to ${Y}`),F({...A,[P]:Y}),P==="collectionId"){const k=S.find(R=>R.collectionId===Y);k&&F(R=>({...R,poPcs:k.poPcs}))}},B=async()=>{const y={...A,serviceTypeId:0};console.log(y);try{const P=await re.post("https://gecxc.com:4041/api/AdditionalServices/SaveAdditionalServices",y);console.log("Form data saved:",P.data),F({collectionId:"",serviceTypeId:0,serviceListId:"",vendorId:"",poPcs:"",qty:"",uomId:"string",rate:"",totalAmount:"",costperPiece:""}),c&&c()}catch(P){console.error("Error saving data:",P)}};return r.useEffect(()=>{(async()=>{try{const P=await re.get("https://gecxc.com:4041/api/CollectionRegistration/GetCollectionList?appId=1");console.log("GetCollectionFromPlanningHeader",P),X(P.data.result)}catch(P){console.error("Error fetching design options:",P)}})()},[]),e.jsxs(n,{container:!0,spacing:2,width:"Inherit",sx:{paddingY:2,paddingX:2},children:[e.jsx(n,{item:!0,xs:12,md:4,children:e.jsx(d,{fullWidth:!0,select:!0,label:"Select Collection",name:"collectionId",value:A.collectionId,onChange:z,size:"small",children:S.length>0?S.map(y=>e.jsx(j,{id:"collectionId",value:y.collectionId,children:y.collectionName},y.collectionId)):e.jsx(j,{disabled:!0,children:"No Collections Available"})})}),e.jsx(n,{item:!0,md:4,width:"inherit",paddingX:1,children:e.jsx(d,{id:"outlined-select-option",select:!0,label:"Service Type",name:"serviceTypeId",value:A.serviceTypeId,onChange:z,variant:"outlined",size:"small",fullWidth:!0,children:a.map(y=>e.jsx(j,{value:y.lookUpId,children:y.lookUpName},y.lookUpId))})}),e.jsx(n,{item:!0,md:4,width:"inherit",paddingX:1,children:e.jsx(d,{id:"outlined-select-option",select:!0,label:"Service List Id",name:"serviceListId",value:A.serviceListId,onChange:z,variant:"outlined",size:"small",fullWidth:!0,children:m.map(y=>e.jsx(j,{value:y.lookUpId,children:y.lookUpName},y.lookUpId))})}),e.jsx(n,{item:!0,xs:12,md:4,children:e.jsx(d,{fullWidth:!0,select:!0,label:"Vendor Name",size:"small",name:"vendorId",value:A.vendorId,onChange:z,children:H.map(y=>e.jsx(j,{value:y.lookUpId,children:y.lookUpName},y.lookUpId))})}),e.jsx(n,{item:!0,md:2,width:"inherit",paddingX:1,children:e.jsx(d,{id:"outlined-required",label:"PO PC's",name:"poPcs",value:A.poPcs,onChange:z,type:"number",size:"small",fullWidth:!0,disabled:!0})}),e.jsx(n,{item:!0,md:2,width:"inherit",paddingX:1,children:e.jsx(d,{id:"outlined-required",label:"Qty",name:"qty",value:A.qty,onChange:z,type:"number",size:"small",required:!0,fullWidth:!0})}),e.jsx(n,{item:!0,md:2,width:"inherit",paddingX:1,children:e.jsx(d,{fullWidth:!0,select:!0,label:"UOM",defaultValue:"",size:"small",name:"uomId",value:A.uomId,onChange:z,children:M.map(y=>e.jsx(j,{value:y.lookUpId,children:y.lookUpName},y.lookUpId))})}),e.jsx(n,{item:!0,md:2,width:"inherit",paddingX:1,children:e.jsx(d,{id:"outlined-required",label:"Rate",name:"rate",value:A.rate,onChange:z,type:"number",size:"small",fullWidth:!0,required:!0})}),e.jsx(n,{item:!0,md:2,width:"inherit",paddingX:1,children:e.jsx(d,{id:"outlined-required",label:"Total Amount",name:"totalAmount",value:A.totalAmount,onChange:z,type:"number",size:"small",fullWidth:!0,required:!0})}),e.jsx(n,{item:!0,md:2,width:"inherit",paddingX:1,children:e.jsx(d,{id:"outlined-required",label:"Cost per Piece",name:"costperPiece",value:A.costperPiece,onChange:z,type:"number",size:"small",required:!0,fullWidth:!0})}),e.jsx(n,{item:!0,md:12,width:"inherit",paddingX:1,textAlign:"right",children:e.jsx(Z,{variant:"contained",color:"primary",size:"small",onClick:B,children:"Save"})})]})}function Nt(){const[c,s]=r.useState([]),a=r.useCallback(async()=>{try{const p=(await re.get("https://gecxc.com:4041/api/AdditionalServices/GetdditionalServicesListByServiceTypeId?serviceTypeId=1")).data.result.map((H,l)=>({id:l,...H}));s(p)}catch(m){console.error("Error fetching data:",m)}},[]);r.useEffect(()=>{a()},[a]);const t=[{field:"serviceTypeId",headerName:"Service Type",width:150},{field:"serviceList",headerName:"Service List",width:200},{field:"vendorId",headerName:"Vendor",minWidth:120},{field:"qty",headerName:"Qty",minWidth:120},{field:"uom",headerName:"UOM",minWidth:120},{field:"rate",headerName:"Rate",minWidth:120},{field:"totalAmount",headerName:"Total Amount",minWidth:120},{field:"uomId",headerName:"UOM Id",minWidth:120},{field:"quantity",headerName:"quantity",minWidth:120},{field:"ratePerPcs",headerName:"rate Per Pcs",minWidth:120},{field:"costperPiece",headerName:"cost per Piece",minWidth:120},{field:"vendor",headerName:"Vendor",minWidth:120},{field:"serviceType",headerName:"Service Type",minWidth:120},{field:"serviceListName",headerName:"Service List Name",minWidth:120}];return e.jsx("div",{style:{height:"auto",width:"100%"},children:e.jsx(lt,{rows:c,columns:t,autoHeight:!0,initialState:{pagination:{paginationModel:{page:0,pageSize:10}}},pageSizeOptions:[10,15],localeText:{toolbarDensity:"Size",toolbarDensityLabel:"Size",toolbarDensityCompact:"Small",toolbarDensityStandard:"Medium",toolbarDensityComfortable:"Large"},components:{Toolbar:dt}})})}function At(c){return e.jsxs(e.Fragment,{children:[e.jsxs(q,{variant:"outlined",children:[e.jsx(G,{className:"css-4rfrnx-MuiCardHeader-root",title:"Additional Services  ",titleTypographyProps:{style:{color:"white"}}}),e.jsx(Pt,{})]}),e.jsx(de,{color:"#cc8587",sx:{height:1,width:"100%",mt:2}}),e.jsxs(q,{variant:"outlined",children:[e.jsx(G,{className:"css-4rfrnx-MuiCardHeader-root",title:"View Additional Services  ",titleTypographyProps:{style:{color:"white"}}}),e.jsx(Nt,{fetchData:c})]})]})}const Oe=["Pre Planning","Fabrication","Dyeing/Printing  ","Embroidery ","Schiffli","Additional Process","Additional Services"];function Ft(){const[c,s]=r.useState(0),[a,t]=r.useState(new Set),[m,p]=r.useState(null),[H,l]=r.useState([]),{enqueueSnackbar:S}=Ie(),X=I=>{p(I.currentTarget)},M=()=>{p(null)},U=!!m,A=U?"simple-popover":void 0,F=I=>I===1,z=I=>a.has(I),B=()=>{let I=a;z(c)&&(I=new Set(I.values()),I.delete(c)),s(T=>T+1),t(I)},y=()=>{s(I=>I-1)},P=()=>{if(!F(c))throw new Error("You can't skip a step that isn't optional.");s(I=>I+1),t(I=>{const T=new Set(I.values());return T.add(c),T})},Y=()=>{s(0)},[k,R]=r.useState({lookUpId:"",lookUpName:"",lookUpDomain:"",lookUpCategory:"",enabled:"",createdOn:new Date().toISOString()}),Q=async()=>{if(!k.lookUpDomain||!k.lookUpName){S("Please fill in all required fields.",{variant:"error",autoHideDuration:5e3});return}try{const I=await re.get(`https://gecxc.com:4041/api/Common/SaveLookUp?lookupDomain=${k.lookUpDomain}&LookUpName=${k.lookUpName}&appId=1`);return console.log("Form data saved:",I.data),S("Lookup saved successfully!",{variant:"success",autoHideDuration:5e3}),R({lookUpId:"",lookUpName:"",lookUpDomain:"",lookUpCategory:"",enabled:"",createdOn:new Date().toISOString()}),I.data}catch(I){throw console.error("Error saving data:",I),S("Error saving data. Please try again.",{variant:"error",autoHideDuration:5e3}),I}},E=I=>{R({...k,[I.target.name]:I.target.value})};return r.useEffect(()=>{(async()=>{try{const T=await re.get("https://gecxc.com:4041/api/Common/GetLookUpDomains?appId=1");console.log("LookupData",T),l(T.data.result)}catch(T){console.error("Error fetching design options:",T)}})()},[]),e.jsxs(fe,{sx:{width:"100%"},children:[e.jsxs(n,{container:!0,spacing:1,width:"Inherit",children:[e.jsx(n,{item:!0,sm:6,children:e.jsx(xe,{variant:"h2",gutterBottom:!0,children:"Planning Process"})}),e.jsxs(n,{item:!0,sm:6,textAlign:"right",children:[e.jsx(Z,{"aria-describedby":A,variant:"outlined",size:"small",onClick:X,children:"+Lookup"}),e.jsx(rt,{id:"mouse-over-popover",open:U,anchorEl:m,onClose:M,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"right"},sx:{".MuiPopover-paper":{width:"300px",padding:"16px"}},children:e.jsxs(n,{container:!0,spacing:3,width:"Inherit",children:[e.jsx(n,{item:!0,sm:12,children:e.jsx(d,{fullWidth:!0,id:"outlined-select-currency",select:!0,label:"Select Lookup",size:"small",value:k.lookUpDomain,name:"lookUpDomain",onChange:E,children:H.map(I=>e.jsx(j,{value:I.lookUpDomain,children:I.lookUpDomain},I.lookUpDomain))})}),e.jsx(n,{item:!0,sm:12,children:e.jsx(d,{fullWidth:!0,label:"Add Lookup Description",value:k.lookUpName,onChange:E,name:"lookUpName",size:"small"})}),e.jsx(n,{item:!0,sm:3,textAlign:"right",children:e.jsx(Z,{variant:"contained",size:"small",onClick:Q,children:"Save"})})]})})]})]}),e.jsx(st,{activeStep:c,children:Oe.map((I,T)=>{const V={},K={};return F(T)&&(K.optional=e.jsx(xe,{variant:"caption",children:"Optional"})),z(T)&&(V.completed=!1),e.jsx(nt,{...V,children:e.jsxs(at,{...K,onClick:()=>s(T),style:{cursor:"pointer"},children:[" ",I]})},I)})}),e.jsxs(fe,{sx:{display:"flex",flexDirection:"row",pt:2},children:[e.jsx(Z,{color:"inherit",disabled:c===0,onClick:y,sx:{mr:1},children:"Back"}),e.jsx(fe,{sx:{flex:"1 1 auto"}}),F(c)&&e.jsx(Z,{color:"inherit",onClick:P,sx:{mr:1},children:"Skip"}),e.jsx(Z,{onClick:B,children:c===Oe.length-1?"Finish":"Next"})]}),c===Oe.length?e.jsxs(r.Fragment,{children:[e.jsx(xe,{sx:{mt:2,mb:1},children:"All steps completed - you're finished"}),e.jsxs(fe,{sx:{display:"flex",flexDirection:"row",pt:2},children:[e.jsx(fe,{sx:{flex:"1 1 auto"}}),e.jsx(Z,{onClick:Y,children:"Reset"})]})]}):e.jsxs(r.Fragment,{children:[c===0&&e.jsx(xt,{}),c===1&&e.jsx(ot,{}),c===2&&e.jsx(jt,{}),c===3&&e.jsx(gt,{}),c===4&&e.jsx(yt,{}),c===5&&e.jsx(St,{}),c===6&&e.jsx(At,{}),e.jsxs(fe,{sx:{display:"flex",flexDirection:"row",pt:2},children:[e.jsx(Z,{color:"inherit",disabled:c===0,onClick:y,sx:{mr:1},children:"Back"}),e.jsx(fe,{sx:{flex:"1 1 auto"}}),F(c)&&e.jsx(Z,{color:"inherit",onClick:P,sx:{mr:1},children:"Skip"}),e.jsx(Z,{onClick:B,children:c===Oe.length-1?"Finish":"Next"})]})]})]})}export{Ft as default};
