import{J as N,j as e,_ as j,A as X,K as $,s as M,F as z,N as _,y as E,O as K,E as H,B as V,G as T,D as J}from"./index-C1TTrB0-.js";import{r as c}from"./vendor-BXCbSo2_.js";import{B as Y,a as B}from"./axios-B7wrOyLZ.js";import{M as Z,T as C}from"./TextField-B7aHXDX8.js";import{M as O}from"./Skeleton-CDhxNUY7.js";import{u as q,a as L,b as S,g as U,G as A,c as ee,d as te,e as se,i as oe,f as re,B as ae,h as Q,j as le,k as ne,l as R,m as ie,n as ce,o as de,D as ue}from"./DataGrid-DX6mHUG0.js";const pe=c.forwardRef(function(i,l){var b,v;const{slotProps:u={}}=i,s=u.button||{},m=u.tooltip||{},t=N(),o=N(),a=q(),r=L(),p=S(a,U),f=w=>{var F;p.open&&p.openedPanelValue===A.columns?a.current.hidePreferences():a.current.showPreferences(A.columns,o,t),(F=s.onClick)==null||F.call(s,w)};if(r.disableColumnSelector)return null;const h=p.open&&p.panelId===o;return e.jsx(r.slots.baseTooltip,j({title:a.current.getLocaleText("toolbarColumnsLabel"),enterDelay:1e3},m,(b=r.slotProps)==null?void 0:b.baseTooltip,{children:e.jsx(r.slots.baseButton,j({ref:l,id:t,size:"small","aria-label":a.current.getLocaleText("toolbarColumnsLabel"),"aria-haspopup":"menu","aria-expanded":h,"aria-controls":h?o:void 0,startIcon:e.jsx(r.slots.columnSelectorIcon,{})},s,{onClick:f},(v=r.slotProps)==null?void 0:v.baseButton,{children:a.current.getLocaleText("toolbarColumns")}))}))}),me=c.forwardRef(function(i,l){var g,P;const{slotProps:u={}}=i,s=u.button||{},m=u.tooltip||{},t=q(),o=L(),a=S(t,se),r=N(),p=N(),[f,h]=c.useState(!1),b=c.useRef(null),v=X(l,b),w=[{icon:e.jsx(o.slots.densityCompactIcon,{}),label:t.current.getLocaleText("toolbarDensityCompact"),value:"compact"},{icon:e.jsx(o.slots.densityStandardIcon,{}),label:t.current.getLocaleText("toolbarDensityStandard"),value:"standard"},{icon:e.jsx(o.slots.densityComfortableIcon,{}),label:t.current.getLocaleText("toolbarDensityComfortable"),value:"comfortable"}],F=c.useMemo(()=>{switch(a){case"compact":return e.jsx(o.slots.densityCompactIcon,{});case"comfortable":return e.jsx(o.slots.densityComfortableIcon,{});default:return e.jsx(o.slots.densityStandardIcon,{})}},[a,o]),D=y=>{var G;h(W=>!W),(G=s.onClick)==null||G.call(s,y)},k=()=>{h(!1)},x=y=>{t.current.setDensity(y),h(!1)},I=y=>{oe(y.key)&&y.preventDefault(),re(y.key)&&h(!1)};if(o.disableDensitySelector)return null;const d=w.map((y,G)=>e.jsxs(O,{onClick:()=>x(y.value),selected:y.value===a,children:[e.jsx($,{children:y.icon}),y.label]},G));return e.jsxs(c.Fragment,{children:[e.jsx(o.slots.baseTooltip,j({title:t.current.getLocaleText("toolbarDensityLabel"),enterDelay:1e3},m,(g=o.slotProps)==null?void 0:g.baseTooltip,{children:e.jsx(o.slots.baseButton,j({ref:v,size:"small",startIcon:F,"aria-label":t.current.getLocaleText("toolbarDensityLabel"),"aria-haspopup":"menu","aria-expanded":f,"aria-controls":f?p:void 0,id:r},s,{onClick:D},(P=o.slotProps)==null?void 0:P.baseButton,{children:t.current.getLocaleText("toolbarDensity")}))})),e.jsx(ee,{open:f,target:b.current,onClose:k,position:"bottom-start",children:e.jsx(Z,{id:p,className:te.menuList,"aria-labelledby":r,onKeyDown:I,autoFocusItem:f,children:d})})]})}),he=n=>{const{classes:i}=n;return z({root:["toolbarFilterList"]},Q,i)},be=M("ul",{name:"MuiDataGrid",slot:"ToolbarFilterList",overridesResolver:(n,i)=>i.toolbarFilterList})(({theme:n})=>({margin:n.spacing(1,1,.5),padding:n.spacing(0,1)})),fe=c.forwardRef(function(i,l){var D,k;const{slotProps:u={}}=i,s=u.button||{},m=u.tooltip||{},t=q(),o=L(),a=S(t,le),r=S(t,ne),p=S(t,U),f=he(o),h=N(),b=N(),v=c.useMemo(()=>{if(p.open)return t.current.getLocaleText("toolbarFiltersTooltipHide");if(a.length===0)return t.current.getLocaleText("toolbarFiltersTooltipShow");const x=d=>r[d.field].filterOperators.find(g=>g.value===d.operator).label||t.current.getLocaleText(`filterOperator${_(d.operator)}`).toString(),I=d=>{const{getValueAsString:g}=r[d.field].filterOperators.find(P=>P.value===d.operator);return g?g(d.value):d.value};return e.jsxs("div",{children:[t.current.getLocaleText("toolbarFiltersTooltipActive")(a.length),e.jsx(be,{className:f.root,ownerState:o,children:a.map((d,g)=>j({},r[d.field]&&e.jsx("li",{children:`${r[d.field].headerName||d.field}
                  ${x(d)}
                  ${d.value!=null?I(d):""}`},g)))})]})},[t,o,p.open,a,r,f]),w=x=>{var g;const{open:I,openedPanelValue:d}=p;I&&d===A.filters?t.current.hidePreferences():t.current.showPreferences(A.filters,b,h),(g=s.onClick)==null||g.call(s,x)};if(o.disableColumnFilter)return null;const F=p.open&&p.panelId===b;return e.jsx(o.slots.baseTooltip,j({title:v,enterDelay:1e3},m,(D=o.slotProps)==null?void 0:D.baseTooltip,{children:e.jsx(o.slots.baseButton,j({ref:l,id:h,size:"small","aria-label":t.current.getLocaleText("toolbarFiltersLabel"),"aria-controls":F?b:void 0,"aria-expanded":F,"aria-haspopup":!0,startIcon:e.jsx(ae,{badgeContent:a.length,color:"primary",children:e.jsx(o.slots.openFilterButtonIcon,{})})},s,{onClick:w},(k=o.slotProps)==null?void 0:k.baseButton,{children:t.current.getLocaleText("toolbarFilters")}))}))}),xe=["quickFilterParser","quickFilterFormatter","debounceMs","className"],ge=n=>{const{classes:i}=n;return z({root:["toolbarQuickFilter"]},Q,i)},ye=M(C,{name:"MuiDataGrid",slot:"ToolbarQuickFilter",overridesResolver:(n,i)=>i.toolbarQuickFilter})(({theme:n})=>({width:"auto",paddingBottom:n.spacing(.5),"& input":{marginLeft:n.spacing(.5)},"& .MuiInput-underline:before":{borderBottom:`1px solid ${(n.vars||n).palette.divider}`},"& input[type=search]::-ms-clear,\n& input[type=search]::-ms-reveal":{display:"none",width:0,height:0},'& input[type="search"]::-webkit-search-decoration,\n  & input[type="search"]::-webkit-search-cancel-button,\n  & input[type="search"]::-webkit-search-results-button,\n  & input[type="search"]::-webkit-search-results-decoration':{display:"none"}})),je=n=>n.split(" ").filter(i=>i!==""),Ie=n=>n.join(" ");function ve(n){var D,k;const i=q(),l=L(),u=ge(l),s=S(i,ie),{quickFilterParser:m=je,quickFilterFormatter:t=Ie,debounceMs:o=l.filterDebounceMs,className:a}=n,r=E(n,xe),[p,f]=c.useState(()=>t(s??[])),h=c.useRef(s);c.useEffect(()=>{R(h.current,s)||(h.current=s,f(x=>R(m(x),s)?x:t(s??[])))},[s,t,m]);const b=c.useCallback(x=>{const I=m(x);h.current=I,i.current.setQuickFilterValues(I)},[i,m]),v=c.useMemo(()=>K(b,o),[b,o]),w=c.useCallback(x=>{const I=x.target.value;f(I),v(I)},[v]),F=c.useCallback(()=>{f(""),b("")},[b]);return e.jsx(ye,j({as:l.slots.baseTextField,ownerState:l,variant:"standard",value:p,onChange:w,className:H(a,u.root),placeholder:i.current.getLocaleText("toolbarQuickFilterPlaceholder"),"aria-label":i.current.getLocaleText("toolbarQuickFilterLabel"),type:"search"},r,{InputProps:j({startAdornment:e.jsx(l.slots.quickFilterIcon,{fontSize:"small"}),endAdornment:e.jsx(l.slots.baseIconButton,j({"aria-label":i.current.getLocaleText("toolbarQuickFilterDeleteIconLabel"),size:"small",sx:{visibility:p?"visible":"hidden"},onClick:F},(D=l.slotProps)==null?void 0:D.baseIconButton,{children:e.jsx(l.slots.quickFilterClearIcon,{fontSize:"small"})}))},r.InputProps)},(k=l.slotProps)==null?void 0:k.baseTextField))}const Fe=["className","csvOptions","printOptions","excelOptions","showQuickFilter","quickFilterProps"],Te=c.forwardRef(function(i,l){const{csvOptions:u,printOptions:s,excelOptions:m,showQuickFilter:t=!1,quickFilterProps:o={}}=i,a=E(i,Fe),r=L();return r.disableColumnFilter&&r.disableColumnSelector&&r.disableDensitySelector&&!t?null:e.jsxs(ce,j({ref:l},a,{children:[e.jsx(pe,{}),e.jsx(fe,{}),e.jsx(me,{}),e.jsx(de,{csvOptions:u,printOptions:s,excelOptions:m}),e.jsx(V,{sx:{flex:1}}),t&&e.jsx(ve,j({},o))]}))});function Ce({onSaveSuccess:n}){const i=[{value:"yes",label:"yes"},{value:"no",label:"no"}],[l,u]=c.useState({firstName:"",lastName:"",userName:"",empId:"",password:"",isActive:"yes",appId:""}),[s,m]=c.useState({}),t=a=>{const{name:r,value:p}=a.target;u({...l,[r]:p})},o=async()=>{const a={...l,isActive:l.isActive==="yes"};console.log(a);try{const r=await B.post("https://gecxc.com:4041/api/Users/SaveUsers",a);console.log("Form data saved:",r.data),u({firstName:"",lastName:"",userName:"",empId:"",password:"",isActive:"yes",appId:""}),m({}),n&&n()}catch(r){console.error("Error saving data:",r),r.response&&r.response.data&&m(r.response.data.errors)}};return e.jsx("div",{children:e.jsx(V,{m:3,pt:4,component:"form",sx:{"& .MuiTextField-root":{m:1,width:"inherit"}},noValidate:!0,autoComplete:"off",children:e.jsxs(T,{container:!0,children:[e.jsx(T,{item:!0,md:4,width:"inherit",paddingX:1,children:e.jsx(C,{id:"outlined-required",label:"First Name",name:"firstName",size:"small",required:!0,value:l.firstName,onChange:t,error:!!s.firstName,helperText:s.firstName&&s.firstName[0]})}),e.jsx(T,{item:!0,md:4,width:"inherit",paddingX:1,children:e.jsx(C,{id:"outlined-required",label:"Last Name",name:"lastName",size:"small",required:!0,value:l.lastName,onChange:t,error:!!s.lastName,helperText:s.lastName&&s.lastName[0]})}),e.jsx(T,{item:!0,md:4,width:"inherit",paddingX:1,children:e.jsx(C,{id:"outlined-required",label:"User Name",name:"userName",size:"small",required:!0,value:l.userName,onChange:t,error:!!s.userName,helperText:s.userName&&s.userName[0]})}),e.jsx(T,{item:!0,md:4,width:"inherit",paddingX:1,children:e.jsx(C,{id:"outlined-required",label:"Emp Id",name:"empId",size:"small",required:!0,value:l.empId,onChange:t,error:!!s.empId,helperText:s.empId&&s.empId[0]})}),e.jsx(T,{item:!0,md:4,width:"inherit",paddingX:1,children:e.jsx(C,{id:"outlined-required",label:"Password",name:"password",size:"small",required:!0,value:l.password,onChange:t,error:!!s.password,helperText:s.password&&s.password[0]})}),e.jsx(T,{item:!0,md:4,width:"inherit",paddingX:1,children:e.jsx(C,{id:"outlined-select-option",select:!0,label:"is Active",name:"isActive",size:"small",required:!0,value:l.isActive,onChange:t,error:!!s.isActive,helperText:s.isActive&&s.isActive[0],children:i.map(a=>e.jsx(O,{value:a.value,children:a.label},a.value))})}),e.jsx(T,{item:!0,md:4,width:"inherit",paddingX:1,children:e.jsx(C,{id:"outlined-required",label:"App Id",name:"appId",size:"small",required:!0,value:l.appId,onChange:t,error:!!s.appId,helperText:s.appId&&s.appId[0]})}),e.jsx(T,{item:!0,md:12,width:"inherit",paddingX:1,textAlign:"right",children:e.jsx(Y,{variant:"contained",color:"primary",size:"small",onClick:o,children:"Save"})})]})})})}function we(){const[n,i]=c.useState([]),l=c.useCallback(async()=>{try{console.log("Fetching data...");const t=await B.get("https://gecxc.com:4041/api/Users/GetUserMenuByEmpId?empId=1");console.log("Data fetched:",t.data);const o=t.data.result.map((a,r)=>({id:r,...a}));console.log("Data with ID:",o),i(o)}catch(t){console.error("Error fetching data:",t)}},[]);c.useEffect(()=>{l()},[l]);const u=c.useCallback(async()=>{try{console.log("Fetching data...");const t=await B.get("https://gecxc.com:4041/api/Users/GetUserSubMenuByEmpId?empId=1");console.log("Data fetched:",t.data);const o=t.data.result.map((a,r)=>({id:r,...a}));console.log("Data with ID:",o),i(o)}catch(t){console.error("Error fetching data:",t)}},[]);c.useEffect(()=>{u()},[u]);const s=c.useCallback(async()=>{try{console.log("Fetching data...");const t=await B.get("https://gecxc.com:4041/api/Users/GetUsersList");console.log("Data fetched:",t.data);const o=t.data.result.map((a,r)=>({id:r,...a}));console.log("Data with ID:",o),i(o)}catch(t){console.error("Error fetching data:",t)}},[]);c.useEffect(()=>{s()},[s]);const m=[{field:"firstName",headerName:"First Name",width:150},{field:"lastName",headerName:"Last Name",width:200},{field:"userName",headerName:"User Name",minWidth:120},{field:"empId",headerName:" Emp Id",minWidth:120},{field:"password",headerName:"Password",minWidth:120},{field:"isActive",headerName:"is Active",minWidth:120},{field:"appId",headerName:"App Id",minWidth:120}];return e.jsx("div",{style:{height:"auto",width:"100%"},children:e.jsx(ue,{rows:n,columns:m,autoHeight:!0,initialState:{pagination:{paginationModel:{page:0,pageSize:10}}},pageSizeOptions:[10,15],localeText:{toolbarDensity:"Size",toolbarDensityLabel:"Size",toolbarDensityCompact:"Small",toolbarDensityStandard:"Medium",toolbarDensityComfortable:"Large"},components:{Toolbar:Te}})})}function Ge(n){return e.jsxs(e.Fragment,{children:[e.jsx(Ce,{}),e.jsx(J,{}),e.jsx(we,{fetchData:n})]})}export{Ge as default};
