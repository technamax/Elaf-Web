import{u as F,r as i,c as G,b as A,j as e,M as E,B as D,G as a,T as I,D as b}from"./index-CqwCPNYa.js";import{a as y}from"./axios-KgIAJknq.js";import{T as M,a as $,b as N,d as H,c as Q,e as S}from"./AddCircle-BWYXlaUy.js";import{F as P}from"./EditAbleDataGrid-CK0_d68Y.js";import{B as O,T as o}from"./TextField-DipHsdrY.js";import{M as w}from"./Skeleton-DgEYGL6M.js";const Y=()=>{const{data:d}=F(),[u,B]=i.useState(""),{data:c,refetch:m}=G(u,{skip:!u}),{enqueueSnackbar:k}=A(),[h,x]=i.useState([]),[g,T]=i.useState([]),[U,z]=i.useState("1"),L=(t,n)=>{z(n)};i.useEffect(()=>{c&&(x(c.result),m())},[c]),i.useEffect(()=>{(async()=>{try{const r=(await y.get(" https://gecxc.com:4041/api/Common/GetLookUpByDomain?lookupDomain=COLOURS")).data.result;T(r)}catch(n){console.error("Error fetching pre-planning lookup data:",n)}})()},[]);const p=(d==null?void 0:d.result)||[],[l,f]=i.useState({collectionId:"",designNo:"",designerName:"",poPcs:"",dateOfPlanning:"",colorId:"",appId:1,createdBy:0,createdOn:new Date().toISOString(),lastUpdatedBy:0,lastUpdatedOn:new Date().toISOString()}),s=t=>{const{name:n,value:r}=t.target;n==="collectionId"&&B(r),f({...l,[n]:r})},j=h.map((t,n)=>({id:n+1,designId:t.designId,collectionId:t.collectionId,designNo:t.designNo,designerName:t.designerName,poPcs:t.poPcs,dateOfPlanning:t.dateOfPlanning,colorId:t.colorId,appId:t.appId,createdBy:t.createdBy,createdOn:t.createdOn,lastUpdatedBy:t.lastUpdatedBy,lastUpdatedOn:t.lastUpdatedOn}));console.log("initialRows",j);const v=[{field:"collectionId",headerName:"Collection ID",editable:!0,flex:2,type:"singleSelect",valueOptions:p.map(t=>({value:t.collectionId,label:t.collectionName}))},{field:"designNo",headerName:"Design No",flex:1,editable:!0},{field:"designerName",headerName:"Designer Name",flex:1,editable:!0},{field:"poPcs",headerName:"Po PCs",flex:1,editable:!0},{field:"dateOfPlanning",headerName:"Date of Planning",type:"date",flex:1,editable:!0,valueGetter:t=>t?new Date(t):null,valueFormatter:t=>{const n=t;return n?n.toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"2-digit"}):""}},{field:"colorId",headerName:"Color",flex:1,editable:!0,type:"singleSelect",valueOptions:g.map(t=>({value:t.lookUpId,label:t.lookUpName}))}],R=async()=>{console.log(l);try{const t=await y.post("https://gecxc.com:4041/API/DesignRegistration/SaveDesign",l);k("Design saved successfully!",{variant:"success",autoHideDuration:5e3}),console.log("Form data saved:",t.data),x([...h,t.data]),f({collectionId:"",designNo:"",designerName:"",poPcs:"",dateOfPlanning:"",colorId:""}),m()}catch(t){console.error("Error saving data:",t)}},C="https://gecxc.com:4041/API/DesignRegistration/SaveDesign",W=()=>{};return e.jsx(E,{style:{borderWidth:1,borderStyle:"dotted",borderColor:"#a11f23",width:"auto",maxHeight:{xs:"80vh",md:"auto"},overflow:"auto"},children:e.jsx(D,{sx:{width:"100%",typography:"body1"},children:e.jsxs(M,{value:U,children:[e.jsx(D,{sx:{borderBottom:1,borderColor:"divider"},children:e.jsxs($,{onChange:L,children:[e.jsx(N,{icon:e.jsx(H,{}),label:"Add Design",value:"1",sx:t=>({"& .MuiTouchRipple-child":{backgroundColor:`${t.palette.primary.main} !important`}})}),e.jsx(N,{icon:e.jsx(Q,{}),label:"Search Design",value:"2",sx:t=>({"& .MuiTouchRipple-child":{backgroundColor:`${t.palette.primary.main} !important`}})})]})}),e.jsxs(S,{value:"1",children:[e.jsxs(a,{container:!0,spacing:2,width:"Inherit",children:[e.jsx(a,{item:!0,xs:9,md:9,children:e.jsx(I,{variant:"h3",gutterBottom:!0,children:"Create New Design"})}),e.jsx(a,{item:!0,xs:3,md:3,textAlign:"right",children:e.jsx(O,{variant:"contained",size:"small",onClick:R,children:"Save"})}),e.jsx(a,{item:!0,xs:12,md:4,children:e.jsx(o,{fullWidth:!0,select:!0,label:"Select Collection",name:"collectionId",value:l.collectionId,onChange:s,size:"small",children:p.map(t=>e.jsx(w,{value:t.collectionId,children:t.collectionName},t.collectionId))})}),e.jsx(a,{item:!0,xs:12,md:4,children:e.jsx(o,{label:"Design No.",name:"designNo",fullWidth:!0,size:"small",value:l.designNo,onChange:s})}),e.jsx(a,{item:!0,xs:12,md:4,children:e.jsx(o,{label:"Designer Name",fullWidth:!0,size:"small",name:"designerName",value:l.designerName,onChange:s})}),e.jsx(a,{item:!0,xs:12,md:4,children:e.jsx(o,{size:"small",type:"date",label:"Planning Date",name:"dateOfPlanning",value:l.dateOfPlanning,onChange:s,fullWidth:!0,focused:!0})}),e.jsx(a,{item:!0,xs:12,md:4,children:e.jsx(o,{label:"Po PCs",fullWidth:!0,size:"small",name:"poPcs",value:l.poPcs,onChange:s})}),e.jsx(a,{item:!0,xs:12,md:4,children:e.jsx(o,{fullWidth:!0,select:!0,label:"Color",size:"small",name:"colorId",value:l.colorId,onChange:s,children:g.map(t=>e.jsx(w,{value:t.lookUpId,children:t.lookUpName},t.lookUpId))})})]}),e.jsx(b,{}),e.jsx(a,{container:!0,spacing:2,width:"inherit",paddingTop:2,children:e.jsx(a,{item:!0,xs:12,md:12,children:e.jsx(P,{initialRows:j,ncolumns:v,formData:l,editAPi:C})})})]}),e.jsxs(S,{value:"2",children:[e.jsxs(a,{container:!0,spacing:2,width:"inherit",children:[e.jsx(a,{item:!0,xs:9,md:9,children:e.jsx(I,{variant:"h3",gutterBottom:!0,children:"Search Design"})}),e.jsx(a,{item:!0,xs:3,textAlign:"right",children:e.jsx(O,{variant:"contained",size:"small",onClick:W,children:"Search"})}),e.jsx(a,{item:!0,xs:12,md:6,children:e.jsx(o,{size:"small",type:"date",label:"Date From",name:"planningDate",value:l.planningDate,onChange:s,fullWidth:!0,focused:!0})}),e.jsx(a,{item:!0,xs:12,md:6,children:e.jsx(o,{size:"small",type:"date",label:"Date to",name:"launchDate",value:l.launchDate,onChange:s,fullWidth:!0,focused:!0})}),e.jsx(a,{item:!0,sm:12,children:e.jsx(b,{color:"#cc8587",sx:{height:2,width:"100%"}})})]}),e.jsx(a,{container:!0,spacing:2,width:"inherit",paddingTop:2,children:e.jsx(a,{item:!0,xs:12,children:e.jsx(P,{initialRows:[],ncolumns:v,formData:l,editAPi:C})})})]})]})})})};export{Y as default};
