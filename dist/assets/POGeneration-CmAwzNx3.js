import{c as Se,u as oe,A as Ie,am as je,a7 as He,j as e,B as J,G as n,aj as Ve,T as _,s as Ye,an as _e,n as $e,R as Xe,v as Je,ao as Ke,ap as Ze,aq as et,C as fe,d as he,e as $,D as tt,M as at}from"./index-39l8sM5Y.js";import{r as a,R as se}from"./vendor-BXCbSo2_.js";import{d as st}from"./AddCircleOutlineOutlined-D1kON0fO.js";import{d as X}from"./AssignmentOutlined-gcmYWm7Z.js";import{u as De,D as Ce,R as ne,a as xe,b as pe,c as ge,d as ye,B as rt}from"./ReuseableDataGrid-BPyget6h.js";import{B as V,a as we,I as be}from"./axios-BWUwFnln.js";import{d as ve}from"./Close-wcyf3mqg.js";import{S as re}from"./StatusChip-CqVTwn9e.js";import{d as nt}from"./VisibilityOutlined-CqM1EEFV.js";import{T as f}from"./TextField-B7IP_ndE.js";import{M as Y}from"./MenuItem-qJMJ5sWO.js";import{T as ot,a as it,b as U,c as q}from"./TabPanel-BsG9cIUb.js";import"./Skeleton-_4TR0oIL.js";const lt=({vId:r,handleClose:l})=>{const[y,D]=a.useState([]),[T,u]=a.useState([]),h=De(),{enqueueSnackbar:c}=Se(),{user:A}=oe(),[R,O]=a.useState([]),[P,x]=a.useState([]),[S,i]=a.useState({categoryId:0,vendorId:r.vendorId,poId:r.poId}),{data:j}=Ie(),{data:z,refetch:W}=je(r.poId,{skip:!r.poId}),{data:I,refetch:M}=He({vId:r.vendorId,categoryId:S.categoryId},{skip:!r||!S.categoryId});a.useEffect(()=>{j&&O(j.result.map((d,g)=>({id:g+1,...d})))},[j]),console.log("columnsData",I),a.useEffect(()=>{if((I==null?void 0:I.result)===null){x([]);return}I!=null&&I.result&&x(I.result.filter(d=>!T.some(g=>g.id===d.id)).map((d,g)=>({id:g+1,...d})))},[I,T,M]);const o=d=>{const{name:g,value:L}=d.target;i({...S,[g]:L})},b=[{field:"id",headerName:"Sr#"},{field:"termCondDesc",headerName:"Terms and Conditions",flex:1}],w=()=>{h.current.autosizeColumns({includeHeaders:!0,includeOutliers:!0})};se.useEffect(()=>{w()});const[N,v]=a.useState([]),C=se.useCallback(d=>{D(d);const g=d.map(L=>{const B=h.current.getRow(L);return console.log("rowData",B),B?{...B,vendorPoId:0,poId:0,appId:A.appId,createdOn:new Date().toISOString(),createdBy:A.empId,lastUpdatedOn:new Date().toISOString(),lastUpdatedBy:A.empId}:null}).filter(L=>L!==null);console.log("selectedDesigns",g),v(g)},[h]);a.useEffect(()=>{P.filter(d=>y.includes(d.id)),i(d=>({...d,vendorPoAssignTermsList:N}))},[P,y]),console.log("formData",S),se.useEffect(()=>{h.current&&console.log("API ref is ready:",h.current)},[h]),console.log("selectedDesigns:",N);const E=async()=>{if(N.length===0){c("No terms are selected. Please select at least one term.",{variant:"warning",autoHideDuration:5e3});return}try{const d=await we.post("http://100.42.177.77:83/api/PO/AssignTermToDyeingPo",S);d.data.success?(c(`${d.data.message} !`,{variant:"success",autoHideDuration:5e3}),u(g=>[...g,...N])):c(`${d.data.message} !`,{variant:"error",autoHideDuration:5e3}),W(),l()}catch(d){console.error("Error saving data:",d),c("FAILED: Unable to start Process",{variant:"error",autoHideDuration:5e3})}};return e.jsx(J,{noValidate:!0,component:"form",sx:{display:"flex",flexDirection:"column",m:"auto",mt:2,width:"Inherit"},children:e.jsxs(n,{container:!0,spacing:2,width:"Inherit",children:[e.jsx(n,{item:!0,xs:12,md:3,children:e.jsx(f,{fullWidth:!0,label:"Vendor",name:"vendorId",value:r.vendorName,disabled:!0,size:"small"})}),e.jsx(n,{item:!0,xs:12,md:3,children:e.jsx(f,{fullWidth:!0,select:!0,label:"Category",name:"categoryId",value:S.categoryId,onChange:o,size:"small",children:R.map(d=>e.jsx(Y,{value:d.categoryId,children:d.description},d.categoryId))})}),e.jsx(n,{item:!0,xs:12,children:e.jsx("div",{style:{height:400,width:"100%"},children:e.jsx(Ce,{rows:P,columns:b,apiRef:h,disableRowSelectionOnClick:!0,checkboxSelection:!0,onRowSelectionModelChange:C,rowSelectionModel:y})})}),e.jsx(n,{item:!0,xs:12,textAlign:"right",sx:{mt:2},children:e.jsx(V,{variant:"contained",size:"small",onClick:E,children:"Assign Terms"})})]})})},dt=({vId:r})=>{const[l,y]=a.useState([]),[D,T]=a.useState([]),{data:u,refetch:h}=Ve(r.poId,{skip:!r.poId}),{data:c,refetch:A}=je(r.poId,{skip:!r.poId});a.useEffect(()=>{if((u==null?void 0:u.result)===null){y([]);return}u&&y(u.result.map((o,b)=>({id:b+1,...o})))},[u,h]),a.useEffect(()=>{if((c==null?void 0:c.result)===null){T([]);return}if(c){const o=c.result.reduce((b,w)=>b.find(v=>v.termCondDesc===w.termCondDesc)?b:b.concat([w]),[]);T(o.map((b,w)=>({id:w+1,...b})))}},[c,A]),console.log("vId",r);const[R,O]=a.useState(0),[P,x]=a.useState(0),[S,i]=a.useState(0),[j,z]=a.useState(0);a.useEffect(()=>{const o=l.reduce((v,C)=>v+(C.planningQty??0),0).toFixed(2),b=l.reduce((v,C)=>v+(C.quantity??0),0).toFixed(2),w=l.reduce((v,C)=>v+(C.totalBeforeTax??0),0).toFixed(2),N=l.reduce((v,C)=>v+(C.totalAfterTax??0),0).toFixed(2);O(parseFloat(o).toLocaleString()),x(parseFloat(b).toLocaleString()),i(parseFloat(w).toLocaleString()),z(parseFloat(N).toLocaleString())},[l]);const W=[...l,{id:"TOTAL_SUMMARY",planningQty:R,quantity:P,totalBeforeTax:S,totalAfterTax:j}],I=[{field:"id",headerName:"Sr#",colSpan:(o,b)=>b.id==="TOTAL_SUMMARY"?4:void 0,renderCell:o=>o.row.id==="TOTAL_SUMMARY"?e.jsx("span",{style:{color:"black",fontWeight:"bold"},children:"Total Summary"}):o.value},{field:"designNo",headerName:"Design"},{field:"baseColor",headerName:"Base Color"},{field:"colorName",headerName:"Color"},{field:"vendorName",headerName:"Vendor"},{field:"uomName",headerName:"UOM"},{field:"planningQty",headerName:"Planned Qty",renderCell:o=>o.row.id==="TOTAL_SUMMARY"?e.jsx("span",{style:{color:"#a11f23",fontWeight:"bold"},children:o.value}):o.value},{field:"quantity",headerName:"Assigned Qty",renderCell:o=>o.row.id==="TOTAL_SUMMARY"?e.jsx("span",{style:{color:"#a11f23",fontWeight:"bold"},children:o.value}):o.value},{field:"rate",headerName:"Rate"},{field:"tax",headerName:"Tax"},{field:"totalBeforeTax",headerName:"Total",valueGetter:o=>o.toLocaleString(),renderCell:o=>o.row.id==="TOTAL_SUMMARY"?e.jsx("span",{style:{color:"#a11f23",fontWeight:"bold"},children:o.value}):o.value},{field:"totalAfterTax",headerName:"Total After Tax",valueGetter:o=>o.toLocaleString(),renderCell:o=>o.row.id==="TOTAL_SUMMARY"?e.jsx("span",{style:{color:"#a11f23",fontWeight:"bold"},children:o.value}):o.value}],M=[{field:"id",headerName:"Sr#"},{field:"termCondDesc",headerName:"Terms and Conditions"},{field:"processType",headerName:"Process Type"}];return console.log("assignedTerms",D),e.jsxs("div",{children:[e.jsxs(n,{container:!0,spacing:1,width:"Inherit",sx:{paddingY:2,paddingX:2},children:[e.jsx(n,{item:!0,xs:12,md:3,children:e.jsx(f,{fullWidth:!0,disabled:!0,label:"Production",name:"productionId",value:r.collectionName,size:"small"})}),e.jsx(n,{item:!0,xs:12,md:3,children:e.jsx(f,{fullWidth:!0,disabled:!0,label:"Process Type",name:"productionId",value:r.processTypeName,size:"small"})}),e.jsx(n,{item:!0,xs:12,md:3,children:e.jsx(f,{size:"small",label:"Issuance Date",name:"issuanceDate",value:new Date(r.issuanceDate).toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"2-digit"}),fullWidth:!0,disabled:!0,InputLabelProps:{shrink:!0,sx:{color:"black"}}})}),e.jsx(n,{item:!0,xs:12,md:3,children:e.jsx(f,{size:"small",label:"Planning Date",name:"expectedReturnDate",value:new Date(r.expectedReturnDate).toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"2-digit"}),fullWidth:!0,disabled:!0,InputLabelProps:{shrink:!0,sx:{color:"black"}}})}),e.jsx(n,{item:!0,xs:12,md:3,children:e.jsx(f,{fullWidth:!0,disabled:!0,label:"Fabric",name:"fabricId",value:r.fabricName,size:"small"})}),e.jsx(n,{item:!0,xs:12,md:3,children:e.jsx(f,{fullWidth:!0,disabled:!0,label:"Vendor",name:"vendorId",value:r.vendorName,size:"small"})}),e.jsx(n,{item:!0,xs:12,md:1.5,children:e.jsx(f,{label:"Shrinkage",fullWidth:!0,disabled:!0,size:"small",name:"shrinkage",value:r.shrinkage,required:!0})}),e.jsx(n,{item:!0,xs:12,md:1.5,children:e.jsx(f,{label:"Wastage",fullWidth:!0,disabled:!0,size:"small",name:"wastage",value:r.wastage,required:!0})}),e.jsx(n,{item:!0,xs:12,md:3,children:e.jsx(f,{fullWidth:!0,disabled:!0,label:"Location",name:"locationId",value:r.fullLocation,size:"small"})})]}),e.jsxs(n,{container:!0,spacing:2,width:"Inherit",children:[e.jsx(n,{item:!0,xs:12,children:e.jsx(_,{variant:"h2",children:"Details"})}),e.jsx(n,{item:!0,xs:12,children:e.jsx(ne,{initialRows:W,iColumns:I,hideAction:!0,pageSize:10})})]}),e.jsxs(n,{container:!0,spacing:2,width:"Inherit",children:[e.jsx(n,{item:!0,xs:12,children:e.jsx(_,{variant:"h2",children:"Terms and Conditions"})}),e.jsx(n,{item:!0,xs:12,children:e.jsx(ne,{initialRows:D,iColumns:M,hideAction:!0,pageSize:10})})]})]})},H=Ye(f)(({theme:r})=>({"& .MuiInputBase-input":{fontSize:"0.875rem",padding:"4px 6px"},width:"auto",height:"auto",minWidth:"100px",minHeight:"30px"})),ct=()=>{const[r,l]=a.useState([]),y=De(),{enqueueSnackbar:D}=Se(),T=_e(),[u,h]=a.useState([]),{user:c}=oe(),[A,R]=a.useState([]),[O,P]=a.useState(!1),[x,S]=a.useState(new Set),[i,j]=a.useState({poId:0,productionId:"",issuanceDate:"",expectedReturnDate:"",processTypeId:1223,fabricId:"",pxQty:0,vendorId:"",shrinkage:"",wastage:"",locationId:"",remarks:"",appId:c.appId,createdOn:new Date().toISOString(),createdBy:c.empId,lastUpdatedOn:new Date().toISOString(),LastUpdatedBy:c.empId}),[z,W]=a.useState([]),[I,M]=a.useState([]),[o,b]=a.useState([]),[w,N]=a.useState([]),{data:v,refetch:C}=$e(),{data:E,refetch:d}=Xe(),{data:g,refetch:L}=Je(),{data:B,refetch:Te}=Ke(i.productionId,{skip:!i.productionId}),{data:K,refetch:Pe}=Ze(i.fabricId,{skip:!i.fabricId}),{data:Z,refetch:ie}=et({fabricId:i.fabricId,productionId:i.productionId},{skip:!i.fabricId||!i.productionId}),[Ne,Fe]=a.useState([]);a.useEffect(()=>{E&&W(E.result.map((t,s)=>({id:s+1,...t})))},[E,d]),a.useEffect(()=>{B&&M(B.result.map((t,s)=>({id:s+1,...t})))},[B,Te]),a.useEffect(()=>{Z&&h(Z.result.map((t,s)=>({id:s+1,...t})))},[Z,ie]),a.useEffect(()=>{K&&b(K.result.map((t,s)=>({id:s+1,...t})))},[K,Pe]),a.useEffect(()=>{g&&N(g.result.map((t,s)=>({id:s+1,...t})))},[g]),a.useEffect(()=>{v&&Fe(v.result.map((t,s)=>({id:s,...t})))},[v,C]);const le=u.reduce((t,s)=>t+(s.availableQty??0),0).toFixed(2),ke=u.reduce((t,s)=>t+(s.quantity??0),0).toFixed(2),Ae=u.reduce((t,s)=>t+(s.prevoiusPoQty??0),0).toFixed(2);a.useEffect(()=>{j(t=>({...i,overallQty:le}))},[h,u]),a.useEffect(()=>{j(t=>({...i,overallQty:le,remainingQuantity:(t.overallQty-Ae-ke).toFixed(2)||0}))},[h,u]),console.log("initialRows",z);const F=t=>{const{name:s,value:m}=t.target;if(s==="vendorId"){const p=o.find(k=>k.vendorId===parseInt(m));j({...i,vendorId:m,shrinkage:p?p.shrinkage:"",wastage:p?p.wastage:""})}else if(s==="fabricId"){const p=I.find(k=>k.fabricId===parseInt(m));j({...i,fabricId:m,pxQty:p?p.pxQty:"",vendorId:"",shrinkage:"",wastage:""})}else j({...i,[s]:m})},Oe=async()=>{if(r.length===0){D("Please select at least one row before saving!",{variant:"warning",autoHideDuration:5e3});return}console.log("formData",i);try{const t=await we.post("http://100.42.177.77:83/api/PO/SavePOHeader",i);console.log("Save response:",t.data),t.data.success?(D("Data saved successfully!",{variant:"success",autoHideDuration:5e3}),S(s=>new Set([...s,...r])),j({poId:0,productionId:"",issuanceDate:"",expectedReturnDate:"",fabricId:"",processTypeId:1223,vendorId:"",shrinkage:"",wastage:"",locationId:"",appId:c.appId,createdOn:new Date().toISOString(),createdBy:c.empId,lastUpdatedOn:new Date().toISOString(),lastUpdatedBy:c.empId}),h([]),d(),l([]),ie(),P(!1)):D(`Save failed: ${t.data.message}`,{variant:"error",autoHideDuration:5e3})}catch(t){console.error("Error saving data:",t),D("Failed to save data. Please try again.",{variant:"error",autoHideDuration:5e3})}};console.log("formData",i);const[Qe,de]=a.useState(!1),[Re,ce]=a.useState(!1),[ee,ue]=a.useState(!1),Be=async t=>{ue(t),de(!0)},Le=async t=>{ce(!0),ue(t)};console.log("terms condition",ee);const te=()=>{de(!1)},me=()=>{ce(!1)},ze=t=>{T("/Production/Issuance",{state:{data:t,tab:1}})},We=[{field:"id",headerName:"Sr#"},{field:"poIdName",headerName:"PO ID"},{field:"collectionName",headerName:"Collection Name"},{field:"fabricName",headerName:"Fabric Name"},{field:"vendorName",headerName:"Vendor"},{field:"createdOn",headerName:"PO Date",valueGetter:t=>new Date(t).toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"2-digit"})},{field:"issuanceDate",headerName:"Issuance Date",valueGetter:t=>new Date(t).toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"2-digit"})},{field:"expectedReturnDate",headerName:"Expected Return Date",valueGetter:t=>new Date(t).toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"2-digit"})},{field:"fabricCount",headerName:"Fabrics"},{field:"statusName",headerName:"Status",renderCell:t=>e.jsx(re,{label:t.row.statusName,status:"Pending"})},{field:"Actions",headerName:"Actions",renderCell:t=>e.jsx("div",{style:{display:"flex",justifyContent:"space-around"},children:e.jsxs(rt,{variant:"text",size:"small",children:[e.jsx(V,{size:"small",color:"primary",onClick:()=>Be(t.row),children:"Assign Terms"}),e.jsx(V,{size:"small",color:"primary",onClick:()=>Le(t.row),children:"View"}),e.jsx(V,{size:"small",color:"primary",onClick:()=>ze(t.row),children:"Issuance"})]})})}],G=a.useCallback(t=>{const{id:s,field:m,value:p}=t;console.log("Editing cell:",t),h(k=>k.map(ae=>{if(ae.id===s){const Q={...ae,[m]:p,poId:0,poDetId:0,appId:c.appId,createdOn:new Date().toISOString(),createdBy:c.empId,lastUpdatedOn:new Date().toISOString(),lastUpdatedBy:c.empId};return(m==="rate"||m==="quantity")&&(Q.totalBeforeTax=Q.rate*Q.quantity),(m==="tax"||m==="rate"||m==="quantity")&&(Q.totalAfterTax=Q.totalBeforeTax+Q.totalBeforeTax*(Q.tax/100)),Q}return ae}))},[h,c.appId,c.empId]),Me=[{field:"id",headerName:"Sr#"},{field:"designNo",headerName:"Design"},{field:"colorName",headerName:"Color"},{field:"availableQty",headerName:"Planned Qty",valueGetter:t=>t.toLocaleString(),renderCell:t=>e.jsx(re,{label:t.row.availableQty,status:"Inspected"})},{field:"prevoiusPoQty",headerName:"Prevoius PO.Qty",valueGetter:t=>t.toLocaleString(),renderCell:t=>e.jsx(re,{label:t.row.prevoiusPoQty,status:"Received"})},{field:"remaining",headerName:"Remaining Qty",valueGetter:(t,s)=>(s.availableQty-s.prevoiusPoQty).toLocaleString(),renderCell:t=>{const s=t.row.availableQty-t.row.prevoiusPoQty;return e.jsx($,{label:s.toLocaleString(),sx:{backgroundColor:"#FF0000",color:"#FFFFFF"}})}},{field:"quantity",headerName:"Assigned Qty",renderCell:t=>e.jsx(H,{variant:"outlined",size:"small",sx:{mt:1,width:"50px"},value:t.row.quantity||"",onChange:s=>G({id:t.id,field:"quantity",value:Number(s.target.value)}),type:"number",InputProps:{style:{fontSize:"0.875rem"}}})},{field:"rate",headerName:"Rate",renderCell:t=>e.jsx(H,{variant:"outlined",size:"small",sx:{mt:1,width:"50px"},value:t.row.rate||"",onChange:s=>G({id:t.id,field:"rate",value:Number(s.target.value)}),type:"number",InputProps:{style:{fontSize:"0.875rem"}}})},{field:"tax",headerName:"Tax",renderCell:t=>e.jsx(H,{variant:"outlined",size:"small",sx:{mt:1,width:"50px"},value:t.row.tax||"",onChange:s=>G({id:t.id,field:"tax",value:Number(s.target.value)}),type:"number",InputProps:{style:{fontSize:"0.875rem"}}})},{field:"totalBeforeTax",headerName:"Total",renderCell:t=>{const m=(t.row.totalBeforeTax||0).toLocaleString();return e.jsx(H,{variant:"outlined",size:"small",sx:{mt:1,width:"50px"},value:m,onChange:p=>{const k=Number(p.target.value.replace(/,/g,""));G({id:t.id,field:"totalBeforeTax",value:k})},type:"text",InputProps:{style:{fontSize:"0.875rem"}}})}},{field:"totalAfterTax",headerName:"Total After Tax",renderCell:t=>{const m=(t.row.totalAfterTax||0).toLocaleString();return e.jsx(H,{variant:"outlined",size:"small",sx:{mt:1,width:"50px"},value:m,onChange:p=>{const k=Number(p.target.value.replace(/,/g,""));G({id:t.id,field:"totalAfterTax",value:k})},type:"text",InputProps:{style:{fontSize:"0.875rem"}}})}}],Ee=()=>{y.current.autosizeColumns({includeHeaders:!0,includeOutliers:!0})};a.useEffect(()=>{Ee()});const[Ge,Ue]=a.useState([]),qe=a.useCallback(t=>{l(t);const s=t.map(m=>{const p=y.current.getRow(m);return console.log("rowData",p),p?{...p}:null}).filter(m=>m!==null);console.log("selectedDesigns",s),Ue(s)},[y]);return a.useEffect(()=>{const t=u.filter(s=>r.includes(s.id));j(s=>({...s,dyeingPoDetailsList:t}))},[u,r]),console.log("fabrics",u),a.useEffect(()=>{y.current&&console.log("API ref is ready:",y.current)},[y]),console.log("selectedDesigns:",Ge),e.jsxs(J,{sx:{width:"100%",typography:"body1"},children:[e.jsxs(fe,{variant:"outlined",children:[e.jsx(he,{className:"css-4rfrnx-MuiCardHeader-root",title:"Dyeing Production Order",titleTypographyProps:{style:{color:"white"}}}),e.jsxs(n,{container:!0,spacing:1,width:"Inherit",sx:{paddingY:2,paddingX:2},children:[e.jsx(n,{item:!0,xs:12,md:3,children:e.jsx(f,{fullWidth:!0,select:!0,label:"Production",name:"productionId",value:i.productionId,onChange:F,size:"small",children:Ne.map(t=>e.jsx(Y,{value:t.productionId,children:t.collectionName},t.productionId))})}),e.jsx(n,{item:!0,xs:12,md:3,children:e.jsx(f,{size:"small",type:"date",label:"Issuance Date",name:"issuanceDate",value:i.issuanceDate,onChange:F,fullWidth:!0,InputLabelProps:{shrink:!0,sx:{color:"black"}}})}),e.jsx(n,{item:!0,xs:12,md:3,children:e.jsx(f,{size:"small",type:"date",label:"Planning Date",name:"expectedReturnDate",value:i.expectedReturnDate,onChange:F,fullWidth:!0,InputLabelProps:{shrink:!0,sx:{color:"black"}}})}),e.jsx(n,{item:!0,xs:12,md:3,children:e.jsx(f,{fullWidth:!0,select:!0,label:"Select Fabric",name:"fabricId",value:i.fabricId,onChange:F,size:"small",children:I.map(t=>e.jsx(Y,{value:t.fabricId,children:t.fabricName},t.fabricId))})}),e.jsx(n,{item:!0,xs:12,md:3,children:e.jsx(f,{fullWidth:!0,select:!0,label:"Select Vendor",name:"vendorId",value:i.vendorId,onChange:F,size:"small",children:o.map(t=>e.jsx(Y,{value:t.vendorId,children:t.vendorName},t.vendorId))})}),e.jsx(n,{item:!0,xs:12,md:1.5,children:e.jsx(f,{label:"Shrinkage",fullWidth:!0,size:"small",name:"shrinkage",onChange:F,value:i.shrinkage,required:!0})}),e.jsx(n,{item:!0,xs:12,md:1.5,children:e.jsx(f,{label:"Wastage",fullWidth:!0,size:"small",name:"wastage",onChange:F,value:i.wastage,required:!0})}),e.jsx(n,{item:!0,xs:12,md:3,children:e.jsx(f,{fullWidth:!0,select:!0,label:"Select Location",name:"locationId",value:i.locationId,onChange:F,size:"small",children:w.map(t=>e.jsx(Y,{value:t.locationId,children:t.section+"."+t.aisle+"."+t.rack+"."+t.bin},t.locationId))})}),e.jsx(n,{item:!0,xs:12,md:3,children:e.jsx(f,{label:"Remarks",fullWidth:!0,size:"small",name:"remarks",onChange:F,value:i.remarks,required:!0})}),e.jsx(n,{item:!0,xs:12,textAlign:"right",children:e.jsxs(_,{variant:"overline",sx:{display:"block",fontWeight:"bold",fontSize:15},children:["Assign Quantity"," ",e.jsx($,{label:i.pxQty,sx:{backgroundColor:"#008000",color:"#FFFFFF"}}),"| planned Quantity"," ",e.jsx($,{label:i.overallQty,sx:{backgroundColor:"#0000FF",color:"#FFFFFF"}})," ","| Remaining Quantity"," ",e.jsx($,{label:i.remainingQuantity,sx:{backgroundColor:"#FF0000",color:"#FFFFFF"}})]})}),e.jsx(n,{item:!0,xs:12,children:e.jsx("div",{style:{height:400,width:"100%"},children:e.jsx(Ce,{rows:u,columns:Me,pageSize:10,apiRef:y,disableRowSelectionOnClick:!0,checkboxSelection:!0,isRowSelectable:t=>t.row.prevoiusPoQty<t.row.availableQty&&t.row.prevoiusPoQty!==t.row.availableQty,onRowSelectionModelChange:qe,rowSelectionModel:r})})}),e.jsx(n,{item:!0,xs:12,textAlign:"right",sx:{mt:2},children:e.jsx(V,{variant:"contained",size:"small",onClick:Oe,disabled:u.every(t=>t.prevoiusPoQty>=t.availableQty),children:"Save"})})]})," "]}),e.jsx(tt,{color:"#cc8587",sx:{height:1,width:"100%",mt:2}}),e.jsxs(fe,{variant:"outlined",children:[e.jsx(he,{className:"css-4rfrnx-MuiCardHeader-root",avatar:e.jsx(nt,{}),title:"Assign TCs & Issuance",titleTypographyProps:{style:{color:"white"}}}),e.jsx(n,{container:!0,spacing:2,width:"Inherit",children:e.jsxs(n,{item:!0,xs:12,children:[e.jsx(ne,{initialRows:z,iColumns:We,pageSize:10,setInitialData:R,hideAction:!0}),e.jsxs(xe,{open:Qe,onClose:te,fullWidth:!0,maxWidth:"xl",children:[e.jsxs(pe,{sx:{backgroundColor:"#A11F23",color:"#ffffff",display:"flex",justifyContent:"space-between",alignItems:"center",paddingX:"24px",paddingY:"4px"},children:[e.jsx(_,{variant:"h4",component:"div",color:"#ffffff",gutterBottom:!0,fontSize:20,fontWeight:2,fontStyle:"normal",children:"Assign Terms  And Conditions"}),e.jsx(be,{onClick:te,sx:{color:"#ffffff"},children:e.jsx(ve,{})})]}),e.jsxs(ge,{children:[e.jsx(ye,{id:"alert-dialog-slide-description"}),e.jsx(lt,{vId:ee,handleClose:te})]})]}),e.jsxs(xe,{open:Re,onClose:me,fullWidth:!0,maxWidth:"xl",children:[e.jsxs(pe,{sx:{backgroundColor:"#A11F23",color:"#ffffff",display:"flex",justifyContent:"space-between",alignItems:"center",paddingX:"24px",paddingY:"4px"},children:[e.jsx(_,{variant:"h4",component:"div",color:"#ffffff",gutterBottom:!0,fontSize:20,fontWeight:2,fontStyle:"normal",children:"View Production Order"}),e.jsx(be,{onClick:me,sx:{color:"#ffffff"},children:e.jsx(ve,{})})]}),e.jsxs(ge,{children:[e.jsx(ye,{id:"alert-dialog-slide-description"}),e.jsx(dt,{vId:ee})]})]})]})})," "]})]})},Dt=()=>{const{user:r}=oe(),[l,y]=a.useState([]);a.useState(!1);const[D,T]=a.useState({categoryId:0,description:"",enabled:"",appId:r.appId,createdOn:new Date().toISOString(),createdBy:r.empId,lastUpdatedOn:new Date().toISOString(),lastUpdatedBy:r.empId}),[u,h]=a.useState("1"),c=(x,S)=>{h(S)};a.useEffect(()=>{T({categoryId:(l==null?void 0:l.categoryId)||0,description:(l==null?void 0:l.description)||"",enabled:(l==null?void 0:l.enabled)||"",appId:(l==null?void 0:l.appId)||r.appId,createdOn:(l==null?void 0:l.createdOn)||new Date().toISOString(),createdBy:(l==null?void 0:l.createdBy)||r.empId,lastUpdatedOn:new Date().toISOString(),lastUpdatedBy:r.empId})},[l]);const[A,R]=a.useState([]);a.useState(!1);const{data:O,refetch:P}=Ie();return a.useEffect(()=>{O&&R(O.result.map((x,S)=>({id:S+1,...x})))},[O,P]),console.log("initialRows",A),console.log("formData",D),e.jsx(at,{style:{borderWidth:1,borderStyle:"dotted",borderColor:"#a11f23",width:"auto",maxHeight:{xs:"80vh",md:"auto"},overflow:"auto"},children:e.jsx(J,{sx:{width:"100%",typography:"body1"},children:e.jsxs(ot,{value:u,children:[e.jsx(J,{sx:{borderBottom:1,borderColor:"divider"},children:e.jsxs(it,{onChange:c,"aria-label":"lab API tabs example",children:[e.jsx(U,{icon:e.jsx(st,{}),label:"Dyeing PO",value:"1",sx:x=>({"& .MuiTouchRipple-child":{backgroundColor:`${x.palette.primary.main} !important`}})}),e.jsx(U,{icon:e.jsx(X,{}),label:"Embroidery PO",value:"2",sx:x=>({"& .MuiTouchRipple-child":{backgroundColor:`${x.palette.primary.main} !important`}})}),e.jsx(U,{icon:e.jsx(X,{}),label:"Schiffili PO",value:"3",sx:x=>({"& .MuiTouchRipple-child":{backgroundColor:`${x.palette.primary.main} !important`}})}),e.jsx(U,{icon:e.jsx(X,{}),label:"Additional Process PO",value:"4",sx:x=>({"& .MuiTouchRipple-child":{backgroundColor:`${x.palette.primary.main} !important`}})}),e.jsx(U,{icon:e.jsx(X,{}),label:"Additional Services PO",value:"5",sx:x=>({"& .MuiTouchRipple-child":{backgroundColor:`${x.palette.primary.main} !important`}})})]})}),e.jsx(q,{value:"1",children:e.jsx(ct,{})}),e.jsx(q,{value:"2"}),e.jsx(q,{value:"3"}),e.jsx(q,{value:"4"}),e.jsx(q,{value:"5"})]})})})};export{Dt as default};
