import{o as O,p as z,s as P,ap as Pe,z as D,A as H,as as Re,_ as p,at as Me,au as Te,j as o,H as q,I as $,q as Be,av as fe,aw as Fe,P as xe,r as ge,i as ve,u as Ge,c as we,a7 as ke,b as Ue,a8 as qe,a9 as Ee,ag as Oe,ax as ze,C as ee,d as te,ae as De,G as C,D as He}from"./index-D_mF4B5t.js";import{r as i}from"./vendor-BXCbSo2_.js";import{I as $e,B as We,a as Ve}from"./axios-DMod4shj.js";import{d as _e,l as Ye,R as Je}from"./ReuseableDataGrid-w8BqS-IT.js";import{T as B}from"./TextField-9z7gW76p.js";import{M as _}from"./Skeleton-0kTGRzah.js";const he=i.createContext({});function Qe(e){return z("MuiAccordion",e)}const J=O("MuiAccordion",["root","rounded","expanded","disabled","gutters","region"]),Xe=["children","className","defaultExpanded","disabled","disableGutters","expanded","onChange","square","slots","slotProps","TransitionComponent","TransitionProps"],Ke=e=>{const{classes:t,square:n,expanded:r,disabled:l,disableGutters:a}=e;return $({root:["root",!n&&"rounded",r&&"expanded",l&&"disabled",!a&&"gutters"],region:["region"]},Qe,t)},Ze=P(Pe,{name:"MuiAccordion",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{[`& .${J.region}`]:t.region},t.root,!n.square&&t.rounded,!n.disableGutters&&t.gutters]}})(({theme:e})=>{const t={duration:e.transitions.duration.shortest};return{position:"relative",transition:e.transitions.create(["margin"],t),overflowAnchor:"none","&::before":{position:"absolute",left:0,top:-1,right:0,height:1,content:'""',opacity:1,backgroundColor:(e.vars||e).palette.divider,transition:e.transitions.create(["opacity","background-color"],t)},"&:first-of-type":{"&::before":{display:"none"}},[`&.${J.expanded}`]:{"&::before":{opacity:0},"&:first-of-type":{marginTop:0},"&:last-of-type":{marginBottom:0},"& + &":{"&::before":{display:"none"}}},[`&.${J.disabled}`]:{backgroundColor:(e.vars||e).palette.action.disabledBackground}}},({theme:e})=>({variants:[{props:t=>!t.square,style:{borderRadius:0,"&:first-of-type":{borderTopLeftRadius:(e.vars||e).shape.borderRadius,borderTopRightRadius:(e.vars||e).shape.borderRadius},"&:last-of-type":{borderBottomLeftRadius:(e.vars||e).shape.borderRadius,borderBottomRightRadius:(e.vars||e).shape.borderRadius,"@supports (-ms-ime-align: auto)":{borderBottomLeftRadius:0,borderBottomRightRadius:0}}}},{props:t=>!t.disableGutters,style:{[`&.${J.expanded}`]:{margin:"16px 0"}}}]})),et=i.forwardRef(function(t,n){const r=D({props:t,name:"MuiAccordion"}),{children:l,className:a,defaultExpanded:c=!1,disabled:u=!1,disableGutters:f=!1,expanded:g,onChange:x,square:b=!1,slots:v={},slotProps:A={},TransitionComponent:N,TransitionProps:S}=r,y=H(r,Xe),[h,G]=Re({controlled:g,default:c,name:"Accordion",state:"expanded"}),L=i.useCallback(K=>{G(!h),x&&x(K,!h)},[h,x,G]),[w,...R]=i.Children.toArray(l),M=i.useMemo(()=>({expanded:h,disabled:u,disableGutters:f,toggle:L}),[h,u,f,L]),j=p({},r,{square:b,disabled:u,disableGutters:f,expanded:h}),F=Ke(j),U=p({transition:N},v),Y=p({transition:S},A),[X,V]=Me("transition",{elementType:Te,externalForwardedProps:{slots:U,slotProps:Y},ownerState:j});return o.jsxs(Ze,p({className:q(F.root,a),ref:n,ownerState:j,square:b},y,{children:[o.jsx(he.Provider,{value:M,children:w}),o.jsx(X,p({in:h,timeout:"auto"},V,{children:o.jsx("div",{"aria-labelledby":w.props.id,id:w.props["aria-controls"],role:"region",className:F.region,children:R})}))]}))});function tt(e){return z("MuiAccordionDetails",e)}O("MuiAccordionDetails",["root"]);const ot=["className"],at=e=>{const{classes:t}=e;return $({root:["root"]},tt,t)},rt=P("div",{name:"MuiAccordionDetails",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e})=>({padding:e.spacing(1,2,2)})),nt=i.forwardRef(function(t,n){const r=D({props:t,name:"MuiAccordionDetails"}),{className:l}=r,a=H(r,ot),c=r,u=at(c);return o.jsx(rt,p({className:q(u.root,l),ref:n,ownerState:c},a))});function st(e){return z("MuiAccordionSummary",e)}const W=O("MuiAccordionSummary",["root","expanded","focusVisible","disabled","gutters","contentGutters","content","expandIconWrapper"]),it=["children","className","expandIcon","focusVisibleClassName","onClick"],lt=e=>{const{classes:t,expanded:n,disabled:r,disableGutters:l}=e;return $({root:["root",n&&"expanded",r&&"disabled",!l&&"gutters"],focusVisible:["focusVisible"],content:["content",n&&"expanded",!l&&"contentGutters"],expandIconWrapper:["expandIconWrapper",n&&"expanded"]},st,t)},ct=P(Be,{name:"MuiAccordionSummary",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e})=>{const t={duration:e.transitions.duration.shortest};return{display:"flex",minHeight:48,padding:e.spacing(0,2),transition:e.transitions.create(["min-height","background-color"],t),[`&.${W.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},[`&.${W.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity},[`&:hover:not(.${W.disabled})`]:{cursor:"pointer"},variants:[{props:n=>!n.disableGutters,style:{[`&.${W.expanded}`]:{minHeight:64}}}]}}),dt=P("div",{name:"MuiAccordionSummary",slot:"Content",overridesResolver:(e,t)=>t.content})(({theme:e})=>({display:"flex",flexGrow:1,margin:"12px 0",variants:[{props:t=>!t.disableGutters,style:{transition:e.transitions.create(["margin"],{duration:e.transitions.duration.shortest}),[`&.${W.expanded}`]:{margin:"20px 0"}}}]})),ut=P("div",{name:"MuiAccordionSummary",slot:"ExpandIconWrapper",overridesResolver:(e,t)=>t.expandIconWrapper})(({theme:e})=>({display:"flex",color:(e.vars||e).palette.action.active,transform:"rotate(0deg)",transition:e.transitions.create("transform",{duration:e.transitions.duration.shortest}),[`&.${W.expanded}`]:{transform:"rotate(180deg)"}})),pt=i.forwardRef(function(t,n){const r=D({props:t,name:"MuiAccordionSummary"}),{children:l,className:a,expandIcon:c,focusVisibleClassName:u,onClick:f}=r,g=H(r,it),{disabled:x=!1,disableGutters:b,expanded:v,toggle:A}=i.useContext(he),N=h=>{A&&A(h),f&&f(h)},S=p({},r,{expanded:v,disabled:x,disableGutters:b}),y=lt(S);return o.jsxs(ct,p({focusRipple:!1,disableRipple:!0,disabled:x,component:"div","aria-expanded":v,className:q(y.root,a),focusVisibleClassName:q(y.focusVisible,u),onClick:N,ref:n,ownerState:S},g,{children:[o.jsx(dt,{className:y.content,ownerState:S,children:l}),c&&o.jsx(ut,{className:y.expandIconWrapper,ownerState:S,children:c})]}))}),Q=i.createContext({}),ne=i.createContext({});function bt(e){return z("MuiStep",e)}O("MuiStep",["root","horizontal","vertical","alternativeLabel","completed"]);const mt=["active","children","className","component","completed","disabled","expanded","index","last"],ft=e=>{const{classes:t,orientation:n,alternativeLabel:r,completed:l}=e;return $({root:["root",n,r&&"alternativeLabel",l&&"completed"]},bt,t)},xt=P("div",{name:"MuiStep",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.orientation],n.alternativeLabel&&t.alternativeLabel,n.completed&&t.completed]}})(({ownerState:e})=>p({},e.orientation==="horizontal"&&{paddingLeft:8,paddingRight:8},e.alternativeLabel&&{flex:1,position:"relative"})),ro=i.forwardRef(function(t,n){const r=D({props:t,name:"MuiStep"}),{active:l,children:a,className:c,component:u="div",completed:f,disabled:g,expanded:x=!1,index:b,last:v}=r,A=H(r,mt),{activeStep:N,connector:S,alternativeLabel:y,orientation:h,nonLinear:G}=i.useContext(Q);let[L=!1,w=!1,R=!1]=[l,f,g];N===b?L=l!==void 0?l:!0:!G&&N>b?w=f!==void 0?f:!0:!G&&N<b&&(R=g!==void 0?g:!0);const M=i.useMemo(()=>({index:b,last:v,expanded:x,icon:b+1,active:L,completed:w,disabled:R}),[b,v,x,L,w,R]),j=p({},r,{active:L,orientation:h,alternativeLabel:y,completed:w,disabled:R,expanded:x,component:u}),F=ft(j),U=o.jsxs(xt,p({as:u,className:q(F.root,c),ref:n,ownerState:j},A,{children:[S&&y&&b!==0?S:null,a]}));return o.jsx(ne.Provider,{value:M,children:S&&!y&&b!==0?o.jsxs(i.Fragment,{children:[S,U]}):U})}),gt=fe(o.jsx("path",{d:"M12 0a12 12 0 1 0 0 24 12 12 0 0 0 0-24zm-2 17l-5-5 1.4-1.4 3.6 3.6 7.6-7.6L19 8l-9 9z"}),"CheckCircle"),vt=fe(o.jsx("path",{d:"M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z"}),"Warning");function ht(e){return z("MuiStepIcon",e)}const oe=O("MuiStepIcon",["root","active","completed","error","text"]);var me;const It=["active","className","completed","error","icon"],Ct=e=>{const{classes:t,active:n,completed:r,error:l}=e;return $({root:["root",n&&"active",r&&"completed",l&&"error"],text:["text"]},ht,t)},ae=P(Fe,{name:"MuiStepIcon",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e})=>({display:"block",transition:e.transitions.create("color",{duration:e.transitions.duration.shortest}),color:(e.vars||e).palette.text.disabled,[`&.${oe.completed}`]:{color:(e.vars||e).palette.primary.main},[`&.${oe.active}`]:{color:(e.vars||e).palette.primary.main},[`&.${oe.error}`]:{color:(e.vars||e).palette.error.main}})),St=P("text",{name:"MuiStepIcon",slot:"Text",overridesResolver:(e,t)=>t.text})(({theme:e})=>({fill:(e.vars||e).palette.primary.contrastText,fontSize:e.typography.caption.fontSize,fontFamily:e.typography.fontFamily})),yt=i.forwardRef(function(t,n){const r=D({props:t,name:"MuiStepIcon"}),{active:l=!1,className:a,completed:c=!1,error:u=!1,icon:f}=r,g=H(r,It),x=p({},r,{active:l,completed:c,error:u}),b=Ct(x);if(typeof f=="number"||typeof f=="string"){const v=q(a,b.root);return u?o.jsx(ae,p({as:vt,className:v,ref:n,ownerState:x},g)):c?o.jsx(ae,p({as:gt,className:v,ref:n,ownerState:x},g)):o.jsxs(ae,p({className:v,ref:n,ownerState:x},g,{children:[me||(me=o.jsx("circle",{cx:"12",cy:"12",r:"12"})),o.jsx(St,{className:b.text,x:"12",y:"12",textAnchor:"middle",dominantBaseline:"central",ownerState:x,children:f})]}))}return f});function Lt(e){return z("MuiStepLabel",e)}const E=O("MuiStepLabel",["root","horizontal","vertical","label","active","completed","error","disabled","iconContainer","alternativeLabel","labelContainer"]),At=["children","className","componentsProps","error","icon","optional","slotProps","StepIconComponent","StepIconProps"],jt=e=>{const{classes:t,orientation:n,active:r,completed:l,error:a,disabled:c,alternativeLabel:u}=e;return $({root:["root",n,a&&"error",c&&"disabled",u&&"alternativeLabel"],label:["label",r&&"active",l&&"completed",a&&"error",c&&"disabled",u&&"alternativeLabel"],iconContainer:["iconContainer",r&&"active",l&&"completed",a&&"error",c&&"disabled",u&&"alternativeLabel"],labelContainer:["labelContainer",u&&"alternativeLabel"]},Lt,t)},Nt=P("span",{name:"MuiStepLabel",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.orientation]]}})(({ownerState:e})=>p({display:"flex",alignItems:"center",[`&.${E.alternativeLabel}`]:{flexDirection:"column"},[`&.${E.disabled}`]:{cursor:"default"}},e.orientation==="vertical"&&{textAlign:"left",padding:"8px 0"})),Pt=P("span",{name:"MuiStepLabel",slot:"Label",overridesResolver:(e,t)=>t.label})(({theme:e})=>p({},e.typography.body2,{display:"block",transition:e.transitions.create("color",{duration:e.transitions.duration.shortest}),[`&.${E.active}`]:{color:(e.vars||e).palette.text.primary,fontWeight:500},[`&.${E.completed}`]:{color:(e.vars||e).palette.text.primary,fontWeight:500},[`&.${E.alternativeLabel}`]:{marginTop:16},[`&.${E.error}`]:{color:(e.vars||e).palette.error.main}})),Rt=P("span",{name:"MuiStepLabel",slot:"IconContainer",overridesResolver:(e,t)=>t.iconContainer})(()=>({flexShrink:0,display:"flex",paddingRight:8,[`&.${E.alternativeLabel}`]:{paddingRight:0}})),Mt=P("span",{name:"MuiStepLabel",slot:"LabelContainer",overridesResolver:(e,t)=>t.labelContainer})(({theme:e})=>({width:"100%",color:(e.vars||e).palette.text.secondary,[`&.${E.alternativeLabel}`]:{textAlign:"center"}})),Tt=i.forwardRef(function(t,n){var r;const l=D({props:t,name:"MuiStepLabel"}),{children:a,className:c,componentsProps:u={},error:f=!1,icon:g,optional:x,slotProps:b={},StepIconComponent:v,StepIconProps:A}=l,N=H(l,At),{alternativeLabel:S,orientation:y}=i.useContext(Q),{active:h,disabled:G,completed:L,icon:w}=i.useContext(ne),R=g||w;let M=v;R&&!M&&(M=yt);const j=p({},l,{active:h,alternativeLabel:S,completed:L,disabled:G,error:f,orientation:y}),F=jt(j),U=(r=b.label)!=null?r:u.label;return o.jsxs(Nt,p({className:q(F.root,c),ref:n,ownerState:j},N,{children:[R||M?o.jsx(Rt,{className:F.iconContainer,ownerState:j,children:o.jsx(M,p({completed:L,active:h,error:f,icon:R},A))}):null,o.jsxs(Mt,{className:F.labelContainer,ownerState:j,children:[a?o.jsx(Pt,p({ownerState:j},U,{className:q(F.label,U==null?void 0:U.className),children:a})):null,x]})]}))});Tt.muiName="StepLabel";function Bt(e){return z("MuiStepConnector",e)}O("MuiStepConnector",["root","horizontal","vertical","alternativeLabel","active","completed","disabled","line","lineHorizontal","lineVertical"]);const Ft=["className"],Gt=e=>{const{classes:t,orientation:n,alternativeLabel:r,active:l,completed:a,disabled:c}=e,u={root:["root",n,r&&"alternativeLabel",l&&"active",a&&"completed",c&&"disabled"],line:["line",`line${xe(n)}`]};return $(u,Bt,t)},wt=P("div",{name:"MuiStepConnector",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.orientation],n.alternativeLabel&&t.alternativeLabel,n.completed&&t.completed]}})(({ownerState:e})=>p({flex:"1 1 auto"},e.orientation==="vertical"&&{marginLeft:12},e.alternativeLabel&&{position:"absolute",top:12,left:"calc(-50% + 20px)",right:"calc(50% + 20px)"})),kt=P("span",{name:"MuiStepConnector",slot:"Line",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.line,t[`line${xe(n.orientation)}`]]}})(({ownerState:e,theme:t})=>{const n=t.palette.mode==="light"?t.palette.grey[400]:t.palette.grey[600];return p({display:"block",borderColor:t.vars?t.vars.palette.StepConnector.border:n},e.orientation==="horizontal"&&{borderTopStyle:"solid",borderTopWidth:1},e.orientation==="vertical"&&{borderLeftStyle:"solid",borderLeftWidth:1,minHeight:24})}),Ut=i.forwardRef(function(t,n){const r=D({props:t,name:"MuiStepConnector"}),{className:l}=r,a=H(r,Ft),{alternativeLabel:c,orientation:u="horizontal"}=i.useContext(Q),{active:f,disabled:g,completed:x}=i.useContext(ne),b=p({},r,{alternativeLabel:c,orientation:u,active:f,completed:x,disabled:g}),v=Gt(b);return o.jsx(wt,p({className:q(v.root,l),ref:n,ownerState:b},a,{children:o.jsx(kt,{className:v.line,ownerState:b})}))});function qt(e){return z("MuiStepper",e)}O("MuiStepper",["root","horizontal","vertical","nonLinear","alternativeLabel"]);const Et=["activeStep","alternativeLabel","children","className","component","connector","nonLinear","orientation"],Ot=e=>{const{orientation:t,nonLinear:n,alternativeLabel:r,classes:l}=e;return $({root:["root",t,n&&"nonLinear",r&&"alternativeLabel"]},qt,l)},zt=P("div",{name:"MuiStepper",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.orientation],n.alternativeLabel&&t.alternativeLabel,n.nonLinear&&t.nonLinear]}})(({ownerState:e})=>p({display:"flex"},e.orientation==="horizontal"&&{flexDirection:"row",alignItems:"center"},e.orientation==="vertical"&&{flexDirection:"column"},e.alternativeLabel&&{alignItems:"flex-start"})),Dt=o.jsx(Ut,{}),no=i.forwardRef(function(t,n){const r=D({props:t,name:"MuiStepper"}),{activeStep:l=0,alternativeLabel:a=!1,children:c,className:u,component:f="div",connector:g=Dt,nonLinear:x=!1,orientation:b="horizontal"}=r,v=H(r,Et),A=p({},r,{nonLinear:x,alternativeLabel:a,orientation:b,component:f}),N=Ot(A),S=i.Children.toArray(c).filter(Boolean),y=S.map((G,L)=>i.cloneElement(G,p({index:L,last:L+1===S.length},G.props))),h=i.useMemo(()=>({activeStep:l,alternativeLabel:a,connector:g,nonLinear:x,orientation:b}),[l,a,g,x,b]);return o.jsx(Q.Provider,{value:h,children:o.jsx(zt,p({as:f,ownerState:A,className:q(N.root,u),ref:n},v,{children:y}))})});var se={},Ht=ve;Object.defineProperty(se,"__esModule",{value:!0});var Ie=se.default=void 0,$t=Ht(ge()),Wt=o;Ie=se.default=(0,$t.default)((0,Wt.jsx)("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6z"}),"AddOutlined");var ie={},Vt=ve;Object.defineProperty(ie,"__esModule",{value:!0});var re=ie.default=void 0,_t=Vt(ge()),Yt=o;re=ie.default=(0,_t.default)((0,Yt.jsx)("path",{d:"M16.59 8.59 12 13.17 7.41 8.59 6 10l6 6 6-6z"}),"ExpandMore");const Jt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAACXBIWXMAAAsTAAALEwEAmpwYAAAC1ElEQVR4nO2bsU5UQRSGpxELXGNhI2AMYNRYWeojQFS0E30CBU0IjfEdTDBWGB+AGOwUCjtJjFgYExJFa1/AhYbI+pmT/ZeMu2B2752d2YX5yrs75z/zn7kzd3PPOpfJZDIdAJwFZoFV4BuwTXts6/srwAww4voJYBhYBH4ThhrwCjjneh3gJlBV4jvAEnAHuAgMthljUN+f1niLg+LecL0K8FDVQhUbDRR3DFj2VsOs69HK14BdYK5LGvOKX+uplUD9nm8s+7kua5kJxi/gjOsFgJeNZR9J77X0FmPotXPU7WqjGo2kOS49O2WGY2geiM55Y8lFRJus8SCmbgt6WDGmXUSAe9J9E1O3BeCHEjnvIqLnBGMzpm4LwJYSOeEiYnrS3Yqp20LjWdUdMe09sgHCHTHtnjQAWCMMa4WTOCQG0JcGhCAbILrnWEC6oZ0NEEmrkFI7GyCSViGldjZAJK1CSu1sgEhahZTa2QCRtAoptbMBImkVUmpnA0TSKqTUzgaIpFVIqZ0NEEEcA46ra+RjBw1Szdhb4E/AZOlqlZxPRwPUNPGFsEz2hQHUK9+YvLW7TQGVggkNAI8Va71UshENeORN/lSApCqKVy2VbEQD1nV5KkBCtgKeNK+Ag0xJYUBVYyr7vDL/Z9mXfHPzB5jwYl3V9Y3UBnzXmAv/M6WEATs6RSaaYj3X50/DTL24ASvNLTJK2LgVMjkv/hUZY81Zl1MbMNPcJOU1Tm2G2AT3mfxPxV8IGbuoASNqV7OKjHkb12fPhNvAyZLtMNe07Bt9w++AY0VjBjPAAF5o3LJ3bcgzISRm9kI3Jl/GgCFv45v3rg/oFvngnQxFsLEbtuGFvueDGGBY87LXLL1nQr9R2ABv82u0y1s/77g7SgYYwHV1cqMNy1pa7wKXYvcSJjHAAE4DzwL+ZSY6LgTUfxLfB94CX0tuhDF5H8SATCaTybjDw18JVhz+QhIOiQAAAABJRU5ErkJggg==",Qt=()=>{const{user:e}=Ge(),[t,n]=i.useState({}),[r,l]=i.useState([]),[a,c]=i.useState({fabricationId:0,designId:"",planningHeaderId:"",batchNo:"",baseColorId:"",baseColorName:"",fabricId:"",poPcs:"",quantity:"",rate:"",uomId:"",total:"",unitPrice:"0",gst:"",totalInclGst:"",createdOn:new Date().toISOString(),createdBy:e.empId,lastUpdatedOn:new Date().toISOString(),lastUpdatedBy:e.empId});i.useEffect(()=>{c({fabricationId:r.fabricationId||0,designId:r.designId||"",planningHeaderId:r.planningHeaderId||"",batchNo:r.batchNo||"",baseColorId:r.baseColorId||"",baseColorName:r.baseColorName||"",fabricId:r.fabricId||"",poPcs:r.poPcs||"",quantity:r.quantity||"",rate:r.rate||"",uomId:r.uomId||"",total:r.total||"",unitPrice:r.unitPrice||"0",gst:r.gst||"",totalInclGst:r.totalInclGst||"",createdOn:(r==null?void 0:r.createdOn)||new Date().toISOString(),createdBy:(r==null?void 0:r.createdBy)||e.empId,lastUpdatedOn:new Date().toISOString(),lastUpdatedBy:e.empId})},[r]);const{enqueueSnackbar:u}=we(),[f,g]=i.useState(!1),x=(s,d)=>{g(!f)},[b,v]=i.useState(!1),{data:A}=ke();console.log(A);const[N,S]=i.useState(""),{data:y}=Ue(),{data:h,refetch:G}=qe(N,{skip:!N}),{data:L,refetch:w}=Ee(a.designId,{skip:!a.designId}),{data:R}=Oe({batchNo:a.planningHeaderId,processType:"PrePlanning"},{skip:!a.planningHeaderId}),{data:M,refetch:j}=ze(a.planningHeaderId,{skip:!a.planningHeaderId});console.log("fabricRequisitionData",M);const[F,U]=i.useState([]),[Y,X]=i.useState([]),[V,K]=i.useState([]),[Ce,Se]=i.useState([]),[Z,ye]=i.useState([]);console.log("planningHeaderId",a.planningHeaderId),console.log("Fabrications",V),i.useEffect(()=>{h&&U(h.result)},[h]),i.useEffect(()=>{L&&X(L.result)},[L]),i.useEffect(()=>{R&&K(R.result)},[R]),i.useEffect(()=>{M&&ye(M.result.map((s,d)=>({id:d,...s})))},[M,j]),i.useEffect(()=>{if(y){const s=y.result[0];Se(s.uomList)}},[y]);const le=(A==null?void 0:A.result)||[];i.useEffect(()=>{const s=()=>{const m=parseFloat(a.quantity)||0,k=parseFloat(a.rate)||0;return(m*k).toFixed(2)};c(m=>({...m,total:s()}));const d=()=>{const m=parseFloat(a.total)||0,k=parseFloat(a.gst)||0;return(m*(1+k/100)).toFixed(2)};c(m=>({...m,totalInclGst:d()}));const I=()=>{const m=parseFloat(a.total)||0,k=parseFloat(a.poPcs)||0,be=(m/k).toFixed(2);return isNaN(be)?0:be};c(m=>({...m,unitPrice:I()}))},[a.quantity,a.rate,a.total,a.gst]);const T=s=>{const{name:d,value:I}=s.target;if(d==="collectionId")le.find(m=>m.collectionId===parseInt(I)),S(I),v(!0),c({...a,designId:"",baseColorId:"",planningHeaderId:"",batchNo:"",fabricId:"",poPcs:"",quantity:"",rate:"",uomId:"",total:"",unitPrice:"0",gst:"",totalInclGst:"",collectionId:I});else if(d==="designId"){const m=F.find(k=>k.designId===parseInt(I));c({...a,planningHeaderId:"",batchNo:"",fabricId:"",poPcs:"",quantity:"",rate:"",uomId:"",total:"",unitPrice:"0",gst:"",totalInclGst:"",designId:I,baseColorId:m?m.colorId:"",baseColorName:m?m.colorName:""})}else if(d==="batchNo"){const m=Y.find(k=>k.batchNo===I);c({...a,fabricId:"",quantity:"",rate:"",uomId:"",total:"",unitPrice:"0",gst:"",totalInclGst:"",batchNo:I,planningHeaderId:m?m.planningHeaderId:"",poPcs:m?m.poPcs:""}),g(!0),v(!1)}else if(d==="fabricId"){const m=V.find(k=>k.fabricId===I);c({...a,fabricId:I,quantity:m?m.total:""})}else c({...a,[d]:I}),n(m=>({...m,[d]:""}))},ce=Z.reduce((s,d)=>s+(parseFloat(d.total)||0),0).toFixed(2),de=parseFloat(ce).toLocaleString(),ue=Z.reduce((s,d)=>s+(parseFloat(d.totalInclGst)||0),0).toFixed(2),pe=parseFloat(ue).toLocaleString();console.log("overallTotal",ce),console.log("overallTotalIncGst",ue),console.log("localizedTotal",de),console.log("localizedTotalIncGst",pe);const Le=[...Z,{id:"TOTAL_FABRIC",label:"Total",total:de,totalInclGst:pe}],Ae=[{field:"designNo",headerName:"Design",colSpan:(s,d)=>{if(d.id==="TOTAL_FABRIC")return 6},valueGetter:(s,d)=>d.id==="TOTAL_FABRIC"?d.label:s},{field:"fabricName",headerName:"Fabric"},{field:"poPcs",headerName:"PO. Pieces"},{field:"quantity",headerName:"Quantity"},{field:"rate",headerName:"Rate"},{field:"uomName",headerName:"UOM"},{field:"total",headerName:"Total",valueGetter:s=>s.toLocaleString()},{field:"unitPrice",headerName:"Unit Price",colSpan:(s,d)=>{if(d.id==="TOTAL_FABRIC")return 2},valueGetter:(s,d)=>d.id==="TOTAL_FABRIC"?"Total Including GST":s},{field:"gst",headerName:"GST"},{field:"totalInclGst",headerName:"Total Inc. GST",valueGetter:s=>s.toLocaleString(),colSpan:(s,d)=>{if(d.id==="TOTAL_FABRIC")return 2}}],je=async()=>{const s=Ne();if(Object.keys(s).length>0){n(s);return}try{const d=await Ve.post("https://gecxc.com:4041/api/Fabrication/SaveFabrication",a);console.log("Save response:",d.data),d.data.success?u("Fabrication saved successfully!",{variant:"success",autoHideDuration:5e3}):(u(`${d.data.message} !`,{variant:"error",autoHideDuration:5e3}),console.log("response.message",d.data.message)),c(I=>({designId:I.designId,batchNo:I.batchNo,planningHeaderId:I.planningHeaderId,fabricationId:0,baseColorId:I.baseColorId,baseColorName:I.baseColorName,fabricId:"",poPcs:I.poPcs,quantity:"",rate:"",uomId:"",total:"",unitPrice:"0",gst:"",totalInclGst:"",createdOn:new Date().toISOString(),createdBy:e.empId,lastUpdatedOn:new Date().toISOString(),lastUpdatedBy:e.empId})),j()}catch(d){console.error("Error saving data:",d),u("Fabrication not saved successfully!",{variant:"error",autoHideDuration:5e3})}},Ne=()=>{const s={};return a.fabricId||(s.fabricId="fabricId is required"),a.gst||(s.gst="gst is required"),a.uomId||(s.uomId="uomId is required"),a.rate||(s.rate="rate is required"),s};return console.log("formData",a),o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"CardHeader",children:o.jsxs(ee,{variant:"outlined",children:[o.jsx(te,{className:"css-4rfrnx-MuiCardHeader-root",avatar:o.jsx(De,{src:Jt,sx:{background:"transparent"}}),title:"Fabric Requisition",titleTypographyProps:{style:{color:"white"}}}),o.jsxs(C,{container:!0,spacing:1,width:"Inherit",sx:{paddingY:2,paddingX:2},children:[o.jsxs(C,{item:!0,xs:12,md:3,children:[o.jsx(B,{fullWidth:!0,select:!0,label:"Select Collection",name:"collectionId",value:N,onChange:T,size:"small",required:!0,InputLabelProps:{sx:{color:"black"}},children:le.map(s=>o.jsx(_,{value:s.collectionId,children:s.collectionName},s.collectionId))})," "]}),o.jsx(C,{item:!0,xs:12,md:3,children:o.jsx(B,{fullWidth:!0,select:!0,label:"Select Design",name:"designId",value:a.designId,onChange:T,size:"small",required:!0,InputLabelProps:{sx:{color:"black"}},children:F.map(s=>o.jsx(_,{value:s.designId,children:s.designNo},s.designId))})}),o.jsxs(C,{item:!0,xs:12,md:3,children:[o.jsx(B,{fullWidth:!0,select:!0,label:"Batch No.",name:"batchNo",value:a.batchNo,onChange:T,size:"small",required:!0,InputLabelProps:{sx:{color:"black"}},children:Y.map(s=>o.jsx(_,{value:s.batchNo,children:s.batchNo},s.batchNo))})," "]}),o.jsx(C,{item:!0,xs:12,md:3,children:o.jsx(B,{label:"Base Color",fullWidth:!0,size:"small",name:"baseColorName",value:a.baseColorName,onChange:T,disabled:!0,sx:s=>({...a.baseColorName!==""&&{".css-4a5t8g-MuiInputBase-input-MuiOutlinedInput-input":{backgroundColor:"#c9c9c9 !important"}},"& .MuiInputBase-input.Mui-disabled":{WebkitTextFillColor:"black"},"& .MuiInputBase-root.Mui-disabled":{backgroundColor:"#f9f9f9"},"& .MuiOutlinedInput-root.Mui-disabled .MuiOutlinedInput-notchedOutline":{borderColor:"gray"},"& .MuiInputLabel-root.Mui-disabled":{color:"rgba(0, 0, 0, 0.87)"}})})})]})]})}),o.jsxs(ee,{variant:"outlined",children:[o.jsx(te,{className:"css-4rfrnx-MuiCardHeader-root",avatar:o.jsx(Ie,{}),title:"Add Fabric Requisition",titleTypographyProps:{style:{color:"white"}},action:o.jsx($e,{onClick:x,sx:{mt:"-18px"},children:o.jsx(re,{style:{color:"white"}})}),sx:{display:"flex",alignItems:"center",justifyContent:"space-between"}}),o.jsxs(et,{expanded:f,onChange:x,sx:{},children:[o.jsx(pt,{expandIcon:o.jsx(re,{}),"aria-controls":"panel1-content",id:"panel1-header",sx:{display:"none"}}),o.jsx(nt,{children:o.jsxs(C,{container:!0,spacing:1,width:"Inherit",sx:{paddingY:2,paddingX:2},children:[o.jsx(C,{item:!0,xs:12,md:3,children:o.jsx(B,{fullWidth:!0,select:!0,label:"Select Fabric",defaultValue:"",size:"small",name:"fabricId",value:a.fabricId,onChange:T,required:!0,error:!!t.fabricId,helperText:t.fabricId,InputLabelProps:{sx:{color:"black"}},children:V.map(s=>o.jsx(_,{value:s.fabricId,children:s.fabric},s.fabricId))})}),o.jsx(C,{item:!0,xs:12,md:3,children:o.jsx(B,{fullWidth:!0,select:!0,label:"UOM",defaultValue:"",size:"small",name:"uomId",value:a.uomId,onChange:T,required:!0,error:!!t.uomId,helperText:t.uomId,InputLabelProps:{sx:{color:"black"}},children:Ce.map(s=>o.jsx(_,{value:s.lookUpId,children:s.lookUpName},s.lookUpId))})}),o.jsx(C,{item:!0,xs:12,md:1.5,children:o.jsx(B,{label:"Po Pcs",fullWidth:!0,type:"number",size:"small",name:"poPcs",value:a.poPcs,onChange:T,disabled:!0,sx:s=>({...a.poPcs!==""&&{".css-4a5t8g-MuiInputBase-input-MuiOutlinedInput-input":{backgroundColor:"#c9c9c9 !important"}},"& .MuiInputBase-input.Mui-disabled":{WebkitTextFillColor:"black"},"& .MuiInputBase-root.Mui-disabled":{backgroundColor:"#f9f9f9"},"& .MuiOutlinedInput-root.Mui-disabled .MuiOutlinedInput-notchedOutline":{borderColor:"gray"},"& .MuiInputLabel-root.Mui-disabled":{color:"rgba(0, 0, 0, 0.87)"}})})}),o.jsx(C,{item:!0,xs:12,md:1.5,children:o.jsx(B,{label:"Quantity",fullWidth:!0,size:"small",type:"number",name:"quantity",value:a.quantity,onChange:T,InputLabelProps:{sx:{color:"black"}}})}),o.jsx(C,{item:!0,xs:12,md:1.5,children:o.jsx(B,{label:"Rate",fullWidth:!0,size:"small",type:"number",name:"rate",value:a.rate,onChange:T,required:!0,error:!!t.rate,helperText:t.rate,InputLabelProps:{sx:{color:"black"}}})}),o.jsx(C,{item:!0,xs:12,md:1.5,children:o.jsx(B,{label:"Total",fullWidth:!0,size:"small",type:"number",name:"total",value:a.total,onChange:T,InputLabelProps:{sx:{color:"black"}}})}),o.jsx(C,{item:!0,xs:12,md:1.5,children:o.jsx(B,{label:"Unit Price",fullWidth:!0,size:"small",name:"unitPrice",value:a.unitPrice,onChange:T,InputLabelProps:{sx:{color:"black"}}})}),o.jsx(C,{item:!0,xs:12,md:1.5,children:o.jsx(B,{label:"GST",fullWidth:!0,size:"small",type:"number",name:"gst",value:a.gst,onChange:T,required:!0,error:!!t.gst,helperText:t.gst,InputLabelProps:{sx:{color:"black"}}})}),o.jsx(C,{item:!0,xs:12,md:3,children:o.jsx(B,{label:"Total Inc GST.",fullWidth:!0,size:"small",type:"number",name:"totalInclGst",value:a.totalInclGst,onChange:T,InputLabelProps:{sx:{color:"black"}}})}),o.jsx(C,{item:!0,xs:12,textAlign:"right",children:o.jsx(We,{variant:"contained",size:"small",onClick:je,children:"Save"})})]})})]})]}),o.jsx(C,{item:!0,xs:12,md:12,children:o.jsx(He,{sx:{height:1,width:"100%",marginTop:1,marginBottom:0}})}),o.jsxs(ee,{variant:"outlined",children:[o.jsx(te,{className:"css-4rfrnx-MuiCardHeader-root",avatar:o.jsx(_e,{}),title:"View",titleTypographyProps:{style:{color:"white"}}}),o.jsx(C,{container:!0,spacing:2,width:"Inherit",sx:{paddingY:2,paddingX:2},children:o.jsx(C,{sx:{marginTop:2},item:!0,xs:12,children:b?o.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"},children:o.jsx("img",{src:Ye,alt:"Loading",style:{width:200,height:200}})}):o.jsx(Je,{iColumns:Ae,initialRows:Le,setInitialData:l,deleteApi:"https://gecxc.com:4041/api/Fabrication/DeleteFabricByFabricId?fabricationId=",deleteBy:"fabricationId",refetch:j,setAccordionExpanded:g,fileName:"Fabrication Requistion List"})})})]})]})},so=Qt;export{et as A,so as F,no as S,ro as a,Tt as b,re as c,Ie as d,pt as e,nt as f};
