import{j as s,C as E,d as T,G as i}from"./index-39l8sM5Y.js";import{r as c}from"./vendor-BXCbSo2_.js";import{T as I}from"./TextField-B7IP_ndE.js";import{M as y}from"./MenuItem-qJMJ5sWO.js";const H=({rId:l,DyeingIssuance:d,ogpView:a,receiving:u,paramIssuanceId:S,OGPNumber:f,ogpNumber:j,issuanceOgp:G})=>{const[m,P]=c.useState([]),[r,h]=c.useState(""),[$,R]=c.useState(""),[U,x]=c.useState(""),n=c.useRef(null);c.useEffect(()=>{(async()=>{try{const o=await(await fetch("http://100.42.177.77:83/api/Reports/GetReportsByAppId?appId=1")).json();if(P(o.result),l){const p=o.result.find(C=>C.reportId===l);p&&(R(l),h(p.reportUrl),x(p.reportDesc))}}catch(t){console.error("Error fetching reports:",t)}})()},[l]);const b=e=>{const t=e.target.value,o=m.find(p=>p.reportId===t);R(t),h(o?o.reportUrl:""),x(o?o.reportDesc:"")};return c.useEffect(()=>{if(a){const e=n.current;if(e&&r){const t=`${r}&ParamIssuanceId=${(a==null?void 0:a.paramIssuanceId)||""}&ParamOGP=${(a==null?void 0:a.ogpNumber)||""}`;e.src=t}}if(f){const e=n.current;if(e&&r){const t=`${r}&ParamIGPNumber=${f||""}`;e.src=t}}if(d){const e=n.current;if(e&&r){const t=`${r}&ParamIssuanceId=${(d==null?void 0:d.paramIssuanceId)||""}`;e.src=t}}if(u){const e=n.current;if(e&&r){const t=`${r}&ParamIssuanceId=${(u==null?void 0:u.paramIssuanceId)||""}`;e.src=t}}},[r,S,f,j]),s.jsxs(E,{variant:"outlined",children:[s.jsx(T,{className:"css-4rfrnx-MuiCardHeader-root",title:"View Reports ",titleTypographyProps:{style:{color:"white"}}})," ",s.jsxs(i,{container:!0,spacing:2,width:"Inherit",sx:{paddingY:2,paddingX:2},children:[s.jsx(i,{item:!0,xs:12,md:6,children:s.jsx(I,{fullWidth:!0,select:!0,label:"Select Report",name:"selectedReport",value:l||$,onChange:b,size:"small",InputLabelProps:{sx:{color:"black"}},children:m.map(e=>s.jsx(y,{value:e.reportId,children:e.reportName},e.reportId))})}),s.jsx(i,{item:!0,xs:12,md:6,children:s.jsx(I,{fullWidth:!0,label:"Report Description",name:"selectedReportDesc",value:U,InputProps:{readOnly:!0},size:"small",InputLabelProps:{sx:{color:"black"}}})})]}),r&&s.jsx("iframe",{ref:n,src:r,style:{height:"80vh",width:"100%",border:"none",marginTop:"20px"},title:"SSRS Report"})]})};export{H as default};
