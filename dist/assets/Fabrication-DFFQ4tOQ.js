import{r as i,o as k,p as z,s as P,ah as ge,i as V,ai as he,_ as u,aj as Ce,ak as Se,j as a,l as E,al as oe,g as W,q as ye,z as O,am as ue,an as Ie,h as me,a2 as se,a3 as ne,b as je,a4 as Ae,a as Le,a5 as Ne,a6 as Re,ac as Pe,ao as Me,C as Z,d as K,aa as Fe,G as S,S as Te,D as Ue}from"./index-C9WX4c-1.js";import{a as Be}from"./axios-BWHFMaIN.js";import{F as Ge}from"./EditAbleDataGrid-BiCA0Ju3.js";import{T as F,B as we}from"./TextField-MycDRbzs.js";import{M as H}from"./Skeleton-DYWKFd7F.js";const be=i.createContext({});function De(e){return z("MuiAccordion",e)}const _=k("MuiAccordion",["root","rounded","expanded","disabled","gutters","region"]),Ee=["children","className","defaultExpanded","disabled","disableGutters","expanded","onChange","square","slots","slotProps","TransitionComponent","TransitionProps"],$e=oe(),ke=e=>{const{classes:t,square:o,expanded:s,disabled:r,disableGutters:l}=e;return W({root:["root",!o&&"rounded",s&&"expanded",r&&"disabled",!l&&"gutters"],region:["region"]},De,t)},ze=P(ge,{name:"MuiAccordion",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[{[`& .${_.region}`]:t.region},t.root,!o.square&&t.rounded,!o.disableGutters&&t.gutters]}})(({theme:e})=>{const t={duration:e.transitions.duration.shortest};return{position:"relative",transition:e.transitions.create(["margin"],t),overflowAnchor:"none","&::before":{position:"absolute",left:0,top:-1,right:0,height:1,content:'""',opacity:1,backgroundColor:(e.vars||e).palette.divider,transition:e.transitions.create(["opacity","background-color"],t)},"&:first-of-type":{"&::before":{display:"none"}},[`&.${_.expanded}`]:{"&::before":{opacity:0},"&:first-of-type":{marginTop:0},"&:last-of-type":{marginBottom:0},"& + &":{"&::before":{display:"none"}}},[`&.${_.disabled}`]:{backgroundColor:(e.vars||e).palette.action.disabledBackground}}},({theme:e})=>({variants:[{props:t=>!t.square,style:{borderRadius:0,"&:first-of-type":{borderTopLeftRadius:(e.vars||e).shape.borderRadius,borderTopRightRadius:(e.vars||e).shape.borderRadius},"&:last-of-type":{borderBottomLeftRadius:(e.vars||e).shape.borderRadius,borderBottomRightRadius:(e.vars||e).shape.borderRadius,"@supports (-ms-ime-align: auto)":{borderBottomLeftRadius:0,borderBottomRightRadius:0}}}},{props:t=>!t.disableGutters,style:{[`&.${_.expanded}`]:{margin:"16px 0"}}}]})),Ve=i.forwardRef(function(t,o){const s=$e({props:t,name:"MuiAccordion"}),{children:r,className:l,defaultExpanded:d=!1,disabled:p=!1,disableGutters:x=!1,expanded:f,onChange:m,square:b=!1,slots:v={},slotProps:T={},TransitionComponent:L,TransitionProps:h}=s,y=V(s,Ee),[C,U]=he({controlled:f,default:d,name:"Accordion",state:"expanded"}),A=i.useCallback(X=>{U(!C),m&&m(X,!C)},[C,m,U]),[B,...M]=i.Children.toArray(r),w=i.useMemo(()=>({expanded:C,disabled:p,disableGutters:x,toggle:A}),[C,p,x,A]),N=u({},s,{square:b,disabled:p,disableGutters:x,expanded:C}),G=ke(N),D=u({transition:L},v),Q=u({transition:h},T),[Y,R]=Ce("transition",{elementType:Se,externalForwardedProps:{slots:D,slotProps:Q},ownerState:N});return a.jsxs(ze,u({className:E(G.root,l),ref:o,ownerState:N,square:b},y,{children:[a.jsx(be.Provider,{value:w,children:B}),a.jsx(Y,u({in:C,timeout:"auto"},R,{children:a.jsx("div",{"aria-labelledby":B.props.id,id:B.props["aria-controls"],role:"region",className:G.region,children:M})}))]}))});function We(e){return z("MuiAccordionDetails",e)}k("MuiAccordionDetails",["root"]);const qe=["className"],He=oe(),Oe=e=>{const{classes:t}=e;return W({root:["root"]},We,t)},Ye=P("div",{name:"MuiAccordionDetails",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e})=>({padding:e.spacing(1,2,2)})),_e=i.forwardRef(function(t,o){const s=He({props:t,name:"MuiAccordionDetails"}),{className:r}=s,l=V(s,qe),d=s,p=Oe(d);return a.jsx(Ye,u({className:E(p.root,r),ref:o,ownerState:d},l))});function Je(e){return z("MuiAccordionSummary",e)}const q=k("MuiAccordionSummary",["root","expanded","focusVisible","disabled","gutters","contentGutters","content","expandIconWrapper"]),Qe=["children","className","expandIcon","focusVisibleClassName","onClick"],Xe=oe(),Ze=e=>{const{classes:t,expanded:o,disabled:s,disableGutters:r}=e;return W({root:["root",o&&"expanded",s&&"disabled",!r&&"gutters"],focusVisible:["focusVisible"],content:["content",o&&"expanded",!r&&"contentGutters"],expandIconWrapper:["expandIconWrapper",o&&"expanded"]},Je,t)},Ke=P(ye,{name:"MuiAccordionSummary",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e})=>{const t={duration:e.transitions.duration.shortest};return{display:"flex",minHeight:48,padding:e.spacing(0,2),transition:e.transitions.create(["min-height","background-color"],t),[`&.${q.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},[`&.${q.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity},[`&:hover:not(.${q.disabled})`]:{cursor:"pointer"},variants:[{props:o=>!o.disableGutters,style:{[`&.${q.expanded}`]:{minHeight:64}}}]}}),et=P("div",{name:"MuiAccordionSummary",slot:"Content",overridesResolver:(e,t)=>t.content})(({theme:e})=>({display:"flex",flexGrow:1,margin:"12px 0",variants:[{props:t=>!t.disableGutters,style:{transition:e.transitions.create(["margin"],{duration:e.transitions.duration.shortest}),[`&.${q.expanded}`]:{margin:"20px 0"}}}]})),tt=P("div",{name:"MuiAccordionSummary",slot:"ExpandIconWrapper",overridesResolver:(e,t)=>t.expandIconWrapper})(({theme:e})=>({display:"flex",color:(e.vars||e).palette.action.active,transform:"rotate(0deg)",transition:e.transitions.create("transform",{duration:e.transitions.duration.shortest}),[`&.${q.expanded}`]:{transform:"rotate(180deg)"}})),at=i.forwardRef(function(t,o){const s=Xe({props:t,name:"MuiAccordionSummary"}),{children:r,className:l,expandIcon:d,focusVisibleClassName:p,onClick:x}=s,f=V(s,Qe),{disabled:m=!1,disableGutters:b,expanded:v,toggle:T}=i.useContext(be),L=C=>{T&&T(C),x&&x(C)},h=u({},s,{expanded:v,disabled:m,disableGutters:b}),y=Ze(h);return a.jsxs(Ke,u({focusRipple:!1,disableRipple:!0,disabled:m,component:"div","aria-expanded":v,className:E(y.root,l),focusVisibleClassName:E(y.focusVisible,p),onClick:L,ref:o,ownerState:h},f,{children:[a.jsx(et,{className:y.content,ownerState:h,children:r}),d&&a.jsx(tt,{className:y.expandIconWrapper,ownerState:h,children:d})]}))}),J=i.createContext({}),re=i.createContext({});function ot(e){return z("MuiStep",e)}k("MuiStep",["root","horizontal","vertical","alternativeLabel","completed"]);const st=["active","children","className","component","completed","disabled","expanded","index","last"],nt=e=>{const{classes:t,orientation:o,alternativeLabel:s,completed:r}=e;return W({root:["root",o,s&&"alternativeLabel",r&&"completed"]},ot,t)},rt=P("div",{name:"MuiStep",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.root,t[o.orientation],o.alternativeLabel&&t.alternativeLabel,o.completed&&t.completed]}})(({ownerState:e})=>u({},e.orientation==="horizontal"&&{paddingLeft:8,paddingRight:8},e.alternativeLabel&&{flex:1,position:"relative"})),Xt=i.forwardRef(function(t,o){const s=O({props:t,name:"MuiStep"}),{active:r,children:l,className:d,component:p="div",completed:x,disabled:f,expanded:m=!1,index:b,last:v}=s,T=V(s,st),{activeStep:L,connector:h,alternativeLabel:y,orientation:C,nonLinear:U}=i.useContext(J);let[A=!1,B=!1,M=!1]=[r,x,f];L===b?A=r!==void 0?r:!0:!U&&L>b?B=x!==void 0?x:!0:!U&&L<b&&(M=f!==void 0?f:!0);const w=i.useMemo(()=>({index:b,last:v,expanded:m,icon:b+1,active:A,completed:B,disabled:M}),[b,v,m,A,B,M]),N=u({},s,{active:A,orientation:C,alternativeLabel:y,completed:B,disabled:M,expanded:m,component:p}),G=nt(N),D=a.jsxs(rt,u({as:p,className:E(G.root,d),ref:o,ownerState:N},T,{children:[h&&y&&b!==0?h:null,l]}));return a.jsx(re.Provider,{value:w,children:h&&!y&&b!==0?a.jsxs(i.Fragment,{children:[h,D]}):D})}),it=ue(a.jsx("path",{d:"M12 0a12 12 0 1 0 0 24 12 12 0 0 0 0-24zm-2 17l-5-5 1.4-1.4 3.6 3.6 7.6-7.6L19 8l-9 9z"}),"CheckCircle"),lt=ue(a.jsx("path",{d:"M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z"}),"Warning");function ct(e){return z("MuiStepIcon",e)}const ee=k("MuiStepIcon",["root","active","completed","error","text"]);var pe;const dt=["active","className","completed","error","icon"],pt=e=>{const{classes:t,active:o,completed:s,error:r}=e;return W({root:["root",o&&"active",s&&"completed",r&&"error"],text:["text"]},ct,t)},te=P(Ie,{name:"MuiStepIcon",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e})=>({display:"block",transition:e.transitions.create("color",{duration:e.transitions.duration.shortest}),color:(e.vars||e).palette.text.disabled,[`&.${ee.completed}`]:{color:(e.vars||e).palette.primary.main},[`&.${ee.active}`]:{color:(e.vars||e).palette.primary.main},[`&.${ee.error}`]:{color:(e.vars||e).palette.error.main}})),ut=P("text",{name:"MuiStepIcon",slot:"Text",overridesResolver:(e,t)=>t.text})(({theme:e})=>({fill:(e.vars||e).palette.primary.contrastText,fontSize:e.typography.caption.fontSize,fontFamily:e.typography.fontFamily})),mt=i.forwardRef(function(t,o){const s=O({props:t,name:"MuiStepIcon"}),{active:r=!1,className:l,completed:d=!1,error:p=!1,icon:x}=s,f=V(s,dt),m=u({},s,{active:r,completed:d,error:p}),b=pt(m);if(typeof x=="number"||typeof x=="string"){const v=E(l,b.root);return p?a.jsx(te,u({as:lt,className:v,ref:o,ownerState:m},f)):d?a.jsx(te,u({as:it,className:v,ref:o,ownerState:m},f)):a.jsxs(te,u({className:v,ref:o,ownerState:m},f,{children:[pe||(pe=a.jsx("circle",{cx:"12",cy:"12",r:"12"})),a.jsx(ut,{className:b.text,x:"12",y:"12",textAnchor:"middle",dominantBaseline:"central",ownerState:m,children:x})]}))}return x});function bt(e){return z("MuiStepLabel",e)}const $=k("MuiStepLabel",["root","horizontal","vertical","label","active","completed","error","disabled","iconContainer","alternativeLabel","labelContainer"]),xt=["children","className","componentsProps","error","icon","optional","slotProps","StepIconComponent","StepIconProps"],ft=e=>{const{classes:t,orientation:o,active:s,completed:r,error:l,disabled:d,alternativeLabel:p}=e;return W({root:["root",o,l&&"error",d&&"disabled",p&&"alternativeLabel"],label:["label",s&&"active",r&&"completed",l&&"error",d&&"disabled",p&&"alternativeLabel"],iconContainer:["iconContainer",s&&"active",r&&"completed",l&&"error",d&&"disabled",p&&"alternativeLabel"],labelContainer:["labelContainer",p&&"alternativeLabel"]},bt,t)},vt=P("span",{name:"MuiStepLabel",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.root,t[o.orientation]]}})(({ownerState:e})=>u({display:"flex",alignItems:"center",[`&.${$.alternativeLabel}`]:{flexDirection:"column"},[`&.${$.disabled}`]:{cursor:"default"}},e.orientation==="vertical"&&{textAlign:"left",padding:"8px 0"})),gt=P("span",{name:"MuiStepLabel",slot:"Label",overridesResolver:(e,t)=>t.label})(({theme:e})=>u({},e.typography.body2,{display:"block",transition:e.transitions.create("color",{duration:e.transitions.duration.shortest}),[`&.${$.active}`]:{color:(e.vars||e).palette.text.primary,fontWeight:500},[`&.${$.completed}`]:{color:(e.vars||e).palette.text.primary,fontWeight:500},[`&.${$.alternativeLabel}`]:{marginTop:16},[`&.${$.error}`]:{color:(e.vars||e).palette.error.main}})),ht=P("span",{name:"MuiStepLabel",slot:"IconContainer",overridesResolver:(e,t)=>t.iconContainer})(()=>({flexShrink:0,display:"flex",paddingRight:8,[`&.${$.alternativeLabel}`]:{paddingRight:0}})),Ct=P("span",{name:"MuiStepLabel",slot:"LabelContainer",overridesResolver:(e,t)=>t.labelContainer})(({theme:e})=>({width:"100%",color:(e.vars||e).palette.text.secondary,[`&.${$.alternativeLabel}`]:{textAlign:"center"}})),St=i.forwardRef(function(t,o){var s;const r=O({props:t,name:"MuiStepLabel"}),{children:l,className:d,componentsProps:p={},error:x=!1,icon:f,optional:m,slotProps:b={},StepIconComponent:v,StepIconProps:T}=r,L=V(r,xt),{alternativeLabel:h,orientation:y}=i.useContext(J),{active:C,disabled:U,completed:A,icon:B}=i.useContext(re),M=f||B;let w=v;M&&!w&&(w=mt);const N=u({},r,{active:C,alternativeLabel:h,completed:A,disabled:U,error:x,orientation:y}),G=ft(N),D=(s=b.label)!=null?s:p.label;return a.jsxs(vt,u({className:E(G.root,d),ref:o,ownerState:N},L,{children:[M||w?a.jsx(ht,{className:G.iconContainer,ownerState:N,children:a.jsx(w,u({completed:A,active:C,error:x,icon:M},T))}):null,a.jsxs(Ct,{className:G.labelContainer,ownerState:N,children:[l?a.jsx(gt,u({ownerState:N},D,{className:E(G.label,D==null?void 0:D.className),children:l})):null,m]})]}))});St.muiName="StepLabel";function yt(e){return z("MuiStepConnector",e)}k("MuiStepConnector",["root","horizontal","vertical","alternativeLabel","active","completed","disabled","line","lineHorizontal","lineVertical"]);const It=["className"],jt=e=>{const{classes:t,orientation:o,alternativeLabel:s,active:r,completed:l,disabled:d}=e,p={root:["root",o,s&&"alternativeLabel",r&&"active",l&&"completed",d&&"disabled"],line:["line",`line${me(o)}`]};return W(p,yt,t)},At=P("div",{name:"MuiStepConnector",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.root,t[o.orientation],o.alternativeLabel&&t.alternativeLabel,o.completed&&t.completed]}})(({ownerState:e})=>u({flex:"1 1 auto"},e.orientation==="vertical"&&{marginLeft:12},e.alternativeLabel&&{position:"absolute",top:12,left:"calc(-50% + 20px)",right:"calc(50% + 20px)"})),Lt=P("span",{name:"MuiStepConnector",slot:"Line",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.line,t[`line${me(o.orientation)}`]]}})(({ownerState:e,theme:t})=>{const o=t.palette.mode==="light"?t.palette.grey[400]:t.palette.grey[600];return u({display:"block",borderColor:t.vars?t.vars.palette.StepConnector.border:o},e.orientation==="horizontal"&&{borderTopStyle:"solid",borderTopWidth:1},e.orientation==="vertical"&&{borderLeftStyle:"solid",borderLeftWidth:1,minHeight:24})}),Nt=i.forwardRef(function(t,o){const s=O({props:t,name:"MuiStepConnector"}),{className:r}=s,l=V(s,It),{alternativeLabel:d,orientation:p="horizontal"}=i.useContext(J),{active:x,disabled:f,completed:m}=i.useContext(re),b=u({},s,{alternativeLabel:d,orientation:p,active:x,completed:m,disabled:f}),v=jt(b);return a.jsx(At,u({className:E(v.root,r),ref:o,ownerState:b},l,{children:a.jsx(Lt,{className:v.line,ownerState:b})}))});function Rt(e){return z("MuiStepper",e)}k("MuiStepper",["root","horizontal","vertical","alternativeLabel"]);const Pt=["activeStep","alternativeLabel","children","className","component","connector","nonLinear","orientation"],Mt=e=>{const{orientation:t,alternativeLabel:o,classes:s}=e;return W({root:["root",t,o&&"alternativeLabel"]},Rt,s)},Ft=P("div",{name:"MuiStepper",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.root,t[o.orientation],o.alternativeLabel&&t.alternativeLabel]}})(({ownerState:e})=>u({display:"flex"},e.orientation==="horizontal"&&{flexDirection:"row",alignItems:"center"},e.orientation==="vertical"&&{flexDirection:"column"},e.alternativeLabel&&{alignItems:"flex-start"})),Tt=a.jsx(Nt,{}),Zt=i.forwardRef(function(t,o){const s=O({props:t,name:"MuiStepper"}),{activeStep:r=0,alternativeLabel:l=!1,children:d,className:p,component:x="div",connector:f=Tt,nonLinear:m=!1,orientation:b="horizontal"}=s,v=V(s,Pt),T=u({},s,{alternativeLabel:l,orientation:b,component:x}),L=Mt(T),h=i.Children.toArray(d).filter(Boolean),y=h.map((U,A)=>i.cloneElement(U,u({index:A,last:A+1===h.length},U.props))),C=i.useMemo(()=>({activeStep:r,alternativeLabel:l,connector:f,nonLinear:m,orientation:b}),[r,l,f,m,b]);return a.jsx(J.Provider,{value:C,children:a.jsx(Ft,u({as:x,ownerState:T,className:E(L.root,p),ref:o},v,{children:y}))})});var ie={},Ut=ne;Object.defineProperty(ie,"__esModule",{value:!0});var xe=ie.default=void 0,Bt=Ut(se()),Gt=a;xe=ie.default=(0,Bt.default)((0,Gt.jsx)("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6z"}),"AddOutlined");var le={},wt=ne;Object.defineProperty(le,"__esModule",{value:!0});var ae=le.default=void 0,Dt=wt(se()),Et=a;ae=le.default=(0,Dt.default)((0,Et.jsx)("path",{d:"M16.59 8.59 12 13.17 7.41 8.59 6 10l6 6 6-6z"}),"ExpandMore");var ce={},$t=ne;Object.defineProperty(ce,"__esModule",{value:!0});var fe=ce.default=void 0,kt=$t(se()),zt=a;fe=ce.default=(0,kt.default)((0,zt.jsx)("path",{d:"M12 6c3.79 0 7.17 2.13 8.82 5.5C19.17 14.87 15.79 17 12 17s-7.17-2.13-8.82-5.5C4.83 8.13 8.21 6 12 6m0-2C7 4 2.73 7.11 1 11.5 2.73 15.89 7 19 12 19s9.27-3.11 11-7.5C21.27 7.11 17 4 12 4m0 5c1.38 0 2.5 1.12 2.5 2.5S13.38 14 12 14s-2.5-1.12-2.5-2.5S10.62 9 12 9m0-2c-2.48 0-4.5 2.02-4.5 4.5S9.52 16 12 16s4.5-2.02 4.5-4.5S14.48 7 12 7"}),"VisibilityOutlined");const Vt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAACXBIWXMAAAsTAAALEwEAmpwYAAAC1ElEQVR4nO2bsU5UQRSGpxELXGNhI2AMYNRYWeojQFS0E30CBU0IjfEdTDBWGB+AGOwUCjtJjFgYExJFa1/AhYbI+pmT/ZeMu2B2752d2YX5yrs75z/zn7kzd3PPOpfJZDIdAJwFZoFV4BuwTXts6/srwAww4voJYBhYBH4ThhrwCjjneh3gJlBV4jvAEnAHuAgMthljUN+f1niLg+LecL0K8FDVQhUbDRR3DFj2VsOs69HK14BdYK5LGvOKX+uplUD9nm8s+7kua5kJxi/gjOsFgJeNZR9J77X0FmPotXPU7WqjGo2kOS49O2WGY2geiM55Y8lFRJus8SCmbgt6WDGmXUSAe9J9E1O3BeCHEjnvIqLnBGMzpm4LwJYSOeEiYnrS3Yqp20LjWdUdMe09sgHCHTHtnjQAWCMMa4WTOCQG0JcGhCAbILrnWEC6oZ0NEEmrkFI7GyCSViGldjZAJK1CSu1sgEhahZTa2QCRtAoptbMBImkVUmpnA0TSKqTUzgaIpFVIqZ0NEEEcA46ra+RjBw1Szdhb4E/AZOlqlZxPRwPUNPGFsEz2hQHUK9+YvLW7TQGVggkNAI8Va71UshENeORN/lSApCqKVy2VbEQD1nV5KkBCtgKeNK+Ag0xJYUBVYyr7vDL/Z9mXfHPzB5jwYl3V9Y3UBnzXmAv/M6WEATs6RSaaYj3X50/DTL24ASvNLTJK2LgVMjkv/hUZY81Zl1MbMNPcJOU1Tm2G2AT3mfxPxV8IGbuoASNqV7OKjHkb12fPhNvAyZLtMNe07Bt9w++AY0VjBjPAAF5o3LJ3bcgzISRm9kI3Jl/GgCFv45v3rg/oFvngnQxFsLEbtuGFvueDGGBY87LXLL1nQr9R2ABv82u0y1s/77g7SgYYwHV1cqMNy1pa7wKXYvcSJjHAAE4DzwL+ZSY6LgTUfxLfB94CX0tuhDF5H8SATCaTybjDw18JVhz+QhIOiQAAAABJRU5ErkJggg==",Wt=()=>{const[e,t]=i.useState({designId:"",planningHeaderId:"",batchNo:"",baseColorId:"",baseColorName:"",fabricId:"",poPcs:"",quantity:"",rate:"",uomId:"string",total:"",unitPrice:"0",gst:"",totalInclGst:"",createdOn:new Date().toISOString(),createdBy:0,lastUpdatedOn:new Date().toISOString(),LastUpdatedBy:0}),{enqueueSnackbar:o}=je(),[s,r]=i.useState(!1),l=(n,g)=>{r(!s)},{data:d}=Ae();console.log(d);const[p,x]=i.useState(""),{data:f}=Le(),{data:m,refetch:b}=Ne(p,{skip:!p}),{data:v,refetch:T}=Re(e.designId,{skip:!e.designId}),{data:L}=Pe(e.planningHeaderId,{skip:!e.planningHeaderId}),{data:h,refetch:y}=Me(e.planningHeaderId,{skip:!e.planningHeaderId});console.log("fabricRequisitionData",h);const[C,U]=i.useState([]),[A,B]=i.useState([]),[M,w]=i.useState([]),[N,G]=i.useState([]),[D,Q]=i.useState([]);console.log("planningHeaderId",e.planningHeaderId),i.useEffect(()=>{m&&U(m.result)},[m]),i.useEffect(()=>{v&&B(v.result)},[v]),i.useEffect(()=>{L&&w(L.result)},[L]),i.useEffect(()=>{h&&Q(h.result.map((n,g)=>({id:g,...n})))},[h]),i.useEffect(()=>{if(f){const n=f.result[0];G(n.uomList)}},[f]);const Y=(d==null?void 0:d.result)||[];i.useEffect(()=>{const n=()=>{const c=parseFloat(e.quantity)||0,j=parseFloat(e.rate)||0;return c*j};t(c=>({...c,total:n()}));const g=()=>{const c=parseFloat(e.total)||0,j=parseFloat(e.gst)||0;return c*(1+j/100)};t(c=>({...c,totalInclGst:g()}));const I=()=>{const c=parseFloat(e.total)||0,j=parseFloat(e.poPcs)||0,de=c/j;return isNaN(de)?0:de};t(c=>({...c,unitPrice:I()}))},[e.quantity,e.rate,e.total,e.gst]);const R=n=>{const{name:g,value:I}=n.target;if(g==="collectionId")Y.find(c=>c.collectionId===parseInt(I)),x(I),t({...e,collectionId:I});else if(g==="designId"){const c=C.find(j=>j.designId===parseInt(I));t({...e,designId:I,baseColorId:c?c.colorId:"",baseColorName:c?c.colorName:""})}else if(g==="batchNo"){const c=A.find(j=>j.batchNo===I);t({...e,batchNo:I,planningHeaderId:c?c.planningHeaderId:"",poPcs:c?c.poPcs:""}),r(!0)}else if(g==="fabricId"){const c=M.find(j=>j.fabricId===I);t({...e,fabricId:I,quantity:c?c.total:""})}else t({...e,[g]:I})},X=[{field:"designId",headerName:"Design",editable:!0,flex:1,type:"singleSelect",valueOptions:C.map(n=>({value:n.designId,label:n.designNo}))},{field:"fabricId",headerName:"Fabric",editable:!0,flex:2,type:"singleSelect",valueOptions:M.map(n=>({value:n.fabricId,label:n.fabric}))},{field:"poPcs",headerName:"PO. Pieces",flex:1,editable:!0},{field:"quantity",headerName:"Quantity",flex:1,editable:!0},{field:"rate",headerName:"Rate",editable:!0,flex:1},{field:"uomId",headerName:"UOM",editable:!0,flex:1,type:"singleSelect",valueOptions:N.map(n=>({value:n.lookUpId,label:n.lookUpName}))},{field:"total",headerName:"Total",flex:1,editable:!0,valueSetter:(n,g)=>{const I=g.quantity??0,c=g.rate??0,j=I*c;return{...g,total:j}}},{field:"unitPrice",headerName:"Unit Price",flex:1,editable:!0,valueSetter:(n,g)=>{const I=g.total??0,c=g.poPcs??0,j=I/c;return{...g,unitPrice:j}}},{field:"gst",headerName:"GST",flex:1,editable:!0},{field:"totalInclGst",headerName:"Total Inc. GST",flex:1,editable:!0,valueSetter:(n,g)=>{const I=g.total??0,c=g.gst??0,j=I*(1+c/100);return{...g,totalInclGst:j}}}],ve=async()=>{try{const n=await Be.post("https://gecxc.com:4041/api/Fabrication/SaveFabrication",e);y(),console.log("Save response:",n.data),o("Fabrication saved successfully!",{variant:"success",autoHideDuration:5e3}),t({designId:e.designId,batchNo:"",baseColorId:"",baseColorName:"",fabricId:"",poPcs:"",quantity:"",rate:"",uomId:"string",total:"",unitPrice:"",gst:"",totalInclGst:"",createdOn:"2024-05-29T09:56:23.916Z",createdBy:0,lastUpdatedOn:"2024-05-29T09:56:23.916Z",LastUpdatedBy:0}),y(),r(!1)}catch(n){console.error("Error saving data:",n),o("Fabrication not saved successfully!",{variant:"error",autoHideDuration:5e3})}};return console.log("formData",e),a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"CardHeader",children:a.jsxs(Z,{variant:"outlined",children:[a.jsx(K,{className:"css-4rfrnx-MuiCardHeader-root",avatar:a.jsx(Fe,{src:Vt,sx:{background:"transparent"}}),title:"Fabric Requisition",titleTypographyProps:{style:{color:"white"}}}),a.jsxs(S,{container:!0,spacing:2,width:"Inherit",sx:{paddingY:2,paddingX:2},children:[a.jsxs(S,{item:!0,xs:12,md:3,children:[a.jsx(F,{fullWidth:!0,select:!0,label:"Select Collection",name:"collectionId",value:p,onChange:R,size:"small",children:Y.map(n=>a.jsx(H,{value:n.collectionId,children:n.collectionName},n.collectionId))})," "]}),a.jsx(S,{item:!0,xs:12,md:3,children:a.jsx(F,{fullWidth:!0,select:!0,label:"Select Design",name:"designId",value:e.designId,onChange:R,size:"small",children:C.map(n=>a.jsx(H,{value:n.designId,children:n.designNo},n.designId))})}),a.jsxs(S,{item:!0,xs:12,md:3,children:[a.jsx(F,{fullWidth:!0,select:!0,label:"Batch No.",name:"batchNo",value:e.batchNo,onChange:R,size:"small",children:A.map(n=>a.jsx(H,{value:n.batchNo,children:n.batchNo},n.batchNo))})," "]}),a.jsx(S,{item:!0,xs:12,md:3,children:a.jsx(F,{label:"Base Color",fullWidth:!0,size:"small",name:"baseColorName",value:e.baseColorName,onChange:R,disabled:!0})})]})]})}),a.jsxs(Z,{variant:"outlined",children:[a.jsx(K,{className:"css-4rfrnx-MuiCardHeader-root",avatar:a.jsx(xe,{}),title:"Add Fabric Requisition",titleTypographyProps:{style:{color:"white"}},action:a.jsx(Te,{onClick:l,children:a.jsx(ae,{style:{color:"white"}})}),sx:{display:"flex",alignItems:"center",justifyContent:"space-between"}}),a.jsxs(Ve,{expanded:s,onChange:l,sx:{},children:[a.jsx(at,{expandIcon:a.jsx(ae,{}),"aria-controls":"panel1-content",id:"panel1-header",sx:{display:"none"}}),a.jsx(_e,{children:a.jsxs(S,{container:!0,spacing:2,width:"Inherit",sx:{paddingY:2,paddingX:2},children:[a.jsx(S,{item:!0,xs:12,md:3,children:a.jsx(F,{fullWidth:!0,select:!0,label:"Select Fabric",defaultValue:"",size:"small",name:"fabricId",value:e.fabricId,onChange:R,children:M.map(n=>a.jsx(H,{value:n.fabricId,children:n.fabric},n.fabricId))})}),a.jsx(S,{item:!0,xs:12,md:2,children:a.jsx(F,{fullWidth:!0,select:!0,label:"UOM",defaultValue:"",size:"small",name:"uomId",value:e.uomId,onChange:R,children:N.map(n=>a.jsx(H,{value:n.lookUpId,children:n.lookUpName},n.lookUpId))})}),a.jsx(S,{item:!0,xs:12,md:1.5,children:a.jsx(F,{label:"Po Pcs",fullWidth:!0,type:"number",size:"small",name:"poPcs",value:e.poPcs,onChange:R})}),a.jsx(S,{item:!0,xs:12,md:1.5,children:a.jsx(F,{label:"Quantity",fullWidth:!0,size:"small",type:"number",name:"quantity",value:e.quantity,onChange:R})}),a.jsx(S,{item:!0,xs:12,md:1.5,children:a.jsx(F,{label:"Rate",fullWidth:!0,size:"small",type:"number",name:"rate",value:e.rate,onChange:R})}),a.jsx(S,{item:!0,xs:12,md:1.5,children:a.jsx(F,{label:"Total",fullWidth:!0,size:"small",type:"number",name:"total",value:e.total,onChange:R})}),a.jsx(S,{item:!0,xs:12,md:1.5,children:a.jsx(F,{label:"Unit Price",fullWidth:!0,size:"small",name:"unitPrice",value:e.unitPrice,onChange:R})}),a.jsx(S,{item:!0,xs:12,md:1.5,children:a.jsx(F,{label:"GST",fullWidth:!0,size:"small",type:"number",name:"gst",value:e.gst,onChange:R})}),a.jsx(S,{item:!0,xs:12,md:2,children:a.jsx(F,{label:"Total Inc GSt.",fullWidth:!0,size:"small",type:"number",name:"totalInclGst",value:e.totalInclGst,onChange:R})}),a.jsx(S,{item:!0,xs:12,textAlign:"right",children:a.jsx(we,{variant:"contained",size:"small",onClick:ve,children:"Save"})})]})})]})]}),a.jsx(S,{item:!0,xs:12,md:12,children:a.jsx(Ue,{sx:{height:1,width:"100%",marginTop:1,marginBottom:1}})}),a.jsxs(Z,{variant:"outlined",children:[a.jsx(K,{className:"css-4rfrnx-MuiCardHeader-root",avatar:a.jsx(fe,{}),title:"View",titleTypographyProps:{style:{color:"white"}}}),a.jsx(S,{container:!0,spacing:2,width:"Inherit",sx:{paddingY:2,paddingX:2},children:a.jsx(S,{sx:{marginTop:2},item:!0,xs:12,children:a.jsx(Ge,{ncolumns:X,initialRows:D,formData:e,editAPi:"https://gecxc.com:4041/api/Fabrication/SaveFabrication",refetch:y,deleteApi:"https://gecxc.com:4041/api/Fabrication/DeleteFabricByFabricId?fabricationId=",deleteBy:"fabricationId",disableAddRecord:!0})})})]})]})},Kt=Wt;export{Ve as A,Kt as F,Zt as S,Xt as a,St as b,ae as c,xe as d,at as e,_e as f,fe as g};
