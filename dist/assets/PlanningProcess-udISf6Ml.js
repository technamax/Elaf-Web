import{r as l,o as Ve,p as $e,s as Ze,_ as ge,w as Ke,z as Je,i as _e,j as e,l as De,h as le,g as et,a2 as tt,a3 as at,N as st,a4 as je,a as ye,a5 as Ce,a6 as Oe,a7 as Te,a8 as Ee,a9 as Le,C as V,d as $,aa as Be,G as o,D as ue,S as ae,T as Ie,ab as Ue,B as ne,b as Me,ac as ot,ad as rt,ae as nt,af as Ye}from"./index-C9WX4c-1.js";import{a as X}from"./axios-BWHFMaIN.js";import{d as Pe,c as he,A as Se,e as Ae,f as Ne,g as ke,S as lt,a as dt,b as it,F as ct}from"./Fabrication-DFFQ4tOQ.js";import{d as We,a as Re}from"./EditAbleDataGrid-BiCA0Ju3.js";import{a as ut,b as ht,T as d,B as D,P as mt}from"./TextField-MycDRbzs.js";import{M as v}from"./Skeleton-DYWKFd7F.js";import{A as we,C as Ge,D as be}from"./DataGrid-BQJGe_WI.js";import{G as pt}from"./GridToolbar-BELZC9Nj.js";function gt(a){return l.Children.toArray(a).filter(t=>l.isValidElement(t))}function xt(a){return $e("MuiButtonGroup",a)}const Y=Ve("MuiButtonGroup",["root","contained","outlined","text","disableElevation","disabled","firstButton","fullWidth","vertical","grouped","groupedHorizontal","groupedVertical","groupedText","groupedTextHorizontal","groupedTextVertical","groupedTextPrimary","groupedTextSecondary","groupedOutlined","groupedOutlinedHorizontal","groupedOutlinedVertical","groupedOutlinedPrimary","groupedOutlinedSecondary","groupedContained","groupedContainedHorizontal","groupedContainedVertical","groupedContainedPrimary","groupedContainedSecondary","lastButton","middleButton"]),ft=["children","className","color","component","disabled","disableElevation","disableFocusRipple","disableRipple","fullWidth","orientation","size","variant"],It=(a,t)=>{const{ownerState:s}=a;return[{[`& .${Y.grouped}`]:t.grouped},{[`& .${Y.grouped}`]:t[`grouped${le(s.orientation)}`]},{[`& .${Y.grouped}`]:t[`grouped${le(s.variant)}`]},{[`& .${Y.grouped}`]:t[`grouped${le(s.variant)}${le(s.orientation)}`]},{[`& .${Y.grouped}`]:t[`grouped${le(s.variant)}${le(s.color)}`]},{[`& .${Y.firstButton}`]:t.firstButton},{[`& .${Y.lastButton}`]:t.lastButton},{[`& .${Y.middleButton}`]:t.middleButton},t.root,t[s.variant],s.disableElevation===!0&&t.disableElevation,s.fullWidth&&t.fullWidth,s.orientation==="vertical"&&t.vertical]},bt=a=>{const{classes:t,color:s,disabled:r,disableElevation:y,fullWidth:O,orientation:C,variant:A}=a,j={root:["root",A,C==="vertical"&&"vertical",O&&"fullWidth",y&&"disableElevation"],grouped:["grouped",`grouped${le(C)}`,`grouped${le(A)}`,`grouped${le(A)}${le(C)}`,`grouped${le(A)}${le(s)}`,r&&"disabled"],firstButton:["firstButton"],lastButton:["lastButton"],middleButton:["middleButton"]};return et(j,xt,t)},vt=Ze("div",{name:"MuiButtonGroup",slot:"Root",overridesResolver:It})(({theme:a,ownerState:t})=>ge({display:"inline-flex",borderRadius:(a.vars||a).shape.borderRadius},t.variant==="contained"&&{boxShadow:(a.vars||a).shadows[2]},t.disableElevation&&{boxShadow:"none"},t.fullWidth&&{width:"100%"},t.orientation==="vertical"&&{flexDirection:"column"},{[`& .${Y.grouped}`]:ge({minWidth:40,"&:hover":ge({},t.variant==="contained"&&{boxShadow:"none"})},t.variant==="contained"&&{boxShadow:"none"}),[`& .${Y.firstButton},& .${Y.middleButton}`]:ge({},t.orientation==="horizontal"&&{borderTopRightRadius:0,borderBottomRightRadius:0},t.orientation==="vertical"&&{borderBottomRightRadius:0,borderBottomLeftRadius:0},t.variant==="text"&&t.orientation==="horizontal"&&{borderRight:a.vars?`1px solid rgba(${a.vars.palette.common.onBackgroundChannel} / 0.23)`:`1px solid ${a.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)"}`,[`&.${Y.disabled}`]:{borderRight:`1px solid ${(a.vars||a).palette.action.disabled}`}},t.variant==="text"&&t.orientation==="vertical"&&{borderBottom:a.vars?`1px solid rgba(${a.vars.palette.common.onBackgroundChannel} / 0.23)`:`1px solid ${a.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)"}`,[`&.${Y.disabled}`]:{borderBottom:`1px solid ${(a.vars||a).palette.action.disabled}`}},t.variant==="text"&&t.color!=="inherit"&&{borderColor:a.vars?`rgba(${a.vars.palette[t.color].mainChannel} / 0.5)`:Ke(a.palette[t.color].main,.5)},t.variant==="outlined"&&t.orientation==="horizontal"&&{borderRightColor:"transparent"},t.variant==="outlined"&&t.orientation==="vertical"&&{borderBottomColor:"transparent"},t.variant==="contained"&&t.orientation==="horizontal"&&{borderRight:`1px solid ${(a.vars||a).palette.grey[400]}`,[`&.${Y.disabled}`]:{borderRight:`1px solid ${(a.vars||a).palette.action.disabled}`}},t.variant==="contained"&&t.orientation==="vertical"&&{borderBottom:`1px solid ${(a.vars||a).palette.grey[400]}`,[`&.${Y.disabled}`]:{borderBottom:`1px solid ${(a.vars||a).palette.action.disabled}`}},t.variant==="contained"&&t.color!=="inherit"&&{borderColor:(a.vars||a).palette[t.color].dark},{"&:hover":ge({},t.variant==="outlined"&&t.orientation==="horizontal"&&{borderRightColor:"currentColor"},t.variant==="outlined"&&t.orientation==="vertical"&&{borderBottomColor:"currentColor"})}),[`& .${Y.lastButton},& .${Y.middleButton}`]:ge({},t.orientation==="horizontal"&&{borderTopLeftRadius:0,borderBottomLeftRadius:0},t.orientation==="vertical"&&{borderTopRightRadius:0,borderTopLeftRadius:0},t.variant==="outlined"&&t.orientation==="horizontal"&&{marginLeft:-1},t.variant==="outlined"&&t.orientation==="vertical"&&{marginTop:-1})})),Fe=l.forwardRef(function(t,s){const r=Je({props:t,name:"MuiButtonGroup"}),{children:y,className:O,color:C="primary",component:A="div",disabled:j=!1,disableElevation:k=!1,disableFocusRipple:L=!1,disableRipple:R=!1,fullWidth:de=!1,orientation:H="horizontal",size:K="medium",variant:B="outlined"}=r,M=_e(r,ft),T=ge({},r,{color:C,component:A,disabled:j,disableElevation:k,disableFocusRipple:L,disableRipple:R,fullWidth:de,orientation:H,size:K,variant:B}),E=bt(T),F=l.useMemo(()=>({className:E.grouped,color:C,disabled:j,disableElevation:k,disableFocusRipple:L,disableRipple:R,fullWidth:de,size:K,variant:B}),[C,j,k,L,R,de,K,B,E.grouped]),G=gt(y),Q=G.length,Z=f=>{const w=f===0,u=f===Q-1;return w&&u?"":w?E.firstButton:u?E.lastButton:E.middleButton};return e.jsx(vt,ge({as:A,role:"group",className:De(E.root,O),ref:s,ownerState:T},M,{children:e.jsx(ut.Provider,{value:F,children:G.map((f,w)=>e.jsx(ht.Provider,{value:Z(w),children:f},w))})}))});let qe=!1;const jt=l.forwardRef(function(t,s){return qe||(console.warn(["MUI: The Autocomplete component was moved from the lab to the core.","","You should use `import { Autocomplete } from '@mui/material'`","or `import Autocomplete from '@mui/material/Autocomplete'`"].join(`
`)),qe=!0),e.jsx(we,ge({ref:s},t))});var Qe={},yt=at;Object.defineProperty(Qe,"__esModule",{value:!0});var Xe=Qe.default=void 0,Ct=yt(tt()),Pt=e;Xe=Qe.default=(0,Ct.default)((0,Pt.jsx)("path",{d:"M21 10h-3L2 3v7l9 2-9 2v7l8-3.5V21c0 1.1.9 2 2 2h9c1.1 0 2-.9 2-2v-9c0-1.1-.9-2-2-2m0 11h-9v-9h9zm-4.5-1L13 16h2v-3h3v3h2z"}),"SendAndArchive");const St="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAACXBIWXMAAAsTAAALEwEAmpwYAAACk0lEQVR4nO2WzU4UQRSFe14CgoiMKPIqolEiIQq+gEFgFPHnFVyILI3GnQIbxxhG3IkaYxT8iUZFoxuDbokoIaNE/czNnE6KSjdT07Yb40kqqa6qW+dW3XNvdRT9R4MAHgD3640Dh/MkHQTOqMWIv9PGydOBUeCsWoz4O208PwdcxCz1xoGBKG8Abc5JPwBrataP0fY3iLcCk8C6SF4DV4HzatZf1Ny6vrfkRd4PrABV4BywE9huKpc2rA0ARaATGAe+yebgn5IfB34BD0XQCzwlHU+AA1r7CPgJlLKS94n8GtAM3CIcFaAJKGuPviwxX9XJjfxlCtGMyJLwQrbzwNeGNEFNRFVdZdrJb2ttAbizyU10SBNXQslbgR8SnMXcxagEOGyxdmxs3ZDmxjybHmWKZUdriAOnZWhqf+ZtVgyw3+HZPAZ2qX8yxIGbwCudxsdwgH3JszERtqtOVEIc+ARMKbc3xNy79r1a+xHodsYtDec8W6sl01YxQxxYVfzdWM4krDPiGEveXMHLjhMqUGshDlQTHLDNCg06MJvgwJcQB96lhMBSrddZ1y0nloDdXkbc9WwPKQSLIQ7M6rGxGuBjKMB+JEGE24A3tnfUgIo7E+p+1jTsUn8wxIEWFaJxKdrFmBwrJRSiEc2d8mz2AxPas6WuAwbgkspncZNaPyexWbuXsuaGbuQ7cDEKBbVHZEVParMeliRUPLW7eK4XcUF7NQU7YAD26NrKciLtJtJObuTXtce+KAuAI9pgXq9aj0SVhgXFvEN9y4Cjmci9kvtZmpjQw9KuOhH/kvUr1bq0xmK+bLZRHqB2nZd1Gyinp5yfUuu/1ZyRX7CfmlzIXUgLx6SH93o3ltUv6z8hf+LoX8ZvSFCuNiG5hzcAAAAASUVORK5CYII=",At=()=>{const a=st(),[t,s]=l.useState([]),[r,y]=l.useState({embroideryId:(t==null?void 0:t.embroideryId)||0,designId:(t==null?void 0:t.designId)||"",batchNo:(t==null?void 0:t.batchNo)||"",planningHeaderId:(t==null?void 0:t.planningHeaderId)||"",componentId:(t==null?void 0:t.componentId)||"",fabricId:(t==null?void 0:t.fabricId)||"",vendorId:(t==null?void 0:t.vendorId)||"",poPcs:(t==null?void 0:t.poPcs)||"",baseColorId:(t==null?void 0:t.baseColorId)||"",baseColorName:(t==null?void 0:t.baseColorName)||"",colorId:(t==null?void 0:t.colorId)||"",availableQty:(t==null?void 0:t.availableQty)||"",noOfHead:(t==null?void 0:t.noOfHead)||"",repeats:(t==null?void 0:t.repeats)||"",cuttingSize:(t==null?void 0:t.cuttingSize)||"",itemsPerRepeat:(t==null?void 0:t.itemsPerRepeat)||"",totalPcs:(t==null?void 0:t.totalPcs)||"",totalAmount:(t==null?void 0:t.totalAmount)||"",threadStiches:(t==null?void 0:t.threadStiches)||"",threadRate:(t==null?void 0:t.threadRate)||"",threadAmount:(t==null?void 0:t.threadAmount)||"",tillaStiches:(t==null?void 0:t.tillaStiches)||"",tilaRate:(t==null?void 0:t.tilaRate)||"",tilaAmount:(t==null?void 0:t.tilaAmount)||"",sequence:(t==null?void 0:t.sequence)||"",sequenceRate:(t==null?void 0:t.sequenceRate)||"",sequenceAmount:(t==null?void 0:t.sequenceAmount)||"",isSolving:(t==null?void 0:t.isSolving)||!1,solvingLayers:(t==null?void 0:t.solvingLayers)||0,solvingInMeters:(t==null?void 0:t.solvingInMeters)||"",solvingRate:(t==null?void 0:t.solvingRate)||0,solvingAmount:(t==null?void 0:t.solvingAmount)||"",threadAdditional:(t==null?void 0:t.threadAdditional)||[],costPerComponent:(t==null?void 0:t.costPerComponent)||"",createdOn:(t==null?void 0:t.createdOn)||new Date().toISOString(),createdBy:(t==null?void 0:t.createdBy)||0,lastUpdatedOn:new Date().toISOString(),LastUpdatedBy:0});l.useEffect(()=>{y({embroideryId:(t==null?void 0:t.embroideryId)||0,designId:(t==null?void 0:t.designId)||"",batchNo:(t==null?void 0:t.batchNo)||"",planningHeaderId:(t==null?void 0:t.planningHeaderId)||"",componentId:(t==null?void 0:t.componentId)||"",fabricId:(t==null?void 0:t.fabricId)||"",vendorId:(t==null?void 0:t.vendorId)||"",poPcs:(t==null?void 0:t.poPcs)||"",baseColorId:(t==null?void 0:t.baseColorId)||"",baseColorName:(t==null?void 0:t.baseColorName)||"",colorId:(t==null?void 0:t.colorId)||"",availableQty:(t==null?void 0:t.availableQty)||"",noOfHead:(t==null?void 0:t.noOfHead)||"",repeats:(t==null?void 0:t.repeats)||"",cuttingSize:(t==null?void 0:t.cuttingSize)||"",itemsPerRepeat:(t==null?void 0:t.itemsPerRepeat)||"",totalPcs:(t==null?void 0:t.totalPcs)||"",totalAmount:(t==null?void 0:t.totalAmount)||"",threadStiches:(t==null?void 0:t.threadStiches)||"",threadRate:(t==null?void 0:t.threadRate)||"",threadAmount:(t==null?void 0:t.threadAmount)||"",tillaStiches:(t==null?void 0:t.tillaStiches)||"",tilaRate:(t==null?void 0:t.tilaRate)||"",tilaAmount:(t==null?void 0:t.tilaAmount)||"",sequence:(t==null?void 0:t.sequence)||"",sequenceRate:(t==null?void 0:t.sequenceRate)||"",sequenceAmount:(t==null?void 0:t.sequenceAmount)||"",isSolving:(t==null?void 0:t.isSolving)||!1,solvingLayers:(t==null?void 0:t.solvingLayers)||0,solvingInMeters:(t==null?void 0:t.solvingInMeters)||"",solvingRate:(t==null?void 0:t.solvingRate)||0,solvingAmount:(t==null?void 0:t.solvingAmount)||"",threadAdditional:(t==null?void 0:t.threadAdditional)||[],costPerComponent:(t==null?void 0:t.costPerComponent)||"",createdOn:(t==null?void 0:t.createdOn)||new Date().toISOString(),createdBy:(t==null?void 0:t.createdBy)||0,lastUpdatedOn:new Date().toISOString(),LastUpdatedBy:0})},[t]);const O=["Boring","Pooni","Laser","Doori","Dissolving"];function C(c,x,m){return{fontWeight:x.indexOf(c)===-1?m.typography.fontWeightRegular:m.typography.fontWeightMedium}}const{data:A}=je(),[j,k]=l.useState(""),{data:L}=ye(),{data:R,refetch:de}=Ce(j,{skip:!j}),{data:H,refetch:K}=Oe(r.designId,{skip:!r.designId}),{data:B}=Te({batchNo:r.planningHeaderId,componentId:r.componentId},{skip:!r.planningHeaderId||!r.componentId}),{data:M}=Ee({batchNo:r.planningHeaderId,componentId:r.componentId,fabricId:r.fabricId},{skip:!r.planningHeaderId||!r.componentId||!r.fabricId}),{data:T}=Le(r.planningHeaderId,{skip:!r.planningHeaderId});console.log("formData.planningHeaderId",r.planningHeaderId),console.log("collectionData",A);const[E,F]=l.useState(!1),G=(c,x)=>{F(!E)},[Q,Z]=l.useState([]),[f,w]=l.useState([]),[u,U]=l.useState([]),[se,oe]=l.useState([]),[W,xe]=l.useState([]),[ie,J]=l.useState([]),[ee,te]=l.useState([]),[N,me]=l.useState([]);console.log("batchList",f),console.log("formData",r),l.useEffect(()=>{R&&Z(R.result)},[R]),l.useEffect(()=>{H&&w(H.result)},[H]),l.useEffect(()=>{B&&U(B.result)},[B]),l.useEffect(()=>{M&&J(B.result)},[M]),l.useEffect(()=>{T&&me(T.result)},[T]),console.log("initialRows",ee),l.useEffect(()=>{if(L){const c=L.result[0];oe(c.vendorList),xe(c.noOfHeadsList)}},[L]);const ce=(A==null?void 0:A.result)||[],re=async c=>{const x=`https://gecxc.com:4041/api/Embroidery/GetEmbroideryListByBatchNo?batchNo=${c}`;try{return(await X.get(x)).data}catch(m){throw console.error("Error fetching embroidery data:",m),m}},h=async()=>{if(r.planningHeaderId)try{const c=await re(r.planningHeaderId),x=c.result.map((m,b)=>({...m,id:b+1}));te(x),console.log("fetchEmbroideryData",c),console.log("initialRows",ee)}catch(c){console.error(c.message)}};l.useEffect(()=>{h()},[r.planningHeaderId]),l.useEffect(()=>{const c=()=>{const z=parseFloat(r.repeats)||0,_=parseFloat(r.itemsPerRepeat)||0;return z*_};y(z=>({...z,totalPcs:c()}));const x=()=>{const z=parseFloat(r.threadStiches)||0,_=parseFloat(r.threadRate)||0,pe=parseFloat(r.noOfHead)||0,fe=parseFloat(r.repeats)||0;return z/1e3*(_*fe*pe)};y(z=>({...z,threadAmount:x()}));const m=()=>{const z=parseFloat(r.tillaStiches)||0,_=parseFloat(r.tilaRate)||0,pe=parseFloat(r.noOfHead)||0,fe=parseFloat(r.repeats)||0;return z/1e3*(_*fe*pe)};y(z=>({...z,tilaAmount:m()}));const b=()=>{const z=parseFloat(r.sequence)||0,_=parseFloat(r.sequenceRate)||0,pe=parseFloat(r.noOfHead)||0,fe=parseFloat(r.repeats)||0;return z/1e3*(_*fe*pe)};y(z=>({...z,sequenceAmount:b()}));const P=()=>{const z=parseFloat(r.repeats)||0,_=parseFloat(r.noOfHead)||0,pe=parseFloat(r.solvingLayers)||0;return z*_*13/39.37*pe};y(z=>({...z,solvingInMeters:P()}));const q=()=>{const z=parseFloat(r.solvingInMeters)||0,_=parseFloat(r.solvingRate)||0;return parseFloat(r.solvingLayers),z*_};y(z=>({...z,solvingAmount:q()}));const ve=()=>{const z=parseFloat(r.threadAmount)||0,_=parseFloat(r.tilaAmount)||0,pe=parseFloat(r.sequenceAmount)||0,fe=parseFloat(r.solvingAmount)||0;return z+_+pe+fe};y(z=>({...z,totalAmount:ve()}));const He=()=>{const z=parseFloat(r.totalAmount)||0,_=parseFloat(r.totalPcs)||0;return z/_};y(z=>({...z,costPerComponent:He()}))},[r.threadAmount,r.totalAmount,r.sequenceAmount,r.solvingAmount,r.repeats,r.tilaAmount,r.itemsPerRepeat,r.threadRate,r.threadStiches,r.noOfHead,r.tilaRate,r.tillaStiches,r.sequenceRate,r.sequence,r.solvingLayers,r.solvingInMeters,r.solvingRate]);const p=c=>{const{name:x,checked:m}=c.target;y(b=>({...b,[x]:m}))},i=c=>{const{name:x,value:m}=c.target;if(x==="collectionId")ce.find(b=>b.collectionId===parseInt(m)),k(m),y({...r,collectionId:m});else if(x==="designId"){const b=Q.find(P=>P.designId===parseInt(m));y({...r,designId:m,baseColorId:b?b.colorId:"",baseColorName:b?b.colorName:""})}else if(x==="colorId"){const b=ie.find(P=>P.colorId===m);y({...r,colorId:m,availableQty:b?b.total:"",cuttingSize:b?b.cuttingSize:"",repeats:b?b.repeats:""})}else if(x==="batchNo"){const b=f.find(P=>P.batchNo===m);y({...r,batchNo:m,planningHeaderId:b?b.planningHeaderId:"",poPcs:b?b.poPcs:""}),F(!0)}else y({...r,[x]:m})},g=async()=>{try{const c=await X.post("https://gecxc.com:4041/api/Embroidery/SaveEmbroidery",{...r,threadAdditional:r.threadAdditional.join(", ")});console.log("Save response:",c.data),h(),s({}),F(!1),y({embroideryId:0,componentId:"",fabricId:"",vendorId:"",poPcs:"",baseColorId:"",baseColorName:"",colorId:"",availableQty:"",noOfHead:"",repeats:"",cuttingSize:"",itemsPerRepeat:"",totalPcs:"",totalAmount:"",threadStiches:"",threadRate:"",threadAmount:"",tillaStiches:"",tilaRate:"",tilaAmount:"",sequence:"",sequenceRate:"",sequenceAmount:"",isSolving:!1,solvingLayers:0,solvingInMeters:"",solvingRate:0,solvingAmount:"",threadAdditional:[],costPerComponent:"",createdOn:new Date().toISOString(),createdBy:0,lastUpdatedOn:new Date().toISOString(),LastUpdatedBy:0})}catch(c){console.error("Error saving data:",c)}};console.log("initialRows",ee);const I=c=>{const x=c.threadAdditional?c.threadAdditional.split(",").map(m=>m.trim()):[];s({...c,threadAdditional:x})};console.log("initialData",t);const S=async c=>{try{await X.delete(`https://gecxc.com:4041/api/Embroidery/DeleteEmbroideryById?embroideryId=${c}`),h(),console.log("deleted")}catch(x){console.error("Error deleting data:",x)}},n=[{field:"designId",headerName:"Design"},{field:"batchNo",headerName:"Batch No."},{field:"componentName",headerName:"Component "},{field:"fabricName",headerName:"Fabric "},{field:"vendorId",headerName:"Vendor"},{field:"poPcs",headerName:"Po Pcs"},{field:"baseColorName",headerName:"Base Color"},{field:"colourName",headerName:"Color"},{field:"availableQty",headerName:"Available Qty"},{field:"noOfHead",headerName:"No. Of Heads"},{field:"repeats",headerName:"Repeats"},{field:"cuttingSize",headerName:"Cutting Size"},{field:"itemsPerRepeat",headerName:"Items Per Repeat"},{field:"totalPcs",headerName:"Total Pcs"},{field:"threadStiches",headerName:"Thread Stitches"},{field:"threadRate",headerName:"Thread Rate"},{field:"threadAmount",headerName:"Thread Amount"},{field:"tillaStiches",headerName:"Tilla Stitches"},{field:"tilaRate",headerName:"Tilla Rate"},{field:"tilaAmount",headerName:"Tilla Amount"},{field:"sequence",headerName:"sequence"},{field:"sequenceRate",headerName:"Sequence Rate"},{field:"sequenceAmount",headerName:"Sequence Amount"},{field:"isSolving",headerName:"Is Solving"},{field:"solvingLayers",headerName:"Solving Layers"},{field:"solvingInMeters",headerName:"Solving In Meters"},{field:"solvingRate",headerName:"Solving Rate"},{field:"solvingAmount",headerName:"Solving Amount"},{field:"threadAdditional",headerName:"ThreadAdditional"},{field:"costPerComponent",headerName:"Cost Per Component"},{field:"Action",headerName:"Actions",renderCell:c=>e.jsx("div",{style:{display:"flex",justifyContent:"space-around"},children:e.jsxs(Fe,{size:"small",variant:"text",children:[e.jsx(ae,{"aria-label":"Edit",onClick:()=>I(c.row),children:e.jsx(We,{})}),e.jsx(ae,{"aria-label":"delete",color:"primary",onClick:()=>S(c.row.embroideryId),children:e.jsx(Re,{})})]})})}];return e.jsxs(e.Fragment,{children:[e.jsxs(V,{variant:"outlined",children:[e.jsx($,{className:"css-4rfrnx-MuiCardHeader-root",avatar:e.jsx(Be,{src:St,sx:{background:"transparent"}}),title:"Embroidery  ",titleTypographyProps:{style:{color:"white"}}}),e.jsxs(o,{container:!0,spacing:2,width:"Inherit",sx:{paddingY:2,paddingX:2},children:[" ",e.jsxs(o,{item:!0,xs:12,md:3,children:[e.jsx(d,{fullWidth:!0,select:!0,label:"Select Collection",name:"collectionId",value:j,onChange:i,size:"small",children:ce.map(c=>e.jsx(v,{value:c.collectionId,children:c.collectionName},c.collectionId))})," "]}),e.jsx(o,{item:!0,xs:12,md:3,children:e.jsx(d,{fullWidth:!0,select:!0,label:"Select Design",name:"designId",value:r.designId,onChange:i,size:"small",children:Q.map(c=>e.jsx(v,{value:c.designId,children:c.designNo},c.designId))})}),e.jsxs(o,{item:!0,xs:12,md:3,children:[e.jsx(d,{fullWidth:!0,select:!0,label:"Batch No.",name:"batchNo",value:r.batchNo,onChange:i,size:"small",children:f.map(c=>e.jsx(v,{value:c.batchNo,children:c.batchNo},c.batchNo))})," "]}),e.jsx(o,{item:!0,xs:12,md:3,children:e.jsx(d,{label:"Base Color",fullWidth:!0,size:"small",name:"baseColorName",value:r.baseColorName,onChange:i,disabled:!0})})]})]}),e.jsx(o,{item:!0,xs:12,md:12,children:e.jsx(ue,{color:"#cc8587",sx:{height:1,width:"100%",mt:2}})}),e.jsxs(V,{variant:"outlined",children:[e.jsx($,{className:"css-4rfrnx-MuiCardHeader-root",avatar:e.jsx(Pe,{}),title:"Add Embroidery",titleTypographyProps:{style:{color:"white"}},action:e.jsx(ae,{onClick:G,children:e.jsx(he,{style:{color:"white"}})}),sx:{display:"flex",alignItems:"center",justifyContent:"space-between"}})," ",e.jsxs(Se,{expanded:E,onChange:G,sx:{},children:[e.jsx(Ae,{expandIcon:e.jsx(he,{}),"aria-controls":"panel1-content",id:"panel1-header",sx:{display:"none"}}),e.jsxs(Ne,{children:[e.jsxs(o,{container:!0,spacing:2,width:"Inherit",sx:{paddingY:2,paddingX:2},children:[" ",e.jsxs(o,{item:!0,xs:12,md:3,children:[e.jsx(d,{fullWidth:!0,select:!0,label:"Components",name:"componentId",value:r.componentId,onChange:i,size:"small",children:N.map(c=>e.jsx(v,{value:c.componentId,children:c.componentName},c.componentId))})," "]}),e.jsx(o,{item:!0,xs:12,md:3,children:e.jsx(d,{fullWidth:!0,select:!0,label:"Select Fabric",defaultValue:"",size:"small",name:"fabricId",value:r.fabricId,onChange:i,children:u.map(c=>e.jsx(v,{value:c.fabricId,children:c.fabric},c.fabricId))})}),e.jsx(o,{item:!0,xs:12,md:3,children:e.jsx(d,{fullWidth:!0,select:!0,label:"Vendors",defaultValue:"",size:"small",name:"vendorId",value:r.vendorId,onChange:i,children:se.map(c=>e.jsx(v,{value:c.lookUpId,children:c.lookUpName},c.lookUpId))})}),e.jsx(o,{item:!0,xs:12,md:3,children:e.jsx(d,{fullWidth:!0,select:!0,label:"Color",size:"small",name:"colorId",value:r.colorId,onChange:i,children:ie.map(c=>e.jsx(v,{value:c.colorId,children:c.color},c.colorId))})}),e.jsx(o,{item:!0,xs:12,md:1.5,children:e.jsx(d,{label:"Po Pcs",fullWidth:!0,size:"small",name:"poPcs",value:r.poPcs,onChange:i})}),e.jsx(o,{item:!0,xs:12,md:1.5,children:e.jsx(d,{label:"Available Quantity",fullWidth:!0,size:"small",name:"availableQty",type:"number",value:r.availableQty,onChange:i})}),e.jsx(o,{item:!0,xs:12,md:1.5,children:e.jsx(d,{label:"Repeats",type:"number",fullWidth:!0,size:"small",name:"repeats",value:r.repeats,onChange:i})}),e.jsx(o,{item:!0,xs:12,md:1.5,children:e.jsx(d,{fullWidth:!0,select:!0,label:"Heads",defaultValue:"",size:"small",name:"noOfHead",value:r.noOfHead,onChange:i,children:W.map(c=>e.jsx(v,{value:c.lookUpId,children:c.lookUpName},c.lookUpId))})}),e.jsx(o,{item:!0,xs:12,md:1.5,children:e.jsx(d,{label:"Cutting Size",fullWidth:!0,size:"small",name:"cuttingSize",type:"number",value:r.cuttingSize,onChange:i})}),e.jsx(o,{item:!0,xs:12,md:1.5,children:e.jsx(d,{label:"itemsPerRepeat",fullWidth:!0,type:"number",size:"small",name:"itemsPerRepeat",value:r.itemsPerRepeat,onChange:i})}),e.jsx(o,{item:!0,xs:12,md:1.5,children:e.jsx(d,{label:"total Pcs.",fullWidth:!0,size:"small",type:"number",name:"totalPcs",value:r.totalPcs,onChange:i})}),e.jsx(o,{item:!0,xs:12,md:1.5,children:e.jsx(d,{label:"Total Amount",fullWidth:!0,type:"number",size:"small",name:"totalAmount",value:r.totalAmount,onChange:i})}),e.jsx(o,{item:!0,xs:12,md:1.5,children:e.jsx(d,{label:"Cost Per Component",fullWidth:!0,size:"small",name:"costPerComponent",value:r.costPerComponent,onChange:i})}),e.jsx(o,{item:!0,xs:12,md:3,children:e.jsx(d,{select:!0,label:"Additional",value:r.threadAdditional,name:"threadAdditional",size:"small",onChange:i,fullWidth:!0,SelectProps:{multiple:!0},children:O.map(c=>e.jsx(v,{value:c,style:C(c,r.threadAdditional,a),children:c},c))})}),e.jsx(o,{item:!0,xs:12,md:4}),e.jsx(o,{item:!0,xs:12,md:6,children:e.jsxs(o,{container:!0,spacing:1,width:"Inherit",children:[e.jsx(o,{item:!0,xs:12,md:12,children:e.jsx(Ie,{variant:"h5",gutterBottom:!0,children:"Thread"})})," ",e.jsx(o,{item:!0,xs:12,md:4,children:e.jsx(d,{label:"Stitches",fullWidth:!0,size:"small",type:"number",name:"threadStiches",value:r.threadStiches,onChange:i})}),e.jsx(o,{item:!0,xs:12,md:4,children:e.jsx(d,{label:"Rate",type:"number",fullWidth:!0,size:"small",name:"threadRate",value:r.threadRate,onChange:i})}),e.jsx(o,{item:!0,xs:12,md:4,children:e.jsx(d,{label:"Amount",fullWidth:!0,size:"small",type:"number",name:"threadAmount",value:r.threadAmount,onChange:i})})]})}),e.jsx(o,{item:!0,xs:12,md:6,children:e.jsxs(o,{container:!0,spacing:1,width:"Inherit",children:[e.jsx(o,{item:!0,xs:12,md:12,children:e.jsx(Ie,{variant:"h5",gutterBottom:!0,children:"Tilla"})})," ",e.jsx(o,{item:!0,xs:12,md:4,children:e.jsx(d,{label:"Stitches",fullWidth:!0,size:"small",type:"number",name:"tillaStiches",value:r.tillaStiches,onChange:i})}),e.jsx(o,{item:!0,xs:12,md:4,children:e.jsx(d,{label:"Rate",fullWidth:!0,size:"small",type:"number",name:"tilaRate",value:r.tilaRate,onChange:i})}),e.jsx(o,{item:!0,xs:12,md:4,children:e.jsx(d,{label:"Amount",fullWidth:!0,size:"small",name:"tilaAmount",value:r.tilaAmount,onChange:i})})]})}),e.jsxs(o,{item:!0,xs:12,md:6,children:[e.jsxs(o,{container:!0,spacing:1,width:"Inherit",children:[e.jsx(o,{item:!0,xs:12,md:12,children:e.jsx(Ie,{variant:"h5",gutterBottom:!0,children:"Sequence"})})," ",e.jsx(o,{item:!0,xs:12,md:4,children:e.jsx(d,{label:"Sequence",fullWidth:!0,size:"small",name:"sequence",type:"number",value:r.sequence,onChange:i})}),e.jsx(o,{item:!0,xs:12,md:4,children:e.jsx(d,{label:"Rate",fullWidth:!0,type:"number",size:"small",name:"sequenceRate",value:r.sequenceRate,onChange:i})}),e.jsx(o,{item:!0,xs:12,md:4,children:e.jsx(d,{label:"Amount",fullWidth:!0,size:"small",name:"sequenceAmount",value:r.sequenceAmount,onChange:i})})]})," "]}),r.isSolving?e.jsx(o,{item:!0,xs:12,md:6,children:e.jsxs(o,{container:!0,spacing:1,width:"Inherit",children:[e.jsx(o,{item:!0,xs:12,md:12,children:e.jsx(Ie,{variant:"h5",gutterBottom:!0,children:"Solving"})})," ",e.jsx(o,{item:!0,xs:12,md:3,children:e.jsx(d,{label:"Layers",fullWidth:!0,size:"small",type:"number",name:"solvingLayers",value:r.solvingLayers,onChange:i})}),e.jsx(o,{item:!0,xs:12,md:3,children:e.jsx(d,{label:"Meters",type:"number",fullWidth:!0,size:"small",name:"solvingInMeters",value:r.solvingInMeters,onChange:i})}),e.jsx(o,{item:!0,xs:12,md:3,children:e.jsx(d,{label:"Rate",fullWidth:!0,type:"number",size:"small",name:"solvingRate",value:r.solvingRate,onChange:i})}),e.jsx(o,{item:!0,xs:12,md:3,children:e.jsx(d,{label:"Amount",fullWidth:!0,size:"small",type:"number",name:"solvingAmount",value:r.solvingAmount,onChange:i})})]})}):null,e.jsx(o,{item:!0,xs:12,md:12,children:e.jsx(Ue,{control:e.jsx(Ge,{checked:r.isSolving,onChange:p,name:"isSolving"}),label:"isSolving"})}),e.jsx(o,{item:!0,xs:12,textAlign:"right",sx:{mt:2},children:e.jsx(D,{variant:"contained",size:"small",onClick:g,children:"Save"})})]})," "]})," "]})]}),e.jsx(ue,{color:"#cc8587",sx:{height:1,width:"100%",mt:2}}),e.jsxs(V,{variant:"outlined",children:[e.jsx($,{className:"css-4rfrnx-MuiCardHeader-root",avatar:e.jsx(ke,{}),title:"View Embroidery ",titleTypographyProps:{style:{color:"white"}}})," ",e.jsx(o,{container:!0,spacing:2,width:"Inherit",sx:{paddingY:2,paddingX:2},children:e.jsx(o,{sx:{marginTop:2},item:!0,xs:12,children:e.jsx(ne,{sx:{height:500,width:"inherit","& .actions":{color:"text.secondary"},"& .textPrimary":{color:"text.primary"}},children:e.jsx(be,{rows:ee,columns:n,rowLength:100,sx:{boxShadow:2,border:2,borderColor:"primary.light","& .MuiDataGrid-cell:hover":{color:"primary.main"}}})})})})]})]})},Nt=At,kt="/assets/loadingGif-CrY4Z_y7.gif",zt=()=>{const{data:a}=je(),[t,s]=l.useState(""),{data:r,refetch:y}=Ce(t,{skip:!t}),[O,C]=l.useState([]),{enqueueSnackbar:A}=Me();l.useEffect(()=>{r&&(C(r.result),y())},[r]),console.log("designList",O),console.log("collectionData",a);const j=(a==null?void 0:a.result)||[],[k,L]=l.useState(!1),[R,de]=l.useState([]),[H,K]=l.useState([]),[B,M]=l.useState([]),[T,E]=l.useState([]),[F,G]=l.useState([]),[Q,Z]=l.useState([]),[f,w]=l.useState([]),[u,U]=l.useState({collectionId:"",baseColorId:"",baseColorName:"",noOfDesigns:"",noOfColors:"",planningHeaderId:"",designId:"",batchNo:"",componentId:"",cuttingSize:"",colorId:"",fabricId:"",noOfHeads:"",repeats:"",repeatSize:"",uomId:"",totalFabric:"",shrinkage:"",wastage:"",total:"",appId:1,createdOn:new Date().toISOString(),createdBy:0,lastUpdatedBy:0,lastUpdatedOn:new Date().toISOString(),isSchiffili:!1,repeatsInMtr:""});l.useEffect(()=>{(async()=>{try{const i=(await X.get("https://gecxc.com:4041/API/Common/GetPrePlanningLookUp?appID=1")).data.result[0];de(i.componentList),M(i.colorList),K(i.fabricList),G(i.noOfHeadsList),E(i.uom)}catch(p){console.error("Error fetching pre-planning lookup data:",p)}})()},[]),l.useEffect(()=>{const h=async i=>{try{const g=await X.get(`https://gecxc.com:4041/api/PrePlanning/GetPrePlanningHeaderByDesignId?designId=${i}`);console.log(g.data),Z(g.data.result)}catch(g){console.error("Error fetching pre-planning lookup data:",g)}},p=async i=>{try{const g=await X.get(`https://gecxc.com:4041/api/PrePlanning/GetPrePlanningByPlanningHeaderId?planningHeaderId=${i}`);console.log("GetPrePlanningByPlanningHeaderI",g.data.result),w(g.data.result.map((I,S)=>({...I,id:S})))}catch(g){console.error("Error fetching pre-planning lookup data:",g)}};u.designId&&h(u.designId),u.designId&&p(u.planningHeaderId)},[u.designId,u.planningHeaderId]),l.useEffect(()=>{const h=()=>{const I=parseFloat(u.repeats)||0,S=parseFloat(u.repeatSize)||0;return I*S};U(I=>({...I,totalFabric:h()}));const p=()=>{const I=parseFloat(u.totalFabric)||0,S=parseFloat(u.shrinkage)||0,n=parseFloat(u.wastage)||0;return I*(100+(S+n))/100};U(I=>({...I,total:p()}));const i=()=>(parseFloat(u.repeats),.9144*(parseFloat(u.repeatSize)||0));U(I=>({...I,repeatsInMtr:i()}));const g=()=>{const I=parseFloat(u.repeats)||0;return(parseFloat(u.repeatsInMtr)||0)*I};U(I=>({...I,totalFabric:I.isSchiffili?g():h()}))},[u.repeats,u.repeatSize,u.totalFabric,u.shrinkage,u.wastage,u.repeatsInMtr,u.isSchiffili]);const[se,oe]=l.useState(!1);l.useState(!1);const W=h=>{const{name:p,value:i}=h.target;if(p==="collectionId"){const g=j.find(I=>I.collectionId===parseInt(i));s(i),U({...u,collectionId:i,noOfDesigns:g?g.noOfDesigns:"",noOfColors:g?g.noOfColors:""})}else if(p==="designId"){const g=O.find(I=>I.designId===parseInt(i));U({...u,designId:i,baseColorId:g?g.colorId:"",baseColorName:g?g.colorName:""})}else if(p==="batchNo"){const g=Q.find(I=>I.batchNo===i);U({...u,batchNo:i,planningHeaderId:g?g.planningHeaderId:""}),oe(!0)}else U({...u,[p]:i})},xe=async()=>{try{const h=await X.post("https://gecxc.com:4041/api/PrePlanning/SavePrePlanning",{designId:parseInt(u.designId),planningHeaderId:parseInt(u.planningHeaderId),componentId:parseInt(u.componentId),colorId:parseInt(u.colorId),batchNo:u.batchNo,baseColorId:parseInt(u.baseColorId),cuttingSize:parseFloat(u.cuttingSize),fabricId:parseInt(u.fabricId),noOfHeads:parseInt(u.noOfHeads),repeats:parseFloat(u.repeats),repeatSize:parseFloat(u.repeatSize),uomId:parseInt(u.uomId),totalFabric:parseFloat(u.totalFabric),shrinkage:parseFloat(u.shrinkage),wastage:parseFloat(u.wastage),total:parseFloat(u.total),appId:u.appId,createdOn:u.createdOn,createdBy:u.createdBy,lastUpdatedBy:u.lastUpdatedBy,lastUpdatedOn:u.lastUpdatedOn,isSchiffili:u.isSchiffili,repeatsInMtr:u.repeatsInMtr});console.log("Data saved successfully:",h.data),A("Pre Planning saved successfully!",{variant:"success",autoHideDuration:5e3}),U({collectionId:u.collectionId,designId:u.designId,batchNo:u.batchNo,baseColorName:u.baseColorName,planningHeaderId:u.planningHeaderId,noOfDesigns:u.noOfDesigns,noOfColors:u.noOfColors,componentId:"",cuttingSize:"",colorId:"",fabricId:"",noOfHeads:"",repeats:"",repeatSize:"",uomId:"",totalFabric:"",shrinkage:"",wastage:"",total:"",appId:1,createdOn:new Date().toISOString(),createdBy:0,lastUpdatedBy:0,lastUpdatedOn:new Date().toISOString(),isSchiffili:!1,repeatsInMtr:""});const p=await X.get(`https://gecxc.com:4041/api/PrePlanning/GetPrePlanningByPlanningHeaderId?planningHeaderId=${u.planningHeaderId}`);w(p.data.result.map((i,g)=>({...i,id:g}))),oe(!1)}catch(h){console.error("Error saving data:",h),A("Pre Planning not saved successfully!",{variant:"error",autoHideDuration:5e3})}},ie=h=>{const{name:p,checked:i}=h.target;U(g=>({...g,[p]:i,uomId:i?139:g.uomId}))};console.log("initialRows",f);const J=f.reduce((h,p)=>h+(p.totalFabric??0),0),ee=f.reduce((h,p)=>h+(p.total??0),0),te=[...f,{id:"TOTAL_FABRIC",label:"Total Fabric",totalFabric:J,total:ee}],N={sortable:!1,pinnable:!1,hideable:!1};console.log("rows",te);const me=[{field:"componentName",headerName:"Component",...N,colSpan:(h,p)=>{if(p.id==="TOTAL_FABRIC")return 7},valueGetter:(h,p)=>p.id==="TOTAL_FABRIC"?(console.log("row",p.label),p.label):h},{field:"color",headerName:"Color",flex:1,...N},{field:"cuttingSize",headerName:"Cutting Size",flex:1,...N},{field:"fabric",headerName:"Fabrication",...N,flex:2},{field:"noOfHeadName",headerName:"No. Of Heads",...N,flex:1},{field:"repeats",headerName:"Repeats",...N},{field:"repeatSize",headerName:"Repeat Size",...N},{field:"totalFabric",headerName:"Total Fabric",...N,flex:1},{field:"uom",headerName:"UOM",colSpan:(h,p)=>{if(p.id==="TOTAL_FABRIC")return 3},valueGetter:(h,p)=>p.id==="TOTAL_FABRIC"?(console.log("row",p.label),"OverAll Total"):h},{field:"shrinkage",headerName:"Shrinkage %",flex:1},{field:"wastage",headerName:"Wastage %",flex:1},{field:"total",headerName:"Total",flex:1}],ce=({row:h,field:p})=>h.id==="TOTAL_FABRIC"&&(p==="componentName"||p==="uom")?(console.log(`Applying bold class to row ${h.id} and field ${p}`),"bold"):"";console.log("batchList:",Q);const re=(h,p)=>{oe(!se)};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"CardHeader",children:e.jsxs(V,{variant:"outlined",children:[e.jsx($,{className:"css-4rfrnx-MuiCardHeader-root",avatar:e.jsx(Xe,{}),title:"Pre Planning",titleTypographyProps:{style:{color:"white"}},children:" "}),e.jsxs(o,{container:!0,spacing:2,width:"Inherit",sx:{paddingY:2,paddingX:2},children:[e.jsxs(o,{item:!0,xs:12,md:2,children:[e.jsx(d,{fullWidth:!0,select:!0,label:"Select Collection",name:"collectionId",value:u.collectionId,onChange:W,size:"small",children:j.map(h=>e.jsx(v,{value:h.collectionId,children:h.collectionName},h.collectionId))})," "]}),e.jsx(o,{item:!0,xs:12,md:2,children:e.jsx(d,{fullWidth:!0,select:!0,label:"Select Design",name:"designId",value:u.designId,onChange:W,size:"small",children:O.map(h=>e.jsx(v,{value:h.designId,children:h.designNo},h.designId))})}),e.jsxs(o,{item:!0,xs:12,md:2,children:[e.jsx(d,{fullWidth:!0,select:!0,label:"Batch No.",name:"batchNo",value:u.batchNo,onChange:W,size:"small",children:Q.map(h=>e.jsx(v,{value:h.batchNo,children:h.batchNo},h.batchNo))})," "]}),e.jsx(o,{item:!0,xs:12,md:2,children:e.jsx(d,{label:"No of Design",fullWidth:!0,size:"small",name:"noOfDesigns",value:u.noOfDesigns,onChange:W,disabled:!0})}),e.jsx(o,{item:!0,xs:12,md:2,children:e.jsx(d,{label:"No of Color",fullWidth:!0,size:"small",name:"noOfColors",value:u.noOfColors,onChange:W,disabled:!0})}),e.jsx(o,{item:!0,xs:12,md:2,children:e.jsx(d,{label:"Base Color",fullWidth:!0,size:"small",name:"baseColorName",value:u.baseColorName,onChange:W,disabled:!0})})]})]})}),e.jsxs(V,{variant:"outlined",children:[e.jsx($,{className:"MainCard",avatar:e.jsx(Pe,{}),title:"Add Pre Planning",titleTypographyProps:{style:{color:"white"}},action:e.jsx(ae,{onClick:re,children:e.jsx(he,{style:{color:"white"}})}),sx:{display:"flex",alignItems:"center",justifyContent:"space-between"}}),e.jsxs(Se,{expanded:se,onChange:re,sx:{},children:[e.jsx(Ae,{expandIcon:e.jsx(he,{}),"aria-controls":"panel1-content",id:"panel1-header",sx:{display:"none"}}),e.jsx(Ne,{children:e.jsxs(o,{container:!0,spacing:2,width:"Inherit",sx:{paddingY:2,paddingX:2},children:[e.jsx(o,{item:!0,xs:12,md:2,children:e.jsx(we,{fullWidth:!0,options:R,getOptionLabel:h=>h.lookUpName,value:R.find(h=>h.lookUpId===u.componentId)||null,onChange:(h,p)=>{W({target:{name:"componentId",value:p?p.lookUpId:""}})},renderInput:h=>e.jsx(d,{...h,label:"Select Component",size:"small",name:"componentId",value:u.componentId})})}),e.jsxs(o,{item:!0,xs:12,md:2,children:[" ",e.jsx(we,{fullWidth:!0,options:B,getOptionLabel:h=>h.lookUpName,value:B.find(h=>h.lookUpId===u.colorId)||null,onChange:(h,p)=>{W({target:{name:"colorId",value:p?p.lookUpId:""}})},renderInput:h=>e.jsx(d,{...h,label:"Color",size:"small",value:u.colorId,name:"colorId"})})]}),e.jsx(o,{item:!0,xs:12,md:2,children:e.jsx(d,{label:"Cutting Size",fullWidth:!0,size:"small",name:"cuttingSize",type:"number",value:u.cuttingSize,onChange:W})}),e.jsx(o,{item:!0,xs:12,md:2,children:e.jsx(we,{fullWidth:!0,options:H,getOptionLabel:h=>h.lookUpName,value:H.find(h=>h.lookUpId===u.fabricId)||null,onChange:(h,p)=>{W({target:{name:"fabricId",value:p?p.lookUpId:""}})},renderInput:h=>e.jsx(d,{...h,label:"Fabrication",size:"small",name:"fabricId",value:u.fabricId})})}),e.jsx(o,{item:!0,xs:12,md:2,children:e.jsx(d,{fullWidth:!0,select:!0,label:"No of Heads",defaultValue:"",size:"small",name:"noOfHeads",value:u.noOfHeads,onChange:W,children:F.map(h=>e.jsx(v,{value:h.lookUpId,children:h.lookUpName},h.lookUpId))})}),e.jsx(o,{item:!0,xs:12,md:2,children:e.jsx(d,{label:"Repeats",fullWidth:!0,size:"small",name:"repeats",type:"number",value:u.repeats,onChange:W})}),e.jsx(o,{item:!0,xs:12,md:2,children:e.jsx(d,{label:"Repeat Size",fullWidth:!0,type:"number",size:"small",name:"repeatSize",value:u.repeatSize,onChange:W})}),e.jsx(o,{item:!0,xs:12,md:2,children:e.jsx(d,{label:"Total Fabric",fullWidth:!0,size:"small",name:"totalFabric",value:u.totalFabric,onChange:W})}),e.jsx(o,{item:!0,xs:12,md:2,children:e.jsx(d,{fullWidth:!0,select:!0,label:"UOM",type:"number",defaultValue:"",size:"small",name:"uomId",value:u.uomId,onChange:W,disabled:u.isSchiffili,children:T.map(h=>e.jsx(v,{value:h.lookUpId,children:h.lookUpName},h.lookUpId))})}),e.jsx(o,{item:!0,xs:12,md:2,children:e.jsx(d,{label:"Shrinkage %",fullWidth:!0,size:"small",type:"number",name:"shrinkage",value:u.shrinkage,onChange:W})}),e.jsx(o,{item:!0,xs:12,md:2,children:e.jsx(d,{label:"Wastage %",fullWidth:!0,size:"small",type:"number",name:"wastage",value:u.wastage,onChange:W})}),e.jsx(o,{item:!0,xs:12,md:2,children:e.jsx(d,{label:"Total",fullWidth:!0,type:"number",size:"small",name:"total",value:u.total,onChange:W})}),e.jsx(o,{item:!0,xs:12,md:2,textAlign:"right",children:e.jsx(Ue,{control:e.jsx(Ge,{checked:u.isSchiffili,onChange:ie,name:"isSchiffili"}),label:"Is Schiffli"})}),u.isSchiffili?e.jsx(o,{item:!0,xs:12,md:6,children:e.jsx(o,{container:!0,spacing:1,width:"Inherit",children:e.jsx(o,{item:!0,xs:12,md:4,children:e.jsx(d,{label:"repeat in mtr",fullWidth:!0,size:"small",name:"repeatsInMtr",disabled:!0,value:u.repeatsInMtr,onChange:W})})})}):null,e.jsx(o,{item:!0,xs:12,textAlign:"right",children:e.jsx(D,{variant:"contained",size:"small",onClick:xe,children:"Save"})})]})})]})]}),e.jsx(o,{item:!0,xs:12,md:12,children:e.jsx(ue,{sx:{height:1,width:"100%",marginTop:1,marginBottom:0}})}),e.jsxs(V,{variant:"outlined",children:[e.jsx($,{className:"MainCard",avatar:e.jsx(ke,{}),title:"View",titleTypographyProps:{style:{color:"white"}}}),e.jsx(o,{sx:{paddingY:1,paddingX:1},children:e.jsx(o,{sx:{},item:!0,xs:12,children:k?e.jsx("div",{style:{display:"flex",top:"40%",position:"absolute",left:"45%"},children:e.jsx("img",{src:kt,alt:"Loading",style:{width:300}})}):e.jsxs(ne,{sx:{height:500,width:"inherit","& .actions":{color:"text.secondary"},"& .textPrimary":{color:"text.primary"},"& .bold":{fontWeight:600}},children:[e.jsx(be,{rows:te,columns:me,rowLength:100,getCellClassName:ce,sx:{boxShadow:2,border:2,borderColor:"primary.light","& .MuiDataGrid-cell:hover":{color:"primary.main"}}})," "]})})})]})]})},wt=zt,Ot="/assets/roller-ezgif.com-instagif-CY-x4C-U.gif",Bt=()=>{const[a,t]=l.useState([]),[s,r]=l.useState({dpId:0,designId:"",batchNo:"",planningHeaderId:"",fabricId:"",colorId:"",color:"",vendorId:"",processType:"",AvailableQty:"",Shrinkage:"",Wastage:"",OutputQty:"",UOM:"",uomId:"",RatePerUOM:"",UnitRatePerPo:"",TotalExclGst:"",GST:"0",TotalIncludingGst:"",createdBy:0,poPcs:"",baseColorName:""});l.useEffect(()=>{r({dpId:a.dpId||0,designId:(a==null?void 0:a.designId)||"",planningHeaderId:(a==null?void 0:a.planningHeaderId)||0,batchNo:(a==null?void 0:a.batchNo)||"",fabricId:(a==null?void 0:a.fabricId)||"",colorId:(a==null?void 0:a.colorId)||"",color:(a==null?void 0:a.color)||"",vendorId:(a==null?void 0:a.vendorId)||"",processType:(a==null?void 0:a.processType)||"",AvailableQty:(a==null?void 0:a.availableQty)||"",Shrinkage:(a==null?void 0:a.shrinkage)||"",Wastage:(a==null?void 0:a.wastage)||"",OutputQty:(a==null?void 0:a.outputQty)||0,UOM:(a==null?void 0:a.uom)||0,uomId:(a==null?void 0:a.uomId)||"",RatePerUOM:(a==null?void 0:a.ratePerUOM)||0,UnitRatePerPo:(a==null?void 0:a.unitRatePerPo)||"",TotalExclGst:(a==null?void 0:a.totalExclGst)||"",GST:(a==null?void 0:a.gst)||"",TotalIncludingGst:(a==null?void 0:a.totalIncludingGst)||"",createdBy:(a==null?void 0:a.createdBy)||0,poPcs:(a==null?void 0:a.poPcs)||0,baseColorName:(a==null?void 0:a.baseColorName)||0})},[a]);const{enqueueSnackbar:y}=Me();console.log("Dyeing form data to send",s);const{data:O}=je(),[C,A]=l.useState(""),{data:j}=ye(),{data:k,refetch:L}=Ce(C,{skip:!C}),{data:R,refetch:de}=Oe(s.designId,{skip:!s.designId}),{data:H}=ot(s.planningHeaderId,{skip:!s.planningHeaderId}),{data:K}=rt({fabricId:s.fabricId,planningHeaderId:s.planningHeaderId},{skip:!s.fabricId||!s.planningHeaderId}),{data:B,refetch:M}=nt(s.planningHeaderId,{skip:!s.planningHeaderId}),[T,E]=l.useState([]),[F,G]=l.useState([]),[Q,Z]=l.useState([]),[f,w]=l.useState([]),[u,U]=l.useState([]),[se,oe]=l.useState([]),[W,xe]=l.useState([]),[ie,J]=l.useState(!1);console.log("batchList",F),console.log("formData",s);const ee=(i,g)=>{J(!ie)};l.useEffect(()=>{k&&E(k.result)},[k]),l.useEffect(()=>{R&&G(R.result)},[R]),l.useEffect(()=>{H&&Z(H.result)},[H]),l.useEffect(()=>{K&&oe(K.result)},[K]),l.useEffect(()=>{j&&xe(j.result[0].vendorList)},[H]),console.log(W),l.useEffect(()=>{B&&U(B.result.map((i,g)=>({id:g,...i})))},[B,M]),l.useEffect(()=>{if(j){const i=j.result[0];w(i.uomList)}},[j]);const te=(O==null?void 0:O.result)||[],N=i=>{const{name:g,value:I}=i.target;if(g==="collectionId")te.find(S=>S.collectionId===parseInt(I)),A(I),r({...s,collectionId:I});else if(g==="designId"){const S=T.find(n=>n.designId===parseInt(I));r({...s,designId:I,baseColorId:S?S.colorId:"",baseColorName:S?S.colorName:""})}else if(g==="batchNo"){const S=F.find(n=>n.batchNo===I);r({...s,batchNo:I,planningHeaderId:S?S.planningHeaderId:"",poPcs:S?S.poPcs:""}),J(!0)}else if(g==="fabricId")Q.find(S=>S.fabricId===I),console.log("Selected Fabric:",Q),r({...s,fabricId:I});else if(g==="ColorId"){const S=se.find(n=>n.colorId===I.colorId);r({...s,ColorId:I.colorId,color:S.color,AvailableQty:S.total,UOM:S.uom,Shrinkage:S.shrinkage,Wastage:S.wastage})}else r(g==="processType"?{...s,processType:I}:g==="vendorId"?{...s,vendorId:I}:{...s,[g]:I})};l.useEffect(()=>{const i=()=>{const P=parseFloat(s.AvailableQty)||0,q=parseFloat(s.Shrinkage)||0,ve=parseFloat(s.Wastage)||0;return P*(100-(q+ve))/100},g=()=>{const P=parseFloat(s.AvailableQty)||0,q=parseFloat(s.RatePerUOM)||0;return P*q},I=(P,q)=>P*(1+q/100),S=i(),n=g(),c=parseFloat(s.GST)||0,x=I(n,c),m=parseFloat(s.poPcs)||0,b=m?x/m:0;r(P=>({...P,OutputQty:S,TotalExclGst:n.toFixed(2),TotalIncludingGst:x.toFixed(2),UnitRatePerPo:b.toFixed(2)}))},[s.AvailableQty,s.Shrinkage,s.Wastage,s.RatePerUOM,s.GST,s.poPcs,s.UnitRatePerPo]);const me=async()=>{if(!s.designId||!s.batchNo){alert("Please fill all required fields.");return}try{const i=await X.post("https://gecxc.com:4041/api/DyeingPrinting/SaveDyeingPrinting",s);i.status===200?(console.log("Data saved successfully:",i.data),y("Dyeing saved successfully!",{variant:"success",autoHideDuration:5e3}),r(g=>({designId:g.designId,planningHeaderId:g.planningHeaderId,batchNo:g.batchNo,dpId:0,fabricId:"",colorId:"",color:"",vendorId:"",processType:"",AvailableQty:"",Shrinkage:"",Wastage:"",OutputQty:"",UOM:"",uomId:"",RatePerUOM:"",UnitRatePerPo:"",TotalExclGst:"",GST:"0",TotalIncludingGst:"",createdBy:0,poPcs:"",baseColorName:""})),M()):(console.error("Failed to save data:",i.data),y("Dyeing not saved successfully!",{variant:"error",autoHideDuration:5e3})),J(!1)}catch(i){console.error("Error saving data:",i)}},ce=[{value:"D",label:"Dyeing"},{value:"P",label:"Printing"}],re=i=>{t(i)};console.log("initialData",a);const h=async i=>{try{await X.delete(`https://gecxc.com:4041/api/DyeingPrinting/DeleteDyeingPrintingById?DPId=${i}`),M(),console.log("deleted")}catch(g){console.error("Error deleting data:",g)}},p=[{field:"fabricName",headerName:"Fabric"},{field:"colorName",headerName:"Color"},{field:"vendorName",headerName:"Vendor"},{field:"processType",headerName:"Process Type"},{field:"uom",headerName:"uom"},{field:"availableQty",headerName:"Available Quantitity"},{field:"shrinkage",headerName:"Shrinkage"},{field:"wastage",headerName:"Wastage"},{field:"outputQty",headerName:"Output Qty"},{field:"ratePerUOM",headerName:"Rate"},{field:"totalExclGst",headerName:"Total Excl. Gst"},{field:"gst",headerName:"GST"},{field:"totalIncludingGst",headerName:"Total Including GST"},{field:"unitRatePerPo",headerName:"UnitRate Per Po."},{field:"Action",headerName:"Actions",renderCell:i=>e.jsx("div",{style:{display:"flex",justifyContent:"space-around"},children:e.jsxs(Fe,{size:"small",variant:"text",children:[e.jsx(ae,{"aria-label":"Edit",onClick:()=>re(i.row),children:e.jsx(We,{})}),e.jsx(ae,{"aria-label":"delete",color:"primary",onClick:()=>h(i.row.dpId),children:e.jsx(Re,{})})]})})}];return e.jsxs(e.Fragment,{children:[e.jsxs(V,{variant:"outlined",children:[e.jsx($,{className:"css-4rfrnx-MuiCardHeader-root",avatar:e.jsx(Be,{src:Ot,sx:{background:"transparent"}}),title:"Dyeing ",titleTypographyProps:{style:{color:"white"}}}),e.jsxs(o,{container:!0,spacing:2,width:"Inherit",sx:{paddingY:2,paddingX:2},children:[e.jsxs(o,{item:!0,xs:12,md:3,children:[e.jsx(d,{fullWidth:!0,select:!0,label:"Select Collection",name:"collectionId",value:C,onChange:N,size:"small",children:te.map(i=>e.jsx(v,{value:i.collectionId,children:i.collectionName},i.collectionId))})," "]}),e.jsx(o,{item:!0,xs:12,md:3,children:e.jsx(d,{fullWidth:!0,select:!0,label:"Select Design",name:"designId",value:s.designId,onChange:N,size:"small",children:T.map(i=>e.jsx(v,{value:i.designId,children:i.designNo},i.designId))})}),e.jsxs(o,{item:!0,xs:12,md:3,children:[e.jsx(d,{fullWidth:!0,select:!0,label:"Batch No.",name:"batchNo",value:s.batchNo,onChange:N,size:"small",children:F.map(i=>e.jsx(v,{value:i.batchNo,children:i.batchNo},i.batchNo))})," "]}),e.jsx(o,{item:!0,xs:12,md:3,children:e.jsx(d,{label:"Base Color",fullWidth:!0,size:"small",name:"baseColorName",value:s.baseColorName,onChange:N,disabled:!0})}),e.jsx(o,{item:!0,xs:12,md:3,children:e.jsx(d,{fullWidth:!0,select:!0,label:"Select Fabric",defaultValue:"",size:"small",name:"fabricId",value:s.fabricId,onChange:N,children:Q.map(i=>e.jsx(v,{value:i.fabricId,children:i.fabric},i.fabricId))})}),e.jsx(o,{item:!0,xs:12,md:3,children:e.jsx(jt,{fullWidth:!0,options:se,getOptionLabel:i=>i.color||"",renderInput:i=>e.jsx(d,{...i,label:"Color",name:"colorId",size:"small"}),value:se.find(i=>i.colorId===s.colorId)||null,onChange:(i,g)=>{r(I=>({...I,colorId:g?g.colorId:"",color:g?g.color:"",AvailableQty:g?g.total:"",UOM:g?g.uom:"",uomId:g?g.uomId:"",Shrinkage:g?g.shrinkage:"",Wastage:g?g.wastage:""}))}})})]})]}),e.jsx(ue,{color:"#cc8587",sx:{height:1,width:"100%",mt:2}}),e.jsxs(V,{variant:"outlined",children:[e.jsx($,{className:"css-4rfrnx-MuiCardHeader-root",avatar:e.jsx(Pe,{}),title:"Add Dyeing ",titleTypographyProps:{style:{color:"white"}},action:e.jsx(ae,{onClick:ee,children:e.jsx(he,{style:{color:"white"}})}),sx:{display:"flex",alignItems:"center",justifyContent:"space-between"}}),e.jsxs(Se,{expanded:ie,onChange:ee,sx:{},children:[e.jsx(Ae,{expandIcon:e.jsx(he,{}),"aria-controls":"panel1-content",id:"panel1-header",sx:{display:"none"}}),e.jsx(Ne,{children:e.jsxs(o,{container:!0,spacing:2,width:"Inherit",sx:{paddingY:2,paddingX:2},children:[e.jsx(o,{item:!0,xs:12,md:3,children:e.jsx(d,{fullWidth:!0,select:!0,label:"Vendor Name",size:"small",name:"vendorId",value:s.vendorId,onChange:N,children:W.map(i=>e.jsx(v,{value:i.lookUpId,children:i.lookUpName},i.lookUpId))})}),e.jsx(o,{item:!0,xs:12,md:3,children:e.jsx(d,{fullWidth:!0,select:!0,label:"Process Type",size:"small",name:"processType",value:s.processType,onChange:N,children:ce.map(i=>e.jsx(v,{value:i.value,children:i.label},i.value))})}),e.jsx(o,{item:!0,xs:12,md:3,children:e.jsx(d,{label:"Po Pcs",fullWidth:!0,size:"small",name:"poPcs",value:s.poPcs,onChange:N})}),e.jsx(o,{item:!0,xs:12,md:1.5,children:e.jsx(d,{label:"UOM",fullWidth:!0,size:"small",name:"UOM",value:s.UOM,onChange:N})}),e.jsx(o,{item:!0,xs:12,md:1.5,children:e.jsx(d,{label:"AvailableQty",fullWidth:!0,size:"small",type:"number",name:"AvailableQty",value:s.AvailableQty,onChange:N})}),e.jsx(o,{item:!0,xs:12,md:1.5,children:e.jsx(d,{label:"Shrinkage%",type:"number",fullWidth:!0,size:"small",name:"Shrinkage",value:s.Shrinkage,onChange:N})}),e.jsx(o,{item:!0,xs:12,md:1.5,children:e.jsx(d,{label:"Wastage%",fullWidth:!0,size:"small",type:"number",name:"Wastage",value:s.Wastage,onChange:N})}),e.jsx(o,{item:!0,xs:12,md:1.5,children:e.jsx(d,{label:"Output Qty",fullWidth:!0,size:"small",name:"OutputQty",type:"number",value:s.OutputQty,onChange:N})}),e.jsx(o,{item:!0,xs:12,md:1.5,children:e.jsx(d,{label:"Rate",fullWidth:!0,size:"small",type:"number",name:"RatePerUOM",value:s.RatePerUOM,onChange:N})}),e.jsx(o,{item:!0,xs:12,md:1.5,children:e.jsx(d,{label:"Total Excluding GST",type:"number",fullWidth:!0,size:"small",name:"TotalExclGst",value:s.TotalExclGst,onChange:N})}),e.jsxs(o,{item:!0,xs:12,md:1.5,children:[e.jsx(d,{label:"GST",fullWidth:!0,type:"number",size:"small",name:"GST",value:s.GST,onChange:N})," "]}),e.jsx(o,{item:!0,xs:12,md:1.5,children:e.jsx(d,{label:"Total:Including Gst",fullWidth:!0,size:"small",name:"TotalExclGst",value:s.TotalIncludingGst,onChange:N})}),e.jsx(o,{item:!0,xs:12,md:1.5,children:e.jsx(d,{label:"Unit P: T/Po PC's",fullWidth:!0,size:"small",name:"UnitRatePerPo",value:s.UnitRatePerPo,onChange:N})}),e.jsx(o,{item:!0,xs:12,md:12,textAlign:"right",children:e.jsx(D,{variant:"contained",color:"primary",size:"small",onClick:me,children:"Save"})})]})})]})]}),e.jsx(ue,{color:"#cc8587",sx:{height:1,width:"100%",mt:2}}),e.jsxs(V,{variant:"outlined",children:[e.jsx($,{className:"css-4rfrnx-MuiCardHeader-root",avatar:e.jsx(ke,{}),title:"View Dyeing ",titleTypographyProps:{style:{color:"white"}}})," ",e.jsx(o,{container:!0,spacing:2,width:"Inherit",sx:{paddingY:2,paddingX:2},children:e.jsx(o,{item:!0,xs:12,md:12,paddingTop:1,children:e.jsx(ne,{sx:{height:500,width:"inherit","& .actions":{color:"text.secondary"},"& .textPrimary":{color:"text.primary"}},children:e.jsx(be,{rows:u,columns:p,rowLength:100,sx:{boxShadow:2,border:2,borderColor:"primary.light","& .MuiDataGrid-cell:hover":{color:"primary.main"}}})})})})]})]})},Wt=Bt,Rt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAACXBIWXMAAAsTAAALEwEAmpwYAAADr0lEQVR4nNXXaciVVRAH8Kv1Jtoi5psFZZYUtoimhUVlaJHZghK2UBFCtGkbZdgiBG1GHyowaaEdWogWElvMFjJpw4oWwrJsVetDtNNevxjeuXW8PPe991rvh/5w4TznnDkzZ87Mf+bWav8H4Dgcgc9wfcPanViFidioL5Rvj2/wIqbgCyzA3XgKH+BI/+DWijMGpYEjO1U+FH8Uh++Jj6yPNzG5YW5wccYxWItF6anwWP9OjJiE7/FuYcCTeDnHjQYsLWR3w8cYi/OxP57AzE49cSGewzgswfJ0/0u4HwfgWYyq3w5deBXH4wXchHU4GgvbVdwPR+EVPI1NMCDesviFos3SqIiTaSl7BW5Pw5/Ho3gYl2Nuu8G3NG+8X85tgcMxCxfhLBxWf/N08bJU+h52xRrciGdwdj7bsFbKx+fbnZTfe+cNflGNX/EQJqQ3Pi+MPgN3pAd/x8GtlO+BT/I2A1P4T+0hMuYdzC/Om56XCW/NyOCt5gs9Lo5oPxBD8u07xesZK5vjtjRqXKEj0vGEZgYsxGXYOKO8U/yE3ZN0PsSVuCHOLHTsgxVVykdmgAzKAGuFryvmLsDVBXnF+w9OCt+60BXcMarRgBA8D91Jvc2URrqNSZkJ+f1dUvRbDfu/wqbpiXmFrluCIUvlke+rsS3OaaJ8WUmxhewO+LYXT52KneLWhcx167EhRtQ3JKNVYUqTuAkmfDBStoncI7kvMmvLHAcdTywPORT35rjqbdfWySPzfDF+wAPF/Hb4skJ2Xa6HzL45fiwCvTRgJq7NvK/CmcXeuQ1rpxdrF1fIBvn0z5ScXuXFGk7Md4nbVeGUYu8lDWvnFmtzKmR/C+JpZcA03JXjqoBaWfD9VplGkqjq890VvUJgTfHuezUzYMdgsBxHRavCpAaZoQ3fQblVWJLrK0suaDSgXwbakCSTKkQp7WoiP6AX5pyVJPd3GjYzYgFmZzT/2OSwVdkLblOU7PuauF4+Z3fGxqWtDBiblawrWbE3hIFv4OcW++Ylta9uqyHVU3rnpNBr/h2WZ1WMrLmmpfJABEnW7uD44dlybwjCk8OyWX0/YqvWLvSUy3jTXbIt77QsL8q+YnReZnTbyuvA1OTuqZkhMyoqXSNWRH+Y8sem8sm1DYWehvLtjPrhObdzZspVuDnL7GnBI4XMPUlQIzZYeR3ZGc1ObzyeFW981viByRtjsttdnO3cyRF8tf8Serj8oPhjmu11tNqfZnpFzz8fh/TJn9O+xl9lMwg6mBWmPgAAAABJRU5ErkJggg==",Ft=()=>{const[a,t]=l.useState([]),[s,r]=l.useState({schiffiliId:0,designId:"",planningHeaderId:0,batchNo:"",componentId:"",poPcs:"",baseColorName:"",fabricId:"",vendorId:"",colorId:"",availableQty:"",thaanQty:0,operatingMachineId:0,operatingMachine:"",workingHeadId:0,cuttingSize:"",rate:"",costPerComponent:"",totalEmbroidry:0,noOfItemPerThaan:0,noOfStichesPerYard:0,amountPerYard:0,totalPcs:0,laserCut:!1,laserCutRate:0,pcsForLaserCut:0,totalAmount:0,createdOn:new Date().toISOString(),createdBy:0,lastUpdatedOn:new Date().toISOString(),LastUpdatedBy:0});l.useEffect(()=>{r({schiffiliId:a.schiffiliId||0,designId:(a==null?void 0:a.designId)||"",planningHeaderId:(a==null?void 0:a.planningHeaderId)||0,batchNo:(a==null?void 0:a.batchNo)||"",componentId:(a==null?void 0:a.componentId)||"",poPcs:(a==null?void 0:a.poPcs)||"",baseColorName:(a==null?void 0:a.baseColorName)||"",fabricId:(a==null?void 0:a.fabricId)||"",vendorId:(a==null?void 0:a.vendorId)||"",colorId:(a==null?void 0:a.colorId)||"",availableQty:(a==null?void 0:a.availableQty)||"",thaanQty:(a==null?void 0:a.thaanQty)||0,operatingMachineId:(a==null?void 0:a.operatingMachineId)||0,operatingMachine:(a==null?void 0:a.operatingMachine)||"",workingHeadId:(a==null?void 0:a.workingHeadId)||0,cuttingSize:(a==null?void 0:a.cuttingSize)||"",rate:(a==null?void 0:a.rate)||"",costPerComponent:(a==null?void 0:a.costPerComponent)||"",totalEmbroidry:(a==null?void 0:a.totalEmbroidry)||0,noOfItemPerThaan:(a==null?void 0:a.noOfItemPerThaan)||0,noOfStichesPerYard:(a==null?void 0:a.noOfStichesPerYard)||0,amountPerYard:(a==null?void 0:a.amountPerYard)||0,totalPcs:(a==null?void 0:a.totalPcs)||0,laserCut:(a==null?void 0:a.laserCut)||!1,laserCutRate:(a==null?void 0:a.laserCutRate)||0,pcsForLaserCut:(a==null?void 0:a.pcsForLaserCut)||0,totalAmount:(a==null?void 0:a.totalAmount)||0,reatedOn:(a==null?void 0:a.createdOn)||new Date().toISOString(),createdBy:(a==null?void 0:a.createdBy)||0,lastUpdatedOn:new Date().toISOString(),LastUpdatedBy:0})},[a]);const[y,O]=l.useState(!1),C=(n,c)=>{O(!y)},{data:A}=je(),[j,k]=l.useState(""),{data:L}=ye(),{data:R,refetch:de}=Ce(j,{skip:!j}),{data:H,refetch:K}=Oe(s.designId,{skip:!s.designId}),{data:B}=Te({batchNo:s.planningHeaderId,componentId:s.componentId},{skip:!s.planningHeaderId||!s.componentId}),{data:M}=Ee({batchNo:s.planningHeaderId,componentId:s.componentId,fabricId:s.fabricId},{skip:!s.planningHeaderId||!s.componentId||!s.fabricId}),{data:T,refetch:E}=Ye(s.planningHeaderId,{skip:!s.planningHeaderId}),{data:F}=Le(s.planningHeaderId,{skip:!s.planningHeaderId});console.log("formData.planningHeaderId",s.planningHeaderId),console.log("collectionData",A),console.log("schiffliList",T);const[G,Q]=l.useState([]),[Z,f]=l.useState([]),[w,u]=l.useState([]),[U,se]=l.useState([]),[oe,W]=l.useState([]),[xe,ie]=l.useState([]),[J,ee]=l.useState([]),[te,N]=l.useState([]),[me,ce]=l.useState([]);l.useEffect(()=>{R&&Q(R.result)},[R]),l.useEffect(()=>{H&&f(H.result)},[H]),l.useEffect(()=>{B&&u(B.result)},[B]),l.useEffect(()=>{M&&ee(B.result)},[M]),l.useEffect(()=>{F&&ce(F.result)},[F]),l.useEffect(()=>{T&&N(T.result.map((n,c)=>({id:c,...n})))},[T,E]),l.useEffect(()=>{if(L){const n=L.result[0];se(n.vendorList),W(n.operatingMachineList),ie(n.workingHeadList)}},[L]),console.log("initialRows",te);const re=(A==null?void 0:A.result)||[];l.useEffect(()=>{const n=()=>{const P=parseFloat(s.thaanQty)||0,q=parseFloat(s.operatingMachine)||0;return P*q};r(P=>({...P,totalEmbroidry:n()}));const c=()=>{const P=parseFloat(s.thaanQty)||0,q=parseFloat(s.noOfStichesPerYard)||0;return P*q};r(P=>({...P,totalPcs:c()}));const x=()=>{const P=parseFloat(s.noOfStichesPerYard)||0,q=parseFloat(s.rate)||0;return P/1e3*q};r(P=>({...P,amountPerYard:x()}));const m=()=>{const P=parseFloat(s.totalAmount)||0,q=parseFloat(s.totalPcs)||0;return P/q};r(P=>({...P,costPerComponent:m()}));const b=()=>{const P=parseFloat(s.amountPerYard)||0,q=parseFloat(s.totalEmbroidry)||0,ve=parseFloat(s.laserCutRate)||0,He=parseFloat(s.pcsForLaserCut)||0;return P*q+He*ve};r(P=>({...P,totalAmount:b()}))},[s.thaanQty,s.operatingMachine,s.noOfStichesPerYard,s.rate,s.totalAmount,s.totalPcs,s.amountPerYard,s.totalEmbroidry,s.laserCutRate,s.pcsForLaserCut]);const h=n=>{const{name:c,checked:x}=n.target;r(m=>({...m,[c]:x}))},p=n=>{const{name:c,value:x}=n.target;if(c==="collectionId")re.find(m=>m.collectionId===parseInt(x)),k(x),r({...s,collectionId:x});else if(c==="designId"){const m=G.find(b=>b.designId===parseInt(x));r({...s,designId:x,baseColorId:m?m.colorId:"",baseColorName:m?m.colorName:""})}else if(c==="batchNo"){const m=Z.find(b=>b.batchNo===x);r({...s,batchNo:x,planningHeaderId:m?m.planningHeaderId:"",poPcs:m?m.poPcs:""}),O(!0)}else if(c==="colorId"){const m=J.find(b=>b.colorId===x);r({...s,colorId:x,availableQty:m?m.total:"",cuttingSize:m?m.cuttingSize:"",repeats:m?m.repeats:""})}else if(c==="operatingMachineId"){const m=oe.find(b=>b.lookUpId===x);r({...s,operatingMachineId:x,operatingMachine:m?m.lookUpName:""})}else r({...s,[c]:x})};console.log("colors",J);const i=async()=>{try{const n=await X.post("https://gecxc.com:4041/api/Schiffli/SaveSchiffili",s);console.log("Save response:",n.data),r(c=>({designId:c.designId,planningHeaderId:c.planningHeaderId,batchNo:c.batchNo,baseColorName:c.baseColorName,schiffiliId:0,componentId:"",poPcs:"",fabricId:"",vendorId:"",colorId:"",availableQty:"",thaanQty:0,operatingMachineId:0,operatingMachine:"",workingHeadId:0,cuttingSize:"",rate:"",costPerComponent:"",totalEmbroidry:0,noOfItemPerThaan:0,noOfStichesPerYard:0,amountPerYard:0,totalPcs:0,laserCut:!1,laserCutRate:0,pcsForLaserCut:0,totalAmount:0,createdOn:new Date().toISOString(),createdBy:0,lastUpdatedOn:new Date().toISOString(),LastUpdatedBy:0})),E(),O(!1)}catch(n){console.error("Error saving data:",n)}};console.log("formData",s);const g=n=>{t(n)};console.log("initialData",a);const I=async n=>{try{await X.delete(`https://gecxc.com:4041/api/Schiffli/DeleteSchiffiById?schiffiId=${n}`),E(),console.log("deleted")}catch(c){console.error("Error deleting data:",c)}},S=[{field:"componentName",headerName:"Component"},{field:"fabricName",headerName:"Fabric"},{field:"vendorName",headerName:"Vendor"},{field:"colourName",headerName:"Color"},{field:"thaanQty",headerName:"Thaan Quantity"},{field:"availableQty",headerName:"Available Quantitity"},{field:"operatingMachineName",headerName:"Operating Machine"},{field:"noOfHeadsName",headerName:"Working Head"},{field:"cuttingSize",headerName:"Cutting Size"},{field:"rate",headerName:"Rate"},{field:"noOfStichesPerYard",headerName:"No. Of Stiches Per Yard"},{field:"noOfItemPerThaan",headerName:"No. Of Item Per Thaan"},{field:"totalEmbroidry",headerName:"Total Embroidry"},{field:"amountPerYard",headerName:"Amount Per Yard"},{field:"totalPcs",headerName:"Total Pcs"},{field:"totalAmount",headerName:"Total Amount"},{field:"costPerComponent",headerName:"Cost Per Component"},{field:"laserCutRate",headerName:"LaserCut Rate"},{field:"pcsForLaserCut",headerName:"Pcs.For Laser Cut"},{field:"Action",headerName:"Actions",renderCell:n=>e.jsx("div",{style:{display:"flex",justifyContent:"space-around"},children:e.jsxs(Fe,{size:"small",variant:"text",children:[e.jsx(ae,{"aria-label":"Edit",onClick:()=>g(n.row),children:e.jsx(We,{})}),e.jsx(ae,{"aria-label":"delete",color:"primary",onClick:()=>I(n.row.schiffiliId),children:e.jsx(Re,{})})]})})}];return e.jsxs(e.Fragment,{children:[e.jsxs(V,{variant:"outlined",children:[e.jsx($,{className:"css-4rfrnx-MuiCardHeader-root",avatar:e.jsx(Be,{src:Rt,sx:{background:"transparent"}}),title:"Schiffli ",titleTypographyProps:{style:{color:"white"}}}),e.jsxs(o,{container:!0,spacing:2,width:"Inherit",sx:{paddingY:2,paddingX:2},children:[e.jsxs(o,{item:!0,xs:12,md:3,children:[e.jsx(d,{fullWidth:!0,select:!0,label:"Select Collection",name:"collectionId",value:j,onChange:p,size:"small",children:re.map(n=>e.jsx(v,{value:n.collectionId,children:n.collectionName},n.collectionId))})," "]}),e.jsx(o,{item:!0,xs:12,md:3,children:e.jsx(d,{fullWidth:!0,select:!0,label:"Select Design",name:"designId",value:s.designId,onChange:p,size:"small",children:G.map(n=>e.jsx(v,{value:n.designId,children:n.designNo},n.designId))})}),e.jsxs(o,{item:!0,xs:12,md:3,children:[e.jsx(d,{fullWidth:!0,select:!0,label:"Batch No.",name:"batchNo",value:s.batchNo,onChange:p,size:"small",children:Z.map(n=>e.jsx(v,{value:n.batchNo,children:n.batchNo},n.batchNo))})," "]}),e.jsxs(o,{item:!0,xs:12,md:3,children:[e.jsx(d,{fullWidth:!0,select:!0,label:"Components",name:"componentId",value:s.componentId,onChange:p,size:"small",children:me.map(n=>e.jsx(v,{value:n.componentId,children:n.componentName},n.componentId))})," "]}),e.jsx(o,{item:!0,xs:12,md:3,children:e.jsx(d,{label:"Base Color",fullWidth:!0,size:"small",name:"baseColorName",value:s.baseColorName,onChange:p,disabled:!0})})]})]}),e.jsx(ue,{color:"#cc8587",sx:{height:1,width:"100%",mt:2}}),e.jsxs(V,{variant:"outlined",children:[e.jsx($,{className:"css-4rfrnx-MuiCardHeader-root",avatar:e.jsx(Pe,{}),title:"Add Schiffli ",titleTypographyProps:{style:{color:"white"}},action:e.jsx(ae,{onClick:C,children:e.jsx(he,{style:{color:"white"}})}),sx:{display:"flex",alignItems:"center",justifyContent:"space-between"}})," ",e.jsxs(Se,{expanded:y,onChange:C,sx:{},children:[e.jsx(Ae,{expandIcon:e.jsx(he,{}),"aria-controls":"panel1-content",id:"panel1-header",sx:{display:"none"}}),e.jsx(Ne,{children:e.jsxs(o,{container:!0,spacing:2,width:"Inherit",sx:{paddingY:2,paddingX:2},children:[e.jsx(o,{item:!0,xs:12,md:3,children:e.jsx(d,{fullWidth:!0,select:!0,label:"Select Fabric",defaultValue:"",size:"small",name:"fabricId",value:s.fabricId,onChange:p,children:w.map(n=>e.jsx(v,{value:n.fabricId,children:n.fabric},n.fabricId))})}),e.jsx(o,{item:!0,xs:12,md:3,children:e.jsx(d,{fullWidth:!0,select:!0,label:"Vendors",defaultValue:"",size:"small",name:"vendorId",value:s.vendorId,onChange:p,children:U.map(n=>e.jsx(v,{value:n.lookUpId,children:n.lookUpName},n.lookUpId))})}),e.jsx(o,{item:!0,xs:12,md:3,children:e.jsx(d,{fullWidth:!0,select:!0,label:"Color",size:"small",name:"colorId",value:s.colorId,onChange:p,children:J.map(n=>e.jsx(v,{value:n.colorId,children:n.color},n.colorId))})}),e.jsx(o,{item:!0,xs:12,md:1.5,children:e.jsx(d,{label:"Po Pcs",fullWidth:!0,size:"small",name:"poPcs",value:s.poPcs,onChange:p})}),e.jsx(o,{item:!0,xs:12,md:1.5,children:e.jsx(d,{label:"Available Quantity",fullWidth:!0,size:"small",name:"availableQty",value:s.availableQty,onChange:p})}),e.jsx(o,{item:!0,xs:12,md:1.5,children:e.jsx(d,{label:"Thaan Quantity",fullWidth:!0,type:"number",size:"small",name:"thaanQty",value:s.thaanQty,onChange:p})}),e.jsx(o,{item:!0,xs:12,md:1.5,children:e.jsx(d,{fullWidth:!0,select:!0,label:"operatingMachineId",defaultValue:"",size:"small",name:"operatingMachineId",value:s.operatingMachineId,onChange:p,children:oe.map(n=>e.jsx(v,{value:n.lookUpId,children:n.lookUpName},n.lookUpId))})}),e.jsx(o,{item:!0,xs:12,md:1.5,children:e.jsx(d,{fullWidth:!0,select:!0,label:"workingHeadId",defaultValue:"",size:"small",name:"workingHeadId",value:s.workingHeadId,onChange:p,children:xe.map(n=>e.jsx(v,{value:n.lookUpId,children:n.lookUpName},n.lookUpId))})}),e.jsx(o,{item:!0,xs:12,md:1.5,children:e.jsx(d,{label:"Cutting Size",fullWidth:!0,type:"number",size:"small",name:"cuttingSize",value:s.cuttingSize,onChange:p})}),e.jsx(o,{item:!0,xs:12,md:1.5,children:e.jsx(d,{label:"Rate",type:"number",fullWidth:!0,size:"small",name:"rate",value:s.rate,onChange:p})}),e.jsx(o,{item:!0,xs:12,md:1.5,children:e.jsx(d,{label:"No. Of Stiches Per Yard",fullWidth:!0,type:"number",size:"small",name:"noOfStichesPerYard",value:s.noOfStichesPerYard,onChange:p})}),e.jsx(o,{item:!0,xs:12,md:1.5,children:e.jsx(d,{label:"No. Of Items Per Thaan",fullWidth:!0,size:"small",type:"number",name:"noOfItemPerThaan",value:s.noOfItemPerThaan,onChange:p})}),e.jsx(o,{item:!0,xs:12,md:1.5,children:e.jsx(d,{label:"Total Embroidry",fullWidth:!0,size:"small",name:"totalEmbroidry",type:"number",value:s.totalEmbroidry,onChange:p})}),e.jsx(o,{item:!0,xs:12,md:1.5,children:e.jsx(d,{label:"Amount Per Yard",fullWidth:!0,type:"number",size:"small",name:"amountPerYard",value:s.amountPerYard,onChange:p})}),e.jsx(o,{item:!0,xs:12,md:1.5,children:e.jsx(d,{label:"Total Pcs",fullWidth:!0,size:"small",name:"totalPcs",value:s.totalPcs,onChange:p})}),e.jsx(o,{item:!0,xs:12,md:1.5,children:e.jsx(d,{label:"Cost Per Component",fullWidth:!0,size:"small",name:"costPerComponent",value:s.costPerComponent,onChange:p})}),e.jsx(o,{item:!0,xs:12,md:1.5,children:e.jsx(d,{label:"Total Amount",fullWidth:!0,size:"small",type:"number",name:"totalAmount",value:s.totalAmount,onChange:p})}),e.jsx(o,{item:!0,xs:12,md:1.5,children:e.jsx(Ue,{control:e.jsx(Ge,{checked:s.laserCut,onChange:h,name:"laserCut"}),label:"Laser Cut"})}),s.laserCut?e.jsx(o,{item:!0,xs:12,md:4.5,children:e.jsxs(o,{container:!0,spacing:1,width:"Inherit",children:[e.jsx(o,{item:!0,xs:12,md:6,children:e.jsx(d,{label:"Laser Cut Rate",fullWidth:!0,size:"small",name:"laserCutRate",value:s.laserCutRate,onChange:p})}),e.jsx(o,{item:!0,xs:12,md:6,children:e.jsx(d,{label:"Pcs For LaserCut",fullWidth:!0,size:"small",name:"pcsForLaserCut",value:s.pcsForLaserCut,onChange:p})})]})}):null,e.jsx(o,{item:!0,xs:12,textAlign:"right",sx:{mt:2},children:e.jsx(D,{variant:"contained",size:"small",onClick:i,children:"Save"})})]})})]})]}),e.jsx(ue,{color:"#cc8587",sx:{height:1,width:"100%",mt:2}}),e.jsxs(V,{variant:"outlined",children:[e.jsx($,{className:"css-4rfrnx-MuiCardHeader-root",avatar:e.jsx(ke,{}),title:"View Schiffli ",titleTypographyProps:{style:{color:"white"}}}),e.jsx(o,{container:!0,spacing:2,width:"Inherit",sx:{paddingY:2,paddingX:2},children:e.jsx(o,{sx:{marginTop:2},item:!0,xs:12,children:e.jsx(ne,{sx:{height:500,width:"inherit","& .actions":{color:"text.secondary"},"& .textPrimary":{color:"text.primary"}},children:e.jsx(be,{rows:te,columns:S,rowLength:100,sx:{boxShadow:2,border:2,borderColor:"primary.light","& .MuiDataGrid-cell:hover":{color:"primary.main"}}})})})})]})]})},Ht=Ft,Tt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAACXBIWXMAAAsTAAALEwEAmpwYAAABpklEQVR4nO2XMU5CQRCGlwQlaoF3sbFUQyfxAhjFK9AQCrVTo4WvlBMoeAkpfN5BPYGKtMTCzywMybrZ99jHc01I+BMq5v/nZ3d2ZlBqgXkFcAU8AT2gA1wAO8DSfyQvAUPc6AMnQNmILwAVX/EK0HV8GlbcBlADDoGmnMKnYeQdqErySGv4GigIwcZUAaAohl6E8w3EvnzbRJzVgMFfAdqz8hWwK+5nNeA6Re8rWAc+hHRjCHVDX+EIwKkQnuUoMxWRbxEnkZeNSj6Y6RnlAeNGMnnLxeAJbUg307hTAQCs6dNMC+iIgWaA5JvAl66ntKCeGKgHMLAv2nFaUCxBtQAGjkT7YdqEG+o+H8BAy6u+gNJfJxfdezFwFkI/FXpHAAZiYEuFBuNuWHDcf99rYQEaCe3UqxtKbCQddBV4FQPHKoOAjZFgRn5kjOU3c0vKauDaN3kCX4/2PZVDoK0nYw7+Y5YfoAyB2FhM9JpV9ymivFeorCKqyoI5wUC+b4mhmt248haxcjyjsqza+hm5MAzVwFwNZRs4B25leOk/J5e/IxeYI/wAk43AjYDcFOgAAAAASUVORK5CYII=",Et=()=>{const[a,t]=l.useState([]),[s,r]=l.useState({additionalProcessId:0,designId:"",planningHeaderId:0,batchNo:"",componentId:"",poPcs:"",baseColorName:"",fabricId:"",vendorId:"",colorId:"",availableQty:"",ratePerPcs:"",costPerComponent:"",totalAmount:"",processType:"",uomId:"",pcsPerComponent:"",createdOn:new Date().toISOString(),createdBy:0,lastUpdatedOn:new Date().toISOString(),LastUpdatedBy:0});l.useEffect(()=>{r({additionalProcessId:a.additionalProcessId||0,designId:(a==null?void 0:a.designId)||"",planningHeaderId:(a==null?void 0:a.planningHeaderId)||0,batchNo:(a==null?void 0:a.batchNo)||"",componentId:(a==null?void 0:a.componentId)||"",poPcs:(a==null?void 0:a.poPcs)||"",baseColorName:(a==null?void 0:a.baseColorName)||"",fabricId:(a==null?void 0:a.fabricId)||"",vendorId:(a==null?void 0:a.vendorId)||"",colorId:(a==null?void 0:a.colorId)||"",availableQty:(a==null?void 0:a.availableQty)||"",ratePerPcs:(a==null?void 0:a.ratePerPcs)||"",costPerComponent:(a==null?void 0:a.costPerComponent)||"",pcsPerComponent:(a==null?void 0:a.pcsPerComponent)||0,totalAmount:(a==null?void 0:a.totalAmount)||0,reatedOn:(a==null?void 0:a.createdOn)||new Date().toISOString(),createdBy:(a==null?void 0:a.createdBy)||0,lastUpdatedOn:new Date().toISOString(),LastUpdatedBy:0})},[a]);const[y,O]=l.useState(!1),C=(n,c)=>{O(!y)},{data:A}=je(),[j,k]=l.useState(""),{data:L}=ye(),{data:R,refetch:de}=Ce(j,{skip:!j}),{data:H,refetch:K}=Oe(s.designId,{skip:!s.designId}),{data:B}=Te({batchNo:s.planningHeaderId,componentId:s.componentId},{skip:!s.planningHeaderId||!s.componentId}),{data:M}=Ee({batchNo:s.planningHeaderId,componentId:s.componentId,fabricId:s.fabricId},{skip:!s.planningHeaderId||!s.componentId||!s.fabricId}),{data:T,refetch:E}=Ye(s.planningHeaderId,{skip:!s.planningHeaderId}),{data:F}=Le(s.planningHeaderId,{skip:!s.planningHeaderId});console.log("formData.planningHeaderId",s.planningHeaderId),console.log("collectionData",A),console.log("schiffliList",T);const[G,Q]=l.useState([]),[Z,f]=l.useState([]),[w,u]=l.useState([]),[U,se]=l.useState([]),[oe,W]=l.useState([]),[xe,ie]=l.useState([]),[J,ee]=l.useState([]),[te,N]=l.useState([]),[me,ce]=l.useState([]);l.useEffect(()=>{R&&Q(R.result)},[R]),l.useEffect(()=>{H&&f(H.result)},[H]),l.useEffect(()=>{B&&u(B.result)},[B]),l.useEffect(()=>{M&&ee(B.result)},[M]),l.useEffect(()=>{F&&ce(F.result)},[F]),l.useEffect(()=>{T&&N(T.result.map((n,c)=>({id:c,...n})))},[T,E]),l.useEffect(()=>{if(L){const n=L.result[0];se(n.vendorList),W(n.operatingMachineList),ie(n.workingHeadList)}},[L]),console.log("initialRows",te);const re=(A==null?void 0:A.result)||[],h=n=>{const{name:c,value:x}=n.target;if(c==="collectionId")re.find(m=>m.collectionId===parseInt(x)),k(x),r({...s,collectionId:x});else if(c==="designId"){const m=G.find(b=>b.designId===parseInt(x));r({...s,designId:x,baseColorId:m?m.colorId:"",baseColorName:m?m.colorName:""})}else if(c==="batchNo"){const m=Z.find(b=>b.batchNo===x);r({...s,batchNo:x,planningHeaderId:m?m.planningHeaderId:"",poPcs:m?m.poPcs:""}),O(!0)}else if(c==="colorId"){const m=J.find(b=>b.colorId===x);r({...s,colorId:x,availableQty:m?m.total:"",cuttingSize:m?m.cuttingSize:"",repeats:m?m.repeats:""})}else if(c==="operatingMachineId"){const m=oe.find(b=>b.lookUpId===x);r({...s,operatingMachineId:x,operatingMachine:m?m.lookUpName:""})}else r({...s,[c]:x})};console.log("colors",J);const p=async()=>{try{const n=await X.post("https://gecxc.com:4041/api/AdditionalProcess/SaveAdditionalProcess",s);console.log("Save response:",n.data),r(c=>({designId:c.designId,planningHeaderId:c.planningHeaderId,batchNo:c.batchNo,baseColorName:c.baseColorName,additionalProcessId:0,poPcs:"",fabricId:"",vendorId:"",colorId:"",availableQty:"",ratePerPcs:"",costPerComponent:"",uomId:0,pcsPerComponent:0,totalAmount:"",createdOn:new Date().toISOString(),createdBy:0,lastUpdatedOn:new Date().toISOString(),LastUpdatedBy:0})),E(),O(!1)}catch(n){console.error("Error saving data:",n)}};console.log("formData",s);const i=n=>{t(n)};console.log("initialData",a);const g=async n=>{try{await X.delete(`https://gecxc.com:4041/api/Schiffli/DeleteSchiffiById?schiffiId=${n}`),E(),console.log("deleted")}catch(c){console.error("Error deleting data:",c)}},I=[{value:"D",label:"Dyeing"},{value:"P",label:"Printing"}],S=[{field:"componentName",headerName:"Component"},{field:"fabricName",headerName:"Fabric"},{field:"vendorName",headerName:"Vendor"},{field:"colourName",headerName:"Color"},{field:"thaanQty",headerName:"Thaan Quantity"},{field:"availableQty",headerName:"Available Quantitity"},{field:"operatingMachineName",headerName:"Operating Machine"},{field:"noOfHeadsName",headerName:"Working Head"},{field:"cuttingSize",headerName:"Cutting Size"},{field:"rate",headerName:"Rate"},{field:"noOfStichesPerYard",headerName:"No. Of Stiches Per Yard"},{field:"noOfItemPerThaan",headerName:"No. Of Item Per Thaan"},{field:"totalEmbroidry",headerName:"Total Embroidry"},{field:"amountPerYard",headerName:"Amount Per Yard"},{field:"totalPcs",headerName:"Total Pcs"},{field:"totalAmount",headerName:"Total Amount"},{field:"costPerComponent",headerName:"Cost Per Component"},{field:"laserCutRate",headerName:"LaserCut Rate"},{field:"pcsForLaserCut",headerName:"Pcs.For Laser Cut"},{field:"Action",headerName:"Actions",renderCell:n=>e.jsx("div",{style:{display:"flex",justifyContent:"space-around"},children:e.jsxs(Fe,{size:"small",variant:"text",children:[e.jsx(ae,{"aria-label":"Edit",onClick:()=>i(n.row),children:e.jsx(We,{})}),e.jsx(ae,{"aria-label":"delete",color:"primary",onClick:()=>g(n.row.schiffiliId),children:e.jsx(Re,{})})]})})}];return e.jsxs(e.Fragment,{children:[e.jsxs(V,{variant:"outlined",children:[e.jsx($,{className:"css-4rfrnx-MuiCardHeader-root",avatar:e.jsx(Be,{src:Tt,sx:{background:"transparent"}}),title:"Additional Process ",titleTypographyProps:{style:{color:"white"}}}),e.jsxs(o,{container:!0,spacing:2,width:"Inherit",sx:{paddingY:2,paddingX:2},children:[e.jsxs(o,{item:!0,xs:12,md:3,children:[e.jsx(d,{fullWidth:!0,select:!0,label:"Select Collection",name:"collectionId",value:j,onChange:h,size:"small",children:re.map(n=>e.jsx(v,{value:n.collectionId,children:n.collectionName},n.collectionId))})," "]}),e.jsx(o,{item:!0,xs:12,md:3,children:e.jsx(d,{fullWidth:!0,select:!0,label:"Select Design",name:"designId",value:s.designId,onChange:h,size:"small",children:G.map(n=>e.jsx(v,{value:n.designId,children:n.designNo},n.designId))})}),e.jsxs(o,{item:!0,xs:12,md:3,children:[e.jsx(d,{fullWidth:!0,select:!0,label:"Batch No.",name:"batchNo",value:s.batchNo,onChange:h,size:"small",children:Z.map(n=>e.jsx(v,{value:n.batchNo,children:n.batchNo},n.batchNo))})," "]}),e.jsxs(o,{item:!0,xs:12,md:3,children:[e.jsx(d,{fullWidth:!0,select:!0,label:"Components",name:"componentId",value:s.componentId,onChange:h,size:"small",children:me.map(n=>e.jsx(v,{value:n.componentId,children:n.componentName},n.componentId))})," "]}),e.jsx(o,{item:!0,xs:12,md:3,children:e.jsx(d,{label:"Base Color",fullWidth:!0,size:"small",name:"baseColorName",value:s.baseColorName,onChange:h,disabled:!0})})]})]}),e.jsx(ue,{color:"#cc8587",sx:{height:1,width:"100%",mt:2}}),e.jsxs(V,{variant:"outlined",children:[e.jsx($,{className:"css-4rfrnx-MuiCardHeader-root",avatar:e.jsx(Pe,{}),title:"Add Additional Process ",titleTypographyProps:{style:{color:"white"}},action:e.jsx(ae,{onClick:C,children:e.jsx(he,{style:{color:"white"}})}),sx:{display:"flex",alignItems:"center",justifyContent:"space-between"}})," ",e.jsxs(Se,{expanded:y,onChange:C,sx:{},children:[e.jsx(Ae,{expandIcon:e.jsx(he,{}),"aria-controls":"panel1-content",id:"panel1-header",sx:{display:"none"}}),e.jsx(Ne,{children:e.jsxs(o,{container:!0,spacing:2,width:"Inherit",sx:{paddingY:2,paddingX:2},children:[e.jsx(o,{item:!0,xs:12,md:3,children:e.jsx(d,{fullWidth:!0,select:!0,label:"Select Fabric",defaultValue:"",size:"small",name:"fabricId",value:s.fabricId,onChange:h,children:w.map(n=>e.jsx(v,{value:n.fabricId,children:n.fabric},n.fabricId))})}),e.jsx(o,{item:!0,xs:12,md:3,children:e.jsx(d,{fullWidth:!0,select:!0,label:"Vendors",defaultValue:"",size:"small",name:"vendorId",value:s.vendorId,onChange:h,children:U.map(n=>e.jsx(v,{value:n.lookUpId,children:n.lookUpName},n.lookUpId))})}),e.jsx(o,{item:!0,xs:12,md:3,children:e.jsx(d,{fullWidth:!0,select:!0,label:"Color",size:"small",name:"colorId",value:s.colorId,onChange:h,children:J.map(n=>e.jsx(v,{value:n.colorId,children:n.color},n.colorId))})}),e.jsx(o,{item:!0,xs:12,md:3,children:e.jsx(d,{fullWidth:!0,select:!0,label:"Process Type",size:"small",name:"processType",value:s.processType,onChange:h,children:I.map(n=>e.jsx(v,{value:n.value,children:n.label},n.value))})}),e.jsx(o,{item:!0,xs:12,md:1.5,children:e.jsx(d,{label:"Po Pcs",fullWidth:!0,size:"small",name:"poPcs",value:s.poPcs,onChange:h})}),e.jsx(o,{item:!0,xs:12,md:1.5,children:e.jsx(d,{label:" Quantity",fullWidth:!0,size:"small",name:"availableQty",value:s.availableQty,onChange:h})}),e.jsx(o,{item:!0,xs:12,md:1.5,children:e.jsx(d,{label:"Rate",type:"number",fullWidth:!0,size:"small",name:"rate",value:s.rate,onChange:h})}),e.jsx(o,{item:!0,xs:12,md:1.5,children:e.jsx(d,{label:"Total Pcs",fullWidth:!0,size:"small",name:"totalPcs",value:s.totalPcs,onChange:h})}),e.jsx(o,{item:!0,xs:12,md:1.5,children:e.jsx(d,{label:"Total Amount",fullWidth:!0,size:"small",type:"number",name:"totalAmount",value:s.totalAmount,onChange:h})}),e.jsx(o,{item:!0,xs:12,textAlign:"right",children:e.jsx(D,{variant:"contained",size:"small",onClick:p,children:"Save"})})]})})]})]}),e.jsx(ue,{color:"#cc8587",sx:{height:1,width:"100%",mt:2}}),e.jsxs(V,{variant:"outlined",children:[e.jsx($,{className:"css-4rfrnx-MuiCardHeader-root",avatar:e.jsx(ke,{}),title:"View Additional Process ",titleTypographyProps:{style:{color:"white"}}}),e.jsx(o,{container:!0,spacing:2,width:"Inherit",sx:{paddingY:2,paddingX:2},children:e.jsx(o,{sx:{marginTop:2},item:!0,xs:12,children:e.jsx(ne,{sx:{height:500,width:"inherit","& .actions":{color:"text.secondary"},"& .textPrimary":{color:"text.primary"}},children:e.jsx(be,{rows:te,columns:S,rowLength:100,sx:{boxShadow:2,border:2,borderColor:"primary.light","& .MuiDataGrid-cell:hover":{color:"primary.main"}}})})})})]})]})},Lt=Et;function Ut(a){const{data:t}=ye(),[s,r]=l.useState([]);l.useEffect(()=>{t&&r(t.result[0].vendorList)},[t]);const y=[{value:"Card Printing",label:"Card Printing"},{value:"Additional Service",label:"Additional Service"}],O=[{value:"Elaf PVC Zipper Bag",label:"Elaf PVC Zipper Bag"},{value:"No",label:"No"}],[C,A]=l.useState({serviceTypeId:"",serviceListId:"",vendorId:"",poPcs:"",qty:"",uomId:"",rate:"",totalAmount:"",quantity:"",ratePerPcs:"",costperPiece:"",uom:"",vendor:null,serviceType:null,serviceListName:null,createdBy:0,createdOn:new Date().toISOString()}),j=async k=>{const{name:L,value:R}=k.target;A({...C,[L]:R})};return e.jsxs(o,{container:!0,spacing:2,width:"Inherit",sx:{paddingY:2,paddingX:2},children:[" ",e.jsx(o,{item:!0,md:4,width:"inherit",paddingX:1,children:e.jsx(d,{id:"outlined-select-option",select:!0,label:"Service Type",name:"serviceTypeId",value:C.serviceTypeId,onChange:j,defaultValue:"Card Printing",variant:"outlined",size:"small",fullWidth:!0,children:y.map(k=>e.jsx(v,{value:k.value,children:k.label},k.value))})}),e.jsx(o,{item:!0,md:4,width:"inherit",paddingX:1,children:e.jsx(d,{id:"outlined-select-option",select:!0,label:"Service List Id",name:"serviceListId",value:C.serviceList,onChange:j,defaultValue:"Elaf PVC Zipper Bag",variant:"outlined",size:"small",fullWidth:!0,children:O.map(k=>e.jsx(v,{value:k.value,children:k.label},k.value))})}),e.jsx(o,{item:!0,xs:12,md:4,children:e.jsx(d,{fullWidth:!0,select:!0,label:"Vendor Name",size:"small",name:"vendorId",value:C.vendorId,onChange:j,children:s.map(k=>e.jsx(v,{value:k.lookUpId,children:k.lookUpName},k.lookUpId))})}),e.jsx(o,{item:!0,md:2,width:"inherit",paddingX:1,children:e.jsx(d,{id:"outlined-required",label:"PO PC's",name:"poPcs",value:C.poPcs,onChange:j,type:"number",size:"small",fullWidth:!0,disabled:!0})}),e.jsx(o,{item:!0,md:2,width:"inherit",paddingX:1,children:e.jsx(d,{id:"outlined-required",label:"Qty",name:"qty",value:C.qty,onChange:j,type:"number",size:"small",required:!0,fullWidth:!0})}),e.jsx(o,{item:!0,md:2,width:"inherit",paddingX:1,children:e.jsx(d,{id:"outlined-required",label:"UOM",name:"uomId",value:C.uomId,onChange:j,size:"small",required:!0,fullWidth:!0})}),e.jsx(o,{item:!0,md:2,width:"inherit",paddingX:1,children:e.jsx(d,{id:"outlined-required",label:"Rate",name:"rate",value:C.rate,onChange:j,type:"number",size:"small",fullWidth:!0,required:!0})}),e.jsx(o,{item:!0,md:2,width:"inherit",paddingX:1,children:e.jsx(d,{id:"outlined-required",label:"Total Amount",name:"totalAmount",value:C.totalAmount,onChange:j,type:"number",size:"small",fullWidth:!0,required:!0})}),e.jsx(o,{item:!0,md:2,width:"inherit",paddingX:1,children:e.jsx(d,{id:"outlined-required",label:"Cost per Piece",name:"costperPiece",value:C.costperPiece,onChange:j,type:"number",size:"small",required:!0,fullWidth:!0})}),e.jsx(o,{item:!0,md:12,width:"inherit",paddingX:1,textAlign:"right",children:e.jsx(D,{variant:"contained",color:"primary",size:"small",children:"Save"})})]})}function Mt(){const[a,t]=l.useState([]),s=l.useCallback(async()=>{try{const O=(await X.get("https://gecxc.com:4041/api/AdditionalServices/GetdditionalServicesListByServiceTypeId?serviceTypeId=1")).data.result.map((C,A)=>({id:A,...C}));t(O)}catch(y){console.error("Error fetching data:",y)}},[]);l.useEffect(()=>{s()},[s]);const r=[{field:"serviceTypeId",headerName:"Service Type",width:150},{field:"serviceList",headerName:"Service List",width:200},{field:"vendorId",headerName:"Vendor",minWidth:120},{field:"qty",headerName:"Qty",minWidth:120},{field:"uom",headerName:"UOM",minWidth:120},{field:"rate",headerName:"Rate",minWidth:120},{field:"totalAmount",headerName:"Total Amount",minWidth:120},{field:"uomId",headerName:"UOM Id",minWidth:120},{field:"quantity",headerName:"quantity",minWidth:120},{field:"ratePerPcs",headerName:"rate Per Pcs",minWidth:120},{field:"costperPiece",headerName:"cost per Piece",minWidth:120},{field:"vendor",headerName:"Vendor",minWidth:120},{field:"serviceType",headerName:"Service Type",minWidth:120},{field:"serviceListName",headerName:"Service List Name",minWidth:120}];return e.jsx("div",{style:{height:"auto",width:"100%"},children:e.jsx(be,{rows:a,columns:r,autoHeight:!0,initialState:{pagination:{paginationModel:{page:0,pageSize:10}}},pageSizeOptions:[10,15],localeText:{toolbarDensity:"Size",toolbarDensityLabel:"Size",toolbarDensityCompact:"Small",toolbarDensityStandard:"Medium",toolbarDensityComfortable:"Large"},components:{Toolbar:pt}})})}function Gt(a){return e.jsxs(e.Fragment,{children:[e.jsxs(V,{variant:"outlined",children:[e.jsx($,{className:"css-4rfrnx-MuiCardHeader-root",title:"Additional Services  ",titleTypographyProps:{style:{color:"white"}}}),e.jsx(Ut,{})]}),e.jsx(ue,{color:"#cc8587",sx:{height:1,width:"100%",mt:2}}),e.jsxs(V,{variant:"outlined",children:[e.jsx($,{className:"css-4rfrnx-MuiCardHeader-root",title:"View Additional Services  ",titleTypographyProps:{style:{color:"white"}}}),e.jsx(Mt,{fetchData:a})]})]})}const ze=["Pre Planning","Fabrication","Dyeing/Printing  ","Embroidery ","Schiffli","Additional Process","Additional Services"];function Jt(){const[a,t]=l.useState(0),[s,r]=l.useState(new Set),[y,O]=l.useState(null),[C,A]=l.useState([]),{enqueueSnackbar:j}=Me(),k=f=>{O(f.currentTarget)},L=()=>{O(null)},R=!!y,de=R?"simple-popover":void 0,H=f=>f===1,K=f=>s.has(f),B=()=>{let f=s;K(a)&&(f=new Set(f.values()),f.delete(a)),t(w=>w+1),r(f)},M=()=>{t(f=>f-1)},T=()=>{if(!H(a))throw new Error("You can't skip a step that isn't optional.");t(f=>f+1),r(f=>{const w=new Set(f.values());return w.add(a),w})},E=()=>{t(0)},[F,G]=l.useState({lookUpId:"",lookUpName:"",lookUpDomain:"",lookUpCategory:"",enabled:"",createdOn:new Date().toISOString()}),Q=async()=>{if(!F.lookUpDomain||!F.lookUpName){j("Please fill in all required fields.",{variant:"error",autoHideDuration:5e3});return}try{const f=await X.get(`https://gecxc.com:4041/api/Common/SaveLookUp?lookupDomain=${F.lookUpDomain}&LookUpName=${F.lookUpName}&appId=1`);return console.log("Form data saved:",f.data),j("Lookup saved successfully!",{variant:"success",autoHideDuration:5e3}),G({lookUpId:"",lookUpName:"",lookUpDomain:"",lookUpCategory:"",enabled:"",createdOn:new Date().toISOString()}),f.data}catch(f){throw console.error("Error saving data:",f),j("Error saving data. Please try again.",{variant:"error",autoHideDuration:5e3}),f}},Z=f=>{G({...F,[f.target.name]:f.target.value})};return l.useEffect(()=>{(async()=>{try{const w=await X.get("https://gecxc.com:4041/api/Common/GetLookUpDomains?appId=1");console.log("LookupData",w),A(w.data.result)}catch(w){console.error("Error fetching design options:",w)}})()},[]),e.jsxs(ne,{sx:{width:"100%"},children:[e.jsxs(o,{container:!0,spacing:1,width:"Inherit",children:[e.jsx(o,{item:!0,sm:6,children:e.jsx(Ie,{variant:"h2",gutterBottom:!0,children:"Planning Process"})}),e.jsxs(o,{item:!0,sm:6,textAlign:"right",children:[e.jsx(D,{"aria-describedby":de,variant:"outlined",size:"small",onClick:k,children:"+Lookup"}),e.jsx(mt,{id:"mouse-over-popover",open:R,anchorEl:y,onClose:L,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"right"},sx:{".MuiPopover-paper":{width:"300px",padding:"16px"}},children:e.jsxs(o,{container:!0,spacing:3,width:"Inherit",children:[e.jsx(o,{item:!0,sm:12,children:e.jsx(d,{fullWidth:!0,id:"outlined-select-currency",select:!0,label:"Select Lookup",size:"small",value:F.lookUpDomain,name:"lookUpDomain",onChange:Z,children:C.map(f=>e.jsx(v,{value:f.lookUpDomain,children:f.lookUpDomain},f.lookUpDomain))})}),e.jsx(o,{item:!0,sm:12,children:e.jsx(d,{fullWidth:!0,label:"Add Lookup Description",value:F.lookUpName,onChange:Z,name:"lookUpName",size:"small"})}),e.jsx(o,{item:!0,sm:3,textAlign:"right",children:e.jsx(D,{variant:"contained",size:"small",onClick:Q,children:"Save"})})]})})]})]}),e.jsx(lt,{activeStep:a,children:ze.map((f,w)=>{const u={},U={};return H(w)&&(U.optional=e.jsx(Ie,{variant:"caption",children:"Optional"})),K(w)&&(u.completed=!1),e.jsx(dt,{...u,children:e.jsxs(it,{...U,onClick:()=>t(w),style:{cursor:"pointer"},children:[" ",f]})},f)})}),e.jsxs(ne,{sx:{display:"flex",flexDirection:"row",pt:2},children:[e.jsx(D,{color:"inherit",disabled:a===0,onClick:M,sx:{mr:1},children:"Back"}),e.jsx(ne,{sx:{flex:"1 1 auto"}}),H(a)&&e.jsx(D,{color:"inherit",onClick:T,sx:{mr:1},children:"Skip"}),e.jsx(D,{onClick:B,children:a===ze.length-1?"Finish":"Next"})]}),a===ze.length?e.jsxs(l.Fragment,{children:[e.jsx(Ie,{sx:{mt:2,mb:1},children:"All steps completed - you're finished"}),e.jsxs(ne,{sx:{display:"flex",flexDirection:"row",pt:2},children:[e.jsx(ne,{sx:{flex:"1 1 auto"}}),e.jsx(D,{onClick:E,children:"Reset"})]})]}):e.jsxs(l.Fragment,{children:[a===0&&e.jsx(wt,{}),a===1&&e.jsx(ct,{}),a===2&&e.jsx(Wt,{}),a===3&&e.jsx(Nt,{}),a===4&&e.jsx(Ht,{}),a===5&&e.jsx(Lt,{}),a===6&&e.jsx(Gt,{}),e.jsxs(ne,{sx:{display:"flex",flexDirection:"row",pt:2},children:[e.jsx(D,{color:"inherit",disabled:a===0,onClick:M,sx:{mr:1},children:"Back"}),e.jsx(ne,{sx:{flex:"1 1 auto"}}),H(a)&&e.jsx(D,{color:"inherit",onClick:T,sx:{mr:1},children:"Skip"}),e.jsx(D,{onClick:B,children:a===ze.length-1?"Finish":"Next"})]})]})]})}export{Jt as default};
