import{s as ee,c as k,u as O,a9 as G,j as e,C as M,d as E,G as m,T as W,aa as te,J as ae,B as N,L as se,M as oe}from"./index-B7j46tQO.js";import{r as a,R as V}from"./vendor-BXCbSo2_.js";import{d as re}from"./CategoryOutlined-O1CDWyP6.js";import{d as C}from"./AssignmentOutlined-B_XSyuS1.js";import"./ReceivingDetails-BVSkjgz7.js";import{u as ie,R as A,a as L,b as z,c as F,d as Q,B as ne}from"./ReuseableDataGrid-D1S1vdQb.js";import{d as $}from"./Close-pDKEj7mb.js";import{S as I}from"./StatusChip-CRDkNzia.js";import{D as de}from"./DyeingIssuanceView-CKPfHrA3.js";import{T}from"./TextField-Wg00YRJ2.js";import{I as H,B as le}from"./axios-DtiQucPj.js";import{M as P}from"./MenuItem-CIU6BLve.js";import{T as ce,a as ue,b as y,c as f}from"./TabPanel-31cK9n7T.js";import"./Skeleton-Bn7CvAiM.js";ee(T)(({theme:i})=>({"& .MuiInputBase-input":{fontSize:"0.875rem",padding:"4px 6px"},width:"auto",height:"auto",minWidth:"100px",minHeight:"30px"}));const pe=({formData:i})=>{ie(),k(),O();const[s,n]=a.useState([]),{data:d,error:h,isLoading:x,refetch:u}=G(i.poId,{skip:!i.poId});a.useEffect(()=>{d&&n(d.result.filter(r=>r.isRejectedOgpExists==="Y").map((r,b)=>({id:b+1,...r})))},[d,u]);const[c,j]=V.useState(!1),[o,g]=V.useState(!1),p=()=>{j(!1)};console.log("iss",o);const R=[{field:"id",headerName:"Sr#"},{field:"rtvNo",headerName:"RTV#"},{field:"fabricName",headerName:"Fabric"},{field:"vendorName",headerName:"Vendor"},{field:"rejectedQty",headerName:"Rejected",renderCell:r=>e.jsx(I,{label:r.row.rejectedQty,status:"Rejected"})},{field:"rejectionReason",headerName:"Reason"},{field:"rejectionDate",headerName:"Rejected On",valueGetter:r=>new Date(r).toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"2-digit"})},{field:"rejectionStatusName",headerName:"Status",renderCell:r=>e.jsx(I,{label:r.row.rejectionStatusName,status:"Completed"})}];return e.jsxs(M,{variant:"outlined",sx:{marginTop:2},children:[e.jsx(E,{className:"css-4rfrnx-MuiCardHeader-root",title:"View Completed RTV",titleTypographyProps:{style:{color:"white"}}}),e.jsx(m,{container:!0,spacing:1,width:"Inherit",sx:{paddingY:2,paddingX:2},children:e.jsxs(m,{item:!0,xs:12,children:[e.jsx(A,{initialRows:s,iColumns:R,hideAction:!0}),e.jsxs(L,{open:c,onClose:p,fullWidth:!0,maxWidth:"xl",children:[e.jsxs(z,{sx:{backgroundColor:"#A11F23",color:"#ffffff",display:"flex",justifyContent:"space-between",alignItems:"center",paddingX:"24px",paddingY:"4px",mb:2.5},children:[e.jsx(W,{variant:"h4",component:"div",color:"#ffffff",gutterBottom:!0,fontSize:20,fontWeight:2,fontStyle:"normal",children:"Inspection"}),e.jsx(H,{onClick:p,sx:{color:"#ffffff"},children:e.jsx($,{})})]}),e.jsx(F,{children:e.jsx(Q,{id:"alert-dialog-slide-description"})})]})]})})]})},fe=()=>{k();const{user:i}=O(),[s,n]=a.useState({issuanceId:"",poId:"",productionId:"",ogpNumber:"",appId:i.appId,createdOn:new Date().toISOString(),createdBy:i.empId,lastUpdatedOn:new Date().toISOString(),LastUpdatedBy:i.empId}),[d,h]=a.useState([]),[x,u]=a.useState([]);a.useState([]);const{data:c,error:j,isLoading:o,refetch:g}=G(s.poId,{skip:!s.poId}),{data:p,refetch:R}=te(s.productionId,{skip:!s.productionId}),{data:r,refetch:b}=ae(),[Y,X]=a.useState([]);a.useEffect(()=>{r&&X(r.result.map((t,l)=>({id:l,...t})))},[r,b]),a.useEffect(()=>{c&&h(c.result.filter(t=>t.rejectionStatus===5&&t.isRejectedOgpExists==="N").map((t,l)=>({id:l+1,...t})))},[c,g]),a.useEffect(()=>{p&&u(p.result.map((t,l)=>({id:l+1,...t})))},[p,R]),console.log("initialRows",d);const w=t=>{const{name:l,value:v}=t.target;if(l==="poId"){const B=x.find(Z=>Z.poId===parseInt(v));n({...s,poId:v,issuanceId:B?B.issuanceId:""})}else n({...s,[l]:v})};console.log("formData",s);const[U,D]=a.useState(!1);a.useState(!1);const[_,J]=a.useState(!1),q=async t=>{J(t),D(!0)},S=()=>{D(!1)},K=[{field:"id",headerName:"Sr#"},{field:"rtvNo",headerName:"RTV#"},{field:"fabricName",headerName:"Fabric"},{field:"vendorName",headerName:"Vendor"},{field:"rejectedQty",headerName:"Rejected",renderCell:t=>e.jsx(I,{label:t.row.rejectedQty,status:"Rejected"})},{field:"rejectionReason",headerName:"Reason"},{field:"rejectionDate",headerName:"Rejected On",valueGetter:t=>new Date(t).toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"2-digit"})},{field:"rejectionStatusName",headerName:"Status",renderCell:t=>e.jsx(I,{label:t.row.rejectionStatusName,status:"Completed"})},{field:"Actions",headerName:"Actions",renderCell:t=>e.jsx("div",{style:{display:"flex",justifyContent:"space-around"},children:e.jsx(ne,{variant:"text",size:"small",sx:{mt:1},children:e.jsx(le,{size:"small",color:"primary",onClick:()=>q(t.row),children:"OGP"})})})}];return e.jsxs(N,{sx:{width:"100%",typography:"body1"},children:[e.jsxs(M,{variant:"outlined",children:[e.jsx(E,{className:"css-4rfrnx-MuiCardHeader-root",title:"Return To Vendor",titleTypographyProps:{style:{color:"white"}}}),e.jsxs(m,{container:!0,spacing:1,width:"Inherit",sx:{paddingY:2,paddingX:2},children:[e.jsx(m,{item:!0,xs:12,md:3,children:e.jsx(T,{fullWidth:!0,select:!0,label:"Production",name:"productionId",value:s.productionId,onChange:w,size:"small",children:Y.map(t=>e.jsx(P,{value:t.productionId,children:t.collectionName},t.productionId))})}),e.jsx(m,{item:!0,xs:12,md:3,children:e.jsx(T,{fullWidth:!0,select:!0,label:"PO#",name:"poId",value:s.poId,onChange:w,size:"small",children:x.map(t=>e.jsx(P,{value:t.poId,children:t.poIdName},t.poId))})}),e.jsxs(m,{item:!0,xs:12,children:[e.jsx(A,{initialRows:d,iColumns:K,hideAction:!0}),e.jsxs(L,{open:U,onClose:S,fullWidth:!0,maxWidth:"xl",children:[e.jsxs(z,{sx:{backgroundColor:"#A11F23",color:"#ffffff",display:"flex",justifyContent:"space-between",alignItems:"center",paddingX:"24px",paddingY:"4px"},children:[e.jsx(W,{variant:"h4",component:"div",color:"#ffffff",gutterBottom:!0,fontSize:20,fontWeight:2,fontStyle:"normal",children:"Rejection OGP"}),e.jsx(H,{onClick:S,sx:{color:"#ffffff"},children:e.jsx($,{})})]}),e.jsxs(F,{children:[e.jsx(Q,{id:"alert-dialog-slide-description"}),e.jsx(de,{iss:_,handleClose:S,refetchData:g,isRejected:!0})]})]})]})]})]}),e.jsx(pe,{formData:s})]})},we=()=>{var u,c,j;const i=se(),s=(u=i.state)==null?void 0:u.data,n=(j=(c=i.state)==null?void 0:c.tab)==null?void 0:j.toString();console.log("rowData",s),console.log("tab",n);const[d,h]=a.useState("1"),x=(o,g)=>{h(g),console.log("value",d)};return a.useEffect(()=>{n&&h(n)},[n]),e.jsx(oe,{style:{borderWidth:1,borderStyle:"dotted",borderColor:"#a11f23",width:"auto",maxHeight:{xs:"80vh",md:"auto"},overflow:"auto"},children:e.jsx(N,{sx:{width:"100%",typography:"body1"},children:e.jsxs(ce,{value:d,children:[e.jsx(N,{sx:{borderBottom:1,borderColor:"divider"},children:e.jsxs(ue,{onChange:x,children:[e.jsx(y,{icon:e.jsx(re,{}),label:"Dyeing RTV",value:"1",sx:o=>({"& .MuiTouchRipple-child":{backgroundColor:`${o.palette.primary.main} !important`}})}),e.jsx(y,{icon:e.jsx(C,{}),label:"Embroidery RTV",value:"2",sx:o=>({"& .MuiTouchRipple-child":{backgroundColor:`${o.palette.primary.main} !important`}})}),e.jsx(y,{icon:e.jsx(C,{}),label:"Schiffili RTV",value:"3",sx:o=>({"& .MuiTouchRipple-child":{backgroundColor:`${o.palette.primary.main} !important`}})}),e.jsx(y,{icon:e.jsx(C,{}),label:"Additional Process RTV",value:"4",sx:o=>({"& .MuiTouchRipple-child":{backgroundColor:`${o.palette.primary.main} !important`}})}),e.jsx(y,{icon:e.jsx(C,{}),label:"Additional Services RTV",value:"5",sx:o=>({"& .MuiTouchRipple-child":{backgroundColor:`${o.palette.primary.main} !important`}})})]})}),e.jsx(f,{value:"1",children:e.jsx(fe,{})}),e.jsx(f,{value:"2"}),e.jsx(f,{value:"3"}),e.jsx(f,{value:"4"}),e.jsx(f,{value:"5"}),e.jsx(f,{value:"6"})]})})})};export{we as default};
