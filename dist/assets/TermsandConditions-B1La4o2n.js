import{u as z,v as G,x as $,j as e,B as N,C as w,d as T,G as n,D as P,b as te,X as se,T as ae,M as re}from"./index-CZjWfJ9S.js";import{r as s}from"./vendor-BXCbSo2_.js";import{B as W,a as Y}from"./axios--CKk_8iX.js";import{d as de}from"./AddCircleOutlineOutlined-Bh5Pb8Bm.js";import{d as oe}from"./CategoryOutlined-CkdYBdZt.js";import{d as ne}from"./AssignmentOutlined-VGzQRH7X.js";import{d as H}from"./VisibilityOutlined-BPW8ryPe.js";import{R as V,u as le,D as ie}from"./ReuseableDataGrid-D1pMcJDs.js";import{T as y}from"./TextField-C0yoPlRE.js";import{M as b}from"./MenuItem-EYddAVor.js";import{T as ce,a as me,b as M,c as L}from"./TabPanel-HMB-4Jgp.js";import"./Skeleton-B3PPDIKO.js";const ue=()=>{const{user:a}=z(),[t,B]=s.useState([]),[F,v]=s.useState(!1),[l,m]=s.useState({tcId:0,categoryId:"",termCondDesc:"",enabled:"",appId:a.appId,createdOn:new Date().toISOString(),createdBy:a.empId,lastUpdatedOn:new Date().toISOString(),LastUpdatedBy:a.empId}),i=[{value:"Yes",label:"Yes"},{value:"No",label:"No"}];s.useEffect(()=>{m({tcId:(t==null?void 0:t.tcId)||0,categoryId:(t==null?void 0:t.categoryId)||"",termCondDesc:(t==null?void 0:t.termCondDesc)||"",enabled:(t==null?void 0:t.enabled)||"",appId:(t==null?void 0:t.appId)||a.appId,createdOn:(t==null?void 0:t.createdOn)||new Date().toISOString(),createdBy:(t==null?void 0:t.createdBy)||a.empId,lastUpdatedOn:new Date().toISOString(),LastUpdatedBy:a.empId})},[t]);const[u,O]=s.useState([]);s.useState(!1);const{data:x,refetch:j}=G(),{data:S,refetch:p}=$(l.categoryId,{skip:!l.categoryId}),[I,f]=s.useState([]);s.useEffect(()=>{S&&O(S.result.map((o,c)=>({id:c+1,...o})))},[S,p]),s.useEffect(()=>{x&&f(x.result.map((o,c)=>({id:c,...o})))},[x,j]),console.log("initialRows",u);const h=o=>{const{name:c,value:U}=o.target;m({...l,[c]:U})},E=async()=>{console.log("formData",l);try{const o=await Y.post("http://100.42.177.77:83/api/TermsConditions/SaveTermsConditions",l);console.log("Save response:",o.data),m(c=>({tcId:0,categoryId:c.categoryId,termCondDesc:"",enabled:"",appId:a.appId,createdOn:new Date().toISOString(),createdBy:a.empId,lastUpdatedOn:new Date().toISOString(),LastUpdatedBy:a.empId})),p(),v(!1)}catch(o){console.error("Error saving data:",o)}};console.log("formData",l);const r=[{field:"id",headerName:"Sr#"},{field:"termCondDesc",headerName:"Term and Condition",flex:1},{field:"enabled",headerName:"Enabled"}];return e.jsxs(N,{sx:{width:"100%",typography:"body1"},children:[e.jsxs(w,{variant:"outlined",children:[e.jsx(T,{className:"css-4rfrnx-MuiCardHeader-root",title:"Add Terms and Conditions ",titleTypographyProps:{style:{color:"white"}}}),e.jsxs(n,{container:!0,spacing:1,width:"Inherit",sx:{paddingY:2,paddingX:2},children:[e.jsx(n,{item:!0,xs:12,md:3,children:e.jsx(y,{fullWidth:!0,select:!0,label:"Category",name:"categoryId",value:l.categoryId,onChange:h,size:"small",children:I.map(o=>e.jsx(b,{value:o.categoryId,children:o.description},o.categoryId))})}),e.jsx(n,{item:!0,xs:12,md:6,children:e.jsx(y,{label:"Term and condition",fullWidth:!0,size:"small",name:"termCondDesc",onChange:h,value:l.termCondDesc,required:!0})}),e.jsx(n,{item:!0,xs:12,md:3,children:e.jsx(y,{fullWidth:!0,select:!0,label:"Enabled",name:"enabled",value:l.enabled,onChange:h,size:"small",children:i.map(o=>e.jsx(b,{value:o.value,children:o.label},o.value))})}),e.jsx(n,{item:!0,xs:12,textAlign:"right",sx:{mt:2},children:e.jsx(W,{variant:"contained",size:"small",onClick:E,children:"Save"})})]})," "]}),e.jsx(P,{color:"#cc8587",sx:{height:1,width:"100%",mt:2}}),e.jsxs(w,{variant:"outlined",children:[e.jsx(T,{className:"css-4rfrnx-MuiCardHeader-root",avatar:e.jsx(H,{}),title:"View Terms And Conditions ",titleTypographyProps:{style:{color:"white"}}}),e.jsx(n,{container:!0,spacing:2,width:"Inherit",children:e.jsx(n,{item:!0,xs:12,children:e.jsx(V,{initialRows:u,iColumns:r,disableDelete:!0,setInitialData:B,setIsEdit:v})})})," "]})]})},pe=()=>{const{user:a}=z(),[t,B]=s.useState([]),[F,v]=s.useState(!1),[l,m]=s.useState([]),[i,u]=s.useState({assignId:0,vendorId:"",categoryId:"",assignTermsDetails:[l],appId:a.appId,createdOn:new Date().toISOString(),createdBy:a.empId,lastUpdatedOn:new Date().toISOString(),LastUpdatedBy:a.empId}),O=[{value:"Yes",label:"Yes"},{value:"No",label:"No"}];s.useEffect(()=>{u({assignId:(t==null?void 0:t.assignId)||0,vendorId:(t==null?void 0:t.vendorId)||"",categoryId:(t==null?void 0:t.categoryId)||"",appId:(t==null?void 0:t.appId)||a.appId,createdOn:(t==null?void 0:t.createdOn)||new Date().toISOString(),createdBy:(t==null?void 0:t.createdBy)||a.empId,lastUpdatedOn:new Date().toISOString(),LastUpdatedBy:a.empId})},[t]);const[x,j]=s.useState([]),[S,p]=s.useState([]);s.useState(!1);const{data:I}=te(),{data:f}=G(),{data:h,refetch:E}=$(i.categoryId,{skip:!i.categoryId}),{data:r,refetch:o}=se({vId:i.vendorId,categoryId:i.categoryId},{skip:!i.vendorId||!i.categoryId}),[c,U]=s.useState([]),[Q,X]=s.useState([]);s.useEffect(()=>{if(I){const d=I.result[0];X(d.vendorList)}},[I]),s.useEffect(()=>{h&&j(h.result.map((d,g)=>({id:g+1,...d})))},[h]),s.useEffect(()=>{if((r==null?void 0:r.result)===null){p([]);return}r!=null&&r.result&&p(r.result.map((d,g)=>({id:g+1,...d})))},[r,o]),console.log("termsData",r),s.useEffect(()=>{f&&U(f.result.map((d,g)=>({id:g,...d})))},[f]),console.log("initialRows",x);const A=d=>{const{name:g,value:R}=d.target;u({...i,[g]:R})},_=async()=>{console.log("formData",i);try{const d=await Y.post("http://100.42.177.77:83/api/TermsConditions/SaveAssignTerms",i);console.log("Save response:",d.data),u(g=>({assignId:0,vendorId:"",categoryId:"",appId:a.appId,createdOn:new Date().toISOString(),createdBy:a.empId,lastUpdatedOn:new Date().toISOString(),LastUpdatedBy:a.empId})),o(),v(!1)}catch(d){console.error("Error saving data:",d)}};console.log("formData",i);const q=[{field:"id",headerName:"Sr#"},{field:"termCondDesc",headerName:"Term and Condition Description",flex:1},{field:"enabled",headerName:"Enabled",flex:1},{field:"description",headerName:"Description",flex:1}],J=[{field:"id",headerName:"Sr#"},{field:"termCondDesc",headerName:"Term and Condition Description",flex:1}],[K,Z]=s.useState([]),C=le(),ee=s.useCallback(d=>{Z(d);const R=d.map(D=>{const k=C.current.getRow(D);return console.log("rowData",k),k?k.tcId:null}).filter(D=>D!==null).map(D=>({assignDetId:0,assignedId:0,tcId:D,createdOn:new Date().toISOString(),createdBy:a.empId,lastUpdatedBy:a.empId,lastUpdatedOn:new Date().toISOString()}));m(R)},[C]);return s.useEffect(()=>{u({...i,assignTermsDetails:l})},[l]),s.useEffect(()=>{C.current&&console.log("API ref is ready:",C.current)},[C]),console.log("selectedTerms:",l),e.jsxs(N,{sx:{width:"100%",typography:"body1"},children:[e.jsxs(w,{variant:"outlined",children:[e.jsx(T,{className:"css-4rfrnx-MuiCardHeader-root",title:"Assign Terms and Conditions ",titleTypographyProps:{style:{color:"white"}}}),e.jsxs(n,{container:!0,spacing:1,width:"Inherit",sx:{paddingY:2,paddingX:2},children:[e.jsx(n,{item:!0,xs:12,md:3,children:e.jsx(y,{fullWidth:!0,select:!0,label:"Vendors",size:"small",name:"vendorId",value:i.vendorId,onChange:A,required:!0,children:Q.map(d=>e.jsx(b,{value:d.lookUpId,children:d.lookUpName},d.lookUpId))})}),e.jsx(n,{item:!0,xs:12,md:3,children:e.jsx(y,{fullWidth:!0,select:!0,label:"Category",name:"categoryId",value:i.categoryId,onChange:A,size:"small",children:c.map(d=>e.jsx(b,{value:d.categoryId,children:d.description},d.categoryId))})}),e.jsx(n,{item:!0,xs:12,md:3,children:e.jsx(y,{fullWidth:!0,select:!0,label:"Enabled ?",name:"enabled",value:i.enabled,onChange:A,size:"small",children:O.map(d=>e.jsx(b,{value:d.value,children:d.label},d.value))})}),e.jsxs(n,{item:!0,xs:12,mt:2,children:[e.jsx(ae,{variant:"h4",children:"Terms And Conditions:"})," "]}),e.jsx(n,{item:!0,xs:12,children:e.jsx("div",{style:{width:"100%"},children:e.jsx(ie,{rows:x,columns:q,apiRef:C,checkboxSelection:!0,onRowSelectionModelChange:ee,rowSelectionModel:K})})}),e.jsx(n,{item:!0,xs:12,textAlign:"right",sx:{mt:2},children:e.jsx(W,{variant:"contained",size:"small",onClick:_,children:"Save"})})]})," "]}),e.jsx(P,{color:"#cc8587",sx:{height:1,width:"100%",mt:2}}),e.jsxs(w,{variant:"outlined",children:[e.jsx(T,{className:"css-4rfrnx-MuiCardHeader-root",avatar:e.jsx(H,{}),title:"View Assigned Terms And Conditions ",titleTypographyProps:{style:{color:"white"}}}),e.jsx(n,{container:!0,spacing:2,width:"Inherit",children:e.jsx(n,{item:!0,xs:12,children:e.jsx(V,{initialRows:S,iColumns:J,hideAction:!0})})})," "]})]})},Te=()=>{const{user:a}=z(),[t,B]=s.useState([]),[F,v]=s.useState(!1),[l,m]=s.useState({categoryId:0,description:"",enabled:"",appId:a.appId,createdOn:new Date().toISOString(),createdBy:a.empId,lastUpdatedOn:new Date().toISOString(),lastUpdatedBy:a.empId}),i=[{value:"Yes",label:"Yes"},{value:"No",label:"No"}],[u,O]=s.useState("1"),x=(r,o)=>{O(o)};s.useEffect(()=>{m({categoryId:(t==null?void 0:t.categoryId)||0,description:(t==null?void 0:t.description)||"",enabled:(t==null?void 0:t.enabled)||"",appId:(t==null?void 0:t.appId)||a.appId,createdOn:(t==null?void 0:t.createdOn)||new Date().toISOString(),createdBy:(t==null?void 0:t.createdBy)||a.empId,lastUpdatedOn:new Date().toISOString(),lastUpdatedBy:a.empId})},[t]);const[j,S]=s.useState([]);s.useState(!1);const{data:p,refetch:I}=G();s.useEffect(()=>{p&&S(p.result.map((r,o)=>({id:o+1,...r})))},[p,I]),console.log("initialRows",j);const f=r=>{const{name:o,value:c}=r.target;m({...l,[o]:c})},h=async()=>{console.log("formData",l);try{const r=await Y.post("http://100.42.177.77:83/api/TermsConditions/SaveCategory",l);console.log("Save response:",r.data),m(o=>({categoryId:0,description:"",enabled:"",appId:a.appId,createdOn:new Date().toISOString(),createdBy:a.empId,lastUpdatedOn:new Date().toISOString(),lastUpdatedBy:a.empId})),I(),v(!1)}catch(r){console.error("Error saving data:",r)}};console.log("formData",l);const E=[{field:"id",headerName:"Sr#"},{field:"description",headerName:"Description",flex:1},{field:"enabled",headerName:"Enabled"}];return e.jsx(re,{style:{borderWidth:1,borderStyle:"dotted",borderColor:"#a11f23",width:"auto",maxHeight:{xs:"80vh",md:"auto"},overflow:"auto"},children:e.jsx(N,{sx:{width:"100%",typography:"body1"},children:e.jsxs(ce,{value:u,children:[e.jsx(N,{sx:{borderBottom:1,borderColor:"divider"},children:e.jsxs(me,{onChange:x,"aria-label":"lab API tabs example",children:[e.jsx(M,{icon:e.jsx(oe,{}),label:"Add Categories",value:"1",sx:r=>({"& .MuiTouchRipple-child":{backgroundColor:`${r.palette.primary.main} !important`}})}),e.jsx(M,{icon:e.jsx(de,{}),label:"Add Terms and Conditions",value:"2",sx:r=>({"& .MuiTouchRipple-child":{backgroundColor:`${r.palette.primary.main} !important`}})}),e.jsx(M,{icon:e.jsx(ne,{}),label:"Assign Terms and Conditions",value:"3",sx:r=>({"& .MuiTouchRipple-child":{backgroundColor:`${r.palette.primary.main} !important`}})})]})}),e.jsxs(L,{value:"1",children:[e.jsxs(w,{variant:"outlined",children:[e.jsx(T,{className:"css-4rfrnx-MuiCardHeader-root",title:"Add Categories ",titleTypographyProps:{style:{color:"white"}}}),e.jsxs(n,{container:!0,spacing:1,width:"Inherit",sx:{paddingY:2,paddingX:2},children:[e.jsx(n,{item:!0,xs:12,md:9,children:e.jsx(y,{label:"Description",fullWidth:!0,size:"small",name:"description",onChange:f,value:l.description,required:!0})}),e.jsx(n,{item:!0,xs:12,md:3,children:e.jsx(y,{fullWidth:!0,select:!0,label:"enabled",name:"enabled",value:l.enabled,onChange:f,size:"small",children:i.map(r=>e.jsx(b,{value:r.value,children:r.label},r.value))})}),e.jsx(n,{item:!0,xs:12,textAlign:"right",sx:{mt:2},children:e.jsx(W,{variant:"contained",size:"small",onClick:h,children:"Save"})})]})," "]}),e.jsx(P,{color:"#cc8587",sx:{height:1,width:"100%",mt:2}}),e.jsxs(w,{variant:"outlined",children:[e.jsx(T,{className:"css-4rfrnx-MuiCardHeader-root",avatar:e.jsx(H,{}),title:"View Categories",titleTypographyProps:{style:{color:"white"}}}),e.jsx(n,{container:!0,spacing:2,width:"Inherit",children:e.jsx(n,{item:!0,xs:12,children:e.jsx(V,{initialRows:j,iColumns:E,disableDelete:!0,setInitialData:B,setIsEdit:v})})})]})]}),e.jsx(L,{value:"2",children:e.jsx(ue,{})}),e.jsx(L,{value:"3",children:e.jsx(pe,{})})]})})})};export{Te as default};
