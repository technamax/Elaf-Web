import{j as e,_ as Je,r as Ze,l as Ke,R as $e,u as Ce,c as Ne,a5 as Ae,b as Pe,a6 as ke,a7 as Re,a8 as Ee,a9 as qe,aa as _e,ab as Me,C as V,d as J,ac as Le,G as r,D as ie,T as ve,ad as De,ae as et,af as tt,ag as st,ah as at,ai as rt,B as be,aj as ot,ak as nt}from"./index-tftD3DrE.js";import{r as o}from"./vendor-BXCbSo2_.js";import{I as ye,B as K,a as se}from"./axios-CKsBW11n.js";import{d as Oe,c as pe,A as Te,e as we,f as ze,S as lt,a as dt,b as it,F as ct}from"./Fabrication-BDFYNuSP.js";import{d as Fe}from"./VisibilityOutlined-Byx3Varj.js";import{l as We,R as Se,D as ut,a as mt,b as ht,c as pt}from"./ReuseableDataGrid-D0BKem5i.js";import{T as n,P as gt}from"./TextField-D2_3T-ng.js";import{M as N}from"./Skeleton-Cr0xDesA.js";import{A as He,F as Ge,C as Ye}from"./ExcelExport-IV9Opegm.js";import"./dayjs.min-DO4_1a-m.js";import{d as xt}from"./Close-B-OxQqiK.js";import{d as ft}from"./PersonAddAlt1Outlined-BlCOG9ZL.js";let Qe=!1;const It=o.forwardRef(function(t,c){return Qe||(console.warn(["MUI: The Autocomplete component was moved from the lab to the core.","","You should use `import { Autocomplete } from '@mui/material'`","or `import Autocomplete from '@mui/material/Autocomplete'`"].join(`
`)),Qe=!0),e.jsx(He,Je({ref:c},t))});var Be={},bt=Ke;Object.defineProperty(Be,"__esModule",{value:!0});var Xe=Be.default=void 0,vt=bt(Ze()),jt=e;Xe=Be.default=(0,vt.default)((0,jt.jsx)("path",{d:"M21 10h-3L2 3v7l9 2-9 2v7l8-3.5V21c0 1.1.9 2 2 2h9c1.1 0 2-.9 2-2v-9c0-1.1-.9-2-2-2m0 11h-9v-9h9zm-4.5-1L13 16h2v-3h3v3h2z"}),"SendAndArchive");const yt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAACXBIWXMAAAsTAAALEwEAmpwYAAACk0lEQVR4nO2WzU4UQRSFe14CgoiMKPIqolEiIQq+gEFgFPHnFVyILI3GnQIbxxhG3IkaYxT8iUZFoxuDbokoIaNE/czNnE6KSjdT07Yb40kqqa6qW+dW3XNvdRT9R4MAHgD3640Dh/MkHQTOqMWIv9PGydOBUeCsWoz4O208PwdcxCz1xoGBKG8Abc5JPwBrataP0fY3iLcCk8C6SF4DV4HzatZf1Ny6vrfkRd4PrABV4BywE9huKpc2rA0ARaATGAe+yebgn5IfB34BD0XQCzwlHU+AA1r7CPgJlLKS94n8GtAM3CIcFaAJKGuPviwxX9XJjfxlCtGMyJLwQrbzwNeGNEFNRFVdZdrJb2ttAbizyU10SBNXQslbgR8SnMXcxagEOGyxdmxs3ZDmxjybHmWKZUdriAOnZWhqf+ZtVgyw3+HZPAZ2qX8yxIGbwCudxsdwgH3JszERtqtOVEIc+ARMKbc3xNy79r1a+xHodsYtDec8W6sl01YxQxxYVfzdWM4krDPiGEveXMHLjhMqUGshDlQTHLDNCg06MJvgwJcQB96lhMBSrddZ1y0nloDdXkbc9WwPKQSLIQ7M6rGxGuBjKMB+JEGE24A3tnfUgIo7E+p+1jTsUn8wxIEWFaJxKdrFmBwrJRSiEc2d8mz2AxPas6WuAwbgkspncZNaPyexWbuXsuaGbuQ7cDEKBbVHZEVParMeliRUPLW7eK4XcUF7NQU7YAD26NrKciLtJtJObuTXtce+KAuAI9pgXq9aj0SVhgXFvEN9y4Cjmci9kvtZmpjQw9KuOhH/kvUr1bq0xmK+bLZRHqB2nZd1Gyinp5yfUuu/1ZyRX7CfmlzIXUgLx6SH93o3ltUv6z8hf+LoX8ZvSFCuNiG5hzcAAAAASUVORK5CYII=",Ct=()=>{const p=$e(),{user:t}=Ce(),{enqueueSnackbar:c}=Ne(),[s,i]=o.useState([]),[u,W]=o.useState(!1),[l,f]=o.useState({embroideryId:0,designId:"",batchNo:"",planningHeaderId:"",componentId:"",fabricId:"",vendorId:"",poPcs:"",baseColorId:"",baseColorName:"",colorId:"",availableQty:"",noOfHead:"",repeats:"",cuttingSize:"",itemsPerRepeat:"",totalPcs:"",totalAmount:"",threadStiches:"",threadRate:"",threadAmount:"",tillaStiches:"",tilaRate:"",tilaAmount:"",sequence:"",sequenceRate:"",sequenceAmount:"",isSolving:!1,solvingLayers:0,solvingInMeters:"",solvingRate:0,solvingAmount:"",threadAdditional:[],costPerComponent:"",createdBy:t.empId,createdOn:new Date().toISOString(),lastUpdatedOn:new Date().toISOString(),lastUpdatedBy:t.empId});o.useEffect(()=>{f({embroideryId:(s==null?void 0:s.embroideryId)||0,designId:(s==null?void 0:s.designId)||"",batchNo:(s==null?void 0:s.batchNo)||"",planningHeaderId:(s==null?void 0:s.planningHeaderId)||"",componentId:(s==null?void 0:s.componentId)||"",fabricId:(s==null?void 0:s.fabricId)||"",vendorId:(s==null?void 0:s.vendorId)||"",poPcs:(s==null?void 0:s.poPcs)||"",baseColorId:(s==null?void 0:s.baseColorId)||"",baseColorName:(s==null?void 0:s.baseColorName)||"",colorId:(s==null?void 0:s.colorId)||"",availableQty:(s==null?void 0:s.availableQty)||"",noOfHead:(s==null?void 0:s.noOfHead)||"",repeats:(s==null?void 0:s.repeats)||"",cuttingSize:(s==null?void 0:s.cuttingSize)||"",itemsPerRepeat:(s==null?void 0:s.itemsPerRepeat)||"",totalPcs:(s==null?void 0:s.totalPcs)||"",totalAmount:(s==null?void 0:s.totalAmount)||"",threadStiches:(s==null?void 0:s.threadStiches)||"",threadRate:(s==null?void 0:s.threadRate)||"",threadAmount:(s==null?void 0:s.threadAmount)||"",tillaStiches:(s==null?void 0:s.tillaStiches)||"",tilaRate:(s==null?void 0:s.tilaRate)||"",tilaAmount:(s==null?void 0:s.tilaAmount)||"",sequence:(s==null?void 0:s.sequence)||"",sequenceRate:(s==null?void 0:s.sequenceRate)||"",sequenceAmount:(s==null?void 0:s.sequenceAmount)||"",isSolving:(s==null?void 0:s.isSolving)||!1,solvingLayers:(s==null?void 0:s.solvingLayers)||0,solvingInMeters:(s==null?void 0:s.solvingInMeters)||"",solvingRate:(s==null?void 0:s.solvingRate)||0,solvingAmount:(s==null?void 0:s.solvingAmount)||"",threadAdditional:(s==null?void 0:s.threadAdditional)||[],costPerComponent:(s==null?void 0:s.costPerComponent)||"",createdOn:(s==null?void 0:s.createdOn)||new Date().toISOString(),createdBy:(s==null?void 0:s.createdBy)||t.empId,lastUpdatedOn:new Date().toISOString(),lastUpdatedBy:t.empId})},[s]);const Q=["Boring","Pooni","Laser","Doori","Dissolving"];function Y(d,j,P){return{fontWeight:j.indexOf(d)===-1?P.typography.fontWeightRegular:P.typography.fontWeightMedium}}const{data:b}=Ae(),[U,q]=o.useState(""),{data:M}=Pe(),{data:H,refetch:G}=ke(U,{skip:!U}),{data:B,refetch:Z}=Re(l.designId,{skip:!l.designId}),{data:h}=Ee({batchNo:l.planningHeaderId,componentId:l.componentId},{skip:!l.planningHeaderId||!l.componentId}),{data:O}=qe({batchNo:l.planningHeaderId,componentId:l.componentId,fabricId:l.fabricId},{skip:!l.planningHeaderId||!l.componentId||!l.fabricId}),{data:k,refetch:R}=_e(l.planningHeaderId,{skip:!l.planningHeaderId}),{data:v}=Me(l.planningHeaderId,{skip:!l.planningHeaderId});console.log("formData.planningHeaderId",l.planningHeaderId),console.log("collectionData",b);const[E,_]=o.useState(!1),D=(d,j)=>{_(!E)},[ge,ce]=o.useState([]),[re,oe]=o.useState([]),[xe,ne]=o.useState([]),[Ie,ae]=o.useState([]),[ue,te]=o.useState([]),[ee,C]=o.useState([]),[T,me]=o.useState([]),[fe,he]=o.useState([]);console.log("batchList",re),console.log("formData",l),o.useEffect(()=>{H&&ce(H.result)},[H]),o.useEffect(()=>{B&&oe(B.result)},[B]),o.useEffect(()=>{h&&ne(h.result)},[h]),o.useEffect(()=>{O&&C(h.result)},[O]),o.useEffect(()=>{v&&he(v.result)},[v]),o.useEffect(()=>{k&&me(k.result.map((d,j)=>({id:j,...d})))},[k,R]),console.log("embroideryList",k),console.log("initialRows",T),o.useEffect(()=>{if(M){const d=M.result[0];ae(d.vendorList),te(d.noOfHeadsList)}},[M]);const le=(b==null?void 0:b.result)||[];o.useEffect(()=>{const d=()=>{const z=parseFloat(l.repeats)||0,X=parseFloat(l.itemsPerRepeat)||0;return(z*X).toFixed(2)};f(z=>({...z,totalPcs:d()}));const j=()=>{const z=parseFloat(l.threadStiches)||0,X=parseFloat(l.threadRate)||0,de=parseFloat(l.noOfHead)||0,je=parseFloat(l.repeats)||0;return(z/1e3*(X*je*de)).toFixed(2)};f(z=>({...z,threadAmount:j()}));const P=()=>{const z=parseFloat(l.tillaStiches)||0,X=parseFloat(l.tilaRate)||0,de=parseFloat(l.noOfHead)||0,je=parseFloat(l.repeats)||0;return(z/1e3*(X*je*de)).toFixed(2)};f(z=>({...z,tilaAmount:P()}));const a=()=>{const z=parseFloat(l.sequence)||0,X=parseFloat(l.sequenceRate)||0,de=parseFloat(l.noOfHead)||0,je=parseFloat(l.repeats)||0;return(z/1e3*(X*je*de)).toFixed(2)};f(z=>({...z,sequenceAmount:a()}));const m=()=>{const z=parseFloat(l.repeats)||0,X=parseFloat(l.noOfHead)||0,de=parseFloat(l.solvingLayers)||0;return(z*X*13/39.37*de).toFixed(2)};f(z=>({...z,solvingInMeters:m()}));const g=()=>{const z=parseFloat(l.solvingInMeters)||0,X=parseFloat(l.solvingRate)||0;return parseFloat(l.solvingLayers),(z*X).toFixed(2)};f(z=>({...z,solvingAmount:g()}));const y=()=>{const z=parseFloat(l.threadAmount)||0,X=parseFloat(l.tilaAmount)||0,de=parseFloat(l.sequenceAmount)||0,je=parseFloat(l.solvingAmount)||0;return(z+X+de+je).toFixed(2)};f(z=>({...z,totalAmount:y()||0}));const L=()=>{const z=parseFloat(l.totalAmount)||0,X=parseFloat(l.totalPcs)||0;return(z/X).toFixed(2)};f(z=>({...z,costPerComponent:L()||0}))},[l.threadAmount,l.totalAmount,l.sequenceAmount,l.solvingAmount,l.repeats,l.tilaAmount,l.itemsPerRepeat,l.threadRate,l.threadStiches,l.noOfHead,l.tilaRate,l.tillaStiches,l.sequenceRate,l.sequence,l.solvingLayers,l.solvingInMeters,l.solvingRate]);const A=d=>{const{name:j,checked:P}=d.target;f(a=>({...a,[j]:P}))},I=d=>{const{name:j,value:P}=d.target;if(j==="collectionId")le.find(a=>a.collectionId===parseInt(P)),q(P),W(!0),f({...l,collectionId:P,designId:"",batchNo:"",planningHeaderId:"",componentId:"",fabricId:"",vendorId:"",poPcs:"",baseColorId:"",baseColorName:"",colorId:"",availableQty:"",noOfHead:"",repeats:"",cuttingSize:"",itemsPerRepeat:"",totalPcs:"",totalAmount:"",threadStiches:"",threadRate:"",threadAmount:"",tillaStiches:"",tilaRate:"",tilaAmount:"",sequence:"",sequenceRate:"",sequenceAmount:"",isSolving:!1,solvingLayers:0,solvingInMeters:"",solvingRate:0,solvingAmount:"",threadAdditional:[],costPerComponent:""});else if(j==="designId"){const a=ge.find(m=>m.designId===parseInt(P));f({...l,designId:P,baseColorId:a?a.colorId:"",baseColorName:a?a.colorName:"",batchNo:"",planningHeaderId:"",componentId:"",fabricId:"",vendorId:"",poPcs:"",colorId:"",availableQty:"",noOfHead:"",repeats:"",cuttingSize:"",itemsPerRepeat:"",totalPcs:"",totalAmount:"",threadStiches:"",threadRate:"",threadAmount:"",tillaStiches:"",tilaRate:"",tilaAmount:"",sequence:"",sequenceRate:"",sequenceAmount:"",isSolving:!1,solvingLayers:0,solvingInMeters:"",solvingRate:0,solvingAmount:"",threadAdditional:[],costPerComponent:""})}else if(j==="colorId"){const a=ee.find(m=>m.colorId===P);f({...l,colorId:P,availableQty:a?a.total:"",cuttingSize:a?a.cuttingSize:"",repeats:a?a.repeats:""})}else if(j==="batchNo"){const a=re.find(m=>m.batchNo===P);f({...l,batchNo:P,planningHeaderId:a?a.planningHeaderId:"",poPcs:a?a.poPcs:"",componentId:"",fabricId:"",vendorId:"",baseColorId:"",baseColorName:"",colorId:"",availableQty:"",noOfHead:"",repeats:"",cuttingSize:"",itemsPerRepeat:"",totalPcs:"",totalAmount:"",threadStiches:"",threadRate:"",threadAmount:"",tillaStiches:"",tilaRate:"",tilaAmount:"",sequence:"",sequenceRate:"",sequenceAmount:"",isSolving:!1,solvingLayers:0,solvingInMeters:"",solvingRate:0,solvingAmount:"",threadAdditional:[],costPerComponent:""}),_(!0),W(!1)}else f({...l,[j]:P}),S(a=>({...a,[j]:""}))},[x,S]=o.useState({}),w=async()=>{try{const d=await se.post("https://gecxc.com:4041/api/Embroidery/SaveEmbroidery",{...l,threadAdditional:l.threadAdditional.join(", ")});console.log("Save response:",d.data),d.data.success?c("Fabrication saved successfully!",{variant:"success",autoHideDuration:5e3}):(c(`${d.data.message} !`,{variant:"error",autoHideDuration:5e3}),console.log("response.message",d.data.message)),f(j=>({embroideryId:0,designId:j.designId,batchNo:j.batchNo,planningHeaderId:j.planningHeaderId,componentId:"",fabricId:"",vendorId:"",poPcs:j.poPcs,baseColorId:j.baseColorId,baseColorName:j.baseColorName,colorId:"",availableQty:"",noOfHead:"",repeats:"",cuttingSize:"",itemsPerRepeat:"",totalPcs:"",totalAmount:"",threadStiches:"",threadRate:"",threadAmount:"",tillaStiches:"",tilaRate:"",tilaAmount:"",sequence:"",sequenceRate:"",sequenceAmount:"",isSolving:!1,solvingLayers:0,solvingInMeters:"",solvingRate:0,solvingAmount:"",threadAdditional:[],costPerComponent:"",createdOn:new Date().toISOString(),createdBy:t.empId,lastUpdatedOn:new Date().toISOString(),lastUpdatedBy:t.empId})),R()}catch(d){console.error("Error saving data:",d),c("Dyeing not saved successfully!",{variant:"error",autoHideDuration:5e3})}};console.log("initialRows",T);const F=[{field:"designNo",headerName:"Design"},{field:"batchNo",headerName:"Batch No."},{field:"componentName",headerName:"Component "},{field:"fabricName",headerName:"Fabric "},{field:"vendorId",headerName:"Vendor"},{field:"poPcs",headerName:"Po Pcs"},{field:"colourName",headerName:"Color"},{field:"availableQty",headerName:"Available Qty"},{field:"noOfHeadsName",headerName:"No. Of Heads"},{field:"repeats",headerName:"Repeats"},{field:"cuttingSize",headerName:"Cutting Size"},{field:"itemsPerRepeat",headerName:"Items Per Repeat"},{field:"totalPcs",headerName:"Total Pcs"},{field:"threadStiches",headerName:"Thread Stitches"},{field:"threadRate",headerName:"Thread Rate"},{field:"threadAmount",headerName:"Thread Amount"},{field:"tillaStiches",headerName:"Tilla Stitches"},{field:"tilaRate",headerName:"Tilla Rate"},{field:"tilaAmount",headerName:"Tilla Amount"},{field:"sequence",headerName:"sequence"},{field:"sequenceRate",headerName:"Sequence Rate"},{field:"sequenceAmount",headerName:"Sequence Amount"},{field:"isSolving",headerName:"Is Solving"},{field:"solvingLayers",headerName:"Solving Layers"},{field:"solvingInMeters",headerName:"Solving In Meters"},{field:"solvingRate",headerName:"Solving Rate"},{field:"solvingAmount",headerName:"Solving Amount"},{field:"threadAdditional",headerName:"ThreadAdditional"},{field:"costPerComponent",headerName:"Cost Per Component"}];return e.jsxs(e.Fragment,{children:[e.jsxs(V,{variant:"outlined",children:[e.jsx(J,{className:"css-4rfrnx-MuiCardHeader-root",avatar:e.jsx(Le,{src:yt,sx:{background:"transparent"}}),title:"Embroidery  ",titleTypographyProps:{style:{color:"white"}}}),e.jsxs(r,{container:!0,spacing:2,width:"Inherit",sx:{paddingY:2,paddingX:2},children:[" ",e.jsxs(r,{item:!0,xs:12,md:3,children:[e.jsx(n,{fullWidth:!0,select:!0,label:"Select Collection",name:"collectionId",value:U,onChange:I,size:"small",children:le.map(d=>e.jsx(N,{value:d.collectionId,children:d.collectionName},d.collectionId))})," "]}),e.jsx(r,{item:!0,xs:12,md:3,children:e.jsx(n,{fullWidth:!0,select:!0,label:"Select Design",name:"designId",value:l.designId,onChange:I,size:"small",children:ge.map(d=>e.jsx(N,{value:d.designId,children:d.designNo},d.designId))})}),e.jsxs(r,{item:!0,xs:12,md:3,children:[e.jsx(n,{fullWidth:!0,select:!0,label:"Batch No.",name:"batchNo",value:l.batchNo,onChange:I,size:"small",children:re.map(d=>e.jsx(N,{value:d.batchNo,children:d.batchNo},d.batchNo))})," "]}),e.jsx(r,{item:!0,xs:12,md:3,children:e.jsx(n,{label:"Base Color",fullWidth:!0,size:"small",name:"baseColorName",value:l.baseColorName,onChange:I,disabled:!0})})]})]}),e.jsx(r,{item:!0,xs:12,md:12,children:e.jsx(ie,{color:"#cc8587",sx:{height:1,width:"100%",mt:2}})}),e.jsxs(V,{variant:"outlined",children:[e.jsx(J,{className:"css-4rfrnx-MuiCardHeader-root",avatar:e.jsx(Oe,{}),title:"Add Embroidery",titleTypographyProps:{style:{color:"white"}},action:e.jsx(ye,{onClick:D,sx:{mt:"-18px"},children:e.jsx(pe,{style:{color:"white"}})}),sx:{display:"flex",alignItems:"center",justifyContent:"space-between"}})," ",e.jsxs(Te,{expanded:E,onChange:D,sx:{},children:[e.jsx(we,{expandIcon:e.jsx(pe,{}),"aria-controls":"panel1-content",id:"panel1-header",sx:{display:"none"}}),e.jsxs(ze,{children:[e.jsxs(r,{container:!0,spacing:2,width:"Inherit",sx:{paddingY:2,paddingX:2},children:[" ",e.jsxs(r,{item:!0,xs:12,md:3,children:[e.jsx(n,{fullWidth:!0,select:!0,label:"Components",name:"componentId",value:l.componentId,onChange:I,size:"small",required:!0,error:!!x.componentId,helperText:x.componentId,children:fe.map(d=>e.jsx(N,{value:d.componentId,children:d.componentName},d.componentId))})," "]}),e.jsx(r,{item:!0,xs:12,md:3,children:e.jsx(n,{fullWidth:!0,select:!0,label:"Select Fabric",defaultValue:"",size:"small",name:"fabricId",value:l.fabricId,onChange:I,required:!0,error:!!x.fabricId,helperText:x.fabricId,children:xe.map(d=>e.jsx(N,{value:d.fabricId,children:d.fabric},d.fabricId))})}),e.jsx(r,{item:!0,xs:12,md:3,children:e.jsx(n,{fullWidth:!0,select:!0,label:"Vendors",defaultValue:"",size:"small",name:"vendorId",value:l.vendorId,onChange:I,required:!0,error:!!x.vendorId,helperText:x.vendorId,children:Ie.map(d=>e.jsx(N,{value:d.lookUpId,children:d.lookUpName},d.lookUpId))})}),e.jsx(r,{item:!0,xs:12,md:3,children:e.jsx(n,{fullWidth:!0,select:!0,label:"Color",size:"small",name:"colorId",value:l.colorId,onChange:I,required:!0,error:!!x.colorId,helperText:x.colorId,children:ee.map(d=>e.jsx(N,{value:d.colorId,children:d.color},d.colorId))})}),e.jsx(r,{item:!0,xs:12,md:1.5,children:e.jsx(n,{label:"Po Pcs",fullWidth:!0,size:"small",name:"poPcs",value:l.poPcs,onChange:I,disabled:!0})}),e.jsx(r,{item:!0,xs:12,md:1.5,children:e.jsx(n,{label:"Available Quantity",fullWidth:!0,size:"small",name:"availableQty",type:"number",value:l.availableQty,onChange:I})}),e.jsx(r,{item:!0,xs:12,md:1.5,children:e.jsx(n,{label:"Repeats",type:"number",fullWidth:!0,size:"small",name:"repeats",value:l.repeats,onChange:I})}),e.jsx(r,{item:!0,xs:12,md:1.5,children:e.jsx(n,{fullWidth:!0,select:!0,label:"Heads",defaultValue:"",size:"small",name:"noOfHead",value:l.noOfHead,onChange:I,required:!0,error:!!x.noOfHead,helperText:x.noOfHead,children:ue.map(d=>e.jsx(N,{value:d.lookUpId,children:d.lookUpName},d.lookUpId))})}),e.jsx(r,{item:!0,xs:12,md:1.5,children:e.jsx(n,{label:"Cutting Size",fullWidth:!0,size:"small",name:"cuttingSize",type:"number",value:l.cuttingSize,onChange:I})}),e.jsx(r,{item:!0,xs:12,md:1.5,children:e.jsx(n,{label:"itemsPerRepeat",fullWidth:!0,type:"number",size:"small",name:"itemsPerRepeat",value:l.itemsPerRepeat,onChange:I,required:!0,error:!!x.itemsPerRepeat,helperText:x.itemsPerRepeat})}),e.jsx(r,{item:!0,xs:12,md:1.5,children:e.jsx(n,{label:"total Pcs.",fullWidth:!0,size:"small",type:"number",name:"totalPcs",value:l.totalPcs,onChange:I})}),e.jsx(r,{item:!0,xs:12,md:1.5,children:e.jsx(n,{label:"Total Amount",fullWidth:!0,type:"number",size:"small",name:"totalAmount",value:l.totalAmount,onChange:I})}),e.jsx(r,{item:!0,xs:12,md:3,children:e.jsx(n,{label:"Cost Per Component",fullWidth:!0,size:"small",name:"costPerComponent",value:l.costPerComponent,onChange:I})}),e.jsx(r,{item:!0,xs:12,md:3,children:e.jsx(Ge,{control:e.jsx(Ye,{checked:l.isSolving,onChange:A,name:"isSolving"}),label:"isSolving"})}),l.isSolving?e.jsx(r,{item:!0,xs:12,md:6,children:e.jsx(n,{select:!0,label:"Additional",value:l.threadAdditional,name:"threadAdditional",size:"small",onChange:I,fullWidth:!0,SelectProps:{multiple:!0},children:Q.map(d=>e.jsx(N,{value:d,style:Y(d,l.threadAdditional,p),children:d},d))})}):null,l.isSolving?e.jsx(r,{item:!0,xs:12,md:6,children:e.jsxs(r,{container:!0,spacing:1,width:"Inherit",children:[e.jsx(r,{item:!0,xs:12,md:12,children:e.jsx(ve,{variant:"h5",gutterBottom:!0,children:"Thread"})})," ",e.jsx(r,{item:!0,xs:12,md:4,children:e.jsx(n,{label:"Stitches",fullWidth:!0,size:"small",type:"number",name:"threadStiches",value:l.threadStiches,onChange:I,required:!0})}),e.jsx(r,{item:!0,xs:12,md:4,children:e.jsx(n,{label:"Rate",type:"number",fullWidth:!0,size:"small",name:"threadRate",value:l.threadRate,onChange:I,required:!0})}),e.jsx(r,{item:!0,xs:12,md:4,children:e.jsx(n,{label:"Amount",fullWidth:!0,size:"small",type:"number",name:"threadAmount",value:l.threadAmount,onChange:I})})]})}):null,l.isSolving?e.jsx(r,{item:!0,xs:12,md:6,children:e.jsxs(r,{container:!0,spacing:1,width:"Inherit",children:[e.jsx(r,{item:!0,xs:12,md:12,children:e.jsx(ve,{variant:"h5",gutterBottom:!0,children:"Tilla"})})," ",e.jsx(r,{item:!0,xs:12,md:4,children:e.jsx(n,{label:"Stitches",fullWidth:!0,size:"small",type:"number",name:"tillaStiches",value:l.tillaStiches,onChange:I,required:!0})}),e.jsx(r,{item:!0,xs:12,md:4,children:e.jsx(n,{label:"Rate",fullWidth:!0,size:"small",type:"number",name:"tilaRate",value:l.tilaRate,onChange:I,required:!0})}),e.jsx(r,{item:!0,xs:12,md:4,children:e.jsx(n,{label:"Amount",fullWidth:!0,size:"small",name:"tilaAmount",value:l.tilaAmount,onChange:I})})]})}):null,l.isSolving?e.jsxs(r,{item:!0,xs:12,md:6,children:[e.jsxs(r,{container:!0,spacing:1,width:"Inherit",children:[e.jsx(r,{item:!0,xs:12,md:12,children:e.jsx(ve,{variant:"h5",gutterBottom:!0,children:"Sequence"})})," ",e.jsx(r,{item:!0,xs:12,md:4,children:e.jsx(n,{label:"Sequence",fullWidth:!0,size:"small",name:"sequence",type:"number",value:l.sequence,onChange:I,required:!0})}),e.jsx(r,{item:!0,xs:12,md:4,children:e.jsx(n,{label:"Rate",fullWidth:!0,type:"number",size:"small",name:"sequenceRate",value:l.sequenceRate,onChange:I,required:!0})}),e.jsx(r,{item:!0,xs:12,md:4,children:e.jsx(n,{label:"Amount",fullWidth:!0,size:"small",name:"sequenceAmount",value:l.sequenceAmount,onChange:I})})]})," "]}):null,l.isSolving?e.jsx(r,{item:!0,xs:12,md:6,children:e.jsxs(r,{container:!0,spacing:1,width:"Inherit",children:[e.jsx(r,{item:!0,xs:12,md:12,children:e.jsx(ve,{variant:"h5",gutterBottom:!0,children:"Solving"})})," ",e.jsx(r,{item:!0,xs:12,md:3,children:e.jsx(n,{label:"Layers",fullWidth:!0,size:"small",type:"number",name:"solvingLayers",value:l.solvingLayers,onChange:I})}),e.jsx(r,{item:!0,xs:12,md:3,children:e.jsx(n,{label:"Meters",type:"number",fullWidth:!0,size:"small",name:"solvingInMeters",value:l.solvingInMeters,onChange:I})}),e.jsx(r,{item:!0,xs:12,md:3,children:e.jsx(n,{label:"Rate",fullWidth:!0,type:"number",size:"small",name:"solvingRate",value:l.solvingRate,onChange:I})}),e.jsx(r,{item:!0,xs:12,md:3,children:e.jsx(n,{label:"Amount",fullWidth:!0,size:"small",type:"number",name:"solvingAmount",value:l.solvingAmount,onChange:I})})]})}):null,e.jsx(r,{item:!0,xs:12,textAlign:"right",sx:{mt:2},children:e.jsx(K,{variant:"contained",size:"small",onClick:w,children:"Save"})})]})," "]})," "]})]}),e.jsx(r,{item:!0,xs:12,md:12,children:e.jsx(ie,{sx:{height:1,width:"100%",marginTop:1,marginBottom:0}})}),e.jsxs(V,{variant:"outlined",children:[e.jsx(J,{className:"css-4rfrnx-MuiCardHeader-root",avatar:e.jsx(Fe,{}),title:"View Embroidery ",titleTypographyProps:{style:{color:"white"}}})," ",e.jsx(r,{container:!0,spacing:2,width:"Inherit",sx:{paddingY:2,paddingX:2},children:e.jsxs(r,{sx:{marginTop:2},item:!0,xs:12,children:[" ",u?e.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"},children:e.jsx("img",{src:We,alt:"Loading",style:{width:200,height:200}})}):e.jsx(Se,{iColumns:F,initialRows:T,setInitialData:i,deleteApi:"https://gecxc.com:4041/api/Embroidery/DeleteEmbroideryById?embroideryId=",deleteBy:"embroideryId",refetch:R,setAccordionExpanded:_,fileName:"Embroidery List"})]})})]})]})},St=Ct,Pt=()=>{const{user:p}=Ce();console.log("user",p);const[t,c]=o.useState([]),[s,i]=o.useState([]),[u,W]=o.useState({processType:"MultiHead",planningId:0,collectionId:"",baseColorId:"",baseColorName:"",noOfDesigns:"",noOfColors:"",planningHeaderId:"",designId:"",batchNo:"",componentId:"",cuttingSize:"",colorId:"",fabricId:"",noOfHeads:0,operatingMachineId:0,repeats:"",repeatSize:"",uomId:"",totalFabric:"",shrinkage:"",wastage:"",total:"",appId:1,createdOn:new Date().toISOString(),createdBy:p.empId,lastUpdatedBy:p.empId,lastUpdatedOn:new Date().toISOString(),isSchiffili:!1,repeatsInMtr:""});console.log("formData",u),o.useEffect(()=>{W({processType:(t==null?void 0:t.processType)||"MultiHead",planningId:(t==null?void 0:t.planningId)||0,collectionId:(t==null?void 0:t.collectionId)||"",baseColorId:(t==null?void 0:t.baseColorId)||"",baseColorName:(t==null?void 0:t.baseColorName)||"",noOfDesigns:(t==null?void 0:t.noOfDesigns)||"",noOfColors:(t==null?void 0:t.noOfColors)||"",planningHeaderId:(t==null?void 0:t.planningHeaderId)||"",designId:(t==null?void 0:t.designId)||"",batchNo:(t==null?void 0:t.batchNo)||"",componentId:(t==null?void 0:t.componentId)||"",cuttingSize:(t==null?void 0:t.cuttingSize)||"",colorId:(t==null?void 0:t.colorId)||"",fabricId:(t==null?void 0:t.fabricId)||"",noOfHeads:(t==null?void 0:t.noOfHeads)||0,operatingMachineId:(t==null?void 0:t.operatingMachineId)||0,repeats:(t==null?void 0:t.repeats)||"",repeatSize:(t==null?void 0:t.repeatSize)||"",uomId:(t==null?void 0:t.uomId)||"",totalFabric:(t==null?void 0:t.totalFabric)||"",shrinkage:(t==null?void 0:t.shrinkage)||"",wastage:(t==null?void 0:t.wastage)||"",total:(t==null?void 0:t.total)||"",appId:1,createdOn:(t==null?void 0:t.createdOn)||new Date().toISOString(),createdBy:(t==null?void 0:t.createdBy)||p.empId,lastUpdatedBy:p.empId,lastUpdatedOn:new Date().toISOString(),repeatsInMtr:(t==null?void 0:t.repeatsInMtr)||""})},[t]);const{data:l}=Ae(),[f,Q]=o.useState(""),{data:Y,refetch:b}=ke(f,{skip:!f}),{data:U,refetch:q}=De(u.planningHeaderId,{skip:!u.planningHeaderId}),[M,H]=o.useState([]),{enqueueSnackbar:G}=Ne();o.useEffect(()=>{Y&&(H(Y.result),b())},[Y]),o.useEffect(()=>{U&&i(U.result.map((a,m)=>({id:m,...a})))},[U,q]),console.log("designList",M),console.log("collectionData",l);const B=(l==null?void 0:l.result)||[],[Z,h]=o.useState(!1),[O,k]=o.useState([]),[R,v]=o.useState([]),[E,_]=o.useState([]),[D,ge]=o.useState([]),[ce,re]=o.useState([]),[oe,xe]=o.useState([]),[ne,Ie]=o.useState([]),[ae,ue]=o.useState([]);o.useEffect(()=>{(async()=>{try{const g=(await se.get("https://gecxc.com:4041/API/Common/GetPrePlanningLookUp?appID=1")).data.result[0];_(g.componentList),re(g.colorList),ge(g.fabricList),Ie(g.noOfHeadsList),xe(g.uom),k(g.planningTypeProcessList),v(g.operatingMachineList)}catch(m){console.error("Error fetching pre-planning lookup data:",m)}})()},[]),o.useEffect(()=>{const a=async m=>{try{const g=await se.get(`https://gecxc.com:4041/api/PrePlanning/GetPrePlanningHeaderByDesignId?designId=${m}`);console.log(g.data),ue(g.data.result)}catch(g){console.error("Error fetching pre-planning lookup data:",g)}};u.designId&&a(u.designId)},[u.designId,u.planningHeaderId]),o.useEffect(()=>{const a=()=>{const L=parseFloat(u.repeats)||0,z=parseFloat(u.repeatSize)||0,X=(L*z).toFixed(2);return parseFloat(X).toLocaleString()};W(L=>({...L,totalFabric:a()}));const m=()=>{const L=parseFloat(u.totalFabric.replace(/,/g,""))||0,z=parseFloat(u.shrinkage)||0,X=parseFloat(u.wastage)||0,de=(L*(100+(z+X))/100).toFixed(2);return parseFloat(de).toLocaleString()};W(L=>({...L,total:m()}));const g=()=>(parseFloat(u.repeats),(.9144*(parseFloat(u.repeatSize)||0)).toFixed(2));W(L=>({...L,repeatsInMtr:g()}));const y=()=>{const L=parseFloat(u.repeats)||0;return((parseFloat(u.repeatsInMtr)||0)*L).toFixed(2)};W(L=>({...L,totalFabric:L.isSchiffili?y():a()}))},[u.repeats,u.repeatSize,u.totalFabric,u.shrinkage,u.wastage,u.repeatsInMtr,u.isSchiffili]);const[te,ee]=o.useState(!1);o.useState(!1);const C=a=>{const{name:m,value:g}=a.target;if(m==="collectionId"){const y=B.find(L=>L.collectionId===parseInt(g));h(!0),Q(g),W({...u,processType:"MultiHead",componentId:"",cuttingSize:"",colorId:"",fabricId:"",noOfHeads:0,operatingMachineId:0,repeats:"",repeatSize:"",uomId:"",totalFabric:"",shrinkage:"",wastage:"",total:"",collectionId:g,noOfDesigns:y?y.noOfDesigns:"",noOfColors:y?y.noOfColors:""})}else if(m==="designId"){const y=M.find(L=>L.designId===parseInt(g));W({...u,processType:"MultiHead",componentId:"",cuttingSize:"",colorId:"",fabricId:"",noOfHeads:0,operatingMachineId:0,repeats:"",repeatSize:"",uomId:"",totalFabric:"",shrinkage:"",wastage:"",total:"",designId:g,baseColorId:y?y.colorId:"",baseColorName:y?y.colorName:""})}else if(m==="batchNo"){const y=ae.find(L=>L.batchNo===g);W({...u,componentId:"",processType:"MultiHead",cuttingSize:"",colorId:"",fabricId:"",noOfHeads:0,operatingMachineId:0,repeats:"",repeatSize:"",uomId:"",totalFabric:"",shrinkage:"",wastage:"",total:"",batchNo:g,planningHeaderId:y?y.planningHeaderId:""}),ee(!0),h(!1)}else W({...u,[m]:g})},[T,me]=o.useState({}),fe=async()=>{const a=he();if(Object.keys(a).length>0){me(a);return}try{const m={...u,totalFabric:parseFloat(u.totalFabric.replace(/,/g,"")),total:parseFloat(u.total.replace(/,/g,""))},g=await se.post("https://gecxc.com:4041/api/PrePlanning/SavePrePlanning",m);console.log("Data saved successfully:",g.data),console.log("Save response:",g.data),g.data.success?G("Fabrication saved successfully!",{variant:"success",autoHideDuration:5e3}):(G(`${g.data.message} !`,{variant:"error",autoHideDuration:5e3}),console.log("response.message",g.data.message)),W(y=>({processType:"MultiHead",planningId:0,collectionId:y.collectionId,designId:y.designId,batchNo:y.batchNo,planningHeaderId:y.planningHeaderId,baseColorId:y.baseColorId,baseColorName:y.baseColorName,noOfDesigns:y.noOfDesigns,noOfColors:y.noOfColors,componentId:"",cuttingSize:"",colorId:"",fabricId:"",noOfHeads:0,operatingMachineId:0,repeats:"",repeatSize:"",uomId:"",totalFabric:"",shrinkage:"",wastage:"",total:"",appId:1,createdOn:new Date().toISOString(),createdBy:p.empId,lastUpdatedOn:new Date().toISOString(),lastUpdatedBy:p.empId,isSchiffili:!1,repeatsInMtr:""})),q()}catch(m){console.error("Error saving data:",m),G("Pre Planning not saved successfully!",{variant:"error",autoHideDuration:5e3})}},he=()=>{const a={};return u.componentId||(a.componentId="componentId is required"),u.colorId||(a.colorId="colorId is required"),u.fabricId||(a.fabricId="fabricId is required"),u.cuttingSize||(a.cuttingSize="cuttingSize is required"),u.repeats||(a.repeats="repeats is required"),u.repeatSize||(a.repeatSize="repeatSize is required"),u.uomId||(a.uomId="uomId is required"),u.shrinkage||(a.shrinkage="shrinkage is required"),u.wastage||(a.wastage="wastage is required"),a};console.log("initialRows",s);const le=s.reduce((a,m)=>a+(m.totalFabric??0),0).toFixed(2),A=parseFloat(le).toLocaleString();console.log("localizedTotalFabric",A);const I=s.reduce((a,m)=>a+(m.total??0),0).toFixed(2),x=parseFloat(I).toLocaleString(),S=[...s,{id:"TOTAL_FABRIC",label:"Total Fabric",totalFabric:A,total:x}],w={sortable:!1,pinnable:!1,hideable:!1};console.log("rows",S);const F=[{field:"componentName",headerName:"Component",...w,colSpan:(a,m)=>{if(m.id==="TOTAL_FABRIC")return 7},valueGetter:(a,m)=>m.id==="TOTAL_FABRIC"?m.label:a},{field:"color",headerName:"Color",...w},{field:"cuttingSize",headerName:"Cutting Size",...w},{field:"fabric",headerName:"Fabrication",...w},{field:"noOfHeadName",headerName:"No. Of Heads",...w},{field:"repeats",headerName:"Repeats",valueGetter:a=>a.toLocaleString(),...w},{field:"repeatSize",headerName:"Repeat Size",valueGetter:a=>a.toLocaleString(),...w},{field:"totalFabric",headerName:"Total Fabric",valueGetter:a=>a.toLocaleString(),...w},{field:"uom",headerName:"UOM",colSpan:(a,m)=>{if(m.id==="TOTAL_FABRIC")return 4},valueGetter:(a,m)=>m.id==="TOTAL_FABRIC"?"OverAll Total":a},{field:"shrinkage",headerName:"Shrinkage %"},{field:"wastage",headerName:"Wastage %"},{field:"total",headerName:"Total",valueGetter:a=>a.toLocaleString(),colSpan:(a,m)=>{if(m.id==="TOTAL_FABRIC")return 2}}],$=u.processType==="Schiffili",d=({row:a,field:m})=>a.id==="TOTAL_FABRIC"&&(m==="componentName"||m==="uom")?"bold":"";console.log("batchList:",ae);const j="https://gecxc.com:4041/api/PrePlanning/DeletePreplanningByPlanningId?PlanningId=",P=(a,m)=>{ee(!te)};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"CardHeader",children:e.jsxs(V,{variant:"outlined",children:[e.jsx(J,{className:"css-4rfrnx-MuiCardHeader-root",avatar:e.jsx(Xe,{}),title:"Pre Planning",titleTypographyProps:{style:{color:"white"}},children:" "}),e.jsxs(r,{container:!0,spacing:2,width:"Inherit",sx:{paddingY:2,paddingX:2},children:[e.jsxs(r,{item:!0,xs:12,md:2,children:[e.jsx(n,{fullWidth:!0,select:!0,label:"Select Collection",name:"collectionId",value:u.collectionId,onChange:C,size:"small",required:!0,children:B.map(a=>e.jsx(N,{value:a.collectionId,children:a.collectionName},a.collectionId))})," "]}),e.jsx(r,{item:!0,xs:12,md:2,children:e.jsx(n,{fullWidth:!0,select:!0,label:"Select Design",name:"designId",value:u.designId,onChange:C,size:"small",required:!0,children:M.map(a=>e.jsx(N,{value:a.designId,children:a.designNo},a.designId))})}),e.jsxs(r,{item:!0,xs:12,md:2,children:[e.jsx(n,{fullWidth:!0,select:!0,label:"Batch No.",name:"batchNo",value:u.batchNo,onChange:C,size:"small",required:!0,children:ae.map(a=>e.jsx(N,{value:a.batchNo,children:a.batchNo},a.batchNo))})," "]}),e.jsx(r,{item:!0,xs:12,md:2,children:e.jsx(n,{label:"No of Design",fullWidth:!0,size:"small",name:"noOfDesigns",value:u.noOfDesigns,onChange:C,disabled:!0})}),e.jsx(r,{item:!0,xs:12,md:2,children:e.jsx(n,{label:"No of Color",fullWidth:!0,size:"small",name:"noOfColors",value:u.noOfColors,onChange:C,disabled:!0})}),e.jsx(r,{item:!0,xs:12,md:2,children:e.jsx(n,{label:"Base Color",fullWidth:!0,size:"small",name:"baseColorName",value:u.baseColorName,onChange:C,disabled:!0})})]})]})}),e.jsxs(V,{variant:"outlined",children:[e.jsx(J,{className:"MainCard",avatar:e.jsx(Oe,{}),title:"Add Pre Planning",titleTypographyProps:{style:{color:"white"}},action:e.jsx(ye,{onClick:P,sx:{mt:"-18px"},children:e.jsx(pe,{style:{color:"white"}})}),sx:{display:"flex",alignItems:"center",justifyContent:"space-between"}}),e.jsxs(Te,{expanded:te,onChange:P,sx:{},children:[e.jsx(we,{expandIcon:e.jsx(pe,{}),"aria-controls":"panel1-content",id:"panel1-header",sx:{display:"none"}}),e.jsx(ze,{children:e.jsxs(r,{container:!0,spacing:2,width:"Inherit",sx:{paddingY:2,paddingX:2},children:[e.jsxs(r,{item:!0,xs:12,md:2,children:[e.jsx(n,{fullWidth:!0,select:!0,label:"Process Type",name:"processType",value:u.processType,onChange:C,size:"small",required:!0,children:O.map(a=>e.jsx(N,{value:a.lookUpName,children:a.lookUpName},a.lookUpId))})," "]}),e.jsx(r,{item:!0,xs:12,md:2,children:e.jsx(He,{fullWidth:!0,options:E,getOptionLabel:a=>a.lookUpName,value:E.find(a=>a.lookUpId===u.componentId)||null,onChange:(a,m)=>{C({target:{name:"componentId",value:m?m.lookUpId:""}})},renderOption:(a,m)=>{const{lookUpName:g}=m;return e.jsx("span",{...a,children:g})},renderInput:a=>e.jsx(n,{...a,label:"Select Component",size:"small",name:"componentId",value:u.componentId,required:!0,error:!!T.componentId,helperText:T.componentId,sx:{backgroundColor:"white","& input":{backgroundColor:"white"}}}),PaperComponent:({children:a})=>e.jsx("div",{style:{backgroundColor:"white"},children:a})})}),e.jsxs(r,{item:!0,xs:12,md:2,children:[" ",e.jsx(He,{fullWidth:!0,options:ce,getOptionLabel:a=>a.lookUpName,value:ce.find(a=>a.lookUpId===u.colorId)||null,onChange:(a,m)=>{C({target:{name:"colorId",value:m?m.lookUpId:""}})},renderInput:a=>e.jsx(n,{...a,label:"Color",size:"small",value:u.colorId,name:"colorId",required:!0,error:!!T.colorId,helperText:T.colorId,sx:{backgroundColor:"white","& input":{backgroundColor:"white"}}}),PaperComponent:({children:a})=>e.jsx("div",{style:{backgroundColor:"white"},children:a})})]}),e.jsx(r,{item:!0,xs:12,md:2,children:e.jsx(n,{label:"Cutting Size",fullWidth:!0,size:"small",name:"cuttingSize",type:"number",value:u.cuttingSize,onChange:C,required:!0,error:!!T.cuttingSize,helperText:T.cuttingSize})}),e.jsx(r,{item:!0,xs:12,md:2,children:e.jsx(He,{fullWidth:!0,options:D,getOptionLabel:a=>a.lookUpName,value:D.find(a=>a.lookUpId===u.fabricId)||null,onChange:(a,m)=>{C({target:{name:"fabricId",value:m?m.lookUpId:""}})},renderInput:a=>e.jsx(n,{...a,label:"Fabrication",size:"small",name:"fabricId",value:u.fabricId,required:!0,error:!!T.fabricId,helperText:T.fabricId,sx:{backgroundColor:"white","& input":{backgroundColor:"white"}}}),PaperComponent:({children:a})=>e.jsx("div",{style:{backgroundColor:"white"},children:a})})}),e.jsx(r,{item:!0,xs:12,md:2,children:$?e.jsx(n,{fullWidth:!0,select:!0,label:"Operating Machine",size:"small",name:"operatingMachineId",value:u.operatingMachineId,onChange:C,required:!0,children:R.map(a=>e.jsx(N,{value:a.lookUpId,children:a.lookUpName},a.lookUpId))}):e.jsx(n,{fullWidth:!0,select:!0,label:"No of Heads",size:"small",name:"noOfHeads",value:u.noOfHeads,onChange:C,required:!0,children:ne.map(a=>e.jsx(N,{value:a.lookUpId,children:a.lookUpName},a.lookUpId))})}),e.jsx(r,{item:!0,xs:12,md:2,children:e.jsx(n,{label:"Repeats",fullWidth:!0,size:"small",name:"repeats",type:"number",value:u.repeats,onChange:C,error:!!T.repeats,helperText:T.repeats,required:!0})}),e.jsx(r,{item:!0,xs:12,md:2,children:e.jsx(n,{label:"Repeat Size",fullWidth:!0,type:"number",size:"small",name:"repeatSize",value:u.repeatSize,onChange:C,error:!!T.repeatSize,helperText:T.repeatSize,required:!0})}),e.jsx(r,{item:!0,xs:12,md:2,children:e.jsx(n,{label:"Total Fabric",fullWidth:!0,size:"small",name:"totalFabric",value:u.totalFabric,onChange:C})}),e.jsx(r,{item:!0,xs:12,md:2,children:e.jsx(n,{fullWidth:!0,select:!0,label:"UOM",type:"number",defaultValue:"",size:"small",name:"uomId",value:u.uomId,onChange:C,error:!!T.uomId,helperText:T.uomId,required:!0,disabled:u.isSchiffili,children:oe.map(a=>e.jsx(N,{value:a.lookUpId,children:a.lookUpName},a.lookUpId))})}),e.jsx(r,{item:!0,xs:12,md:2,children:e.jsx(n,{label:"Shrinkage %",fullWidth:!0,size:"small",type:"number",name:"shrinkage",value:u.shrinkage,onChange:C,error:!!T.shrinkage,helperText:T.shrinkage,required:!0})}),e.jsx(r,{item:!0,xs:12,md:2,children:e.jsx(n,{label:"Wastage %",fullWidth:!0,size:"small",type:"number",name:"wastage",value:u.wastage,onChange:C,error:!!T.wastage,helperText:T.wastage,required:!0})}),e.jsx(r,{item:!0,xs:12,md:2,children:e.jsx(n,{label:"Total",fullWidth:!0,size:"small",name:"total",value:u.total,onChange:C})}),e.jsx(r,{item:!0,xs:12,md:6,children:e.jsx(r,{container:!0,spacing:1,width:"Inherit",children:e.jsx(r,{item:!0,xs:12,md:4,children:e.jsx(n,{label:"repeat in mtr",fullWidth:!0,size:"small",name:"repeatsInMtr",disabled:!0,value:u.repeatsInMtr,onChange:C})})})}),e.jsx(r,{item:!0,xs:12,textAlign:"right",children:e.jsx(K,{variant:"contained",size:"small",onClick:fe,children:"Save"})})]})})]})]}),e.jsx(r,{item:!0,xs:12,md:12,children:e.jsx(ie,{sx:{height:1,width:"100%",marginTop:1,marginBottom:0}})}),e.jsxs(V,{variant:"outlined",children:[e.jsx(J,{className:"MainCard",avatar:e.jsx(Fe,{}),title:"View",titleTypographyProps:{style:{color:"white"}}}),e.jsx(r,{sx:{paddingY:1,paddingX:1},children:e.jsx(r,{sx:{},item:!0,xs:12,children:Z?e.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"},children:e.jsx("img",{src:We,alt:"Loading",style:{width:200,height:200}})}):e.jsx(Se,{iColumns:F,initialRows:S,setInitialData:c,deleteApi:j,deleteBy:"planningId",refetch:q,getCellClassName:d,setAccordionExpanded:ee,fileName:"PrePlanningList"})})})]})]})},Nt=Pt,At="/assets/roller-ezgif.com-instagif-CY-x4C-U.gif",kt=()=>{const{user:p}=Ce();console.log("user",p);const[t,c]=o.useState([]),[s,i]=o.useState({dpId:0,designId:"",batchNo:"",planningHeaderId:"",fabricId:"",colorId:"",color:"",vendorId:"",processType:"",AvailableQty:"",Shrinkage:"",Wastage:"",OutputQty:"",UOM:"",uomId:"",RatePerUOM:"",UnitRatePerPo:"",TotalExclGst:"",GST:"0",TotalIncludingGst:"",poPcs:"",baseColorName:"",createdBy:p.empId,createdOn:new Date().toISOString(),lastUpdatedOn:new Date().toISOString(),lastUpdatedBy:p.empId});o.useEffect(()=>{i({dpId:t.dpId||0,designId:(t==null?void 0:t.designId)||"",planningHeaderId:(t==null?void 0:t.planningHeaderId)||0,batchNo:(t==null?void 0:t.batchNo)||"",fabricId:(t==null?void 0:t.fabricId)||"",colorId:(t==null?void 0:t.colorId)||"",color:(t==null?void 0:t.color)||"",vendorId:(t==null?void 0:t.vendorId)||"",processType:(t==null?void 0:t.processType)||"",AvailableQty:(t==null?void 0:t.availableQty)||"",Shrinkage:(t==null?void 0:t.shrinkage)||"",Wastage:(t==null?void 0:t.wastage)||"",OutputQty:(t==null?void 0:t.outputQty)||0,UOM:(t==null?void 0:t.uom)||0,uomId:(t==null?void 0:t.uomId)||"",RatePerUOM:(t==null?void 0:t.ratePerUOM)||0,UnitRatePerPo:(t==null?void 0:t.unitRatePerPo)||"",TotalExclGst:(t==null?void 0:t.totalExclGst)||"",GST:(t==null?void 0:t.gst)||"",TotalIncludingGst:(t==null?void 0:t.totalIncludingGst)||"",poPcs:(t==null?void 0:t.poPcs)||0,baseColorName:(t==null?void 0:t.baseColorName)||0,createdOn:(t==null?void 0:t.createdOn)||new Date().toISOString(),createdBy:(t==null?void 0:t.createdBy)||p.empId,lastUpdatedOn:new Date().toISOString(),lastUpdatedBy:p.empId})},[t]);const{enqueueSnackbar:u}=Ne(),[W,l]=o.useState(!1);console.log("Dyeing form data to send",s);const{data:f}=Ae(),[Q,Y]=o.useState(""),{data:b}=Pe(),{data:U,refetch:q}=ke(Q,{skip:!Q}),{data:M,refetch:H}=Re(s.designId,{skip:!s.designId}),{data:G}=et(s.planningHeaderId,{skip:!s.planningHeaderId}),{data:B}=tt({fabricId:s.fabricId,planningHeaderId:s.planningHeaderId},{skip:!s.fabricId||!s.planningHeaderId}),{data:Z,refetch:h}=st(s.planningHeaderId,{skip:!s.planningHeaderId}),[O,k]=o.useState([]),[R,v]=o.useState([]),[E,_]=o.useState([]),[D,ge]=o.useState([]),[ce,re]=o.useState([]),[oe,xe]=o.useState([]),[ne,Ie]=o.useState([]),[ae,ue]=o.useState(!1);console.log("batchList",R),console.log("formData",s);const te=(x,S)=>{ue(!ae)};o.useEffect(()=>{U&&k(U.result)},[U]),o.useEffect(()=>{M&&v(M.result)},[M]),o.useEffect(()=>{G&&_(G.result)},[G]),o.useEffect(()=>{B&&xe(B.result)},[B]),o.useEffect(()=>{b&&Ie(b.result[0].vendorList)},[G]),console.log(ne),o.useEffect(()=>{Z&&re(Z.result.map((x,S)=>({id:S,...x})))},[Z,h]),o.useEffect(()=>{if(b){const x=b.result[0];ge(x.uomList)}},[b]);const ee=(f==null?void 0:f.result)||[],C=x=>{const{name:S,value:w}=x.target;if(S==="collectionId")ee.find(F=>F.collectionId===parseInt(w)),Y(w),l(!0),i({...s,collectionId:w,designId:"",batchNo:"",planningHeaderId:"",fabricId:"",colorId:"",color:"",vendorId:"",processType:"",AvailableQty:"",Shrinkage:"",Wastage:"",OutputQty:"",UOM:"",uomId:"",RatePerUOM:"",UnitRatePerPo:"",TotalExclGst:"",GST:"0",TotalIncludingGst:"",poPcs:"",baseColorName:""});else if(S==="designId"){const F=O.find($=>$.designId===parseInt(w));i({...s,designId:w,baseColorId:F?F.colorId:"",baseColorName:F?F.colorName:"",batchNo:"",planningHeaderId:"",fabricId:"",colorId:"",color:"",vendorId:"",processType:"",AvailableQty:"",Shrinkage:"",Wastage:"",OutputQty:"",UOM:"",uomId:"",RatePerUOM:"",UnitRatePerPo:"",TotalExclGst:"",GST:"0",TotalIncludingGst:"",poPcs:""})}else if(S==="batchNo"){const F=R.find($=>$.batchNo===w);i({...s,batchNo:w,planningHeaderId:F?F.planningHeaderId:"",poPcs:F?F.poPcs:"",fabricId:"",colorId:"",color:"",vendorId:"",processType:"",AvailableQty:"",Shrinkage:"",Wastage:"",OutputQty:"",UOM:"",uomId:"",RatePerUOM:"",UnitRatePerPo:"",TotalExclGst:"",GST:"0",TotalIncludingGst:""}),ue(!0),l(!1)}else if(S==="fabricId")E.find(F=>F.fabricId===w),console.log("Selected Fabric:",E),i({...s,fabricId:w});else if(S==="ColorId"){const F=oe.find($=>$.colorId===w.colorId);i({...s,ColorId:w.colorId,color:F.color,AvailableQty:F.total,UOM:F.uom,Shrinkage:F.shrinkage,Wastage:F.wastage})}else S==="processType"?i({...s,processType:w}):S==="vendorId"?i({...s,vendorId:w}):(i({...s,[S]:w}),me(F=>({...F,[S]:""})))};o.useEffect(()=>{const x=()=>{const m=parseFloat(s.AvailableQty)||0,g=parseFloat(s.Shrinkage)||0,y=parseFloat(s.Wastage)||0;return(m*(100-(g+y))/100).toFixed(2)},S=()=>{const m=parseFloat(s.AvailableQty)||0,g=parseFloat(s.RatePerUOM)||0;return(m*g).toFixed(2)},w=(m,g)=>(m*(1+g/100)).toFixed(2),F=x(),$=S(),d=parseFloat(s.GST)||0,j=w($,d),P=parseFloat(s.poPcs)||0,a=P?j/P:0;i(m=>({...m,OutputQty:F,TotalExclGst:$,TotalIncludingGst:j,UnitRatePerPo:a.toFixed(2)}))},[s.AvailableQty,s.Shrinkage,s.Wastage,s.RatePerUOM,s.GST,s.poPcs,s.UnitRatePerPo]);const[T,me]=o.useState({}),fe=async()=>{const x=he();if(Object.keys(x).length>0){me(x);return}try{const S=await se.post("https://gecxc.com:4041/api/DyeingPrinting/SaveDyeingPrinting",s);console.log("Save response:",S.data),S.data.success?u("Fabrication saved successfully!",{variant:"success",autoHideDuration:5e3}):(u(`${S.data.message} !`,{variant:"error",autoHideDuration:5e3}),console.log("response.message",S.data.message)),i(w=>({designId:w.designId,planningHeaderId:w.planningHeaderId,batchNo:w.batchNo,dpId:0,fabricId:"",colorId:"",color:"",vendorId:"",processType:"",AvailableQty:"",Shrinkage:"",Wastage:"",OutputQty:"",UOM:"",uomId:"",RatePerUOM:"",UnitRatePerPo:"",TotalExclGst:"",GST:"0",TotalIncludingGst:"",poPcs:w.poPcs,baseColorName:"",createdOn:new Date().toISOString(),createdBy:p.empId,lastUpdatedOn:new Date().toISOString(),lastUpdatedBy:p.empId})),h()}catch(S){console.error("Error saving data:",S),u("Dyeing not saved successfully!",{variant:"error",autoHideDuration:5e3})}},he=()=>{const x={};return s.fabricId||(x.fabricId="fabricId is required"),s.colorId||(x.colorId="colorId is required"),s.vendorId||(x.vendorId="vendorId is required"),s.processType||(x.processType="processType is required"),s.GST||(x.GST="GST is required"),s.RatePerUOM||(x.RatePerUOM="RatePerUOM is required"),x},le=[{value:"Dyeing",label:"Dyeing"},{value:"Printing",label:"Printing"}],A=[{field:"fabricName",headerName:"Fabric"},{field:"colorName",headerName:"Color"},{field:"vendorName",headerName:"Vendor"},{field:"processType",headerName:"Process Type"},{field:"uom",headerName:" UOM"},{field:"availableQty",headerName:"Available Quantitity"},{field:"shrinkage",headerName:"Shrinkage"},{field:"wastage",headerName:"Wastage"},{field:"outputQty",headerName:"Output Qty"},{field:"ratePerUOM",headerName:"Rate"},{field:"totalExclGst",headerName:"Total Excl. Gst"},{field:"gst",headerName:"GST"},{field:"totalIncludingGst",headerName:"Total Including GST"},{field:"unitRatePerPo",headerName:"UnitRate Per Po."}];return e.jsxs(e.Fragment,{children:[e.jsxs(V,{variant:"outlined",children:[e.jsx(J,{className:"css-4rfrnx-MuiCardHeader-root",avatar:e.jsx(Le,{src:At,sx:{background:"transparent"}}),title:"Dyeing ",titleTypographyProps:{style:{color:"white"}}}),e.jsxs(r,{container:!0,spacing:2,width:"Inherit",sx:{paddingY:2,paddingX:2},children:[e.jsxs(r,{item:!0,xs:12,md:3,children:[e.jsx(n,{fullWidth:!0,select:!0,label:"Select Collection",name:"collectionId",value:Q,onChange:C,size:"small",children:ee.map(x=>e.jsx(N,{value:x.collectionId,children:x.collectionName},x.collectionId))})," "]}),e.jsx(r,{item:!0,xs:12,md:3,children:e.jsx(n,{fullWidth:!0,select:!0,label:"Select Design",name:"designId",value:s.designId,onChange:C,size:"small",children:O.map(x=>e.jsx(N,{value:x.designId,children:x.designNo},x.designId))})}),e.jsxs(r,{item:!0,xs:12,md:3,children:[e.jsx(n,{fullWidth:!0,select:!0,label:"Batch No.",name:"batchNo",value:s.batchNo,onChange:C,size:"small",children:R.map(x=>e.jsx(N,{value:x.batchNo,children:x.batchNo},x.batchNo))})," "]}),e.jsx(r,{item:!0,xs:12,md:3,children:e.jsx(n,{label:"Base Color",fullWidth:!0,size:"small",name:"baseColorName",value:s.baseColorName,onChange:C,disabled:!0})}),e.jsx(r,{item:!0,xs:12,md:3,children:e.jsx(n,{fullWidth:!0,select:!0,label:"Select Fabric",defaultValue:"",size:"small",name:"fabricId",value:s.fabricId,onChange:C,error:!!T.fabricId,helperText:T.fabricId,required:!0,children:E.map(x=>e.jsx(N,{value:x.fabricId,children:x.fabric},x.fabricId))})}),e.jsx(r,{item:!0,xs:12,md:3,children:e.jsx(It,{fullWidth:!0,options:oe,getOptionLabel:x=>x.color||"",renderInput:x=>e.jsx(n,{...x,label:"Color",name:"colorId",size:"small",error:!!T.colorId,helperText:T.colorId,required:!0}),value:oe.find(x=>x.colorId===s.colorId)||null,onChange:(x,S)=>{i(w=>({...w,colorId:S?S.colorId:"",color:S?S.color:"",AvailableQty:S?S.total:"",UOM:S?S.uom:"",uomId:S?S.uomId:"",Shrinkage:S?S.shrinkage:"",Wastage:S?S.wastage:""}))}})})]})]}),e.jsx(ie,{color:"#cc8587",sx:{height:1,width:"100%",mt:2}}),e.jsxs(V,{variant:"outlined",children:[e.jsx(J,{className:"css-4rfrnx-MuiCardHeader-root",avatar:e.jsx(Oe,{}),title:"Add Dyeing ",titleTypographyProps:{style:{color:"white"}},action:e.jsx(ye,{onClick:te,sx:{mt:"-18px"},children:e.jsx(pe,{style:{color:"white"}})}),sx:{display:"flex",alignItems:"center",justifyContent:"space-between"}}),e.jsxs(Te,{expanded:ae,onChange:te,sx:{},children:[e.jsx(we,{expandIcon:e.jsx(pe,{}),"aria-controls":"panel1-content",id:"panel1-header",sx:{display:"none"}}),e.jsx(ze,{children:e.jsxs(r,{container:!0,spacing:2,width:"Inherit",sx:{paddingY:2,paddingX:2},children:[e.jsx(r,{item:!0,xs:12,md:3,children:e.jsx(n,{fullWidth:!0,select:!0,label:"Vendor Name",size:"small",name:"vendorId",value:s.vendorId,onChange:C,error:!!T.vendorId,helperText:T.vendorId,required:!0,children:ne.map(x=>e.jsx(N,{value:x.lookUpId,children:x.lookUpName},x.lookUpId))})}),e.jsx(r,{item:!0,xs:12,md:3,children:e.jsx(n,{fullWidth:!0,select:!0,label:"Process Type",size:"small",name:"processType",value:s.processType,onChange:C,error:!!T.processType,helperText:T.processType,required:!0,children:le.map(x=>e.jsx(N,{value:x.value,children:x.label},x.value))})}),e.jsx(r,{item:!0,xs:12,md:3,children:e.jsx(n,{label:"Po Pcs",fullWidth:!0,size:"small",name:"poPcs",value:s.poPcs,onChange:C,disabled:!0})}),e.jsx(r,{item:!0,xs:12,md:1.5,children:e.jsx(n,{label:"UOM",fullWidth:!0,size:"small",name:"UOM",value:s.UOM,onChange:C})}),e.jsx(r,{item:!0,xs:12,md:1.5,children:e.jsx(n,{label:"AvailableQty",fullWidth:!0,size:"small",type:"number",name:"AvailableQty",value:s.AvailableQty,onChange:C})}),e.jsx(r,{item:!0,xs:12,md:1.5,children:e.jsx(n,{label:"Shrinkage%",type:"number",fullWidth:!0,size:"small",name:"Shrinkage",value:s.Shrinkage,onChange:C})}),e.jsx(r,{item:!0,xs:12,md:1.5,children:e.jsx(n,{label:"Wastage%",fullWidth:!0,size:"small",type:"number",name:"Wastage",value:s.Wastage,onChange:C})}),e.jsx(r,{item:!0,xs:12,md:1.5,children:e.jsx(n,{label:"Output Qty",fullWidth:!0,size:"small",name:"OutputQty",type:"number",value:s.OutputQty,onChange:C})}),e.jsx(r,{item:!0,xs:12,md:1.5,children:e.jsx(n,{label:"Rate",fullWidth:!0,size:"small",type:"number",name:"RatePerUOM",value:s.RatePerUOM,onChange:C,error:!!T.RatePerUOM,helperText:T.RatePerUOM,required:!0})}),e.jsx(r,{item:!0,xs:12,md:1.5,children:e.jsx(n,{label:"Total Excluding GST",type:"number",fullWidth:!0,size:"small",name:"TotalExclGst",value:s.TotalExclGst,onChange:C})}),e.jsxs(r,{item:!0,xs:12,md:1.5,children:[e.jsx(n,{label:"GST",fullWidth:!0,type:"number",size:"small",name:"GST",value:s.GST,onChange:C,error:!!T.GST,helperText:T.GST,required:!0})," "]}),e.jsx(r,{item:!0,xs:12,md:1.5,children:e.jsx(n,{label:"Total:Including Gst",fullWidth:!0,size:"small",name:"TotalExclGst",value:s.TotalIncludingGst,onChange:C})}),e.jsx(r,{item:!0,xs:12,md:1.5,children:e.jsx(n,{label:"Unit P: T/Po PC's",fullWidth:!0,size:"small",name:"UnitRatePerPo",value:s.UnitRatePerPo,onChange:C})}),e.jsx(r,{item:!0,xs:12,md:12,textAlign:"right",children:e.jsx(K,{variant:"contained",color:"primary",size:"small",onClick:fe,children:"Save"})})]})})]})]}),e.jsx(r,{item:!0,xs:12,md:12,children:e.jsx(ie,{sx:{height:1,width:"100%",marginTop:1,marginBottom:0}})}),e.jsxs(V,{variant:"outlined",children:[e.jsx(J,{className:"css-4rfrnx-MuiCardHeader-root",avatar:e.jsx(Fe,{}),title:"View Dyeing ",titleTypographyProps:{style:{color:"white"}}})," ",e.jsx(r,{container:!0,spacing:2,width:"Inherit",sx:{paddingY:2,paddingX:2},children:e.jsx(r,{item:!0,xs:12,md:12,paddingTop:1,children:W?e.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"},children:e.jsx("img",{src:We,alt:"Loading",style:{width:200,height:200}})}):e.jsx(Se,{iColumns:A,initialRows:ce,setInitialData:c,deleteApi:"https://gecxc.com:4041/api/DyeingPrinting/DeleteDyeingPrintingById?DPId=",deleteBy:"dpId",refetch:h,setAccordionExpanded:ue,fileName:"Dyeing&PrintingList"})})})]})]})},Ot=kt,Ve="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAACXBIWXMAAAsTAAALEwEAmpwYAAADr0lEQVR4nNXXaciVVRAH8Kv1Jtoi5psFZZYUtoimhUVlaJHZghK2UBFCtGkbZdgiBG1GHyowaaEdWogWElvMFjJpw4oWwrJsVetDtNNevxjeuXW8PPe991rvh/5w4TznnDkzZ87Mf+bWav8H4Dgcgc9wfcPanViFidioL5Rvj2/wIqbgCyzA3XgKH+BI/+DWijMGpYEjO1U+FH8Uh++Jj6yPNzG5YW5wccYxWItF6anwWP9OjJiE7/FuYcCTeDnHjQYsLWR3w8cYi/OxP57AzE49cSGewzgswfJ0/0u4HwfgWYyq3w5deBXH4wXchHU4GgvbVdwPR+EVPI1NMCDesviFos3SqIiTaSl7BW5Pw5/Ho3gYl2Nuu8G3NG+8X85tgcMxCxfhLBxWf/N08bJU+h52xRrciGdwdj7bsFbKx+fbnZTfe+cNflGNX/EQJqQ3Pi+MPgN3pAd/x8GtlO+BT/I2A1P4T+0hMuYdzC/Om56XCW/NyOCt5gs9Lo5oPxBD8u07xesZK5vjtjRqXKEj0vGEZgYsxGXYOKO8U/yE3ZN0PsSVuCHOLHTsgxVVykdmgAzKAGuFryvmLsDVBXnF+w9OCt+60BXcMarRgBA8D91Jvc2URrqNSZkJ+f1dUvRbDfu/wqbpiXmFrluCIUvlke+rsS3OaaJ8WUmxhewO+LYXT52KneLWhcx167EhRtQ3JKNVYUqTuAkmfDBStoncI7kvMmvLHAcdTywPORT35rjqbdfWySPzfDF+wAPF/Hb4skJ2Xa6HzL45fiwCvTRgJq7NvK/CmcXeuQ1rpxdrF1fIBvn0z5ScXuXFGk7Md4nbVeGUYu8lDWvnFmtzKmR/C+JpZcA03JXjqoBaWfD9VplGkqjq890VvUJgTfHuezUzYMdgsBxHRavCpAaZoQ3fQblVWJLrK0suaDSgXwbakCSTKkQp7WoiP6AX5pyVJPd3GjYzYgFmZzT/2OSwVdkLblOU7PuauF4+Z3fGxqWtDBiblawrWbE3hIFv4OcW++Ylta9uqyHVU3rnpNBr/h2WZ1WMrLmmpfJABEnW7uD44dlybwjCk8OyWX0/YqvWLvSUy3jTXbIt77QsL8q+YnReZnTbyuvA1OTuqZkhMyoqXSNWRH+Y8sem8sm1DYWehvLtjPrhObdzZspVuDnL7GnBI4XMPUlQIzZYeR3ZGc1ObzyeFW981viByRtjsttdnO3cyRF8tf8Serj8oPhjmu11tNqfZnpFzz8fh/TJn9O+xl9lMwg6mBWmPgAAAABJRU5ErkJggg==",Tt=()=>{const{user:p}=Ce(),{enqueueSnackbar:t}=Ne(),[c,s]=o.useState([]),[i,u]=o.useState({schiffiliId:0,designId:"",planningHeaderId:0,batchNo:"",componentId:"",poPcs:"",baseColorName:"",fabricId:"",vendorId:"",colorId:"",availableQty:"",thaanQty:0,operatingMachineId:0,operatingMachine:"",workingHeadId:0,cuttingSize:"",rate:"",costPerComponent:"",totalEmbroidry:0,noOfItemPerThaan:0,noOfStichesPerYard:0,amountPerYard:0,totalPcs:0,laserCut:!1,laserCutRate:0,pcsForLaserCut:0,totalAmount:0,createdBy:p.empId,createdOn:new Date().toISOString(),lastUpdatedOn:new Date().toISOString(),lastUpdatedBy:p.empId});o.useEffect(()=>{u({schiffiliId:c.schiffiliId||0,designId:(c==null?void 0:c.designId)||"",planningHeaderId:(c==null?void 0:c.planningHeaderId)||0,batchNo:(c==null?void 0:c.batchNo)||"",componentId:(c==null?void 0:c.componentId)||"",poPcs:(c==null?void 0:c.poPcs)||"",baseColorName:(c==null?void 0:c.baseColorName)||"",fabricId:(c==null?void 0:c.fabricId)||"",vendorId:(c==null?void 0:c.vendorId)||"",colorId:(c==null?void 0:c.colorId)||"",availableQty:(c==null?void 0:c.availableQty)||"",thaanQty:(c==null?void 0:c.thaanQty)||0,operatingMachineId:(c==null?void 0:c.operatingMachineId)||0,operatingMachine:(c==null?void 0:c.operatingMachine)||"",workingHeadId:(c==null?void 0:c.workingHeadId)||0,cuttingSize:(c==null?void 0:c.cuttingSize)||"",rate:(c==null?void 0:c.rate)||"",costPerComponent:(c==null?void 0:c.costPerComponent)||"",totalEmbroidry:(c==null?void 0:c.totalEmbroidry)||0,noOfItemPerThaan:(c==null?void 0:c.noOfItemPerThaan)||0,noOfStichesPerYard:(c==null?void 0:c.noOfStichesPerYard)||0,amountPerYard:(c==null?void 0:c.amountPerYard)||0,totalPcs:(c==null?void 0:c.totalPcs)||0,laserCut:(c==null?void 0:c.laserCut)||!1,laserCutRate:(c==null?void 0:c.laserCutRate)||0,pcsForLaserCut:(c==null?void 0:c.pcsForLaserCut)||0,totalAmount:(c==null?void 0:c.totalAmount)||0,createdOn:(c==null?void 0:c.createdOn)||new Date().toISOString(),createdBy:(c==null?void 0:c.createdBy)||p.empId,lastUpdatedOn:new Date().toISOString(),lastUpdatedBy:p.empId})},[c]);const[W,l]=o.useState(!1),f=(d,j)=>{l(!W)},[Q,Y]=o.useState(!1),{data:b}=Ae(),[U,q]=o.useState(""),{data:M}=Pe(),{data:H,refetch:G}=ke(U,{skip:!U}),{data:B,refetch:Z}=Re(i.designId,{skip:!i.designId}),{data:h}=Ee({batchNo:i.planningHeaderId,componentId:i.componentId},{skip:!i.planningHeaderId||!i.componentId}),{data:O}=qe({batchNo:i.planningHeaderId,componentId:i.componentId,fabricId:i.fabricId},{skip:!i.planningHeaderId||!i.componentId||!i.fabricId}),{data:k,refetch:R}=at(i.planningHeaderId,{skip:!i.planningHeaderId}),{data:v}=Me(i.planningHeaderId,{skip:!i.planningHeaderId});console.log("formData.planningHeaderId",i.planningHeaderId),console.log("collectionData",b),console.log("schiffliList",k);const[E,_]=o.useState([]),[D,ge]=o.useState([]),[ce,re]=o.useState([]),[oe,xe]=o.useState([]),[ne,Ie]=o.useState([]),[ae,ue]=o.useState([]),[te,ee]=o.useState([]),[C,T]=o.useState([]),[me,fe]=o.useState([]);o.useEffect(()=>{H&&_(H.result)},[H]),o.useEffect(()=>{B&&ge(B.result)},[B]),o.useEffect(()=>{h&&re(h.result)},[h]),o.useEffect(()=>{O&&ee(h.result)},[O]),o.useEffect(()=>{v&&fe(v.result)},[v]),o.useEffect(()=>{k&&T(k.result.map((d,j)=>({id:j,...d})))},[k,R]),o.useEffect(()=>{if(M){const d=M.result[0];xe(d.vendorList),Ie(d.operatingMachineList),ue(d.workingHeadList)}},[M]),console.log("initialRows",C);const he=(b==null?void 0:b.result)||[];o.useEffect(()=>{const d=()=>{const g=parseFloat(i.thaanQty)||0,y=parseFloat(i.operatingMachine)||0;return(g*y).toFixed(2)};u(g=>({...g,totalEmbroidry:d()}));const j=()=>{const g=parseFloat(i.thaanQty)||0,y=parseFloat(i.noOfStichesPerYard)||0;return(g*y).toFixed(2)};u(g=>({...g,totalPcs:j()}));const P=()=>{const g=parseFloat(i.noOfStichesPerYard)||0,y=parseFloat(i.rate)||0;return(g/1e3*y).toFixed(2)};u(g=>({...g,amountPerYard:P()}));const a=()=>{const g=parseFloat(i.totalAmount)||0,y=parseFloat(i.totalPcs)||0;return(g/y).toFixed(2)};u(g=>({...g,costPerComponent:a()}));const m=()=>{const g=parseFloat(i.amountPerYard)||0,y=parseFloat(i.totalEmbroidry)||0,L=parseFloat(i.laserCutRate)||0,z=parseFloat(i.pcsForLaserCut)||0;return(g*y+z*L).toFixed(2)};u(g=>({...g,totalAmount:m()}))},[i.thaanQty,i.operatingMachine,i.noOfStichesPerYard,i.rate,i.totalAmount,i.totalPcs,i.amountPerYard,i.totalEmbroidry,i.laserCutRate,i.pcsForLaserCut]);const le=d=>{const{name:j,checked:P}=d.target;u(a=>({...a,[j]:P}))},A=d=>{const{name:j,value:P}=d.target;if(j==="collectionId")he.find(a=>a.collectionId===parseInt(P)),q(P),Y(!0),u({...i,collectionId:P,designId:"",planningHeaderId:0,batchNo:"",componentId:"",poPcs:"",baseColorName:"",fabricId:"",vendorId:"",colorId:"",availableQty:"",thaanQty:0,operatingMachineId:0,operatingMachine:"",workingHeadId:0,cuttingSize:"",rate:"",costPerComponent:"",totalEmbroidry:0,noOfItemPerThaan:0,noOfStichesPerYard:0,amountPerYard:0,totalPcs:0,laserCut:!1,laserCutRate:0,pcsForLaserCut:0,totalAmount:0});else if(j==="designId"){const a=E.find(m=>m.designId===parseInt(P));u({...i,designId:P,baseColorId:a?a.colorId:"",baseColorName:a?a.colorName:"",planningHeaderId:0,batchNo:"",componentId:"",poPcs:"",fabricId:"",vendorId:"",colorId:"",availableQty:"",thaanQty:0,operatingMachineId:0,operatingMachine:"",workingHeadId:0,cuttingSize:"",rate:"",costPerComponent:"",totalEmbroidry:0,noOfItemPerThaan:0,noOfStichesPerYard:0,amountPerYard:0,totalPcs:0,laserCut:!1,laserCutRate:0,pcsForLaserCut:0,totalAmount:0})}else if(j==="batchNo"){const a=D.find(m=>m.batchNo===P);u({...i,batchNo:P,planningHeaderId:a?a.planningHeaderId:"",poPcs:a?a.poPcs:"",componentId:"",fabricId:"",vendorId:"",colorId:"",availableQty:"",thaanQty:0,operatingMachineId:0,operatingMachine:"",workingHeadId:0,cuttingSize:"",rate:"",costPerComponent:"",totalEmbroidry:0,noOfItemPerThaan:0,noOfStichesPerYard:0,amountPerYard:0,totalPcs:0,laserCut:!1,laserCutRate:0,pcsForLaserCut:0,totalAmount:0}),l(!0),Y(!1)}else if(j==="colorId"){const a=te.find(m=>m.colorId===P);u({...i,colorId:P,availableQty:a?a.total:"",cuttingSize:a?a.cuttingSize:"",repeats:a?a.repeats:""})}else if(j==="operatingMachineId"){const a=ne.find(m=>m.lookUpId===P);u({...i,operatingMachineId:P,operatingMachine:a?a.lookUpName:""})}else u({...i,[j]:P})};console.log("colors",te);const[I,x]=o.useState({}),S=async()=>{const d=w();if(Object.keys(d).length>0){x(d);return}try{const j=await se.post("https://gecxc.com:4041/api/Schiffli/SaveSchiffili",i);console.log("Save response:",j.data),j.data.success?t("Fabrication saved successfully!",{variant:"success",autoHideDuration:5e3}):(t(`${j.data.message} !`,{variant:"error",autoHideDuration:5e3}),console.log("response.message",j.data.message)),u(P=>({designId:P.designId,planningHeaderId:P.planningHeaderId,batchNo:P.batchNo,baseColorName:P.baseColorName,schiffiliId:0,componentId:"",poPcs:P.poPcs,fabricId:"",vendorId:"",colorId:"",availableQty:"",thaanQty:0,operatingMachineId:0,operatingMachine:"",workingHeadId:0,cuttingSize:"",rate:"",costPerComponent:"",totalEmbroidry:0,noOfItemPerThaan:0,noOfStichesPerYard:0,amountPerYard:0,totalPcs:0,laserCut:!1,laserCutRate:0,pcsForLaserCut:0,totalAmount:0,createdOn:new Date().toISOString(),createdBy:p.empId,lastUpdatedOn:new Date().toISOString(),lastUpdatedBy:p.empId})),R()}catch(j){console.error("Error saving data:",j),t("Dyeing not saved successfully!",{variant:"error",autoHideDuration:5e3})}},w=()=>{const d={};return i.fabricId||(d.fabricId="fabricId is required"),i.colorId||(d.colorId="colorId is required"),i.vendorId||(d.vendorId="vendorId is required"),i.componentId||(d.componentId="componentId is required"),i.thaanQty||(d.thaanQty="thaanQty is required"),i.workingHeadId||(d.workingHeadId="workingHeadId is required"),i.rate||(d.rate="rate is required"),i.operatingMachineId||(d.operatingMachineId="operatingMachineId is required"),i.noOfStichesPerYard||(d.noOfStichesPerYard="noOfStichesPerYard is required"),i.noOfItemPerThaan||(d.noOfItemPerThaan="noOfItemPerThaan is required"),d};console.log("formData",i);const F=[{field:"componentName",headerName:"Component"},{field:"fabricName",headerName:"Fabric"},{field:"vendorName",headerName:"Vendor"},{field:"colourName",headerName:"Color"},{field:"thaanQty",headerName:"Thaan Quantity"},{field:"availableQty",headerName:"Available Quantitity"},{field:"operatingMachineName",headerName:"Operating Machine"},{field:"noOfHeadsName",headerName:"Working Head"},{field:"cuttingSize",headerName:"Cutting Size"},{field:"rate",headerName:"Rate"},{field:"noOfStichesPerYard",headerName:"No. Of Stiches Per Yard"},{field:"noOfItemPerThaan",headerName:"No. Of Item Per Thaan"},{field:"totalEmbroidry",headerName:"Total Embroidry"},{field:"amountPerYard",headerName:"Amount Per Yard"},{field:"totalPcs",headerName:"Total Pcs"},{field:"totalAmount",headerName:"Total Amount"},{field:"costPerComponent",headerName:"Cost Per Component"},{field:"laserCutRate",headerName:"LaserCut Rate"},{field:"pcsForLaserCut",headerName:"Pcs.For Laser Cut"}];return e.jsxs(e.Fragment,{children:[e.jsxs(V,{variant:"outlined",children:[e.jsx(J,{className:"css-4rfrnx-MuiCardHeader-root",avatar:e.jsx(Le,{src:Ve,sx:{background:"transparent"}}),title:"Schiffli ",titleTypographyProps:{style:{color:"white"}}}),e.jsxs(r,{container:!0,spacing:2,width:"Inherit",sx:{paddingY:2,paddingX:2},children:[e.jsxs(r,{item:!0,xs:12,md:3,children:[e.jsx(n,{fullWidth:!0,select:!0,label:"Select Collection",name:"collectionId",value:U,onChange:A,size:"small",children:he.map(d=>e.jsx(N,{value:d.collectionId,children:d.collectionName},d.collectionId))})," "]}),e.jsx(r,{item:!0,xs:12,md:3,children:e.jsx(n,{fullWidth:!0,select:!0,label:"Select Design",name:"designId",value:i.designId,onChange:A,size:"small",children:E.map(d=>e.jsx(N,{value:d.designId,children:d.designNo},d.designId))})}),e.jsxs(r,{item:!0,xs:12,md:3,children:[e.jsx(n,{fullWidth:!0,select:!0,label:"Batch No.",name:"batchNo",value:i.batchNo,onChange:A,size:"small",children:D.map(d=>e.jsx(N,{value:d.batchNo,children:d.batchNo},d.batchNo))})," "]}),e.jsxs(r,{item:!0,xs:12,md:3,children:[e.jsx(n,{fullWidth:!0,select:!0,label:"Components",name:"componentId",value:i.componentId,onChange:A,size:"small",required:!0,error:!!I.componentId,helperText:I.componentId,children:me.map(d=>e.jsx(N,{value:d.componentId,children:d.componentName},d.componentId))})," "]}),e.jsx(r,{item:!0,xs:12,md:3,children:e.jsx(n,{label:"Base Color",fullWidth:!0,size:"small",name:"baseColorName",value:i.baseColorName,onChange:A,disabled:!0})})]})]}),e.jsx(ie,{color:"#cc8587",sx:{height:1,width:"100%",mt:2}}),e.jsxs(V,{variant:"outlined",children:[e.jsx(J,{className:"css-4rfrnx-MuiCardHeader-root",avatar:e.jsx(Oe,{}),title:"Add Schiffli ",titleTypographyProps:{style:{color:"white"}},action:e.jsx(ye,{onClick:f,sx:{mt:"-18px"},children:e.jsx(pe,{style:{color:"white"}})}),sx:{display:"flex",alignItems:"center",justifyContent:"space-between"}})," ",e.jsxs(Te,{expanded:W,onChange:f,sx:{},children:[e.jsx(we,{expandIcon:e.jsx(pe,{}),"aria-controls":"panel1-content",id:"panel1-header",sx:{display:"none"}}),e.jsx(ze,{children:e.jsxs(r,{container:!0,spacing:2,width:"Inherit",sx:{paddingY:2,paddingX:2},children:[e.jsx(r,{item:!0,xs:12,md:3,children:e.jsx(n,{fullWidth:!0,select:!0,label:"Select Fabric",defaultValue:"",size:"small",name:"fabricId",value:i.fabricId,onChange:A,required:!0,error:!!I.fabricId,helperText:I.fabricId,children:ce.map(d=>e.jsx(N,{value:d.fabricId,children:d.fabric},d.fabricId))})}),e.jsx(r,{item:!0,xs:12,md:3,children:e.jsx(n,{fullWidth:!0,select:!0,label:"Vendors",defaultValue:"",size:"small",name:"vendorId",value:i.vendorId,onChange:A,required:!0,error:!!I.vendorId,helperText:I.vendorId,children:oe.map(d=>e.jsx(N,{value:d.lookUpId,children:d.lookUpName},d.lookUpId))})}),e.jsx(r,{item:!0,xs:12,md:3,children:e.jsx(n,{fullWidth:!0,select:!0,label:"Color",size:"small",name:"colorId",value:i.colorId,onChange:A,required:!0,error:!!I.colorId,helperText:I.colorId,children:te.map(d=>e.jsx(N,{value:d.colorId,children:d.color},d.colorId))})}),e.jsx(r,{item:!0,xs:12,md:1.5,children:e.jsx(n,{label:"Po Pcs",fullWidth:!0,size:"small",name:"poPcs",value:i.poPcs,disabled:!0,onChange:A})}),e.jsx(r,{item:!0,xs:12,md:1.5,children:e.jsx(n,{label:"Available Quantity",fullWidth:!0,size:"small",name:"availableQty",value:i.availableQty,onChange:A})}),e.jsx(r,{item:!0,xs:12,md:1.5,children:e.jsx(n,{label:"Thaan Quantity",fullWidth:!0,type:"number",size:"small",name:"thaanQty",value:i.thaanQty,onChange:A,required:!0,error:!!I.thaanQty,helperText:I.thaanQty})}),e.jsx(r,{item:!0,xs:12,md:1.5,children:e.jsx(n,{fullWidth:!0,select:!0,label:"operatingMachineId",defaultValue:"",size:"small",name:"operatingMachineId",value:i.operatingMachineId,onChange:A,required:!0,error:!!I.operatingMachineId,helperText:I.operatingMachineId,children:ne.map(d=>e.jsx(N,{value:d.lookUpId,children:d.lookUpName},d.lookUpId))})}),e.jsx(r,{item:!0,xs:12,md:1.5,children:e.jsx(n,{fullWidth:!0,select:!0,label:"workingHeadId",defaultValue:"",size:"small",name:"workingHeadId",value:i.workingHeadId,onChange:A,required:!0,error:!!I.workingHeadId,helperText:I.workingHeadId,children:ae.map(d=>e.jsx(N,{value:d.lookUpId,children:d.lookUpName},d.lookUpId))})}),e.jsx(r,{item:!0,xs:12,md:1.5,children:e.jsx(n,{label:"Cutting Size",fullWidth:!0,type:"number",size:"small",name:"cuttingSize",value:i.cuttingSize,onChange:A})}),e.jsx(r,{item:!0,xs:12,md:1.5,children:e.jsx(n,{label:"Rate",type:"number",fullWidth:!0,size:"small",name:"rate",value:i.rate,onChange:A,required:!0,error:!!I.rate,helperText:I.rate})}),e.jsx(r,{item:!0,xs:12,md:1.5,children:e.jsx(n,{label:"No. Of Stiches Per Yard",fullWidth:!0,type:"number",size:"small",name:"noOfStichesPerYard",value:i.noOfStichesPerYard,onChange:A,required:!0,error:!!I.noOfStichesPerYard,helperText:I.noOfStichesPerYard})}),e.jsx(r,{item:!0,xs:12,md:1.5,children:e.jsx(n,{label:"No. Of Items Per Thaan",fullWidth:!0,size:"small",type:"number",name:"noOfItemPerThaan",value:i.noOfItemPerThaan,onChange:A,required:!0,error:!!I.noOfItemPerThaan,helperText:I.noOfItemPerThaan})}),e.jsx(r,{item:!0,xs:12,md:1.5,children:e.jsx(n,{label:"Total Embroidry",fullWidth:!0,size:"small",name:"totalEmbroidry",type:"number",value:i.totalEmbroidry,onChange:A})}),e.jsx(r,{item:!0,xs:12,md:1.5,children:e.jsx(n,{label:"Amount Per Yard",fullWidth:!0,type:"number",size:"small",name:"amountPerYard",value:i.amountPerYard,onChange:A})}),e.jsx(r,{item:!0,xs:12,md:1.5,children:e.jsx(n,{label:"Total Pcs",fullWidth:!0,size:"small",name:"totalPcs",value:i.totalPcs,onChange:A})}),e.jsx(r,{item:!0,xs:12,md:1.5,children:e.jsx(n,{label:"Cost Per Component",fullWidth:!0,size:"small",name:"costPerComponent",value:i.costPerComponent,onChange:A})}),e.jsx(r,{item:!0,xs:12,md:1.5,children:e.jsx(n,{label:"Total Amount",fullWidth:!0,size:"small",type:"number",name:"totalAmount",value:i.totalAmount,onChange:A})}),e.jsx(r,{item:!0,xs:12,md:1.5,children:e.jsx(Ge,{control:e.jsx(Ye,{checked:i.laserCut,onChange:le,name:"laserCut"}),label:"Laser Cut"})}),i.laserCut?e.jsx(r,{item:!0,xs:12,md:4.5,children:e.jsxs(r,{container:!0,spacing:1,width:"Inherit",children:[e.jsx(r,{item:!0,xs:12,md:6,children:e.jsx(n,{label:"Laser Cut Rate",fullWidth:!0,size:"small",name:"laserCutRate",value:i.laserCutRate,onChange:A})}),e.jsx(r,{item:!0,xs:12,md:6,children:e.jsx(n,{label:"Pcs For LaserCut",fullWidth:!0,size:"small",name:"pcsForLaserCut",value:i.pcsForLaserCut,onChange:A})})]})}):null,e.jsx(r,{item:!0,xs:12,textAlign:"right",sx:{mt:2},children:e.jsx(K,{variant:"contained",size:"small",onClick:S,children:"Save"})})]})})]})]}),e.jsx(r,{item:!0,xs:12,md:12,children:e.jsx(ie,{sx:{height:1,width:"100%",marginTop:1,marginBottom:0}})}),e.jsxs(V,{variant:"outlined",children:[e.jsx(J,{className:"css-4rfrnx-MuiCardHeader-root",avatar:e.jsx(Fe,{}),title:"View Schiffli ",titleTypographyProps:{style:{color:"white"}}}),e.jsx(r,{container:!0,spacing:2,width:"Inherit",sx:{paddingY:2,paddingX:2},children:e.jsx(r,{sx:{marginTop:2},item:!0,xs:12,children:Q?e.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"},children:e.jsx("img",{src:We,alt:"Loading",style:{width:200,height:200}})}):e.jsx(Se,{iColumns:F,initialRows:C,setInitialData:s,deleteApi:"https://gecxc.com:4041/api/Schiffli/DeleteSchiffiById?schiffiId=",deleteBy:"schiffiliId",refetch:R,setAccordionExpanded:l,fileName:"Schffili List"})})})]})]})},wt=Tt,zt=({additionalProcessData:p,setAdditionalProcessData:t,refetchAdditionalProcessList:c,handleClickOpen:s})=>{const{user:i}=Ce(),[u,W]=o.useState([]),l=u.reduce((h,O)=>h+(O.quantity??0),0).toFixed(2);console.log("Quantity",l);const[f,Q]=o.useState({additionalProcessDetId:0,additionalProcessId:p.additionalProcessId||0,designId:p.designId||"",planningHeaderId:p.planningHeaderId||0,batchNo:p.batchNo||"",componentName:p.componentName||"",componentId:p.componentId||"",colorName:p.colorName||"",colorId:p.colorId||"",fabricName:p.fabricName||"",fabricId:p.fabricId||"",uomId:p.uomId||"",uom:p.uom||"",vendorId:"",pcsPerComponent:p.pcsPerComponent||"",remainingPcsPerComponent:p.pcsPerComponent-l||"",processTypeName:p.processTypeName||"",processTypeId:p.processTypeId||"",quantity:"",ratePerPcs:0,totalAmount:0,costPerComponent:"",createdOn:new Date().toISOString(),createdBy:i.empId,lastUpdatedOn:new Date().toISOString(),LastUpdatedBy:i.empId});o.useEffect(()=>{Q({...f,remainingPcsPerComponent:p.pcsPerComponent-l||""})},[u]);const{data:Y}=Pe(),{data:b,refetch:U}=rt(f.additionalProcessId,{skip:!f.additionalProcessId}),[q,M]=o.useState([]);o.useEffect(()=>{if(Y){const h=Y.result[0];M(h.vendorList)}},[Y]),o.useEffect(()=>{b&&W(b.result.map((h,O)=>({id:O,...h})))},[b,U]),console.log("initialRows",u);const H=h=>{const{name:O,value:k}=h.target;Q({...f,[O]:k})};o.useEffect(()=>{const h=()=>{const k=parseFloat(f.quantity)||0,R=parseFloat(f.ratePerPcs)||0;return(k*R).toFixed(2)};Q(k=>({...k,totalAmount:h()}));const O=()=>{const k=parseFloat(f.totalAmount)||0,R=parseFloat(f.poPcs)||0;return(k/R).toFixed(2)};Q(k=>({...k,costPerComponent:O()}))},[f.quantity,f.ratePerPcs,f.totalAmount]);const G=async()=>{console.log(f);try{const h=await se.post("https://gecxc.com:4041/api/AdditionalProcess/SaveAdditionalProcessDetails",f);console.log("Save response:",h.data),U(),Q(O=>({...O,vendorId:"",pcsPerComponent:p.pcsPerComponent||"",quantity:"",ratePerPcs:0,totalAmount:0,costPerComponent:"",createdOn:new Date().toISOString(),createdBy:i.empId,lastUpdatedOn:new Date().toISOString(),LastUpdatedBy:i.empId})),c(),setAccordionExpanded(!1)}catch(h){console.error("Error saving data:",h)}},B=[{field:"vendorName",headerName:"Vendor",flex:2},{field:"processType",headerName:"Process Type",flex:1},{field:"pcsPerComponent",headerName:" Pcs. Per Component",flex:1},{field:"quantity",headerName:"Quantitity",flex:1},{field:"ratePerPcs",headerName:"Rate Per Pcs.",flex:1},{field:"totalAmount",headerName:"Total Amount",flex:1}];return e.jsxs(be,{noValidate:!0,component:"form",sx:{display:"flex",flexDirection:"column",m:"auto",width:"Inherit"},children:[e.jsxs(r,{container:!0,spacing:2,width:"Inherit",sx:{paddingY:2,paddingX:2},children:[e.jsxs(r,{item:!0,xs:12,md:3,children:[e.jsx(n,{fullWidth:!0,label:"Select Collection",name:"collectionId",value:f.selectedCollectionId,onChange:H,size:"small",disabled:!0})," "]}),e.jsx(r,{item:!0,xs:12,md:3,children:e.jsx(n,{fullWidth:!0,label:"Select Design",name:"designId",value:f.designId,onChange:H,size:"small",disabled:!0})}),e.jsxs(r,{item:!0,xs:12,md:3,children:[e.jsx(n,{fullWidth:!0,label:"Batch No.",name:"batchNo",value:f.batchNo,onChange:H,size:"small",disabled:!0})," "]}),e.jsxs(r,{item:!0,xs:12,md:3,children:[e.jsx(n,{fullWidth:!0,label:"Components",name:"componentName",value:f.componentName,onChange:H,size:"small",disabled:!0})," "]}),e.jsx(r,{item:!0,xs:12,md:3,children:e.jsx(n,{fullWidth:!0,label:"Select Fabric",defaultValue:"",size:"small",name:"fabricName",value:f.fabricName,onChange:H,disabled:!0})}),e.jsx(r,{item:!0,xs:12,md:3,children:e.jsx(n,{fullWidth:!0,label:"Color",size:"small",name:"colorName",value:f.colorName,onChange:H,disabled:!0})}),e.jsx(r,{item:!0,xs:12,md:3,children:e.jsx(n,{fullWidth:!0,label:"Process Type",defaultValue:"",size:"small",name:"processTypeName",value:f.processTypeName,onChange:H,disabled:!0})}),e.jsx(r,{item:!0,xs:12,md:1.5,children:e.jsx(n,{label:"Pcs. Per Component",fullWidth:!0,size:"small",name:"pcsPerComponent",value:f.pcsPerComponent,onChange:H,disabled:!0})}),e.jsx(r,{item:!0,xs:12,md:1.5,children:e.jsx(n,{label:"Remaining Pcs. Per Component",fullWidth:!0,size:"small",name:"remainingPcsPerComponent",value:f.remainingPcsPerComponent,onChange:H,disabled:!0})})]}),e.jsx(ie,{color:"#921e22",sx:{height:2,width:"100%"}}),e.jsxs(r,{container:!0,spacing:2,width:"Inherit",sx:{paddingY:2,paddingX:2},children:[e.jsx(r,{item:!0,xs:12,md:3,children:e.jsx(n,{fullWidth:!0,select:!0,label:"Vendors",size:"small",name:"vendorId",value:f.vendorId,onChange:H,children:q.map(h=>e.jsx(N,{value:h.lookUpId,children:h.lookUpName},h.lookUpId))})}),e.jsx(r,{item:!0,xs:12,md:3,children:e.jsx(n,{label:"Quantity",fullWidth:!0,type:"number",size:"small",name:"quantity",value:f.quantity,onChange:H})}),e.jsx(r,{item:!0,xs:12,md:3,children:e.jsx(n,{label:"Rate Per Pcs",type:"number",fullWidth:!0,size:"small",name:"ratePerPcs",value:f.ratePerPcs,onChange:H})}),e.jsx(r,{item:!0,xs:12,md:3,children:e.jsx(n,{label:"Total Amount",fullWidth:!0,type:"number",size:"small",name:"totalAmount",value:f.totalAmount,onChange:H})}),e.jsx(r,{item:!0,xs:12,md:3,children:e.jsx(n,{label:"UOM",fullWidth:!0,size:"small",name:"uom",value:f.uom,onChange:H,disabled:!0})}),e.jsx(r,{item:!0,xs:12,textAlign:"right",sx:{mt:2},children:e.jsx(K,{variant:"contained",size:"small",onClick:G,children:"Save"})})]}),e.jsx(r,{container:!0,spacing:2,width:"Inherit",sx:{paddingY:2,paddingX:2},children:e.jsx(r,{sx:{marginTop:2},item:!0,xs:12,children:e.jsx(Se,{iColumns:B,initialRows:u,deleteApi:"https://gecxc.com:4041/api/AdditionalProcess/DeleteAdditionalProcessDetails?apdId=",deleteBy:"additionalProcessDetId",refetch:U,disableEdit:!0})})})]})},Ft=()=>{const{user:p}=Ce(),[t,c]=o.useState([]),[s,i]=o.useState({additionalProcessId:0,designId:"",planningHeaderId:0,batchNo:"",componentId:"",colorId:"",fabricId:"",uomId:"",baseColorName:"",poPcs:"",pcsPerComponent:"",processTypeId:"",createdOn:new Date().toISOString(),createdBy:p.empId,lastUpdatedOn:new Date().toISOString(),LastUpdatedBy:p.empId});console.log("initialData",t),o.useEffect(()=>{i({additionalProcessId:(t==null?void 0:t.additionalProcessId)||0,designId:(t==null?void 0:t.designId)||"",planningHeaderId:(t==null?void 0:t.planningHeaderId)||0,batchNo:(t==null?void 0:t.batchNo)||"",componentId:(t==null?void 0:t.componentId)||"",fabricId:(t==null?void 0:t.fabricId)||"",colorId:(t==null?void 0:t.colorId)||"",poPcs:(t==null?void 0:t.poPcs)||"",baseColorName:(t==null?void 0:t.baseColorName)||"",pcsPerComponent:(t==null?void 0:t.pcsPerComponent)||"",uomId:(t==null?void 0:t.uomId)||"",processTypeId:(t==null?void 0:t.processTypeId)||"",createdOn:(t==null?void 0:t.createdOn)||new Date().toISOString(),createdBy:(t==null?void 0:t.createdBy)||p.empId,lastUpdatedOn:new Date().toISOString(),LastUpdatedBy:p.empId})},[t]);const[u,W]=o.useState(!1),l=(a,m)=>{W(!u)},{data:f}=Ae(),[Q,Y]=o.useState(""),{data:b}=Pe(),{data:U,refetch:q}=ke(Q,{skip:!Q}),{data:M,refetch:H}=Re(s.designId,{skip:!s.designId}),{data:G}=Ee({batchNo:s.planningHeaderId,componentId:s.componentId},{skip:!s.planningHeaderId||!s.componentId}),{data:B}=qe({batchNo:s.planningHeaderId,componentId:s.componentId,fabricId:s.fabricId},{skip:!s.planningHeaderId||!s.componentId||!s.fabricId}),{data:Z,refetch:h}=ot(s.planningHeaderId,{skip:!s.planningHeaderId}),{data:O}=Me(s.planningHeaderId,{skip:!s.planningHeaderId});console.log("lookupData",b),console.log("collectionData",f),console.log("colorData",B);const[k,R]=o.useState([]),[v,E]=o.useState([]),[_,D]=o.useState([]),[ge,ce]=o.useState([]),[re,oe]=o.useState([]),[xe,ne]=o.useState([]),[Ie,ae]=o.useState([]),[ue,te]=o.useState([]),[ee,C]=o.useState([]),[T,me]=o.useState([]),[fe,he]=o.useState([]);console.log("batchData",M),o.useEffect(()=>{U&&R(U.result)},[U]),o.useEffect(()=>{M&&E(M.result)},[M]),o.useEffect(()=>{G&&D(G.result)},[G]),o.useEffect(()=>{B&&C(B.result)},[B]),o.useEffect(()=>{O&&he(O.result)},[O]),o.useEffect(()=>{if(b){const a=b.result[0];oe(a.uomList),ne(a.processList)}},[b]),o.useEffect(()=>{Z&&me(Z.result.map((a,m)=>({id:m,...a})))},[Z,h]),o.useEffect(()=>{if(b){const a=b.result[0];ce(a.vendorList),ae(a.operatingMachineList),te(a.workingHeadList)}},[b]),console.log("initialRows",T);const le=(f==null?void 0:f.result)||[],A=a=>{const{name:m,value:g}=a.target;if(m==="collectionId")le.find(y=>y.collectionId===parseInt(g)),Y(g),i({...s,collectionId:g});else if(m==="designId"){const y=k.find(L=>L.designId===parseInt(g));i({...s,designId:g,baseColorId:y?y.colorId:"",baseColorName:y?y.colorName:""})}else if(m==="batchNo"){const y=v.find(L=>L.batchNo===g);i({...s,batchNo:g,planningHeaderId:y?y.planningHeaderId:"",poPcs:y?y.poPcs:""}),W(!0)}else i({...s,[m]:g})};console.log("colors",ee);const I=async()=>{console.log("formData",s);try{const a=await se.post("https://gecxc.com:4041/api/AdditionalProcess/SaveAdditionalProcess",s);console.log("Save response:",a.data),i(m=>({additionalProcessId:0,designId:m.designId,planningHeaderId:m.planningHeaderId,batchNo:m.batchNo,baseColorName:m.baseColorName,poPcs:m.poPcs,componentId:"",colorId:"",fabricId:"",uomId:"",pcsPerComponent:"",processTypeId:"",createdOn:new Date().toISOString(),createdBy:p.empId,lastUpdatedOn:new Date().toISOString(),LastUpdatedBy:p.empId})),h()}catch(a){console.error("Error saving data:",a)}};console.log("formData",s),o.forwardRef(function(m,g){return e.jsx(nt,{direction:"up",ref:g,...m})});const[x,S]=o.useState({}),[w,F]=o.useState(!1),$=a=>{S(a),F(!0)},d=()=>{F(!1),S({}),h()},j=[{field:"designNo",headerName:"Design"},{field:"batchNo",headerName:"Batch"},{field:"componentName",headerName:"Component"},{field:"fabricName",headerName:"Fabric"},{field:"colorName",headerName:"Color"},{field:"processTypeName",headerName:"Process Type"},{field:"pcsPerComponent",headerName:"Pcs Per Component"},{field:"assignedQty",headerName:"Assigned Quantity"},{field:"AddVendor",headerName:"Add Vendor",renderCell:a=>e.jsx("div",{style:{display:"flex",justifyContent:"space-around"},children:e.jsx(ye,{color:"primary",onClick:()=>$(a.row),children:e.jsx(ft,{})})})}];return e.jsxs(e.Fragment,{children:[e.jsxs(V,{variant:"outlined",children:[e.jsx(J,{className:"css-4rfrnx-MuiCardHeader-root",avatar:e.jsx(Le,{src:Ve,sx:{background:"transparent"}}),title:"Additional Process ",titleTypographyProps:{style:{color:"white"}}}),e.jsxs(r,{container:!0,spacing:2,width:"Inherit",sx:{paddingY:2,paddingX:2},children:[e.jsxs(r,{item:!0,xs:12,md:3,children:[e.jsx(n,{fullWidth:!0,select:!0,label:"Select Collection",name:"collectionId",value:Q,onChange:A,size:"small",children:le.map(a=>e.jsx(N,{value:a.collectionId,children:a.collectionName},a.collectionId))})," "]}),e.jsx(r,{item:!0,xs:12,md:3,children:e.jsx(n,{fullWidth:!0,select:!0,label:"Select Design",name:"designId",value:s.designId,onChange:A,size:"small",children:k.map(a=>e.jsx(N,{value:a.designId,children:a.designNo},a.designId))})}),e.jsxs(r,{item:!0,xs:12,md:3,children:[e.jsx(n,{fullWidth:!0,select:!0,label:"Batch No.",name:"batchNo",value:s.batchNo,onChange:A,size:"small",children:v.map(a=>e.jsx(N,{value:a.batchNo,children:a.batchNo},a.batchNo))})," "]}),e.jsxs(r,{item:!0,xs:12,md:3,children:[e.jsx(n,{fullWidth:!0,select:!0,label:"Components",name:"componentId",value:s.componentId,onChange:A,size:"small",children:fe.map(a=>e.jsx(N,{value:a.componentId,children:a.componentName},a.componentId))})," "]}),e.jsx(r,{item:!0,xs:12,md:3,children:e.jsx(n,{label:"Base Color",fullWidth:!0,size:"small",name:"baseColorName",value:s.baseColorName,onChange:A,disabled:!0})})]})]}),e.jsx(ie,{color:"#cc8587",sx:{height:1,width:"100%",mt:2}}),e.jsxs(V,{variant:"outlined",children:[e.jsx(J,{className:"css-4rfrnx-MuiCardHeader-root",avatar:e.jsx(Oe,{}),title:"Add Additional Process ",titleTypographyProps:{style:{color:"white"}},action:e.jsx(ye,{onClick:l,sx:{mt:"-18px"},children:e.jsx(pe,{style:{color:"white"}})}),sx:{display:"flex",alignItems:"center",justifyContent:"space-between"}})," ",e.jsxs(Te,{expanded:u,onChange:l,sx:{},children:[e.jsx(we,{expandIcon:e.jsx(pe,{}),"aria-controls":"panel1-content",id:"panel1-header",sx:{display:"none"}}),e.jsx(ze,{children:e.jsxs(r,{container:!0,spacing:2,width:"Inherit",sx:{paddingY:2,paddingX:2},children:[e.jsx(r,{item:!0,xs:12,md:3,children:e.jsx(n,{fullWidth:!0,select:!0,label:"Select Fabric",defaultValue:"",size:"small",name:"fabricId",value:s.fabricId,onChange:A,children:_.map(a=>e.jsx(N,{value:a.fabricId,children:a.fabric},a.fabricId))})}),e.jsx(r,{item:!0,xs:12,md:3,children:e.jsx(n,{fullWidth:!0,select:!0,label:"Color",size:"small",name:"colorId",value:s.colorId,onChange:A,children:ee.map(a=>e.jsx(N,{value:a.colorId,children:a.color},a.colorId))})}),e.jsx(r,{item:!0,xs:12,md:1.5,children:e.jsx(n,{label:"Po Pcs",fullWidth:!0,size:"small",name:"poPcs",value:s.poPcs,onChange:A,disabled:!0})}),e.jsx(r,{item:!0,xs:12,md:1.5,children:e.jsx(n,{label:"Pcs. Per Component",fullWidth:!0,size:"small",name:"pcsPerComponent",value:s.pcsPerComponent,onChange:A})}),e.jsx(r,{item:!0,xs:12,md:3,children:e.jsx(n,{fullWidth:!0,select:!0,label:"UOM",type:"number",defaultValue:140,size:"small",name:"uomId",value:s.uomId,onChange:A,children:re.map(a=>e.jsx(N,{value:a.lookUpId,children:a.lookUpName},a.lookUpId))})}),e.jsx(r,{item:!0,xs:12,md:3,children:e.jsx(n,{fullWidth:!0,select:!0,label:"Process Type",size:"small",name:"processTypeId",value:s.processTypeId,onChange:A,children:xe.map(a=>e.jsx(N,{value:a.lookUpId,children:a.lookUpName},a.lookUpId))})}),e.jsx(r,{item:!0,xs:12,textAlign:"right",sx:{mt:2},children:e.jsx(K,{variant:"contained",size:"small",onClick:I,children:"Save"})})]})})]})]}),e.jsx(ie,{color:"#cc8587",sx:{height:1,width:"100%",mt:2}}),e.jsxs(V,{variant:"outlined",children:[e.jsx(J,{className:"css-4rfrnx-MuiCardHeader-root",avatar:e.jsx(Fe,{}),title:"View Additional Process ",titleTypographyProps:{style:{color:"white"}}}),e.jsx(r,{container:!0,spacing:2,width:"Inherit",sx:{paddingY:2,paddingX:2},children:e.jsxs(r,{sx:{marginTop:2},item:!0,xs:12,children:[e.jsx(Se,{iColumns:j,initialRows:T,setInitialData:c,deleteApi:"https://gecxc.com:4041/api/AdditionalProcess/DeleteAdditionalProcess?adId=",deleteBy:"additionalProcessId",refetch:h,setAccordionExpanded:W,fileName:"AdditionalProcess"}),e.jsxs(ut,{open:w,onClose:d,fullWidth:!0,maxWidth:"lg",children:[e.jsxs(mt,{sx:{backgroundColor:"#A11F23",color:"#ffffff",display:"flex",justifyContent:"space-between",alignItems:"center",paddingX:"24px",paddingY:"4px"},children:[e.jsx(ve,{variant:"h4",component:"div",color:"#ffffff",gutterBottom:!0,fontSize:20,fontWeight:2,fontStyle:"normal",children:"Assign Vendors "}),e.jsx(ye,{onClick:d,sx:{color:"#ffffff"},children:e.jsx(xt,{})})]}),e.jsxs(ht,{children:[e.jsx(pt,{id:"alert-dialog-slide-description"}),e.jsx(zt,{additionalProcessData:x,setAdditionalProcessData:S,refetchAdditionalProcessList:h,handleClickOpen:$})]})]})]})})]})]})},Ut=Ft;function Ht({}){const{data:p}=Pe(),[t,c]=o.useState([]),[s,i]=o.useState([]),[u,W]=o.useState([]),[l,f]=o.useState([]),[Q,Y]=o.useState([]);Ce(),o.useEffect(()=>{p&&(W(p.result[0].vendorList),i(p.result[0].serviceList),c(p.result[0].serviceTypeList),Y(p.result[0].uomList))},[p]);const[b,U]=o.useState({additionalServiceId:0,collectionId:"",serviceTypeId:"",serviceListId:"",vendorId:"",poPcs:"",qty:"",uomId:"string",rate:"",totalAmount:"",costperPiece:"",uom:"",createdBy:0,createdOn:new Date().toISOString()}),q=async h=>{const{name:O,value:k}=h.target;if(console.log(`Updating ${O} to ${k}`),U({...b,[O]:k}),O==="collectionId"){const R=l.find(v=>v.collectionId===k);R&&U(v=>({...v,poPcs:R.poPcs}))}};o.useEffect(()=>{const h=()=>{const k=parseFloat(b.qty)||0,R=parseFloat(b.rate)||0;return(k*R).toFixed(2)};U(k=>({...k,totalAmount:h()}));const O=()=>{const k=parseFloat(b.poPcs)||0,R=parseFloat(b.totalAmount)||0;return(k/R).toFixed(2)};U(k=>({...k,costperPiece:O()}))},[b.qty,b.rate,b.totalAmount,b.costperPiece]);const M=async()=>{try{const h=await se.post("https://gecxc.com:4041/api/AdditionalServices/SaveAdditionalServices",b);console.log("Form data saved:",h.data),U({additionalServiceId:0,collectionId:"",serviceTypeId:"",serviceListId:"",vendorId:"",poPcs:"",qty:"",uomId:"string",rate:"",totalAmount:"",costperPiece:""}),onSaveSuccess&&onSaveSuccess()}catch(h){console.error("Error saving data:",h)}};o.useEffect(()=>{(async()=>{try{const O=await se.get("https://gecxc.com:4041/api/CollectionRegistration/GetCollectionList?appId=1");console.log("GetCollectionFromPlanningHeader",O),f(O.data.result)}catch(O){console.error("Error fetching design options:",O)}})()},[]);const[H,G]=o.useState([]),B=o.useCallback(async()=>{try{const h=await se.get(`https://gecxc.com:4041/api/AdditionalServices/GetAdditionalServicesListByCollectionId?collectionId=${b.collectionId}`);Array.isArray(h.data.result)?G(h.data.result.map((O,k)=>({id:k,...O}))):(console.error("API returned unexpected data format:",h.data.result),G([]))}catch(h){console.error("Error fetching data:",h),G([])}},[b.collectionId]);o.useEffect(()=>{B()},[B]);const Z=[{field:"collectionName",headerName:"Collection Name",flex:1},{field:"serviceType",headerName:"Service Type",flex:1},{field:"serviceListName",headerName:"Service List Name",flex:1},{field:"vendor",headerName:"Vendor",flex:1},{field:"poPcs",headerName:"PO Pieces"},{field:"qty",headerName:"Quantity"},{field:"uom",headerName:"UOM"},{field:"rate",headerName:"Rate"},{field:"totalAmount",headerName:"Total Amount"},{field:"costperPiece",headerName:"Cost per Piece"}];return e.jsxs(e.Fragment,{children:[e.jsxs(V,{variant:"outlined",children:[e.jsx(J,{className:"css-4rfrnx-MuiCardHeader-root",title:"Additional Services",titleTypographyProps:{style:{color:"white"}}}),e.jsxs(r,{container:!0,spacing:2,width:"Inherit",sx:{paddingY:2,paddingX:2},children:[e.jsx(r,{item:!0,xs:12,md:4,children:e.jsx(n,{fullWidth:!0,select:!0,label:"Select Collection",name:"collectionId",value:b.collectionId,onChange:q,size:"small",children:l.length>0?l.map(h=>e.jsx(N,{id:"collectionId",value:h.collectionId,children:h.collectionName},h.collectionId)):e.jsx(N,{disabled:!0,children:"No Collections Available"})})}),e.jsx(r,{item:!0,md:4,width:"inherit",paddingX:1,children:e.jsx(n,{id:"outlined-select-option",select:!0,label:"Service Type",name:"serviceTypeId",value:b.serviceTypeId,onChange:q,variant:"outlined",size:"small",fullWidth:!0,children:t.map(h=>e.jsx(N,{value:h.lookUpId,children:h.lookUpName},h.lookUpId))})}),e.jsx(r,{item:!0,md:4,width:"inherit",paddingX:1,children:e.jsx(n,{id:"outlined-select-option",select:!0,label:"Service List Id",name:"serviceListId",value:b.serviceListId,onChange:q,variant:"outlined",size:"small",fullWidth:!0,children:s.map(h=>e.jsx(N,{value:h.lookUpId,children:h.lookUpName},h.lookUpId))})}),e.jsx(r,{item:!0,xs:12,md:4,children:e.jsx(n,{fullWidth:!0,select:!0,label:"Vendor Name",size:"small",name:"vendorId",value:b.vendorId,onChange:q,children:u.map(h=>e.jsx(N,{value:h.lookUpId,children:h.lookUpName},h.lookUpId))})}),e.jsx(r,{item:!0,md:2,width:"inherit",paddingX:1,children:e.jsx(n,{id:"outlined-required",label:"PO PC's",name:"poPcs",value:b.poPcs,onChange:q,type:"number",size:"small",fullWidth:!0,disabled:!0})}),e.jsx(r,{item:!0,md:2,width:"inherit",paddingX:1,children:e.jsx(n,{id:"outlined-required",label:"Qty",name:"qty",value:b.qty,onChange:q,type:"number",size:"small",required:!0,fullWidth:!0})}),e.jsx(r,{item:!0,md:2,width:"inherit",paddingX:1,children:e.jsx(n,{fullWidth:!0,select:!0,label:"UOM",defaultValue:"",size:"small",name:"uomId",value:b.uomId,onChange:q,children:Q.map(h=>e.jsx(N,{value:h.lookUpId,children:h.lookUpName},h.lookUpId))})}),e.jsx(r,{item:!0,md:2,width:"inherit",paddingX:1,children:e.jsx(n,{id:"outlined-required",label:"Rate",name:"rate",value:b.rate,onChange:q,type:"number",size:"small",fullWidth:!0,required:!0})}),e.jsx(r,{item:!0,md:2,width:"inherit",paddingX:1,children:e.jsx(n,{id:"outlined-required",label:"Total Amount",name:"totalAmount",value:b.totalAmount,onChange:q,type:"number",size:"small",fullWidth:!0,required:!0})}),e.jsx(r,{item:!0,md:2,width:"inherit",paddingX:1,children:e.jsx(n,{id:"outlined-required",label:"Cost per Piece",name:"costperPiece",value:b.costperPiece,onChange:q,type:"number",size:"small",required:!0,fullWidth:!0})}),e.jsx(r,{item:!0,md:12,width:"inherit",paddingX:1,textAlign:"right",children:e.jsx(K,{variant:"contained",color:"primary",size:"small",onClick:M,children:"Save"})})]})]}),e.jsx(ie,{color:"#cc8587",sx:{height:1,width:"100%",mt:2}}),e.jsxs(V,{variant:"outlined",children:[e.jsx(J,{className:"css-4rfrnx-MuiCardHeader-root",title:"View Additional Services",titleTypographyProps:{style:{color:"white"}}}),e.jsx(Se,{iColumns:Z,initialRows:H})]})]})}const Ue=["Pre Planning","Fabrication","Dyeing/Printing  ","Embroidery ","Schiffli","Additional Process","Additional Services"];function Jt(){const[p,t]=o.useState(0),[c,s]=o.useState(new Set),[i,u]=o.useState(null),[W,l]=o.useState([]),{enqueueSnackbar:f}=Ne(),Q=v=>{u(v.currentTarget)},Y=()=>{u(null)},b=!!i,U=b?"simple-popover":void 0,q=v=>v===1,M=v=>c.has(v),H=()=>{let v=c;M(p)&&(v=new Set(v.values()),v.delete(p)),t(E=>E+1),s(v)},G=()=>{t(v=>v-1)},B=()=>{if(!q(p))throw new Error("You can't skip a step that isn't optional.");t(v=>v+1),s(v=>{const E=new Set(v.values());return E.add(p),E})},Z=()=>{t(0)},[h,O]=o.useState({lookUpId:"",lookUpName:"",lookUpDomain:"",lookUpCategory:"",enabled:"",createdOn:new Date().toISOString()}),k=async()=>{if(!h.lookUpDomain||!h.lookUpName){f("Please fill in all required fields.",{variant:"error",autoHideDuration:5e3});return}try{const v=await se.get(`https://gecxc.com:4041/api/Common/SaveLookUp?lookupDomain=${h.lookUpDomain}&LookUpName=${h.lookUpName}&appId=1`);return console.log("Form data saved:",v.data),f("Lookup saved successfully!",{variant:"success",autoHideDuration:5e3}),O({lookUpId:"",lookUpName:"",lookUpDomain:"",lookUpCategory:"",enabled:"",createdOn:new Date().toISOString()}),v.data}catch(v){throw console.error("Error saving data:",v),f("Error saving data. Please try again.",{variant:"error",autoHideDuration:5e3}),v}},R=v=>{O({...h,[v.target.name]:v.target.value})};return o.useEffect(()=>{(async()=>{try{const E=await se.get("https://gecxc.com:4041/api/Common/GetLookUpDomains?appId=1");console.log("LookupData",E),l(E.data.result)}catch(E){console.error("Error fetching design options:",E)}})()},[]),e.jsxs(be,{sx:{width:"100%"},children:[e.jsxs(r,{container:!0,spacing:1,width:"Inherit",children:[e.jsx(r,{item:!0,sm:6,children:e.jsx(ve,{variant:"h2",gutterBottom:!0,children:"Planning Process"})}),e.jsxs(r,{item:!0,sm:6,textAlign:"right",children:[e.jsx(K,{"aria-describedby":U,variant:"outlined",size:"small",onClick:Q,children:"+Lookup"}),e.jsx(gt,{id:"mouse-over-popover",open:b,anchorEl:i,onClose:Y,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"right"},sx:{".MuiPopover-paper":{width:"300px",padding:"16px"}},children:e.jsxs(r,{container:!0,spacing:3,width:"Inherit",children:[e.jsx(r,{item:!0,sm:12,children:e.jsx(n,{fullWidth:!0,id:"outlined-select-currency",select:!0,label:"Select Lookup",size:"small",value:h.lookUpDomain,name:"lookUpDomain",onChange:R,children:W.map(v=>e.jsx(N,{value:v.lookUpDomain,children:v.lookUpDomain},v.lookUpDomain))})}),e.jsx(r,{item:!0,sm:12,children:e.jsx(n,{fullWidth:!0,label:"Add Lookup Description",value:h.lookUpName,onChange:R,name:"lookUpName",size:"small"})}),e.jsx(r,{item:!0,sm:3,textAlign:"right",children:e.jsx(K,{variant:"contained",size:"small",onClick:k,children:"Save"})})]})})]})]}),e.jsx(lt,{activeStep:p,children:Ue.map((v,E)=>{const _={},D={};return q(E)&&(D.optional=e.jsx(ve,{variant:"caption",children:"Optional"})),M(E)&&(_.completed=!1),e.jsx(dt,{..._,children:e.jsxs(it,{...D,onClick:()=>t(E),style:{cursor:"pointer"},children:[" ",v]})},v)})}),e.jsxs(be,{sx:{display:"flex",flexDirection:"row",pt:2},children:[e.jsx(K,{color:"inherit",disabled:p===0,onClick:G,sx:{mr:1},children:"Back"}),e.jsx(be,{sx:{flex:"1 1 auto"}}),q(p)&&e.jsx(K,{color:"inherit",onClick:B,sx:{mr:1},children:"Skip"}),e.jsx(K,{onClick:H,children:p===Ue.length-1?"Finish":"Next"})]}),p===Ue.length?e.jsxs(o.Fragment,{children:[e.jsx(ve,{sx:{mt:2,mb:1},children:"All steps completed - you're finished"}),e.jsxs(be,{sx:{display:"flex",flexDirection:"row",pt:2},children:[e.jsx(be,{sx:{flex:"1 1 auto"}}),e.jsx(K,{onClick:Z,children:"Reset"})]})]}):e.jsxs(o.Fragment,{children:[p===0&&e.jsx(Nt,{}),p===1&&e.jsx(ct,{}),p===2&&e.jsx(Ot,{}),p===3&&e.jsx(St,{}),p===4&&e.jsx(wt,{}),p===5&&e.jsx(Ut,{}),p===6&&e.jsx(Ht,{}),e.jsxs(be,{sx:{display:"flex",flexDirection:"row",pt:2},children:[e.jsx(K,{color:"inherit",disabled:p===0,onClick:G,sx:{mr:1},children:"Back"}),e.jsx(be,{sx:{flex:"1 1 auto"}}),q(p)&&e.jsx(K,{color:"inherit",onClick:B,sx:{mr:1},children:"Skip"}),e.jsx(K,{onClick:H,children:p===Ue.length-1?"Finish":"Next"})]})]})]})}export{Jt as default};
