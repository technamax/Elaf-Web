import{r,j as t,B as g,G as m,D as f}from"./index-B8I23nKO.js";import{a as h}from"./axios-oDLF1z78.js";import{T as p,B as x}from"./TextField-DNyM24lV.js";import{M as b}from"./Skeleton-CmigZuP3.js";import{D}from"./DataGrid-BMk-oh2X.js";import{G as y}from"./GridToolbar-DvQrqf2q.js";function j(n){const s=[{value:"yes",label:"Yes"},{value:"no",label:"No"}],[a,d]=r.useState({roleName:"",description:"",enabled:"",createdBy:0,createdOn:new Date().toISOString()}),l=async e=>{const{name:o,value:i}=e.target;d({...a,[o]:i})},u=async()=>{console.log(a);try{const e=await h.post("https://gecxc.com:4041/api/Role/SaveRole",a);console.log("Form data saved:",e.data),d({roleName:"",description:"",enabled:""}),n&&n()}catch(e){console.error("Error saving data:",e)}};return t.jsx("div",{children:t.jsx(g,{m:3,pt:4,component:"form",sx:{"& .MuiTextField-root":{m:1,width:"inherit"}},noValidate:!0,autoComplete:"off",children:t.jsxs(m,{container:!0,children:[t.jsx(m,{item:!0,md:4,width:"inherit",paddingX:1,children:t.jsx(p,{id:"outlined-required",label:"Role Name",name:"roleName",size:"small",value:a.roleName,onChange:l,required:!0})}),t.jsx(m,{item:!0,md:4,width:"inherit",paddingX:1,children:t.jsx(p,{id:"outlined-required",label:"Description",name:"description",size:"small",value:a.description,onChange:l,required:!0})}),t.jsx(m,{item:!0,md:4,width:"inherit",paddingX:1,children:t.jsx(p,{id:"outlined-select-option",select:!0,label:"Enabled",defaultValue:"yes",helperText:"Please select an option",variant:"outlined",size:"small",name:"enabled",value:a.enabled,onChange:l,fullWidth:!0,children:s.map(e=>t.jsx(b,{value:e.value,children:e.label},e.value))})}),t.jsx(m,{item:!0,md:12,width:"inherit",paddingX:1,textAlign:"right",children:t.jsx(x,{variant:"contained",color:"primary",size:"small",onClick:u,children:"Save"})})]})})})}function v(){const[n,s]=r.useState([]),a=r.useCallback(async()=>{try{const o=(await h.get("https://gecxc.com:4041/api/Role/GetRoleById?id=1")).data.result.map((i,c)=>({id:c,...i}));s(o)}catch(e){console.error("Error fetching data:",e)}},[]);r.useEffect(()=>{a()},[a]);const d=r.useCallback(async()=>{try{console.log("Fetching data...");const e=await h.get("https://gecxc.com:4041/api/Role/GetRoleList?appId=1");console.log("Data fetched:",e.data);const o=e.data.result.map((i,c)=>({id:c,...i}));console.log("Data with ID:",o),s(o)}catch(e){console.error("Error fetching data:",e)}},[]);r.useEffect(()=>{d()},[d]);const l=r.useCallback(async()=>{try{console.log("Fetching data...");const e=await h.get("https://gecxc.com:4041/api/Role/DeleteRoleById?id=1");console.log("Data fetched:",e.data);const o=e.data.result.map((i,c)=>({id:c,...i}));console.log("Data with ID:",o),s(o)}catch(e){console.error("Error fetching data:",e)}},[]);r.useEffect(()=>{l()},[l]);const u=[{field:"roleName",headerName:"Role Name",width:150},{field:"description",headerName:"Description",width:300},{field:"enabled",headerName:"Enabled",minWidth:120},{field:"createdBy",headerName:"Created By",minWidth:120},{field:"createdOn",headerName:"Created On",minWidth:120}];return t.jsx("div",{style:{height:"auto",width:"100%"},children:t.jsx(D,{rows:n,columns:u,autoHeight:!0,initialState:{pagination:{paginationModel:{page:0,pageSize:10}}},pageSizeOptions:[10,15],localeText:{toolbarDensity:"Size",toolbarDensityLabel:"Size",toolbarDensityCompact:"Small",toolbarDensityStandard:"Medium",toolbarDensityComfortable:"Large"},components:{Toolbar:y}})})}function I(n){return t.jsxs(t.Fragment,{children:[t.jsx(j,{}),t.jsx(f,{}),t.jsx(v,{fetchData:n})]})}export{I as default};
