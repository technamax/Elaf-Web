import{j as e,_ as ot,r as st,i as nt,u as Me,b as Pe,a5 as rt,B as ye,G as a,D as de,S as Je,c as Oe,a6 as lt,T as Ce,a7 as Ne,a8 as Ae,a9 as ze,aa as We,ab as He,ac as it,ad as Re,C as ce,d as ue,ae as we,af as dt,ag as ct,ah as ut,ai as pt,aj as mt,ak as ht,al as gt,am as bt}from"./index-k7Zcd9Uw.js";import{r as o}from"./vendor-BXCbSo2_.js";import{B as le,a as pe,I as Se}from"./axios-DSrb7pJd.js";import{d as Ze,c as Fe,A as De,e as Ke,f as $e,S as It,a as xt,b as ft,F as yt}from"./Fabrication-CjfrMter.js";import{R as ke,d as Le,D as Qe,a as Ue,b as qe,c as Ee}from"./ReuseableDataGrid-DSUdjVuF.js";import{d as Ge}from"./Close-Djd2Dj1a.js";import{d as Ye}from"./PersonAddAlt1Outlined-3eSlZb65.js";import{T as l,P as Ct}from"./TextField-Cij1Mdki.js";import{M as L}from"./Skeleton-C0Lbh933.js";import{A as Te,F as _e,C as et}from"./ExcelExport-D_urxBQJ.js";import"./dayjs.min-DO4_1a-m.js";let Ve=!1;const Pt=o.forwardRef(function(D,q){return Ve||(console.warn(["MUI: The Autocomplete component was moved from the lab to the core.","","You should use `import { Autocomplete } from '@mui/material'`","or `import Autocomplete from '@mui/material/Autocomplete'`"].join(`
`)),Ve=!0),e.jsx(Te,ot({ref:q},D))});var Xe={},vt=nt;Object.defineProperty(Xe,"__esModule",{value:!0});var tt=Xe.default=void 0,jt=vt(st()),Mt=e;tt=Xe.default=(0,jt.default)((0,Mt.jsx)("path",{d:"M21 10h-3L2 3v7l9 2-9 2v7l8-3.5V21c0 1.1.9 2 2 2h9c1.1 0 2-.9 2-2v-9c0-1.1-.9-2-2-2m0 11h-9v-9h9zm-4.5-1L13 16h2v-3h3v3h2z"}),"SendAndArchive");const kt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAACXBIWXMAAAsTAAALEwEAmpwYAAACk0lEQVR4nO2WzU4UQRSFe14CgoiMKPIqolEiIQq+gEFgFPHnFVyILI3GnQIbxxhG3IkaYxT8iUZFoxuDbokoIaNE/czNnE6KSjdT07Yb40kqqa6qW+dW3XNvdRT9R4MAHgD3640Dh/MkHQTOqMWIv9PGydOBUeCsWoz4O208PwdcxCz1xoGBKG8Abc5JPwBrataP0fY3iLcCk8C6SF4DV4HzatZf1Ny6vrfkRd4PrABV4BywE9huKpc2rA0ARaATGAe+yebgn5IfB34BD0XQCzwlHU+AA1r7CPgJlLKS94n8GtAM3CIcFaAJKGuPviwxX9XJjfxlCtGMyJLwQrbzwNeGNEFNRFVdZdrJb2ttAbizyU10SBNXQslbgR8SnMXcxagEOGyxdmxs3ZDmxjybHmWKZUdriAOnZWhqf+ZtVgyw3+HZPAZ2qX8yxIGbwCudxsdwgH3JszERtqtOVEIc+ARMKbc3xNy79r1a+xHodsYtDec8W6sl01YxQxxYVfzdWM4krDPiGEveXMHLjhMqUGshDlQTHLDNCg06MJvgwJcQB96lhMBSrddZ1y0nloDdXkbc9WwPKQSLIQ7M6rGxGuBjKMB+JEGE24A3tnfUgIo7E+p+1jTsUn8wxIEWFaJxKdrFmBwrJRSiEc2d8mz2AxPas6WuAwbgkspncZNaPyexWbuXsuaGbuQ7cDEKBbVHZEVParMeliRUPLW7eK4XcUF7NQU7YAD26NrKciLtJtJObuTXtce+KAuAI9pgXq9aj0SVhgXFvEN9y4Cjmci9kvtZmpjQw9KuOhH/kvUr1bq0xmK+bLZRHqB2nZd1Gyinp5yfUuu/1ZyRX7CfmlzIXUgLx6SH93o3ltUv6z8hf+LoX8ZvSFCuNiG5hzcAAAAASUVORK5CYII=",St=({initialFormData:i,setAdditionalProcessData:D,refetchDyeingPrintingData:q,handleClickOpen:u})=>{const{user:t}=Me(),[f,r]=o.useState([]),c=f.reduce((B,h)=>B+(h.assignedQty??0),0).toFixed(2);console.log("Quantity",c);const[n,x]=o.useState({dpIdDet:0,dpId:i.dpId||0,designId:i.designId||"",batchNo:i.batchNo||"",planningHeaderId:i.planningHeaderId||0,fabricId:i.fabricId||"",colorId:i.colorId||"",colorName:i.colorName||"",vendorId:"",processType:i.processType||"",availableQty:i.availableQty||"",remainingQty:i.availableQty-c||"",shrinkage:"",wastage:"",uomId:i.uomId||"",uom:i.uom||"",poPcs:i.poPcs||"",assignedQty:"",rate:"",unitRatePerPo:0,totalExcGst:0,gst:"",TotalIncludingGst:"",createdOn:new Date().toISOString(),createdBy:t.empId,lastUpdatedOn:new Date().toISOString(),LastUpdatedBy:t.empId});o.useEffect(()=>{x({...n,remainingQty:i.availableQty-c||""})},[f]);const{data:H}=Pe(),{data:d,refetch:Q}=rt(n.dpId,{skip:!n.dpId}),[v,E]=o.useState([]);o.useEffect(()=>{if(H){const B=H.result[0];E(B.vendorList)}},[H]),o.useEffect(()=>{d&&r(d.result.map((B,h)=>({id:h,...B})))},[d,Q]),console.log("initialRows",f);const N=B=>{const{name:h,value:I}=B.target;x({...n,[h]:I})};o.useEffect(()=>{const B=()=>{const ee=parseFloat(n.availableQty)||0,re=parseFloat(n.shrinkage)||0,he=parseFloat(n.wastage)||0;return(ee*(100-(re+he))/100).toFixed(2)},h=()=>{const ee=parseFloat(n.assignedQty)||0,re=parseFloat(n.rate)||0;return(ee*re).toFixed(2)},I=(ee,re)=>(ee*(1+re/100)).toFixed(2),k=B(),w=h(),y=parseFloat(n.gst)||0,j=I(w,y),Y=parseFloat(n.poPcs)||0,ae=Y?j/Y:0;x(ee=>({...ee,outputQty:k,totalExcGst:w,TotalIncludingGst:j,unitRatePerPo:ae.toFixed(2)}))},[n.availableQty,n.shrinkage,n.wastage,n.rate,n.gst,n.poPcs,n.unitRatePerPo]),console.log("formData",n);const A=async()=>{console.log(n);try{const B=await pe.post("https://gecxc.com:4041/api/DyeingPrinting/SaveDyeingPrintingDetails",n);console.log("Save response:",B.data),x(h=>({...h,dpIdDet:0,vendorId:"",availableQty:i.availableQty||"",shrinkage:"",wastage:"",assignedQty:"",rate:"",unitRatePerPo:0,totalExcGst:0,gst:"",TotalIncludingGst:"",createdOn:new Date().toISOString(),createdBy:t.empId,lastUpdatedOn:new Date().toISOString(),LastUpdatedBy:t.empId})),Q(),q()}catch(B){console.error("Error saving data:",B)}},_=[{field:"vendorName",headerName:"Vendor",flex:2},{field:"assignedQty",headerName:"Assigned Quantity",flex:1},{field:"rate",headerName:"Rate",flex:1},{field:"totalExcGst",headerName:"Total Excl Gst.",flex:1},{field:"gst",headerName:"Gst.",flex:1},{field:"totalIncludingGst",headerName:"TotalIncludingGst",flex:1},{field:"unitRatePerPo",headerName:"unitRatePerPo.",flex:1}];return e.jsxs(ye,{noValidate:!0,component:"form",sx:{display:"flex",flexDirection:"column",m:"auto",width:"Inherit"},children:[e.jsxs(a,{container:!0,spacing:1,width:"Inherit",sx:{paddingY:2,paddingX:2},children:[e.jsxs(a,{item:!0,xs:12,md:3,children:[e.jsx(l,{fullWidth:!0,label:"Fabric",name:"fabricName",value:n.fabricName,onChange:N,size:"small",disabled:!0})," "]}),e.jsx(a,{item:!0,xs:12,md:3,children:e.jsx(l,{fullWidth:!0,label:"Process Type",name:"processType",value:n.processType,onChange:N,size:"small",disabled:!0})}),e.jsxs(a,{item:!0,xs:12,md:3,children:[e.jsx(l,{fullWidth:!0,label:"Color",name:"colorName",value:n.colorName,onChange:N,size:"small",disabled:!0})," "]}),e.jsxs(a,{item:!0,xs:12,md:3,children:[e.jsx(l,{fullWidth:!0,label:"UOM",name:"uom",value:n.uom,onChange:N,size:"small",disabled:!0})," "]}),e.jsx(a,{item:!0,xs:12,md:3,children:e.jsx(l,{fullWidth:!0,label:"PO Pcs",size:"small",name:"poPcs",value:n.poPcs,onChange:N,disabled:!0})}),e.jsx(a,{item:!0,xs:12,md:1.5,children:e.jsx(l,{label:"Total AvailableQty",fullWidth:!0,size:"small",name:"availableQty",value:n.availableQty,onChange:N,disabled:!0})}),e.jsx(a,{item:!0,xs:12,md:1.5,children:e.jsx(l,{label:"Remaining Qty",fullWidth:!0,size:"small",name:"remainingQty",value:n.remainingQty,onChange:N,disabled:!0})})]}),e.jsx(de,{color:"#921e22",sx:{height:2,width:"100%"}}),e.jsxs(a,{container:!0,spacing:1,width:"Inherit",sx:{paddingY:2,paddingX:2},children:[e.jsx(a,{item:!0,xs:12,md:3,children:e.jsx(l,{fullWidth:!0,select:!0,label:"Vendors",size:"small",name:"vendorId",value:n.vendorId,onChange:N,children:v.map(B=>e.jsx(L,{value:B.lookUpId,children:B.lookUpName},B.lookUpId))})}),e.jsx(a,{item:!0,xs:12,md:3,children:e.jsx(l,{label:"Assign Quantity",fullWidth:!0,type:"number",size:"small",name:"assignedQty",value:n.assignedQty,onChange:N})}),e.jsx(a,{item:!0,xs:12,md:3,children:e.jsx(l,{label:"Rate Per uom",type:"number",fullWidth:!0,size:"small",name:"rate",value:n.rate,onChange:N})}),e.jsx(a,{item:!0,xs:12,md:3,children:e.jsx(l,{label:"Shrinkage",fullWidth:!0,type:"number",size:"small",name:"shrinkage",value:n.shrinkage,onChange:N})}),e.jsx(a,{item:!0,xs:12,md:3,children:e.jsx(l,{label:"Wastage",fullWidth:!0,type:"number",size:"small",name:"wastage",value:n.wastage,onChange:N})}),e.jsx(a,{item:!0,xs:12,md:3,children:e.jsx(l,{label:"Output Qty",fullWidth:!0,type:"number",size:"small",name:"outputQty",value:n.outputQty,onChange:N})}),e.jsx(a,{item:!0,xs:12,md:3,children:e.jsx(l,{label:"Total Excl. Gst",fullWidth:!0,type:"number",size:"small",name:"totalExcGst",value:n.totalExcGst,onChange:N})}),e.jsx(a,{item:!0,xs:12,md:3,children:e.jsx(l,{label:"GST",fullWidth:!0,size:"small",name:"gst",value:n.gst,onChange:N})}),e.jsx(a,{item:!0,xs:12,md:3,children:e.jsx(l,{label:"Total Including Gst",fullWidth:!0,size:"small",name:"TotalIncludingGst",value:n.TotalIncludingGst,onChange:N})}),e.jsx(a,{item:!0,xs:12,md:3,children:e.jsx(l,{label:"UnitRate Per PO.",fullWidth:!0,size:"small",name:"unitRatePerPo",value:n.unitRatePerPo,onChange:N})}),e.jsx(a,{item:!0,xs:12,textAlign:"right",sx:{mt:2},children:e.jsx(le,{variant:"contained",size:"small",onClick:A,children:"Save"})})]}),e.jsx(a,{container:!0,spacing:2,width:"Inherit",sx:{paddingY:2,paddingX:2},children:e.jsx(a,{sx:{marginTop:2},item:!0,xs:12,children:e.jsx(ke,{iColumns:_,initialRows:f,deleteApi:"https://gecxc.com:4041/api/DyeingPrinting/DeleteDyeingPrintingDetailByDetId?dpIdDet=",deleteBy:"dpIdDet",refetch:Q,disableEdit:!0})})})]})},Ot=({initialFormData:i,setAdditionalProcessData:D,refetchDyeingPrintingData:q,handleClickOpen:u})=>{const t=Je(),{enqueueSnackbar:f}=Oe(),{user:r}=Me(),[c,n]=o.useState([]),x=c.reduce((C,W)=>C+(W.assignedQty??0),0).toFixed(2);console.log("Quantity",x);const H=c.reduce((C,W)=>C+(W.requiredPcs??0),0).toFixed(2);console.log("totalRepeats",H);const[d,Q]=o.useState({embroideryIdDet:0,embroideryId:i.embroideryId||0,designId:i.designId||"",batchNo:i.batchNo||"",planningHeaderId:i.planningHeaderId||0,componentId:i.componentId||"",componentName:i.componentName||"",fabricId:i.fabricId||"",fabricName:i.fabricName||"",vendorId:"",colorId:i.colorId||"",colourName:i.colourName||"",availableQty:i.availableQty||"",assignedQty:"",remainingQty:(i.availableQty-x).toFixed(2)||0,noOfHead:i.noOfHead||"",noOfHeadsName:i.noOfHeadsName||"",repeats:i.repeats||"",assignedRepeats:"",remainingRepeats:i.repeats-H||"",cuttingSize:i.cuttingSize||"",itemsPerRepeat:i.itemsPerRepeat||"",poPcs:i.poPcs||"",totalPcs:i.totalPcs||"",remainingPcs:(i.totalPcs-H).toFixed(2)||0,requiredPcs:0,totalAmount:0,threadStiches:0,threadRate:0,threadAmount:0,tillaStiches:0,tilaRate:0,tilaAmount:0,sequence:0,sequenceRate:0,sequenceAmount:0,isSolving:!1,solvingLayers:0,solvingInMeters:0,solvingRate:0,solvingAmount:0,additional:[],costPerComponent:0,createdOn:new Date().toISOString(),createdBy:r.empId,lastUpdatedOn:new Date().toISOString(),LastUpdatedBy:r.empId}),v=["Boring","Pooni","Laser","Doori","Dissolving"];function E(C,W,Z){return{fontWeight:W.indexOf(C)===-1?Z.typography.fontWeightRegular:Z.typography.fontWeightMedium}}o.useEffect(()=>{Q({...d,remainingQty:i.availableQty-x||0,remainingPcs:i.totalPcs-H||0})},[c]);const{data:N}=Pe(),{data:A,refetch:_}=lt(d.embroideryId,{skip:!d.embroideryId}),[J,B]=o.useState([]);o.useEffect(()=>{if(N){const C=N.result[0];B(C.vendorList)}},[N]),o.useEffect(()=>{A&&n(A.result.map((C,W)=>({id:W,...C})))},[A,_]),console.log("initialRows",c);const h=C=>{const{name:W,value:Z}=C.target;Q({...d,[W]:Z})},I=C=>{const{name:W,checked:Z}=C.target;Q(ie=>({...ie,[W]:Z}))};console.log("formData",d);const[k,w]=o.useState(null),[y,j]=o.useState(d);o.useEffect(()=>{const C=setTimeout(()=>{j(d)},50);return()=>{clearTimeout(C)}},[d]),o.useEffect(()=>{const C=()=>{const X=parseFloat(y.repeats)||0,V=parseFloat(y.itemsPerRepeat)||0;return(X*V).toFixed(2)},W=()=>{const X=parseFloat(y.threadStiches)||0,V=parseFloat(y.threadRate)||0,F=parseFloat(y.noOfHead)||0,S=parseFloat(y.repeats)||0;return(X/1e3*(V*S*F)).toFixed(2)},Z=()=>{const X=parseFloat(y.tillaStiches)||0,V=parseFloat(y.tilaRate)||0,F=parseFloat(y.noOfHead)||0,S=parseFloat(y.repeats)||0;return(X/1e3*(V*S*F)).toFixed(2)},ie=()=>{const X=parseFloat(y.sequence)||0,V=parseFloat(y.sequenceRate)||0,F=parseFloat(y.noOfHead)||0,S=parseFloat(y.repeats)||0;return(X/1e3*(V*S*F)).toFixed(2)},me=()=>{const X=parseFloat(y.repeats)||0,V=parseFloat(y.noOfHead)||0,F=parseFloat(y.solvingLayers)||0;return(X*V*13/39.37*F).toFixed(2)},ge=()=>{const X=parseFloat(y.solvingInMeters)||0,V=parseFloat(y.solvingRate)||0;return(X*V).toFixed(2)},te=()=>{const X=parseFloat(y.threadAmount)||0,V=parseFloat(y.tilaAmount)||0,F=parseFloat(y.sequenceAmount)||0,S=parseFloat(y.solvingAmount)||0;return X+V+F+S},oe=()=>{const X=parseFloat(y.totalAmount)||0,V=parseFloat(y.totalPcs)||0;return X/V};Q(X=>({...X,totalPcs:C(),threadAmount:W(),tilaAmount:Z(),sequenceAmount:ie(),solvingInMeters:me(),solvingAmount:ge(),totalAmount:te(),costPerComponent:oe()}))},[y.threadAmount,y.totalAmount,y.sequenceAmount,y.solvingAmount,y.repeats,y.tilaAmount,y.itemsPerRepeat,y.threadRate,y.threadStiches,y.noOfHead,y.tilaRate,y.tillaStiches,y.sequenceRate,y.sequence,y.solvingLayers,y.solvingInMeters,y.solvingRate]),o.useEffect(()=>{if(k==="assignedQty"){const C=()=>{const W=parseFloat(y.assignedQty)||0,Z=parseFloat(y.availableQty)||0,ie=parseFloat(y.totalPcs)||0;return Math.round(W*(ie/Z))};Q(W=>({...W,requiredPcs:C()}))}else if(k==="requiredPcs"){const C=()=>{const W=parseFloat(y.requiredPcs)||0,Z=parseFloat(y.availableQty)||0,ie=parseFloat(y.totalPcs)||0;return Math.round(W*Z/ie)};Q(W=>({...W,assignedQty:C()}))}},[y.assignedQty,y.requiredPcs,k]);const Y=C=>{const W=C.target.value;w("assignedQty"),Q(Z=>({...Z,assignedQty:W}))},ae=C=>{const W=C.target.value;w("requiredPcs"),Q(Z=>({...Z,requiredPcs:W}))},ee=async()=>{if(console.log(d),d.totalAmount===0&&d.costPerComponent===0){f("Please Thread, Tilla or Sequnce values ",{variant:"error",autoHideDuration:5e3});return}try{const C=await pe.post("https://gecxc.com:4041/api/Embroidery/SaveEmbroideryDetails",{...d,additional:d.additional.join(", ")});C.data.success?f("Embroidery saved successfully!",{variant:"success",autoHideDuration:5e3}):(f(`${C.data.message}!`,{variant:"error",autoHideDuration:5e3}),console.log("response.message",C.data.message)),console.log("Save response:",C.data),Q(W=>({...W,vendorId:"",embroideryIdDet:0,totalPcs:0,totalAmount:0,threadStiches:0,threadRate:0,threadAmount:0,tillaStiches:0,tilaRate:0,tilaAmount:0,sequence:0,sequenceRate:0,sequenceAmount:0,isSolving:!1,solvingLayers:0,solvingInMeters:0,solvingRate:0,solvingAmount:0,additional:[],requiredPcs:0,assignedQty:0,costPerComponent:0,createdOn:new Date().toISOString(),createdBy:r.empId,lastUpdatedOn:new Date().toISOString(),LastUpdatedBy:r.empId})),_(),q()}catch(C){console.error("Error saving data:",C),f("Embroidery not saved successfully!",{variant:"error",autoHideDuration:5e3})}},re=[{field:"vendorName",headerName:"Vendor"},{field:"assignedQty",headerName:"Assigned Quantity"},{field:"requiredPcs",headerName:"Required Pcs"},{field:"additional",headerName:"ThreadAdditional"},{field:"threadStiches",headerName:"Thread Stitches"},{field:"threadRate",headerName:"Thread Rate"},{field:"threadAmount",headerName:"Thread Amount"},{field:"tillaStiches",headerName:"Tilla Stitches"},{field:"tilaRate",headerName:"Tilla Rate"},{field:"tilaAmount",headerName:"Tilla Amount"},{field:"sequence",headerName:"sequence"},{field:"sequenceRate",headerName:"Sequence Rate"},{field:"sequenceAmount",headerName:"Sequence Amount"},{field:"isSolving",headerName:"Is Solving"},{field:"solvingLayers",headerName:"Solving Layers"},{field:"solvingInMeters",headerName:"Solving In Meters"},{field:"solvingRate",headerName:"Solving Rate"},{field:"solvingAmount",headerName:"Solving Amount"},{field:"totalPcs",headerName:"Total Pcs"},{field:"totalAmount",headerName:"Total Amount"},{field:"costPerComponent",headerName:"Cost Per Component"}];return e.jsxs(ye,{noValidate:!0,component:"form",sx:{display:"flex",flexDirection:"column",m:"auto",width:"Inherit"},children:[e.jsxs(a,{container:!0,spacing:1,width:"Inherit",sx:{paddingY:2,paddingX:2},children:[e.jsxs(a,{item:!0,xs:12,md:3,children:[e.jsx(l,{fullWidth:!0,label:"Fabric",name:"fabricName",value:d.fabricName,onChange:h,size:"small",disabled:!0,sx:C=>({...d.fabricName!==""&&{".css-4a5t8g-MuiInputBase-input-MuiOutlinedInput-input":{backgroundColor:"#c9c9c9 !important"}},"& .MuiInputBase-input.Mui-disabled":{WebkitTextFillColor:"black"},"& .MuiInputBase-root.Mui-disabled":{backgroundColor:"#f9f9f9"},"& .MuiOutlinedInput-root.Mui-disabled .MuiOutlinedInput-notchedOutline":{borderColor:"gray"},"& .MuiInputLabel-root.Mui-disabled":{color:"rgba(0, 0, 0, 0.87)"}}),InputLabelProps:{sx:{color:"black"}}})," "]}),e.jsx(a,{item:!0,xs:12,md:3,children:e.jsx(l,{fullWidth:!0,label:"Component",name:"componentName",value:d.componentName,onChange:h,size:"small",disabled:!0,sx:C=>({...d.componentName!==""&&{".css-4a5t8g-MuiInputBase-input-MuiOutlinedInput-input":{backgroundColor:"#c9c9c9 !important"}},"& .MuiInputBase-input.Mui-disabled":{WebkitTextFillColor:"black"},"& .MuiInputBase-root.Mui-disabled":{backgroundColor:"#f9f9f9"},"& .MuiOutlinedInput-root.Mui-disabled .MuiOutlinedInput-notchedOutline":{borderColor:"gray"},"& .MuiInputLabel-root.Mui-disabled":{color:"rgba(0, 0, 0, 0.87)"}}),InputLabelProps:{sx:{color:"black"}}})}),e.jsxs(a,{item:!0,xs:12,md:3,children:[e.jsx(l,{fullWidth:!0,label:"Color",name:"colourName",value:d.colourName,onChange:h,size:"small",disabled:!0,sx:C=>({...d.colourName!==""&&{".css-4a5t8g-MuiInputBase-input-MuiOutlinedInput-input":{backgroundColor:"#c9c9c9 !important"}},"& .MuiInputBase-input.Mui-disabled":{WebkitTextFillColor:"black"},"& .MuiInputBase-root.Mui-disabled":{backgroundColor:"#f9f9f9"},"& .MuiOutlinedInput-root.Mui-disabled .MuiOutlinedInput-notchedOutline":{borderColor:"gray"},"& .MuiInputLabel-root.Mui-disabled":{color:"rgba(0, 0, 0, 0.87)"}}),InputLabelProps:{sx:{color:"black"}}})," "]}),e.jsxs(a,{item:!0,xs:12,md:3,children:[e.jsx(l,{fullWidth:!0,label:"PO Pcs",name:"poPcs",value:d.poPcs,onChange:h,size:"small",disabled:!0,sx:C=>({...d.poPcs!==""&&{".css-4a5t8g-MuiInputBase-input-MuiOutlinedInput-input":{backgroundColor:"#c9c9c9 !important"}},"& .MuiInputBase-input.Mui-disabled":{WebkitTextFillColor:"black"},"& .MuiInputBase-root.Mui-disabled":{backgroundColor:"#f9f9f9"},"& .MuiOutlinedInput-root.Mui-disabled .MuiOutlinedInput-notchedOutline":{borderColor:"gray"},"& .MuiInputLabel-root.Mui-disabled":{color:"rgba(0, 0, 0, 0.87)"}}),InputLabelProps:{sx:{color:"black"}}})," "]}),e.jsx(a,{item:!0,xs:12,md:3,children:e.jsx(l,{fullWidth:!0,label:"noOfHead",size:"small",name:"noOfHeadsName",value:d.noOfHeadsName,onChange:h,disabled:!0,sx:C=>({...d.noOfHeadsName!==""&&{".css-4a5t8g-MuiInputBase-input-MuiOutlinedInput-input":{backgroundColor:"#c9c9c9 !important"}},"& .MuiInputBase-input.Mui-disabled":{WebkitTextFillColor:"black"},"& .MuiInputBase-root.Mui-disabled":{backgroundColor:"#f9f9f9"},"& .MuiOutlinedInput-root.Mui-disabled .MuiOutlinedInput-notchedOutline":{borderColor:"gray"},"& .MuiInputLabel-root.Mui-disabled":{color:"rgba(0, 0, 0, 0.87)"}}),InputLabelProps:{sx:{color:"black"}}})}),e.jsx(a,{item:!0,xs:12,md:3,children:e.jsx(l,{fullWidth:!0,label:"Cutting Size",size:"small",name:"cuttingSize",value:d.cuttingSize,onChange:h,disabled:!0,sx:C=>({...d.cuttingSize!==""&&{".css-4a5t8g-MuiInputBase-input-MuiOutlinedInput-input":{backgroundColor:"#c9c9c9 !important"}},"& .MuiInputBase-input.Mui-disabled":{WebkitTextFillColor:"black"},"& .MuiInputBase-root.Mui-disabled":{backgroundColor:"#f9f9f9"},"& .MuiOutlinedInput-root.Mui-disabled .MuiOutlinedInput-notchedOutline":{borderColor:"gray"},"& .MuiInputLabel-root.Mui-disabled":{color:"rgba(0, 0, 0, 0.87)"}}),InputLabelProps:{sx:{color:"black"}}})}),e.jsx(a,{item:!0,xs:12,md:3,children:e.jsx(l,{fullWidth:!0,label:"Items Per Repeat",size:"small",name:"itemsPerRepeat",value:d.itemsPerRepeat,onChange:h,disabled:!0,sx:C=>({...d.itemsPerRepeat!==""&&{".css-4a5t8g-MuiInputBase-input-MuiOutlinedInput-input":{backgroundColor:"#c9c9c9 !important"}},"& .MuiInputBase-input.Mui-disabled":{WebkitTextFillColor:"black"},"& .MuiInputBase-root.Mui-disabled":{backgroundColor:"#f9f9f9"},"& .MuiOutlinedInput-root.Mui-disabled .MuiOutlinedInput-notchedOutline":{borderColor:"gray"},"& .MuiInputLabel-root.Mui-disabled":{color:"rgba(0, 0, 0, 0.87)"}}),InputLabelProps:{sx:{color:"black"}}})}),e.jsx(a,{item:!0,xs:12,md:1.5,children:e.jsx(l,{label:"Total AvailableQty",fullWidth:!0,size:"small",name:"availableQty",value:d.availableQty,onChange:h,disabled:!0,sx:C=>({...d.availableQty!==""&&{".css-4a5t8g-MuiInputBase-input-MuiOutlinedInput-input":{backgroundColor:"#c9c9c9 !important"}},"& .MuiInputBase-input.Mui-disabled":{WebkitTextFillColor:"black"},"& .MuiInputBase-root.Mui-disabled":{backgroundColor:"#f9f9f9"},"& .MuiOutlinedInput-root.Mui-disabled .MuiOutlinedInput-notchedOutline":{borderColor:"gray"},"& .MuiInputLabel-root.Mui-disabled":{color:"rgba(0, 0, 0, 0.87)"}}),InputLabelProps:{sx:{color:"black"}}})}),e.jsx(a,{item:!0,xs:12,md:1.5,children:e.jsx(l,{label:"Remaining Qty",fullWidth:!0,size:"small",name:"remainingQty",value:d.remainingQty,onChange:h,disabled:!0,sx:C=>({...d.remainingQty!==""&&{".css-4a5t8g-MuiInputBase-input-MuiOutlinedInput-input":{backgroundColor:"#c9c9c9 !important"}},"& .MuiInputBase-input.Mui-disabled":{WebkitTextFillColor:"black"},"& .MuiInputBase-root.Mui-disabled":{backgroundColor:"#f9f9f9"},"& .MuiOutlinedInput-root.Mui-disabled .MuiOutlinedInput-notchedOutline":{borderColor:"gray"},"& .MuiInputLabel-root.Mui-disabled":{color:"rgba(0, 0, 0, 0.87)"}}),InputLabelProps:{sx:{color:"black"}}})}),e.jsx(a,{item:!0,xs:12,md:1.5,children:e.jsx(l,{label:"Repeats",fullWidth:!0,size:"small",name:"repeats",value:d.repeats,onChange:h,disabled:!0,sx:C=>({...d.repeats!==""&&{".css-4a5t8g-MuiInputBase-input-MuiOutlinedInput-input":{backgroundColor:"#c9c9c9 !important"}},"& .MuiInputBase-input.Mui-disabled":{WebkitTextFillColor:"black"},"& .MuiInputBase-root.Mui-disabled":{backgroundColor:"#f9f9f9"},"& .MuiOutlinedInput-root.Mui-disabled .MuiOutlinedInput-notchedOutline":{borderColor:"gray"},"& .MuiInputLabel-root.Mui-disabled":{color:"rgba(0, 0, 0, 0.87)"}}),InputLabelProps:{sx:{color:"black"}}})}),e.jsx(a,{item:!0,xs:12,md:1.5,children:e.jsx(l,{label:"Total Pcs",fullWidth:!0,size:"small",name:"totalPcs",value:d.totalPcs,onChange:h,disabled:!0,sx:C=>({...d.totalPcs!==""&&{".css-4a5t8g-MuiInputBase-input-MuiOutlinedInput-input":{backgroundColor:"#c9c9c9 !important"}},"& .MuiInputBase-input.Mui-disabled":{WebkitTextFillColor:"black"},"& .MuiInputBase-root.Mui-disabled":{backgroundColor:"#f9f9f9"},"& .MuiOutlinedInput-root.Mui-disabled .MuiOutlinedInput-notchedOutline":{borderColor:"gray"},"& .MuiInputLabel-root.Mui-disabled":{color:"rgba(0, 0, 0, 0.87)"}}),InputLabelProps:{sx:{color:"black"}}})}),e.jsx(a,{item:!0,xs:12,md:1.5,children:e.jsx(l,{label:"remainingPcs",fullWidth:!0,size:"small",name:"remainingPcs",value:d.remainingPcs,onChange:h,disabled:!0,sx:C=>({...d.remainingPcs!==""&&{".css-4a5t8g-MuiInputBase-input-MuiOutlinedInput-input":{backgroundColor:"#c9c9c9 !important"}},"& .MuiInputBase-input.Mui-disabled":{WebkitTextFillColor:"black"},"& .MuiInputBase-root.Mui-disabled":{backgroundColor:"#f9f9f9"},"& .MuiOutlinedInput-root.Mui-disabled .MuiOutlinedInput-notchedOutline":{borderColor:"gray"},"& .MuiInputLabel-root.Mui-disabled":{color:"rgba(0, 0, 0, 0.87)"}}),InputLabelProps:{sx:{color:"black"}}})})]}),e.jsx(de,{color:"#921e22",sx:{height:2,width:"100%"}}),e.jsxs(a,{container:!0,spacing:1,width:"Inherit",sx:{paddingY:2,paddingX:2},children:[e.jsx(a,{item:!0,xs:12,md:3,children:e.jsx(l,{fullWidth:!0,select:!0,label:"Vendors",size:"small",name:"vendorId",value:d.vendorId,onChange:h,disabled:!d.remainingPcs&&!d.remainingQty,InputLabelProps:{sx:{color:"black"}},children:J.map(C=>e.jsx(L,{value:C.lookUpId,children:C.lookUpName},C.lookUpId))})}),e.jsx(a,{item:!0,xs:12,md:1.5,children:e.jsx(l,{label:"Assigned Qty",fullWidth:!0,size:"small",type:"number",name:"assignedQty",value:d.assignedQty,onChange:Y,disabled:!d.remainingPcs&&!d.remainingQty,InputLabelProps:{sx:{color:"black"}}})}),e.jsx(a,{item:!0,xs:12,md:1.5,children:e.jsx(l,{label:"Required Pcs",fullWidth:!0,disabled:!d.remainingPcs&&!d.remainingQty,size:"small",type:"number",name:"requiredPcs",value:d.requiredPcs,onChange:ae,InputLabelProps:{sx:{color:"black"}}})}),e.jsx(a,{item:!0,xs:12,md:4.5,children:e.jsx(l,{select:!0,label:"Additional",value:d.additional,name:"additional",size:"small",onChange:h,fullWidth:!0,disabled:!d.remainingPcs&&!d.remainingQty,InputLabelProps:{sx:{color:"black"}},SelectProps:{multiple:!0},children:v.map(C=>e.jsx(L,{value:C,style:E(C,d.additional,t),children:C},C))})}),e.jsx(a,{item:!0,xs:12,md:1.5,children:e.jsx(_e,{control:e.jsx(et,{checked:d.isSolving,onChange:I,disabled:!d.remainingPcs&&!d.remainingQty,name:"isSolving"}),label:"isSolving"})}),e.jsx(a,{item:!0,xs:12,md:6,children:e.jsxs(a,{container:!0,spacing:1,width:"Inherit",children:[e.jsx(a,{item:!0,xs:12,md:12,children:e.jsx(Ce,{variant:"h5",gutterBottom:!0,children:"Thread"})})," ",e.jsx(a,{item:!0,xs:12,md:4,children:e.jsx(l,{label:"Stitches",fullWidth:!0,size:"small",type:"number",name:"threadStiches",value:d.threadStiches,onChange:h,required:!0,disabled:!d.remainingPcs&&!d.remainingQty,InputLabelProps:{sx:{color:"black"}}})}),e.jsx(a,{item:!0,xs:12,md:4,children:e.jsx(l,{label:"Rate",type:"number",fullWidth:!0,size:"small",name:"threadRate",value:d.threadRate,onChange:h,required:!0,disabled:!d.remainingPcs&&!d.remainingQty,InputLabelProps:{sx:{color:"black"}}})}),e.jsx(a,{item:!0,xs:12,md:4,children:e.jsx(l,{label:"Amount",fullWidth:!0,size:"small",type:"number",name:"threadAmount",value:d.threadAmount,onChange:h,disabled:!d.remainingPcs&&!d.remainingQty,InputLabelProps:{sx:{color:"black"}}})})]})}),e.jsx(a,{item:!0,xs:12,md:6,children:e.jsxs(a,{container:!0,spacing:1,width:"Inherit",children:[e.jsx(a,{item:!0,xs:12,md:12,children:e.jsx(Ce,{variant:"h5",gutterBottom:!0,children:"Tilla"})})," ",e.jsx(a,{item:!0,xs:12,md:4,children:e.jsx(l,{label:"Stitches",fullWidth:!0,size:"small",type:"number",name:"tillaStiches",value:d.tillaStiches,onChange:h,required:!0,disabled:!d.remainingPcs&&!d.remainingQty,InputLabelProps:{sx:{color:"black"}}})}),e.jsx(a,{item:!0,xs:12,md:4,children:e.jsx(l,{label:"Rate",fullWidth:!0,size:"small",type:"number",name:"tilaRate",value:d.tilaRate,onChange:h,required:!0,disabled:!d.remainingPcs&&!d.remainingQty,InputLabelProps:{sx:{color:"black"}}})}),e.jsx(a,{item:!0,xs:12,md:4,children:e.jsx(l,{label:"Amount",fullWidth:!0,size:"small",name:"tilaAmount",value:d.tilaAmount,onChange:h,disabled:!d.remainingPcs&&!d.remainingQty,InputLabelProps:{sx:{color:"black"}}})})]})}),e.jsxs(a,{item:!0,xs:12,md:6,children:[e.jsxs(a,{container:!0,spacing:1,width:"Inherit",children:[e.jsx(a,{item:!0,xs:12,md:12,children:e.jsx(Ce,{variant:"h5",gutterBottom:!0,children:"Sequence"})})," ",e.jsx(a,{item:!0,xs:12,md:4,children:e.jsx(l,{label:"Sequence",fullWidth:!0,size:"small",name:"sequence",type:"number",value:d.sequence,onChange:h,disabled:!d.remainingPcs&&!d.remainingQty,required:!0,InputLabelProps:{sx:{color:"black"}}})}),e.jsx(a,{item:!0,xs:12,md:4,children:e.jsx(l,{label:"Rate",fullWidth:!0,type:"number",size:"small",name:"sequenceRate",value:d.sequenceRate,onChange:h,required:!0,disabled:!d.remainingPcs&&!d.remainingQty,InputLabelProps:{sx:{color:"black"}}})}),e.jsx(a,{item:!0,xs:12,md:4,children:e.jsx(l,{label:"Amount",fullWidth:!0,size:"small",name:"sequenceAmount",value:d.sequenceAmount,onChange:h,disabled:!d.remainingPcs&&!d.remainingQty,InputLabelProps:{sx:{color:"black"}}})})]})," "]}),d.isSolving?e.jsx(a,{item:!0,xs:12,md:6,children:e.jsxs(a,{container:!0,spacing:1,width:"Inherit",children:[e.jsx(a,{item:!0,xs:12,md:12,children:e.jsx(Ce,{variant:"h5",gutterBottom:!0,children:"Solving"})})," ",e.jsx(a,{item:!0,xs:12,md:3,children:e.jsx(l,{label:"Layers",fullWidth:!0,size:"small",type:"number",name:"solvingLayers",value:d.solvingLayers,onChange:h,disabled:!d.remainingPcs&&!d.remainingQty,InputLabelProps:{sx:{color:"black"}}})}),e.jsx(a,{item:!0,xs:12,md:3,children:e.jsx(l,{label:"Meters",type:"number",fullWidth:!0,size:"small",name:"solvingInMeters",value:d.solvingInMeters,disabled:!d.remainingPcs&&!d.remainingQty,onChange:h,InputLabelProps:{sx:{color:"black"}}})}),e.jsx(a,{item:!0,xs:12,md:3,children:e.jsx(l,{label:"Rate",fullWidth:!0,type:"number",size:"small",name:"solvingRate",value:d.solvingRate,onChange:h,InputLabelProps:{sx:{color:"black"}}})}),e.jsx(a,{item:!0,xs:12,md:3,children:e.jsx(l,{label:"Amount",fullWidth:!0,size:"small",type:"number",name:"solvingAmount",value:d.solvingAmount,disabled:!d.remainingPcs&&!d.remainingQty,onChange:h,InputLabelProps:{sx:{color:"black"}}})})]})}):null,e.jsx(a,{item:!0,xs:12,md:3,sx:{mt:4},children:e.jsx(l,{label:"Total Amount",fullWidth:!0,type:"number",size:"small",disabled:!d.remainingPcs&&!d.remainingQty,name:"totalAmount",value:d.totalAmount,onChange:h,InputLabelProps:{sx:{color:"black"}}})}),e.jsx(a,{item:!0,xs:12,md:3,sx:{mt:4},children:e.jsx(l,{label:"Cost Per Component",fullWidth:!0,size:"small",name:"costPerComponent",value:d.costPerComponent,onChange:h,disabled:!d.remainingPcs&&!d.remainingQty,InputLabelProps:{sx:{color:"black"}}})}),e.jsx(a,{item:!0,xs:12,textAlign:"right",sx:{mt:2},children:e.jsx(le,{variant:"contained",size:"small",onClick:ee,children:"Save"})})]}),e.jsx(de,{color:"#921e22",sx:{height:2,width:"100%"}}),e.jsx(a,{container:!0,spacing:2,width:"Inherit",sx:{paddingY:2,paddingX:2},children:e.jsx(a,{sx:{marginTop:2},item:!0,xs:12,children:e.jsx(ke,{iColumns:re,initialRows:c,deleteApi:"https://gecxc.com:4041/api/Embroidery/DeleteEmbroideryDetailsByDetId?embroideryDetId=",deleteBy:"embroideryIdDet",refetch:_,disableEdit:!0})})})]})},Nt=()=>{Je();const{user:i}=Me(),[D,q]=o.useState(!0),{enqueueSnackbar:u}=Oe(),[t,f]=o.useState([]),[r,c]=o.useState(!1),[n,x]=o.useState({embroideryId:0,designId:"",batchNo:"",planningHeaderId:"",componentId:"",fabricId:"",vendorId:"",poPcs:"",baseColorId:"",baseColorName:"",colorId:"",availableQty:"",noOfHead:"",repeats:"",cuttingSize:"",itemsPerRepeat:"",totalPcs:"",totalAmount:"",threadStiches:"",threadRate:"",threadAmount:"",tillaStiches:"",tilaRate:"",tilaAmount:"",sequence:"",sequenceRate:"",sequenceAmount:"",isSolving:!1,solvingLayers:0,solvingInMeters:"",solvingRate:0,solvingAmount:"",threadAdditional:[],costPerComponent:"",createdBy:i.empId,createdOn:new Date().toISOString(),lastUpdatedOn:new Date().toISOString(),lastUpdatedBy:i.empId});o.useEffect(()=>{x({embroideryId:(t==null?void 0:t.embroideryId)||0,designId:(t==null?void 0:t.designId)||"",batchNo:(t==null?void 0:t.batchNo)||"",planningHeaderId:(t==null?void 0:t.planningHeaderId)||"",componentId:(t==null?void 0:t.componentId)||"",fabricId:(t==null?void 0:t.fabricId)||"",vendorId:(t==null?void 0:t.vendorId)||"",poPcs:(t==null?void 0:t.poPcs)||"",baseColorId:(t==null?void 0:t.baseColorId)||"",baseColorName:(t==null?void 0:t.baseColorName)||"",colorId:(t==null?void 0:t.colorId)||"",availableQty:(t==null?void 0:t.availableQty)||"",noOfHead:(t==null?void 0:t.noOfHead)||"",repeats:(t==null?void 0:t.repeats)||"",cuttingSize:(t==null?void 0:t.cuttingSize)||"",itemsPerRepeat:(t==null?void 0:t.itemsPerRepeat)||"",totalPcs:(t==null?void 0:t.totalPcs)||"",totalAmount:(t==null?void 0:t.totalAmount)||"",threadStiches:(t==null?void 0:t.threadStiches)||"",threadRate:(t==null?void 0:t.threadRate)||"",threadAmount:(t==null?void 0:t.threadAmount)||"",tillaStiches:(t==null?void 0:t.tillaStiches)||"",tilaRate:(t==null?void 0:t.tilaRate)||"",tilaAmount:(t==null?void 0:t.tilaAmount)||"",sequence:(t==null?void 0:t.sequence)||"",sequenceRate:(t==null?void 0:t.sequenceRate)||"",sequenceAmount:(t==null?void 0:t.sequenceAmount)||"",isSolving:(t==null?void 0:t.isSolving)||!1,solvingLayers:(t==null?void 0:t.solvingLayers)||0,solvingInMeters:(t==null?void 0:t.solvingInMeters)||"",solvingRate:(t==null?void 0:t.solvingRate)||0,solvingAmount:(t==null?void 0:t.solvingAmount)||"",threadAdditional:(t==null?void 0:t.threadAdditional)||[],costPerComponent:(t==null?void 0:t.costPerComponent)||"",createdOn:(t==null?void 0:t.createdOn)||new Date().toISOString(),createdBy:(t==null?void 0:t.createdBy)||i.empId,lastUpdatedOn:new Date().toISOString(),lastUpdatedBy:i.empId})},[t]);const{data:H}=Ne(),[d,Q]=o.useState(""),{data:v}=Pe(),{data:E,refetch:N}=Ae(d,{skip:!d}),{data:A,refetch:_}=ze(n.designId,{skip:!n.designId}),{data:J}=We({batchNo:n.planningHeaderId,componentId:n.componentId},{skip:!n.planningHeaderId||!n.componentId}),{data:B}=He({batchNo:n.planningHeaderId,componentId:n.componentId,fabricId:n.fabricId},{skip:!n.planningHeaderId||!n.componentId||!n.fabricId}),{data:h,refetch:I}=it(n.planningHeaderId,{skip:!n.planningHeaderId}),{data:k}=Re(n.planningHeaderId,{skip:!n.planningHeaderId});console.log("formData.planningHeaderId",n.planningHeaderId),console.log("collectionData",H);const[w,y]=o.useState(!1),[j,Y]=o.useState([]),[ae,ee]=o.useState([]),[re,he]=o.useState([]),[C,W]=o.useState([]),[Z,ie]=o.useState([]),[me,ge]=o.useState([]),[te,oe]=o.useState([]),[X,V]=o.useState([]);console.log("batchList",ae),console.log("formData",n),o.useEffect(()=>{E&&Y(E.result)},[E]),o.useEffect(()=>{A&&ee(A.result)},[A]),o.useEffect(()=>{J&&he(J.result)},[J]),o.useEffect(()=>{B&&ge(J.result)},[B]),o.useEffect(()=>{k&&V(k.result)},[k]),o.useEffect(()=>{h&&(q(!1),oe(h.result.map((g,T)=>({id:T,...g}))))},[h,I]),console.log("embroideryList",h),console.log("initialRows",te),o.useEffect(()=>{if(v){const g=v.result[0];W(g.vendorList),ie(g.noOfHeadsList)}},[v]);const F=(H==null?void 0:H.result)||[];o.useEffect(()=>{const g=()=>{const R=parseFloat(n.repeats)||0,ne=parseFloat(n.itemsPerRepeat)||0;return(R*ne).toFixed(2)};x(R=>({...R,totalPcs:g()}));const T=()=>{const R=parseFloat(n.threadStiches)||0,ne=parseFloat(n.threadRate)||0,xe=parseFloat(n.noOfHead)||0,je=parseFloat(n.repeats)||0;return(R/1e3*(ne*je*xe)).toFixed(2)};x(R=>({...R,threadAmount:T()}));const p=()=>{const R=parseFloat(n.tillaStiches)||0,ne=parseFloat(n.tilaRate)||0,xe=parseFloat(n.noOfHead)||0,je=parseFloat(n.repeats)||0;return(R/1e3*(ne*je*xe)).toFixed(2)};x(R=>({...R,tilaAmount:p()}));const s=()=>{const R=parseFloat(n.sequence)||0,ne=parseFloat(n.sequenceRate)||0,xe=parseFloat(n.noOfHead)||0,je=parseFloat(n.repeats)||0;return(R/1e3*(ne*je*xe)).toFixed(2)};x(R=>({...R,sequenceAmount:s()}));const b=()=>{const R=parseFloat(n.repeats)||0,ne=parseFloat(n.noOfHead)||0,xe=parseFloat(n.solvingLayers)||0;return(R*ne*13/39.37*xe).toFixed(2)};x(R=>({...R,solvingInMeters:b()}));const O=()=>{const R=parseFloat(n.solvingInMeters)||0,ne=parseFloat(n.solvingRate)||0;return parseFloat(n.solvingLayers),(R*ne).toFixed(2)};x(R=>({...R,solvingAmount:O()}));const U=()=>{const R=parseFloat(n.threadAmount)||0,ne=parseFloat(n.tilaAmount)||0,xe=parseFloat(n.sequenceAmount)||0,je=parseFloat(n.solvingAmount)||0;return(R+ne+xe+je).toFixed(2)};x(R=>({...R,totalAmount:U()||0}));const $=()=>{const R=parseFloat(n.totalAmount)||0,ne=parseFloat(n.totalPcs)||0;return(R/ne).toFixed(2)};x(R=>({...R,costPerComponent:$()||0}))},[n.threadAmount,n.totalAmount,n.sequenceAmount,n.solvingAmount,n.repeats,n.tilaAmount,n.itemsPerRepeat,n.threadRate,n.threadStiches,n.noOfHead,n.tilaRate,n.tillaStiches,n.sequenceRate,n.sequence,n.solvingLayers,n.solvingInMeters,n.solvingRate]);const S=g=>{const{name:T,value:p}=g.target;if(T==="collectionId")F.find(s=>s.collectionId===parseInt(p)),Q(p),c(!0),oe([]),q(!0),x({...n,collectionId:p,designId:"",batchNo:"",planningHeaderId:"",componentId:"",fabricId:"",vendorId:"",poPcs:"",baseColorId:"",baseColorName:"",colorId:"",availableQty:"",noOfHead:"",repeats:"",cuttingSize:"",itemsPerRepeat:"",totalPcs:"",totalAmount:"",threadStiches:"",threadRate:"",threadAmount:"",tillaStiches:"",tilaRate:"",tilaAmount:"",sequence:"",sequenceRate:"",sequenceAmount:"",isSolving:!1,solvingLayers:0,solvingInMeters:"",solvingRate:0,solvingAmount:"",threadAdditional:[],costPerComponent:""});else if(T==="designId"){const s=j.find(b=>b.designId===parseInt(p));oe([]),q(!0),x({...n,designId:p,baseColorId:s?s.colorId:"",baseColorName:s?s.colorName:"",batchNo:"",planningHeaderId:"",componentId:"",fabricId:"",vendorId:"",poPcs:"",colorId:"",availableQty:"",noOfHead:"",repeats:"",cuttingSize:"",itemsPerRepeat:"",totalPcs:"",totalAmount:"",threadStiches:"",threadRate:"",threadAmount:"",tillaStiches:"",tilaRate:"",tilaAmount:"",sequence:"",sequenceRate:"",sequenceAmount:"",isSolving:!1,solvingLayers:0,solvingInMeters:"",solvingRate:0,solvingAmount:"",threadAdditional:[],costPerComponent:""})}else if(T==="colorId"){const s=me.find(b=>b.colorId===p);x({...n,colorId:p,availableQty:s?s.total:"",cuttingSize:s?s.cuttingSize:"",repeats:s?s.repeats:"",noOfHead:s?s.noOfHeads:""})}else if(T==="batchNo"){const s=ae.find(b=>b.batchNo===p);x({...n,batchNo:p,planningHeaderId:s?s.planningHeaderId:"",poPcs:s?s.poPcs:"",componentId:"",fabricId:"",vendorId:"",colorId:"",availableQty:"",noOfHead:"",repeats:"",cuttingSize:"",itemsPerRepeat:"",totalPcs:"",totalAmount:"",threadStiches:"",threadRate:"",threadAmount:"",tillaStiches:"",tilaRate:"",tilaAmount:"",sequence:"",sequenceRate:"",sequenceAmount:"",isSolving:!1,solvingLayers:0,solvingInMeters:"",solvingRate:0,solvingAmount:"",threadAdditional:[],costPerComponent:""}),y(!0),c(!1)}else x({...n,[T]:p}),fe(s=>({...s,[T]:""}))},[se,fe]=o.useState({}),be=async()=>{try{const g=await pe.post("https://gecxc.com:4041/api/Embroidery/SaveEmbroidery",{...n,threadAdditional:n.threadAdditional.join(", ")});console.log("Save response:",g.data),g.data.success?u("Embroidery saved successfully!",{variant:"success",autoHideDuration:5e3}):(u(`${g.data.message}!`,{variant:"error",autoHideDuration:5e3}),console.log("response.message",g.data.message)),x(T=>({embroideryId:0,designId:T.designId,batchNo:T.batchNo,planningHeaderId:T.planningHeaderId,componentId:"",fabricId:"",vendorId:"",poPcs:T.poPcs,baseColorId:T.baseColorId,baseColorName:T.baseColorName,colorId:"",availableQty:"",noOfHead:"",repeats:"",cuttingSize:"",itemsPerRepeat:"",totalPcs:"",totalAmount:"",threadStiches:"",threadRate:"",threadAmount:"",tillaStiches:"",tilaRate:"",tilaAmount:"",sequence:"",sequenceRate:"",sequenceAmount:"",isSolving:!1,solvingLayers:0,solvingInMeters:"",solvingRate:0,solvingAmount:"",threadAdditional:[],costPerComponent:"",createdOn:new Date().toISOString(),createdBy:i.empId,lastUpdatedOn:new Date().toISOString(),lastUpdatedBy:i.empId})),I()}catch(g){console.error("Error saving data:",g),u("Embroidery not saved successfully!",{variant:"error",autoHideDuration:5e3})}};console.log("initialRows",te);const[z,G]=o.useState({}),[ve,Ie]=o.useState(!1),P=g=>{G(g),Ie(!0)},M=()=>{Ie(!1),G({}),refetchDyeingPrintingData()},K=[{field:"designNo",headerName:"Design"},{field:"batchNo",headerName:"Batch No."},{field:"componentName",headerName:"Component "},{field:"fabricName",headerName:"Fabric "},{field:"vendorId",headerName:"Vendor"},{field:"poPcs",headerName:"Po Pcs"},{field:"colourName",headerName:"Color"},{field:"noOfHeadsName",headerName:"No. Of Heads"},{field:"repeats",headerName:"Repeats"},{field:"cuttingSize",headerName:"Cutting Size"},{field:"itemsPerRepeat",headerName:"Items Per Repeat"},{field:"availableQty",headerName:"Available Qty"},{field:"assignedQty",headerName:"Assigned Qty"},{field:"totalPcs",headerName:"Total Pcs"},{field:"requiredPcs",headerName:"Required Pcs"},{field:"AddVendor",headerName:"Add Vendor",renderCell:g=>e.jsx("div",{style:{display:"flex",justifyContent:"space-around"},children:e.jsx(Se,{color:"primary",onClick:()=>P(g.row),children:e.jsx(Ye,{})})})}];return e.jsxs(e.Fragment,{children:[e.jsxs(ce,{variant:"outlined",children:[e.jsx(ue,{className:"css-4rfrnx-MuiCardHeader-root",avatar:e.jsx(we,{src:kt,sx:{background:"transparent"}}),title:"Embroidery  ",titleTypographyProps:{style:{color:"white"}}}),e.jsxs(a,{container:!0,spacing:1,width:"Inherit",sx:{paddingY:2,paddingX:2},children:[" ",e.jsxs(a,{item:!0,xs:12,md:3,children:[e.jsx(l,{fullWidth:!0,select:!0,label:"Select Collection",name:"collectionId",value:d,onChange:S,size:"small",InputLabelProps:{sx:{color:"black"}},children:F.map(g=>e.jsx(L,{value:g.collectionId,children:g.collectionName},g.collectionId))})," "]}),e.jsx(a,{item:!0,xs:12,md:3,children:e.jsx(l,{fullWidth:!0,select:!0,label:"Select Design",name:"designId",value:n.designId,onChange:S,size:"small",InputLabelProps:{sx:{color:"black"}},children:j.map(g=>e.jsx(L,{value:g.designId,children:g.designNo},g.designId))})}),e.jsxs(a,{item:!0,xs:12,md:3,children:[e.jsx(l,{fullWidth:!0,select:!0,label:"Batch No.",name:"batchNo",value:n.batchNo,onChange:S,size:"small",InputLabelProps:{sx:{color:"black"}},children:ae.map(g=>e.jsx(L,{value:g.batchNo,children:g.batchNo},g.batchNo))})," "]}),e.jsx(a,{item:!0,xs:12,md:3,children:e.jsx(l,{label:"Base Color",fullWidth:!0,size:"small",name:"baseColorName",value:n.baseColorName,onChange:S,disabled:!0,sx:g=>({...n.repeatsInMtr!==""&&{".css-4a5t8g-MuiInputBase-input-MuiOutlinedInput-input":{backgroundColor:"#c9c9c9 !important"}},"& .MuiInputBase-input.Mui-disabled":{WebkitTextFillColor:"black"},"& .MuiInputBase-root.Mui-disabled":{backgroundColor:"#f9f9f9"},"& .MuiOutlinedInput-root.Mui-disabled .MuiOutlinedInput-notchedOutline":{borderColor:"gray"},"& .MuiInputLabel-root.Mui-disabled":{color:"rgba(0, 0, 0, 0.87)"}})})}),e.jsxs(a,{item:!0,xs:12,md:12,children:[e.jsx(de,{color:"#921e22",sx:{height:2,width:"100%"}})," "]}),e.jsxs(a,{item:!0,xs:12,md:3,children:[e.jsx(l,{fullWidth:!0,select:!0,label:"Components",name:"componentId",value:n.componentId,onChange:S,size:"small",required:!0,error:!!se.componentId,helperText:se.componentId,InputLabelProps:{sx:{color:"black"}},children:X.map(g=>e.jsx(L,{value:g.componentId,children:g.componentName},g.componentId))})," "]}),e.jsx(a,{item:!0,xs:12,md:3,children:e.jsx(l,{fullWidth:!0,select:!0,label:"Select Fabric",defaultValue:"",size:"small",name:"fabricId",value:n.fabricId,onChange:S,required:!0,error:!!se.fabricId,helperText:se.fabricId,InputLabelProps:{sx:{color:"black"}},children:re.map(g=>e.jsx(L,{value:g.fabricId,children:g.fabric},g.fabricId))})}),e.jsx(a,{item:!0,xs:12,md:3,children:e.jsx(l,{fullWidth:!0,select:!0,label:"Color",size:"small",name:"colorId",value:n.colorId,onChange:S,required:!0,error:!!se.colorId,helperText:se.colorId,InputLabelProps:{sx:{color:"black"}},children:me.map(g=>e.jsx(L,{value:g.colorId,children:g.color},g.colorId))})}),e.jsx(a,{item:!0,xs:12,md:1.5,children:e.jsx(l,{label:"Po Pcs",fullWidth:!0,size:"small",name:"poPcs",value:n.poPcs,onChange:S,disabled:!0,sx:g=>({...n.poPcs!==""&&{".css-4a5t8g-MuiInputBase-input-MuiOutlinedInput-input":{backgroundColor:"#c9c9c9 !important"}},"& .MuiInputBase-input.Mui-disabled":{WebkitTextFillColor:"black"},"& .MuiInputBase-root.Mui-disabled":{backgroundColor:"#f9f9f9"},"& .MuiOutlinedInput-root.Mui-disabled .MuiOutlinedInput-notchedOutline":{borderColor:"gray"},"& .MuiInputLabel-root.Mui-disabled":{color:"rgba(0, 0, 0, 0.87)"}})})}),e.jsx(a,{item:!0,xs:12,md:1.5,children:e.jsx(l,{label:"Available Quantity",fullWidth:!0,size:"small",name:"availableQty",type:"number",value:n.availableQty,onChange:S,InputLabelProps:{sx:{color:"black"}},sx:g=>({...n.availableQty!==""&&{".css-4a5t8g-MuiInputBase-input-MuiOutlinedInput-input":{backgroundColor:"#c9c9c9 !important"}},"& .MuiInputBase-input.Mui-disabled":{WebkitTextFillColor:"black"},"& .MuiInputBase-root.Mui-disabled":{backgroundColor:"#f9f9f9"},"& .MuiOutlinedInput-root.Mui-disabled .MuiOutlinedInput-notchedOutline":{borderColor:"gray"},"& .MuiInputLabel-root.Mui-disabled":{color:"rgba(0, 0, 0, 0.87)"}})})}),e.jsx(a,{item:!0,xs:12,md:1.5,children:e.jsx(l,{label:"Repeats",type:"number",fullWidth:!0,size:"small",name:"repeats",value:n.repeats,onChange:S,InputLabelProps:{sx:{color:"black"}},sx:g=>({...n.repeats!==""&&{".css-4a5t8g-MuiInputBase-input-MuiOutlinedInput-input":{backgroundColor:"#c9c9c9 !important"}},"& .MuiInputBase-input.Mui-disabled":{WebkitTextFillColor:"black"},"& .MuiInputBase-root.Mui-disabled":{backgroundColor:"#f9f9f9"},"& .MuiOutlinedInput-root.Mui-disabled .MuiOutlinedInput-notchedOutline":{borderColor:"gray"},"& .MuiInputLabel-root.Mui-disabled":{color:"rgba(0, 0, 0, 0.87)"}})})}),e.jsx(a,{item:!0,xs:12,md:1.5,children:e.jsx(l,{fullWidth:!0,select:!0,label:"Heads",defaultValue:"",size:"small",name:"noOfHead",value:n.noOfHead,onChange:S,required:!0,error:!!se.noOfHead,helperText:se.noOfHead,InputLabelProps:{sx:{color:"black"}},sx:g=>({...n.noOfHead!==""&&{".css-9ngl8c-MuiSelect-select-MuiInputBase-input-MuiOutlinedInput-input":{backgroundColor:"#c9c9c9 !important"}},"& .MuiInputBase-input.Mui-disabled":{WebkitTextFillColor:"black"},"& .MuiInputBase-root.Mui-disabled":{backgroundColor:"#f9f9f9"},"& .MuiOutlinedInput-root.Mui-disabled .MuiOutlinedInput-notchedOutline":{borderColor:"gray"},"& .MuiInputLabel-root.Mui-disabled":{color:"rgba(0, 0, 0, 0.87)"}}),children:Z.map(g=>e.jsx(L,{value:g.lookUpId,children:g.lookUpName},g.lookUpId))})}),e.jsx(a,{item:!0,xs:12,md:1.5,children:e.jsx(l,{label:"Cutting Size",fullWidth:!0,size:"small",name:"cuttingSize",type:"number",value:n.cuttingSize,onChange:S,InputLabelProps:{sx:{color:"black"}},sx:g=>({...n.cuttingSize!==""&&{".css-4a5t8g-MuiInputBase-input-MuiOutlinedInput-input":{backgroundColor:"#c9c9c9 !important"}},"& .MuiInputBase-input.Mui-disabled":{WebkitTextFillColor:"black"},"& .MuiInputBase-root.Mui-disabled":{backgroundColor:"#f9f9f9"},"& .MuiOutlinedInput-root.Mui-disabled .MuiOutlinedInput-notchedOutline":{borderColor:"gray"},"& .MuiInputLabel-root.Mui-disabled":{color:"rgba(0, 0, 0, 0.87)"}})})}),e.jsx(a,{item:!0,xs:12,md:1.5,children:e.jsx(l,{label:"itemsPerRepeat",fullWidth:!0,type:"number",size:"small",name:"itemsPerRepeat",value:n.itemsPerRepeat,onChange:S,required:!0,error:!!se.itemsPerRepeat,helperText:se.itemsPerRepeat,InputLabelProps:{sx:{color:"black"}},sx:g=>({...n.itemsPerRepeat!==""&&{".css-4a5t8g-MuiInputBase-input-MuiOutlinedInput-input":{backgroundColor:"#c9c9c9 !important"}},"& .MuiInputBase-input.Mui-disabled":{WebkitTextFillColor:"black"},"& .MuiInputBase-root.Mui-disabled":{backgroundColor:"#f9f9f9"},"& .MuiOutlinedInput-root.Mui-disabled .MuiOutlinedInput-notchedOutline":{borderColor:"gray"},"& .MuiInputLabel-root.Mui-disabled":{color:"rgba(0, 0, 0, 0.87)"}})})}),e.jsx(a,{item:!0,xs:12,md:1.5,children:e.jsx(l,{label:"total Pcs.",fullWidth:!0,size:"small",type:"number",name:"totalPcs",value:n.totalPcs,onChange:S})}),e.jsx(a,{item:!0,xs:12,md:4.5,textAlign:"right",sx:{mt:2},children:e.jsx(le,{variant:"contained",size:"small",onClick:be,children:"Save"})})]})]}),e.jsx(a,{item:!0,xs:12,md:12,children:e.jsx(de,{color:"#cc8587",sx:{height:1,width:"100%",mt:2}})}),e.jsx(a,{item:!0,xs:12,md:12,children:e.jsx(de,{sx:{height:1,width:"100%",marginTop:1,marginBottom:0}})}),e.jsxs(ce,{variant:"outlined",children:[e.jsx(ue,{className:"css-4rfrnx-MuiCardHeader-root",avatar:e.jsx(Le,{}),title:"View Embroidery ",titleTypographyProps:{style:{color:"white"}}})," ",e.jsx(a,{container:!0,spacing:2,width:"Inherit",sx:{paddingY:2,paddingX:2},children:e.jsxs(a,{sx:{marginTop:2},item:!0,xs:12,children:[" ",e.jsx(ke,{iColumns:K,initialRows:te,setInitialData:f,deleteApi:"https://gecxc.com:4041/api/Embroidery/DeleteEmbroideryById?embroideryId=",deleteBy:"embroideryId",refetch:I,setAccordionExpanded:y,fileName:"Embroidery List",isLoading:D}),e.jsxs(Qe,{open:ve,onClose:M,fullWidth:!0,maxWidth:"xl",children:[e.jsxs(Ue,{sx:{backgroundColor:"#A11F23",color:"#ffffff",display:"flex",justifyContent:"space-between",alignItems:"center",paddingX:"24px",paddingY:"4px"},children:[e.jsx(Ce,{variant:"h4",component:"div",color:"#ffffff",gutterBottom:!0,fontSize:20,fontWeight:2,fontStyle:"normal",children:"Assign Vendors "}),e.jsx(Se,{onClick:M,sx:{color:"#ffffff"},children:e.jsx(Ge,{})})]}),e.jsxs(qe,{children:[e.jsx(Ee,{id:"alert-dialog-slide-description"}),e.jsx(Ot,{initialFormData:z,setInitialFormData:G,refetchDyeingPrintingData:I,handleClickOpen:P})]})]})]})})]})]})},At=Nt,Lt=()=>{const{user:i}=Me();console.log("user",i);const[D,q]=o.useState(!0),[u,t]=o.useState([]),[f,r]=o.useState([]),[c,n]=o.useState({processType:"MultiHead",planningId:0,collectionId:"",baseColorId:"",baseColorName:"",noOfDesigns:"",noOfColors:"",planningHeaderId:"",designId:"",batchNo:"",componentId:"",cuttingSize:"",colorId:"",fabricId:"",noOfHeads:0,operatingMachineId:0,planningProcessTypeName:"",repeats:"",repeatSize:"",uomId:"",totalFabric:"",shrinkage:"",wastage:"",planningProcessTypeId:"",total:"",appId:1,createdOn:new Date().toISOString(),createdBy:i.empId,lastUpdatedBy:i.empId,lastUpdatedOn:new Date().toISOString(),isSchiffili:!1,repeatsInMtr:""});console.log("formData",c),o.useEffect(()=>{n({...c,processType:(u==null?void 0:u.processType)||"MultiHead",planningId:(u==null?void 0:u.planningId)||0,baseColorId:(u==null?void 0:u.baseColorId)||"",componentId:(u==null?void 0:u.componentId)||"",cuttingSize:(u==null?void 0:u.cuttingSize)||"",colorId:(u==null?void 0:u.colorId)||"",fabricId:(u==null?void 0:u.fabricId)||"",noOfHeads:(u==null?void 0:u.noOfHeads)||0,operatingMachineId:(u==null?void 0:u.operatingMachineId)||0,repeats:(u==null?void 0:u.repeats)||"",repeatSize:(u==null?void 0:u.repeatSize)||"",uomId:(u==null?void 0:u.uomId)||"",totalFabric:(u==null?void 0:u.totalFabric)||"",shrinkage:(u==null?void 0:u.shrinkage)||"",wastage:(u==null?void 0:u.wastage)||"",total:(u==null?void 0:u.total)||"",appId:1,createdOn:(u==null?void 0:u.createdOn)||new Date().toISOString(),createdBy:(u==null?void 0:u.createdBy)||i.empId,lastUpdatedBy:i.empId,lastUpdatedOn:new Date().toISOString(),repeatsInMtr:(u==null?void 0:u.repeatsInMtr)||""})},[u]);const{data:x}=Ne(),[H,d]=o.useState(""),{data:Q,refetch:v}=Ae(H,{skip:!H}),{data:E,refetch:N}=dt(c.planningHeaderId,{skip:!c.planningHeaderId}),{data:A}=Pe(),[_,J]=o.useState([]),{enqueueSnackbar:B}=Oe();console.log("lookupData",A),o.useEffect(()=>{Q&&(J(Q.result),v())},[Q]),o.useEffect(()=>{E&&(q(!1),r(E.result.map((s,b)=>({id:b,...s}))))},[E,N]),console.log("designList",_),console.log("collectionData",x);const h=(x==null?void 0:x.result)||[],[I,k]=o.useState(!1),[w,y]=o.useState([]),[j,Y]=o.useState([]),[ae,ee]=o.useState([]),[re,he]=o.useState([]),[C,W]=o.useState([]),[Z,ie]=o.useState([]),[me,ge]=o.useState([]),[te,oe]=o.useState([]);console.log("components:",ae),console.log("Fabrications:",re),console.log("colors:",C),console.log("uoms:",Z),console.log("heads:",me),console.log("lookupData",A),o.useEffect(()=>{if(A){const s=A.result[0];ee(s.componentList),W(s.colorList),he(s.fabricList),ge(s.noOfHeadsList),ie(s.uomList),y(s.planningTypeProcessList),Y(s.operatingMachineList)}},[A]),o.useEffect(()=>{const s=async b=>{try{const O=await pe.get(`https://gecxc.com:4041/api/PrePlanning/GetPrePlanningHeaderByDesignId?designId=${b}`);console.log(O.data),oe(O.data.result)}catch(O){console.error("Error fetching pre-planning lookup data:",O)}};c.designId&&s(c.designId)},[c.designId,c.planningHeaderId]),o.useEffect(()=>{const s=()=>{const $=parseFloat(c.repeats)||0,R=parseFloat(c.repeatSize)||0,ne=($*R).toFixed(2);return parseFloat(ne).toLocaleString()};n($=>({...$,totalFabric:s()}));const b=()=>{const R=(typeof c.totalFabric=="string"?parseFloat(c.totalFabric.replace(/,/g,"")):c.totalFabric)||0,ne=parseFloat(c.shrinkage)||0,xe=parseFloat(c.wastage)||0,je=(R*(100+(ne+xe))/100).toFixed(2);return parseFloat(je).toLocaleString()};n($=>({...$,total:b()}));const O=()=>(parseFloat(c.repeats),(.9144*(parseFloat(c.repeatSize)||0)).toFixed(2));n($=>({...$,repeatsInMtr:O()}));const U=()=>{const $=parseFloat(c.repeats)||0;return((parseFloat(c.repeatsInMtr)||0)*$).toFixed(2)};n($=>({...$,totalFabric:$.isSchiffili?U():s()}))},[c.repeats,c.repeatSize,c.totalFabric,c.shrinkage,c.wastage,c.repeatsInMtr,c.isSchiffili]);const[X,V]=o.useState(!1);o.useState(!1);const F=s=>{const{name:b,value:O}=s.target;if(b==="collectionId"){const U=h.find($=>$.collectionId===parseInt(O));k(!0),r([]),q(!0),d(O),n({...c,processType:"MultiHead",componentId:"",cuttingSize:"",colorId:"",fabricId:"",noOfHeads:0,operatingMachineId:0,repeats:"",repeatSize:"",uomId:"",totalFabric:"",shrinkage:"",wastage:"",total:"",collectionId:O,noOfDesigns:U?U.noOfDesigns:"",noOfColors:U?U.noOfColors:""})}else if(b==="designId"){const U=_.find($=>$.designId===parseInt(O));r([]),q(!0),n({...c,processType:"MultiHead",componentId:"",cuttingSize:"",colorId:"",fabricId:"",noOfHeads:0,operatingMachineId:0,repeats:"",repeatSize:"",uomId:"",totalFabric:"",shrinkage:"",wastage:"",total:"",designId:O,baseColorId:U?U.colorId:"",baseColorName:U?U.colorName:""})}else if(b==="batchNo"){const U=te.find($=>$.batchNo===O);n({...c,componentId:"",processType:"MultiHead",cuttingSize:"",colorId:"",fabricId:"",noOfHeads:0,operatingMachineId:0,repeats:"",repeatSize:"",uomId:"",totalFabric:"",shrinkage:"",wastage:"",total:"",batchNo:O,planningHeaderId:U?U.planningHeaderId:""}),V(!0),k(!1)}else if(b==="planningProcessTypeId"){const U=w.find($=>$.planningProcessTypeId===O);n({...c,planningProcessTypeId:O,planningProcessTypeName:U?U.lookUpName:"",noOfHeads:0,operatingMachineId:0}),V(!0),k(!1)}else n({...c,[b]:O})},[S,se]=o.useState({}),fe=async()=>{const s=be();if(Object.keys(s).length>0){se(s);return}try{const b={...c,totalFabric:parseFloat(c.totalFabric.replace(/,/g,"")),total:parseFloat(c.total.replace(/,/g,""))},O=await pe.post("https://gecxc.com:4041/api/PrePlanning/SavePrePlanning",b);console.log("Data saved successfully:",O.data),console.log("Save response:",O.data),O.data.success?B("Fabrication saved successfully!",{variant:"success",autoHideDuration:5e3}):(B(`${O.data.message} !`,{variant:"error",autoHideDuration:5e3}),console.log("response.message",O.data.message)),n(U=>({processType:"MultiHead",planningId:0,collectionId:U.collectionId,designId:U.designId,batchNo:U.batchNo,planningHeaderId:U.planningHeaderId,baseColorId:U.baseColorId,baseColorName:U.baseColorName,noOfDesigns:U.noOfDesigns,noOfColors:U.noOfColors,componentId:"",cuttingSize:"",colorId:"",fabricId:"",noOfHeads:0,operatingMachineId:0,repeats:"",repeatSize:"",uomId:"",totalFabric:"",shrinkage:"",wastage:"",total:"",appId:1,createdOn:new Date().toISOString(),createdBy:i.empId,lastUpdatedOn:new Date().toISOString(),lastUpdatedBy:i.empId,isSchiffili:!1,repeatsInMtr:""})),N()}catch(b){console.error("Error saving data:",b),B("Pre Planning not saved successfully!",{variant:"error",autoHideDuration:5e3})}},be=()=>{const s={};return c.componentId||(s.componentId="componentId is required"),c.colorId||(s.colorId="colorId is required"),c.fabricId||(s.fabricId="fabricId is required"),c.cuttingSize||(s.cuttingSize="cuttingSize is required"),c.repeats||(s.repeats="repeats is required"),c.repeatSize||(s.repeatSize="repeatSize is required"),c.uomId||(s.uomId="uomId is required"),c.shrinkage||(s.shrinkage="shrinkage is required"),c.wastage||(s.wastage="wastage is required"),s};console.log("initialRows",f);const z=f.reduce((s,b)=>s+(b.totalFabric??0),0).toFixed(2),G=parseFloat(z).toLocaleString();console.log("localizedTotalFabric",G);const ve=f.reduce((s,b)=>s+(b.total??0),0).toFixed(2),Ie=parseFloat(ve).toLocaleString(),P=[...f,{id:"TOTAL_FABRIC",label:"Total Fabric",totalFabric:G,total:Ie}],M={sortable:!1,pinnable:!1,hideable:!1};console.log("rows",P);const K=[{field:"componentName",headerName:"Component",...M,colSpan:(s,b)=>{if(b.id==="TOTAL_FABRIC")return 9},valueGetter:(s,b)=>b.id==="TOTAL_FABRIC"?b.label:s},{field:"planningProcessTypeName",headerName:"Process Type",...M},{field:"color",headerName:"Color",...M},{field:"cuttingSize",headerName:"Cutting Size",...M},{field:"fabric",headerName:"Fabrication",...M},{field:"noOfHeadName",headerName:"No. Of Heads",...M},{field:"operatingMachineName",headerName:"Operating Machine",...M},{field:"repeats",headerName:"Repeats",valueGetter:s=>s.toLocaleString(),...M},{field:"repeatSize",headerName:"Repeat Size",valueGetter:s=>s.toLocaleString(),...M},{field:"totalFabric",headerName:"Total Fabric",valueGetter:s=>s.toLocaleString(),...M},{field:"uom",headerName:"UOM",colSpan:(s,b)=>{if(b.id==="TOTAL_FABRIC")return 2},valueGetter:(s,b)=>b.id==="TOTAL_FABRIC"?"OverAll Total":s},{field:"shrinkage",headerName:"Shrinkage %"},{field:"wastage",headerName:"Wastage %"},{field:"total",headerName:"Total",valueGetter:s=>s.toLocaleString(),colSpan:(s,b)=>{if(b.id==="TOTAL_FABRIC")return 2}}],m=c.planningProcessTypeId===198;o.useEffect(()=>{m&&n({...c,uomId:139})},[m]),console.log("formData",c);const g=({row:s,field:b})=>s.id==="TOTAL_FABRIC"&&(b==="componentName"||b==="uom")?"bold":"";console.log("batchList:",te);const T="https://gecxc.com:4041/api/PrePlanning/DeletePreplanningByPlanningId?PlanningId=",p=(s,b)=>{V(!X)};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"CardHeader",children:e.jsxs(ce,{variant:"outlined",children:[e.jsx(ue,{className:"css-4rfrnx-MuiCardHeader-root",avatar:e.jsx(tt,{}),title:"Pre Planning",titleTypographyProps:{style:{color:"white"}},children:" "}),e.jsxs(a,{container:!0,spacing:2,width:"Inherit",sx:{paddingY:2,paddingX:2},children:[e.jsxs(a,{item:!0,xs:12,md:2,children:[e.jsx(l,{fullWidth:!0,select:!0,label:"Select Collection",name:"collectionId",value:c.collectionId,onChange:F,size:"small",required:!0,InputLabelProps:{sx:{color:"black"}},children:h.map(s=>e.jsx(L,{value:s.collectionId,children:s.collectionName},s.collectionId))})," "]}),e.jsx(a,{item:!0,xs:12,md:2,children:e.jsx(l,{fullWidth:!0,select:!0,label:"Select Design",name:"designId",value:c.designId,onChange:F,size:"small",required:!0,InputLabelProps:{sx:{color:"black"}},children:_.map(s=>e.jsx(L,{value:s.designId,children:s.designNo},s.designId))})}),e.jsxs(a,{item:!0,xs:12,md:2,children:[e.jsx(l,{fullWidth:!0,select:!0,label:"Batch No.",name:"batchNo",value:c.batchNo,onChange:F,size:"small",required:!0,InputLabelProps:{sx:{color:"black"}},children:te.map(s=>e.jsx(L,{value:s.batchNo,children:s.batchNo},s.batchNo))})," "]}),e.jsx(a,{item:!0,xs:12,md:2,children:e.jsx(l,{label:"No of Design",fullWidth:!0,size:"small",focused:!0,name:"noOfDesigns",value:c.noOfDesigns,onChange:F,disabled:!0,sx:s=>({...c.noOfDesigns!==""&&{".css-4a5t8g-MuiInputBase-input-MuiOutlinedInput-input":{backgroundColor:"#c9c9c9 !important"}},"& .MuiInputBase-input.Mui-disabled":{WebkitTextFillColor:"black"},"& .MuiInputBase-root.Mui-disabled":{backgroundColor:"#f9f9f9"},"& .MuiOutlinedInput-root.Mui-disabled .MuiOutlinedInput-notchedOutline":{borderColor:"gray"},"& .MuiInputLabel-root.Mui-disabled":{color:"rgba(0, 0, 0, 0.87)"}}),InputLabelProps:{sx:{color:"black"}}})}),e.jsx(a,{item:!0,xs:12,md:2,children:e.jsx(l,{label:"No of Color",fullWidth:!0,size:"small",name:"noOfColors",value:c.noOfColors,onChange:F,disabled:!0,sx:s=>({...c.noOfColors!==""&&{".css-4a5t8g-MuiInputBase-input-MuiOutlinedInput-input":{backgroundColor:"#c9c9c9 !important"}},"& .MuiInputBase-input.Mui-disabled":{WebkitTextFillColor:"black"},"& .MuiInputBase-root.Mui-disabled":{backgroundColor:"#f9f9f9"},"& .MuiOutlinedInput-root.Mui-disabled .MuiOutlinedInput-notchedOutline":{borderColor:"gray"},"& .MuiInputLabel-root.Mui-disabled":{color:"rgba(0, 0, 0, 0.87)"}})})}),e.jsx(a,{item:!0,xs:12,md:2,children:e.jsx(l,{label:"Base Color",fullWidth:!0,size:"small",name:"baseColorName",value:c.baseColorName,onChange:F,disabled:!0,sx:s=>({...c.baseColorName!==""&&{".css-4a5t8g-MuiInputBase-input-MuiOutlinedInput-input":{backgroundColor:"#c9c9c9 !important"}},"& .MuiInputBase-input.Mui-disabled":{WebkitTextFillColor:"black"},"& .MuiInputBase-root.Mui-disabled":{backgroundColor:"#f9f9f9"},"& .MuiOutlinedInput-root.Mui-disabled .MuiOutlinedInput-notchedOutline":{borderColor:"gray"},"& .MuiInputLabel-root.Mui-disabled":{color:"rgba(0, 0, 0, 0.87)"}})})})]})]})}),e.jsxs(ce,{variant:"outlined",children:[e.jsx(ue,{className:"MainCard",avatar:e.jsx(Ze,{}),title:"Add Pre Planning",titleTypographyProps:{style:{color:"white"}},action:e.jsx(Se,{onClick:p,sx:{mt:"-18px"},children:e.jsx(Fe,{style:{color:"white"}})}),sx:{display:"flex",alignItems:"center",justifyContent:"space-between"}}),e.jsxs(De,{expanded:X,onChange:p,sx:{},children:[e.jsx(Ke,{expandIcon:e.jsx(Fe,{}),"aria-controls":"panel1-content",id:"panel1-header",sx:{display:"none"}}),e.jsx($e,{children:e.jsxs(a,{container:!0,spacing:2,width:"Inherit",sx:{paddingY:2,paddingX:2},children:[e.jsxs(a,{item:!0,xs:12,md:2,children:[e.jsx(l,{fullWidth:!0,select:!0,label:"Process Type",name:"planningProcessTypeId",value:c.planningProcessTypeId,onChange:F,size:"small",required:!0,InputLabelProps:{sx:{color:"black"}},children:w.map(s=>e.jsx(L,{value:s.lookUpId,children:s.lookUpName},s.lookUpId))})," "]}),e.jsx(a,{item:!0,xs:12,md:2,children:e.jsx(Te,{fullWidth:!0,options:ae,getOptionLabel:s=>s.lookUpName,value:ae.find(s=>s.lookUpId===c.componentId)||null,onChange:(s,b)=>{F({target:{name:"componentId",value:b?b.lookUpId:""}})},renderOption:(s,b)=>{const{lookUpName:O}=b;return e.jsx("span",{...s,children:O})},renderInput:s=>e.jsx(l,{...s,label:"Select Component",size:"small",name:"componentId",value:c.componentId,required:!0,error:!!S.componentId,helperText:S.componentId,InputLabelProps:{sx:{color:"black"}},sx:{"& input":{backgroundColor:"white"}}}),PaperComponent:({children:s})=>e.jsx("div",{style:{backgroundColor:"white"},children:s})})}),e.jsxs(a,{item:!0,xs:12,md:2,children:[" ",e.jsx(Te,{fullWidth:!0,options:C,getOptionLabel:s=>s.lookUpName,value:C.find(s=>s.lookUpId===c.colorId)||null,onChange:(s,b)=>{F({target:{name:"colorId",value:b?b.lookUpId:""}})},renderInput:s=>e.jsx(l,{...s,label:"Color",size:"small",value:c.colorId,name:"colorId",required:!0,error:!!S.colorId,helperText:S.colorId,InputLabelProps:{sx:{color:"black"}},sx:{"& input":{backgroundColor:"white"}}}),PaperComponent:({children:s})=>e.jsx("div",{style:{backgroundColor:"white"},children:s})})]}),e.jsx(a,{item:!0,xs:12,md:2,children:e.jsx(l,{label:"Cutting Size",fullWidth:!0,size:"small",name:"cuttingSize",type:"number",value:c.cuttingSize,onChange:F,required:!0,error:!!S.cuttingSize,helperText:S.cuttingSize,InputLabelProps:{sx:{color:"black"}}})}),e.jsx(a,{item:!0,xs:12,md:2,children:e.jsx(Te,{fullWidth:!0,options:re,getOptionLabel:s=>s.lookUpName,value:re.find(s=>s.lookUpId===c.fabricId)||null,onChange:(s,b)=>{F({target:{name:"fabricId",value:b?b.lookUpId:""}})},renderInput:s=>e.jsx(l,{...s,label:"Fabrication",size:"small",name:"fabricId",value:c.fabricId,required:!0,error:!!S.fabricId,helperText:S.fabricId,InputLabelProps:{sx:{color:"black"}},sx:{"& input":{backgroundColor:"white"}}}),PaperComponent:({children:s})=>e.jsx("div",{style:{backgroundColor:"white"},children:s})})}),e.jsx(a,{item:!0,xs:12,md:2,children:m?e.jsx(l,{fullWidth:!0,select:!0,label:"Operating Machine",size:"small",name:"operatingMachineId",value:c.operatingMachineId,onChange:F,required:!0,InputLabelProps:{sx:{color:"black"}},children:j.map(s=>e.jsx(L,{value:s.lookUpId,children:s.lookUpName},s.lookUpId))}):e.jsx(l,{fullWidth:!0,select:!0,label:"No of Heads",size:"small",name:"noOfHeads",value:c.noOfHeads,onChange:F,required:!0,InputLabelProps:{sx:{color:"black"}},children:me.map(s=>e.jsx(L,{value:s.lookUpId,children:s.lookUpName},s.lookUpId))})}),e.jsx(a,{item:!0,xs:12,md:2,children:e.jsx(l,{label:"Repeats",fullWidth:!0,size:"small",name:"repeats",type:"number",value:c.repeats,onChange:F,error:!!S.repeats,helperText:S.repeats,required:!0,InputLabelProps:{sx:{color:"black"}}})}),e.jsx(a,{item:!0,xs:12,md:2,children:e.jsx(l,{label:"Repeat Size",fullWidth:!0,type:"number",size:"small",name:"repeatSize",value:c.repeatSize,onChange:F,error:!!S.repeatSize,helperText:S.repeatSize,required:!0,InputLabelProps:{sx:{color:"black"}}})}),e.jsx(a,{item:!0,xs:12,md:2,children:e.jsx(l,{label:"Total Fabric",fullWidth:!0,size:"small",name:"totalFabric",value:c.totalFabric,onChange:F,InputLabelProps:{sx:{color:"black"}}})}),e.jsx(a,{item:!0,xs:12,md:2,children:e.jsx(l,{fullWidth:!0,select:!0,label:"UOM",type:"number",defaultValue:"",size:"small",name:"uomId",value:c.uomId,onChange:F,error:!!S.uomId,helperText:S.uomId,required:!0,disabled:m,InputLabelProps:{sx:{color:"black"}},children:Z.map(s=>e.jsx(L,{value:s.lookUpId,children:s.lookUpName},s.lookUpId))})}),e.jsx(a,{item:!0,xs:12,md:2,children:e.jsx(l,{label:"Shrinkage %",fullWidth:!0,size:"small",type:"number",name:"shrinkage",value:c.shrinkage,onChange:F,error:!!S.shrinkage,helperText:S.shrinkage,required:!0,InputLabelProps:{sx:{color:"black"}}})}),e.jsx(a,{item:!0,xs:12,md:2,children:e.jsx(l,{label:"Wastage %",fullWidth:!0,size:"small",type:"number",name:"wastage",value:c.wastage,onChange:F,error:!!S.wastage,helperText:S.wastage,required:!0,InputLabelProps:{sx:{color:"black"}}})}),e.jsx(a,{item:!0,xs:12,md:2,children:e.jsx(l,{label:"Total",fullWidth:!0,size:"small",name:"total",value:c.total,onChange:F,InputLabelProps:{sx:{color:"black"}}})}),e.jsx(a,{item:!0,xs:12,md:6,children:e.jsx(a,{container:!0,spacing:1,width:"Inherit",children:e.jsx(a,{item:!0,xs:12,md:4,children:e.jsx(l,{label:"repeat in mtr",fullWidth:!0,size:"small",name:"repeatsInMtr",disabled:!0,value:c.repeatsInMtr,onChange:F,sx:s=>({...c.repeatsInMtr!==""&&{".css-4a5t8g-MuiInputBase-input-MuiOutlinedInput-input":{backgroundColor:"#c9c9c9 !important"}},"& .MuiInputBase-input.Mui-disabled":{WebkitTextFillColor:"black"},"& .MuiInputBase-root.Mui-disabled":{backgroundColor:"#f9f9f9"},"& .MuiOutlinedInput-root.Mui-disabled .MuiOutlinedInput-notchedOutline":{borderColor:"gray"},"& .MuiInputLabel-root.Mui-disabled":{color:"rgba(0, 0, 0, 0.87)"}})})})})}),e.jsx(a,{item:!0,xs:12,textAlign:"right",children:e.jsx(le,{variant:"contained",size:"small",onClick:fe,children:"Save"})})]})})]})]}),e.jsx(a,{item:!0,xs:12,md:12,children:e.jsx(de,{sx:{height:1,width:"100%",marginTop:1,marginBottom:0}})}),e.jsxs(ce,{variant:"outlined",children:[e.jsx(ue,{className:"MainCard",avatar:e.jsx(Le,{}),title:"View",titleTypographyProps:{style:{color:"white"}}}),e.jsx(a,{sx:{paddingY:1,paddingX:1},children:e.jsx(a,{sx:{},item:!0,xs:12,children:e.jsx(ke,{iColumns:K,initialRows:P,setInitialData:t,deleteApi:T,deleteBy:"planningId",refetch:N,getCellClassName:g,setAccordionExpanded:V,fileName:"PrePlanningList",isLoading:D})})})]})]})},Bt=Lt,Tt="/assets/roller-ezgif.com-instagif-CY-x4C-U.gif",Ft=()=>{const{user:i}=Me();console.log("user",i);const[D,q]=o.useState(!0),[u,t]=o.useState([]),[f,r]=o.useState({dpId:0,designId:"",batchNo:"",planningHeaderId:"",fabricId:"",colorId:"",color:"",processType:"",availableQty:"",Shrinkage:"",Wastage:"",outputQty:"",UOM:"",uomId:"",poPcs:"",baseColorName:"",createdBy:i.empId,createdOn:new Date().toISOString(),lastUpdatedOn:new Date().toISOString(),lastUpdatedBy:i.empId});o.useEffect(()=>{r({...f,dpId:u.dpId||0,fabricId:(u==null?void 0:u.fabricId)||"",colorId:(u==null?void 0:u.colorId)||"",color:(u==null?void 0:u.color)||"",processType:(u==null?void 0:u.processType)||"",availableQty:(u==null?void 0:u.availableQty)||"",Shrinkage:(u==null?void 0:u.shrinkage)||"",Wastage:(u==null?void 0:u.wastage)||"",outputQty:(u==null?void 0:u.outputQty)||0,UOM:(u==null?void 0:u.uom)||0,uomId:(u==null?void 0:u.uomId)||"",poPcs:(u==null?void 0:u.poPcs)||0,createdOn:(u==null?void 0:u.createdOn)||new Date().toISOString(),createdBy:(u==null?void 0:u.createdBy)||i.empId,lastUpdatedOn:new Date().toISOString(),lastUpdatedBy:i.empId})},[u]);const{enqueueSnackbar:c}=Oe(),[n,x]=o.useState(!1);console.log("Dyeing form data to send",f);const{data:H}=Ne(),[d,Q]=o.useState(""),{data:v}=Pe(),{data:E,refetch:N}=Ae(d,{skip:!d}),{data:A,refetch:_}=ze(f.designId,{skip:!f.designId}),{data:J}=ct({batchNo:f.planningHeaderId,processType:"Fabrication"},{skip:!f.planningHeaderId}),{data:B}=ut({fabricId:f.fabricId,planningHeaderId:f.planningHeaderId},{skip:!f.fabricId||!f.planningHeaderId}),{data:h,refetch:I}=pt(f.planningHeaderId,{skip:!f.planningHeaderId}),[k,w]=o.useState([]),[y,j]=o.useState([]),[Y,ae]=o.useState([]),[ee,re]=o.useState([]),[he,C]=o.useState([]),[W,Z]=o.useState([]);o.useState([]);const[ie,me]=o.useState(!1);console.log("batchList",y),console.log("formData",f),o.useEffect(()=>{E&&w(E.result)},[E]),o.useEffect(()=>{A&&j(A.result)},[A]),o.useEffect(()=>{J&&ae(J.result)},[J]),o.useEffect(()=>{B&&Z(B.result)},[B]),o.useEffect(()=>{h&&(q(!1),C(h.result.map((P,M)=>({id:M,...P}))))},[h,I]),o.useEffect(()=>{if(v){const P=v.result[0];re(P.uomList)}},[v]);const ge=(H==null?void 0:H.result)||[],te=P=>{const{name:M,value:K}=P.target;if(M==="collectionId")ge.find(m=>m.collectionId===parseInt(K)),Q(K),x(!0),C([]),q(!0),r({...f,collectionId:K,designId:"",batchNo:"",planningHeaderId:"",fabricId:"",colorId:"",color:"",processType:"",availableQty:"",Shrinkage:"",Wastage:"",outputQty:"",UOM:"",uomId:"",poPcs:"",baseColorName:""});else if(M==="designId"){const m=k.find(g=>g.designId===parseInt(K));C([]),q(!0),r({...f,designId:K,baseColorId:m?m.colorId:"",baseColorName:m?m.colorName:"",batchNo:"",planningHeaderId:"",fabricId:"",colorId:"",color:"",processType:"",availableQty:"",Shrinkage:"",Wastage:"",outputQty:"",UOM:"",uomId:"",poPcs:""})}else if(M==="batchNo"){const m=y.find(g=>g.batchNo===K);r({...f,batchNo:K,planningHeaderId:m?m.planningHeaderId:"",poPcs:m?m.poPcs:"",fabricId:"",colorId:"",color:"",processType:"",availableQty:"",Shrinkage:"",Wastage:"",outputQty:"",UOM:"",uomId:""}),me(!0),x(!1)}else if(M==="fabricId")Y.find(m=>m.fabricId===K),console.log("Selected Fabric:",Y),r({...f,fabricId:K});else if(M==="ColorId"){const m=W.find(g=>g.colorId===K.colorId);r({...f,ColorId:K.colorId,color:m.color,availableQty:m.total,UOM:m.uom,Shrinkage:m.shrinkage,Wastage:m.wastage})}else M==="processType"?r({...f,processType:K}):M==="vendorId"?r({...f,vendorId:K}):(r({...f,[M]:K}),X(m=>({...m,[M]:""})))};o.useEffect(()=>{const P=()=>{const p=parseFloat(f.availableQty)||0,s=parseFloat(f.Shrinkage)||0,b=parseFloat(f.Wastage)||0;return(p*(100-(s+b))/100).toFixed(2)},M=()=>{const p=parseFloat(f.availableQty)||0,s=parseFloat(f.RatePerUOM)||0;return(p*s).toFixed(2)},K=(p,s)=>(p*(1+s/100)).toFixed(2),m=P(),g=M(),T=parseFloat(f.GST)||0;K(g,T),parseFloat(f.poPcs),r(p=>({...p,outputQty:m}))},[f.availableQty,f.Shrinkage,f.Wastage,f.RatePerUOM,f.GST,f.poPcs,f.UnitRatePerPo]);const[oe,X]=o.useState({}),V=async()=>{try{const P=await pe.post("https://gecxc.com:4041/api/DyeingPrinting/SaveDyeingPrinting",f);console.log("Save response:",P.data),P.data.success?c("Dyeing saved successfully!",{variant:"success",autoHideDuration:5e3}):(c(`${P.data.message} !`,{variant:"error",autoHideDuration:5e3}),console.log("response.message",P.data.message)),r(M=>({designId:M.designId,planningHeaderId:M.planningHeaderId,batchNo:M.batchNo,dpId:0,fabricId:"",colorId:"",color:"",processType:"",availableQty:"",Shrinkage:"",Wastage:"",outputQty:"",UOM:"",uomId:"",poPcs:M.poPcs,baseColorName:"",createdOn:new Date().toISOString(),createdBy:i.empId,lastUpdatedOn:new Date().toISOString(),lastUpdatedBy:i.empId})),I()}catch(P){console.error("Error saving data:",P),c("Dyeing not saved successfully!",{variant:"error",autoHideDuration:5e3})}},F=[{value:"Dyeing",label:"Dyeing"},{value:"Printing",label:"Printing"}],[S,se]=o.useState({}),[fe,be]=o.useState(!1),z=P=>{se(P),be(!0)},G=()=>{be(!1),se({}),I()},ve=[{field:"fabricName",headerName:"Fabric"},{field:"colorName",headerName:"Color"},{field:"processType",headerName:"Process Type"},{field:"uom",headerName:" UOM"},{field:"poPcs",headerName:" PO PCS."},{field:"availableQty",headerName:"Available Quantitity"},{field:"assignedQty",headerName:"Assigned Qty"},{field:"AddVendor",headerName:"Add Vendor",renderCell:P=>e.jsx("div",{style:{display:"flex",justifyContent:"space-around"},children:e.jsx(Se,{color:"primary",onClick:()=>z(P.row),children:e.jsx(Ye,{})})})}];return e.jsxs(e.Fragment,{children:[e.jsxs(ce,{variant:"outlined",children:[e.jsx(ue,{className:"css-4rfrnx-MuiCardHeader-root",avatar:e.jsx(we,{src:Tt,sx:{background:"transparent"}}),title:"Add Dyeing and Printing ",titleTypographyProps:{style:{color:"white"}}}),e.jsxs(a,{container:!0,spacing:1,width:"Inherit",sx:{paddingY:2,paddingX:2},children:[e.jsxs(a,{item:!0,xs:12,md:3,children:[e.jsx(l,{fullWidth:!0,select:!0,label:"Select Collection",name:"collectionId",value:d,onChange:te,size:"small",InputLabelProps:{sx:{color:"black"}},children:ge.map(P=>e.jsx(L,{value:P.collectionId,children:P.collectionName},P.collectionId))})," "]}),e.jsx(a,{item:!0,xs:12,md:3,children:e.jsx(l,{fullWidth:!0,select:!0,label:"Select Design",name:"designId",value:f.designId,onChange:te,size:"small",InputLabelProps:{sx:{color:"black"}},children:k.map(P=>e.jsx(L,{value:P.designId,children:P.designNo},P.designId))})}),e.jsxs(a,{item:!0,xs:12,md:3,children:[e.jsx(l,{fullWidth:!0,select:!0,label:"Batch No.",name:"batchNo",value:f.batchNo,onChange:te,size:"small",InputLabelProps:{sx:{color:"black"}},children:y.map(P=>e.jsx(L,{value:P.batchNo,children:P.batchNo},P.batchNo))})," "]}),e.jsx(a,{item:!0,xs:12,md:3,children:e.jsx(l,{label:"Base Color",fullWidth:!0,size:"small",name:"baseColorName",value:f.baseColorName,onChange:te,disabled:!0,sx:P=>({...f.repeatsInMtr!==""&&{".css-4a5t8g-MuiInputBase-input-MuiOutlinedInput-input":{backgroundColor:"#c9c9c9 !important"}},"& .MuiInputBase-input.Mui-disabled":{WebkitTextFillColor:"black"},"& .MuiInputBase-root.Mui-disabled":{backgroundColor:"#f9f9f9"},"& .MuiOutlinedInput-root.Mui-disabled .MuiOutlinedInput-notchedOutline":{borderColor:"gray"},"& .MuiInputLabel-root.Mui-disabled":{color:"rgba(0, 0, 0, 0.87)"}})})})," ",e.jsxs(a,{item:!0,xs:12,md:12,children:[e.jsx(de,{color:"#921e22",sx:{height:2,width:"100%"}})," "]}),e.jsx(a,{item:!0,xs:12,md:3,children:e.jsx(l,{fullWidth:!0,select:!0,label:"Select Fabric",defaultValue:"",size:"small",name:"fabricId",value:f.fabricId,onChange:te,error:!!oe.fabricId,helperText:oe.fabricId,required:!0,InputLabelProps:{sx:{color:"black"}},children:Y.map(P=>e.jsx(L,{value:P.fabricId,children:P.fabric},P.fabricId))})}),e.jsx(a,{item:!0,xs:12,md:3,children:e.jsx(Pt,{fullWidth:!0,options:W,getOptionLabel:P=>P.color||"",renderInput:P=>e.jsx(l,{...P,label:"Color",name:"colorId",size:"small",error:!!oe.colorId,helperText:oe.colorId,required:!0,InputLabelProps:{sx:{color:"black"}},sx:{"& input":{backgroundColor:"white"}}}),value:W.find(P=>P.colorId===f.colorId)||null,onChange:(P,M)=>{r(K=>({...K,colorId:M?M.colorId:"",color:M?M.color:"",availableQty:M?M.total:"",UOM:M?M.uom:"",uomId:M?M.uomId:"",Shrinkage:M?M.shrinkage:"",Wastage:M?M.wastage:""}))}})}),e.jsx(a,{item:!0,xs:12,md:3,children:e.jsx(l,{fullWidth:!0,select:!0,label:"Process Type",size:"small",name:"processType",value:f.processType,onChange:te,error:!!oe.processType,helperText:oe.processType,required:!0,InputLabelProps:{sx:{color:"black"}},children:F.map(P=>e.jsx(L,{value:P.value,children:P.label},P.value))})}),e.jsx(a,{item:!0,xs:12,md:3,children:e.jsx(l,{label:"Po Pcs",fullWidth:!0,size:"small",name:"poPcs",value:f.poPcs,onChange:te,disabled:!0,sx:P=>({...f.poPcs!==""&&{".css-4a5t8g-MuiInputBase-input-MuiOutlinedInput-input":{backgroundColor:"#c9c9c9 !important"}},"& .MuiInputBase-input.Mui-disabled":{WebkitTextFillColor:"black"},"& .MuiInputBase-root.Mui-disabled":{backgroundColor:"#f9f9f9"},"& .MuiOutlinedInput-root.Mui-disabled .MuiOutlinedInput-notchedOutline":{borderColor:"gray"},"& .MuiInputLabel-root.Mui-disabled":{color:"rgba(0, 0, 0, 0.87)"}})})}),e.jsx(a,{item:!0,xs:12,md:1.5,children:e.jsx(l,{label:"UOM",fullWidth:!0,size:"small",name:"UOM",value:f.UOM,onChange:te,InputLabelProps:{sx:{color:"black"}}})}),e.jsx(a,{item:!0,xs:12,md:1.5,children:e.jsx(l,{label:"availableQty",fullWidth:!0,size:"small",type:"number",name:"availableQty",value:f.availableQty,onChange:te,disabled:!0,sx:P=>({...f.availableQty!==""&&{".css-4a5t8g-MuiInputBase-input-MuiOutlinedInput-input":{backgroundColor:"#c9c9c9 !important"}},"& .MuiInputBase-input.Mui-disabled":{WebkitTextFillColor:"black"},"& .MuiInputBase-root.Mui-disabled":{backgroundColor:"#f9f9f9"},"& .MuiOutlinedInput-root.Mui-disabled .MuiOutlinedInput-notchedOutline":{borderColor:"gray"},"& .MuiInputLabel-root.Mui-disabled":{color:"rgba(0, 0, 0, 0.87)"}})})}),e.jsx(a,{item:!0,xs:12,md:9,sx:{marginTop:2},textAlign:"right",children:e.jsx(le,{variant:"contained",color:"primary",size:"small",onClick:V,children:"Save"})})]})]}),e.jsx(de,{color:"#cc8587",sx:{height:1,width:"100%",mt:2}})," ",e.jsx(a,{item:!0,xs:12,md:12,children:e.jsx(de,{sx:{height:1,width:"100%",marginTop:1,marginBottom:0}})}),e.jsxs(ce,{variant:"outlined",children:[e.jsx(ue,{className:"css-4rfrnx-MuiCardHeader-root",avatar:e.jsx(Le,{}),title:"View Dyeing ",titleTypographyProps:{style:{color:"white"}}})," ",e.jsx(a,{container:!0,spacing:2,width:"Inherit",sx:{paddingY:2,paddingX:2},children:e.jsxs(a,{item:!0,xs:12,md:12,paddingTop:1,children:[e.jsx(ke,{iColumns:ve,initialRows:he,setInitialData:t,deleteApi:"https://gecxc.com:4041/api/DyeingPrinting/DeleteDyeingPrintingById?DPId=",deleteBy:"dpId",refetch:I,setAccordionExpanded:me,fileName:"Dyeing&PrintingList",isLoading:D}),e.jsxs(Qe,{open:fe,onClose:G,fullWidth:!0,maxWidth:"xl",children:[e.jsxs(Ue,{sx:{backgroundColor:"#A11F23",color:"#ffffff",display:"flex",justifyContent:"space-between",alignItems:"center",paddingX:"24px",paddingY:"4px"},children:[e.jsx(Ce,{variant:"h4",component:"div",color:"#ffffff",gutterBottom:!0,fontSize:20,fontWeight:2,fontStyle:"normal",children:"Assign Vendors "}),e.jsx(Se,{onClick:G,sx:{color:"#ffffff"},children:e.jsx(Ge,{})})]}),e.jsxs(qe,{children:[e.jsx(Ee,{id:"alert-dialog-slide-description"}),e.jsx(St,{initialFormData:S,setInitialFormData:se,refetchDyeingPrintingData:I,handleClickOpen:z})]})]})]})})]})]})},zt=Ft,at="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAACXBIWXMAAAsTAAALEwEAmpwYAAADr0lEQVR4nNXXaciVVRAH8Kv1Jtoi5psFZZYUtoimhUVlaJHZghK2UBFCtGkbZdgiBG1GHyowaaEdWogWElvMFjJpw4oWwrJsVetDtNNevxjeuXW8PPe991rvh/5w4TznnDkzZ87Mf+bWav8H4Dgcgc9wfcPanViFidioL5Rvj2/wIqbgCyzA3XgKH+BI/+DWijMGpYEjO1U+FH8Uh++Jj6yPNzG5YW5wccYxWItF6anwWP9OjJiE7/FuYcCTeDnHjQYsLWR3w8cYi/OxP57AzE49cSGewzgswfJ0/0u4HwfgWYyq3w5deBXH4wXchHU4GgvbVdwPR+EVPI1NMCDesviFos3SqIiTaSl7BW5Pw5/Ho3gYl2Nuu8G3NG+8X85tgcMxCxfhLBxWf/N08bJU+h52xRrciGdwdj7bsFbKx+fbnZTfe+cNflGNX/EQJqQ3Pi+MPgN3pAd/x8GtlO+BT/I2A1P4T+0hMuYdzC/Om56XCW/NyOCt5gs9Lo5oPxBD8u07xesZK5vjtjRqXKEj0vGEZgYsxGXYOKO8U/yE3ZN0PsSVuCHOLHTsgxVVykdmgAzKAGuFryvmLsDVBXnF+w9OCt+60BXcMarRgBA8D91Jvc2URrqNSZkJ+f1dUvRbDfu/wqbpiXmFrluCIUvlke+rsS3OaaJ8WUmxhewO+LYXT52KneLWhcx167EhRtQ3JKNVYUqTuAkmfDBStoncI7kvMmvLHAcdTywPORT35rjqbdfWySPzfDF+wAPF/Hb4skJ2Xa6HzL45fiwCvTRgJq7NvK/CmcXeuQ1rpxdrF1fIBvn0z5ScXuXFGk7Md4nbVeGUYu8lDWvnFmtzKmR/C+JpZcA03JXjqoBaWfD9VplGkqjq890VvUJgTfHuezUzYMdgsBxHRavCpAaZoQ3fQblVWJLrK0suaDSgXwbakCSTKkQp7WoiP6AX5pyVJPd3GjYzYgFmZzT/2OSwVdkLblOU7PuauF4+Z3fGxqWtDBiblawrWbE3hIFv4OcW++Ylta9uqyHVU3rnpNBr/h2WZ1WMrLmmpfJABEnW7uD44dlybwjCk8OyWX0/YqvWLvSUy3jTXbIt77QsL8q+YnReZnTbyuvA1OTuqZkhMyoqXSNWRH+Y8sem8sm1DYWehvLtjPrhObdzZspVuDnL7GnBI4XMPUlQIzZYeR3ZGc1ObzyeFW981viByRtjsttdnO3cyRF8tf8Serj8oPhjmu11tNqfZnpFzz8fh/TJn9O+xl9lMwg6mBWmPgAAAABJRU5ErkJggg==",wt=()=>{const{user:i}=Me(),{enqueueSnackbar:D}=Oe(),[q,u]=o.useState(!0),[t,f]=o.useState([]),[r,c]=o.useState({schiffiliId:0,designId:"",planningHeaderId:0,batchNo:"",componentId:"",poPcs:"",baseColorName:"",fabricId:"",vendorId:"",colorId:"",availableQty:"",thaanQty:0,operatingMachineId:0,operatingMachine:"",workingHeadId:0,cuttingSize:"",rate:"",costPerComponent:"",totalEmbroidry:0,noOfItemPerThaan:0,noOfStichesPerYard:0,amountPerYard:0,totalPcs:0,laserCut:!1,laserCutRate:0,pcsForLaserCut:0,totalAmount:0,createdBy:i.empId,createdOn:new Date().toISOString(),lastUpdatedOn:new Date().toISOString(),lastUpdatedBy:i.empId});o.useEffect(()=>{c({...r,schiffiliId:t.schiffiliId||0,designId:(t==null?void 0:t.designId)||"",planningHeaderId:(t==null?void 0:t.planningHeaderId)||0,batchNo:(t==null?void 0:t.batchNo)||"",componentId:(t==null?void 0:t.componentId)||"",poPcs:(t==null?void 0:t.poPcs)||"",fabricId:(t==null?void 0:t.fabricId)||"",vendorId:(t==null?void 0:t.vendorId)||"",colorId:(t==null?void 0:t.colorId)||"",availableQty:(t==null?void 0:t.availableQty)||"",thaanQty:(t==null?void 0:t.thaanQty)||0,operatingMachineId:(t==null?void 0:t.operatingMachineId)||0,operatingMachine:(t==null?void 0:t.operatingMachineName)||"",workingHeadId:(t==null?void 0:t.workingHeadId)||0,cuttingSize:(t==null?void 0:t.cuttingSize)||"",rate:(t==null?void 0:t.rate)||"",costPerComponent:(t==null?void 0:t.costPerComponent)||"",totalEmbroidry:(t==null?void 0:t.totalEmbroidry)||0,noOfItemPerThaan:(t==null?void 0:t.noOfItemPerThaan)||0,noOfStichesPerYard:(t==null?void 0:t.noOfStichesPerYard)||0,amountPerYard:(t==null?void 0:t.amountPerYard)||0,totalPcs:(t==null?void 0:t.totalPcs)||0,laserCut:!!(t!=null&&t.laserCutRate||t!=null&&t.pcsForLaserCut),laserCutRate:(t==null?void 0:t.laserCutRate)||0,pcsForLaserCut:(t==null?void 0:t.pcsForLaserCut)||0,totalAmount:(t==null?void 0:t.totalAmount)||0,createdOn:(t==null?void 0:t.createdOn)||new Date().toISOString(),createdBy:(t==null?void 0:t.createdBy)||i.empId,lastUpdatedOn:new Date().toISOString(),lastUpdatedBy:i.empId})},[t]);const[n,x]=o.useState(!1),H=(m,g)=>{x(!n)},[d,Q]=o.useState(!1),{data:v}=Ne(),[E,N]=o.useState(""),{data:A}=Pe(),{data:_,refetch:J}=Ae(E,{skip:!E}),{data:B,refetch:h}=ze(r.designId,{skip:!r.designId}),{data:I}=We({batchNo:r.planningHeaderId,componentId:r.componentId},{skip:!r.planningHeaderId||!r.componentId}),{data:k}=He({batchNo:r.planningHeaderId,componentId:r.componentId,fabricId:r.fabricId},{skip:!r.planningHeaderId||!r.componentId||!r.fabricId}),{data:w,refetch:y}=mt(r.planningHeaderId,{skip:!r.planningHeaderId}),{data:j}=Re(r.planningHeaderId,{skip:!r.planningHeaderId});console.log("formData.planningHeaderId",r.planningHeaderId),console.log("collectionData",v),console.log("schiffliList",w);const[Y,ae]=o.useState([]),[ee,re]=o.useState([]),[he,C]=o.useState([]),[W,Z]=o.useState([]),[ie,me]=o.useState([]),[ge,te]=o.useState([]),[oe,X]=o.useState([]),[V,F]=o.useState([]),[S,se]=o.useState([]);o.useEffect(()=>{_&&ae(_.result)},[_]),o.useEffect(()=>{B&&re(B.result)},[B]),o.useEffect(()=>{I&&C(I.result)},[I]),o.useEffect(()=>{k&&X(I.result)},[k]),o.useEffect(()=>{j&&se(j.result)},[j]),o.useEffect(()=>{w&&(u(!1),F(w.result.map((m,g)=>({id:g,...m}))))},[w,y]),o.useEffect(()=>{if(A){const m=A.result[0];Z(m.vendorList),me(m.operatingMachineList),te(m.workingHeadList)}},[A]),console.log("initialRows",V);const fe=(v==null?void 0:v.result)||[];o.useEffect(()=>{const m=()=>{const b=parseFloat(r.thaanQty)||0,O=parseFloat(r.operatingMachine)||0;return(b*O).toFixed(2)};c(b=>({...b,totalEmbroidry:m()}));const g=()=>{const b=parseFloat(r.thaanQty)||0,O=parseFloat(r.noOfStichesPerYard)||0;return(b*O).toFixed(2)};c(b=>({...b,totalPcs:g()}));const T=()=>{const b=parseFloat(r.noOfStichesPerYard)||0,O=parseFloat(r.rate)||0;return(b/1e3*O).toFixed(2)};c(b=>({...b,amountPerYard:T()}));const p=()=>{const b=parseFloat(r.totalAmount)||0,O=parseFloat(r.totalPcs)||0;return(b/O).toFixed(2)};c(b=>({...b,costPerComponent:p()}));const s=()=>{const b=parseFloat(r.amountPerYard)||0,O=parseFloat(r.totalEmbroidry)||0,U=parseFloat(r.laserCutRate)||0,$=parseFloat(r.pcsForLaserCut)||0;return(b*O+$*U).toFixed(2)};c(b=>({...b,totalAmount:s()}))},[r.thaanQty,r.operatingMachine,r.noOfStichesPerYard,r.rate,r.totalAmount,r.totalPcs,r.amountPerYard,r.totalEmbroidry,r.laserCutRate,r.pcsForLaserCut]);const be=m=>{const{name:g,checked:T}=m.target;c(p=>({...p,[g]:T}))},z=m=>{const{name:g,value:T}=m.target;if(g==="collectionId")fe.find(p=>p.collectionId===parseInt(T)),N(T),Q(!0),F([]),u(!0),c({...r,collectionId:T,designId:"",planningHeaderId:0,batchNo:"",componentId:"",poPcs:"",baseColorName:"",fabricId:"",vendorId:"",colorId:"",availableQty:"",thaanQty:0,operatingMachineId:0,operatingMachine:"",workingHeadId:0,cuttingSize:"",rate:"",costPerComponent:"",totalEmbroidry:0,noOfItemPerThaan:0,noOfStichesPerYard:0,amountPerYard:0,totalPcs:0,laserCut:!1,laserCutRate:0,pcsForLaserCut:0,totalAmount:0});else if(g==="designId"){const p=Y.find(s=>s.designId===parseInt(T));F([]),u(!0),c({...r,designId:T,baseColorId:p?p.colorId:"",baseColorName:p?p.colorName:"",planningHeaderId:0,batchNo:"",componentId:"",poPcs:"",fabricId:"",vendorId:"",colorId:"",availableQty:"",thaanQty:0,operatingMachineId:0,operatingMachine:"",workingHeadId:0,cuttingSize:"",rate:"",costPerComponent:"",totalEmbroidry:0,noOfItemPerThaan:0,noOfStichesPerYard:0,amountPerYard:0,totalPcs:0,laserCut:!1,laserCutRate:0,pcsForLaserCut:0,totalAmount:0})}else if(g==="batchNo"){const p=ee.find(s=>s.batchNo===T);c({...r,batchNo:T,planningHeaderId:p?p.planningHeaderId:"",poPcs:p?p.poPcs:"",componentId:"",fabricId:"",vendorId:"",colorId:"",availableQty:"",thaanQty:0,operatingMachineId:0,operatingMachine:"",workingHeadId:0,cuttingSize:"",rate:"",costPerComponent:"",totalEmbroidry:0,noOfItemPerThaan:0,noOfStichesPerYard:0,amountPerYard:0,totalPcs:0,laserCut:!1,laserCutRate:0,pcsForLaserCut:0,totalAmount:0}),x(!0),Q(!1)}else if(g==="colorId"){const p=oe.find(s=>s.colorId===T);c({...r,colorId:T,availableQty:p?p.total:"",cuttingSize:p?p.cuttingSize:"",repeats:p?p.repeats:""})}else if(g==="operatingMachineId"){const p=ie.find(s=>s.lookUpId===T);c({...r,operatingMachineId:T,operatingMachine:p?p.lookUpName:""})}else c({...r,[g]:T})};console.log("colors",oe);const[G,ve]=o.useState({}),Ie=async()=>{const m=P();if(Object.keys(m).length>0){ve(m);return}try{const g=await pe.post("https://gecxc.com:4041/api/Schiffli/SaveSchiffili",r);console.log("Save response:",g.data),g.data.success?D("Schiffili saved successfully!",{variant:"success",autoHideDuration:5e3}):(D(`${g.data.message} !`,{variant:"error",autoHideDuration:5e3}),console.log("response.message",g.data.message)),c(T=>({designId:T.designId,planningHeaderId:T.planningHeaderId,batchNo:T.batchNo,baseColorName:T.baseColorName,schiffiliId:0,componentId:"",poPcs:T.poPcs,fabricId:"",vendorId:"",colorId:"",availableQty:"",thaanQty:0,operatingMachineId:0,operatingMachine:"",workingHeadId:0,cuttingSize:"",rate:"",costPerComponent:"",totalEmbroidry:0,noOfItemPerThaan:0,noOfStichesPerYard:0,amountPerYard:0,totalPcs:0,laserCut:!1,laserCutRate:0,pcsForLaserCut:0,totalAmount:0,createdOn:new Date().toISOString(),createdBy:i.empId,lastUpdatedOn:new Date().toISOString(),lastUpdatedBy:i.empId})),y()}catch(g){console.error("Error saving data:",g),D("Schiffili not saved successfully!",{variant:"error",autoHideDuration:5e3})}},P=()=>{const m={};return r.fabricId||(m.fabricId="fabricId is required"),r.colorId||(m.colorId="colorId is required"),r.vendorId||(m.vendorId="vendorId is required"),r.componentId||(m.componentId="componentId is required"),r.thaanQty||(m.thaanQty="thaanQty is required"),r.workingHeadId||(m.workingHeadId="workingHeadId is required"),r.rate||(m.rate="rate is required"),r.operatingMachineId||(m.operatingMachineId="operatingMachineId is required"),r.noOfStichesPerYard||(m.noOfStichesPerYard="noOfStichesPerYard is required"),r.noOfItemPerThaan||(m.noOfItemPerThaan="noOfItemPerThaan is required"),m};console.log("formData",r);const M=[{field:"componentName",headerName:"Component"},{field:"fabricName",headerName:"Fabric"},{field:"vendorName",headerName:"Vendor"},{field:"colourName",headerName:"Color"},{field:"thaanQty",headerName:"Thaan Quantity"},{field:"availableQty",headerName:"Available Quantitity"},{field:"operatingMachineName",headerName:"Operating Machine"},{field:"noOfHeadsName",headerName:"Working Head"},{field:"cuttingSize",headerName:"Cutting Size"},{field:"rate",headerName:"Rate"},{field:"noOfStichesPerYard",headerName:"Stiches Per Yard"},{field:"noOfItemPerThaan",headerName:"Item Per Thaan"},{field:"totalEmbroidry",headerName:"Total Embroidry"},{field:"amountPerYard",headerName:"Amount Per Yard"},{field:"totalPcs",headerName:"Total Pcs"},{field:"totalAmount",headerName:"Total Amount"},{field:"costPerComponent",headerName:"Cost Per Component"},{field:"laserCutRate",headerName:"LaserCut Rate"},{field:"pcsForLaserCut",headerName:"Laser Cut Pcs."}];return e.jsxs(e.Fragment,{children:[e.jsxs(ce,{variant:"outlined",children:[e.jsx(ue,{className:"css-4rfrnx-MuiCardHeader-root",avatar:e.jsx(we,{src:at,sx:{background:"transparent"}}),title:"Schiffli ",titleTypographyProps:{style:{color:"white"}}}),e.jsxs(a,{container:!0,spacing:1,width:"Inherit",sx:{paddingY:2,paddingX:2},children:[e.jsxs(a,{item:!0,xs:12,md:3,children:[e.jsx(l,{fullWidth:!0,select:!0,label:"Select Collection",name:"collectionId",value:E,onChange:z,size:"small",InputLabelProps:{sx:{color:"black"}},children:fe.map(m=>e.jsx(L,{value:m.collectionId,children:m.collectionName},m.collectionId))})," "]}),e.jsx(a,{item:!0,xs:12,md:3,children:e.jsx(l,{fullWidth:!0,select:!0,label:"Select Design",name:"designId",value:r.designId,onChange:z,size:"small",InputLabelProps:{sx:{color:"black"}},children:Y.map(m=>e.jsx(L,{value:m.designId,children:m.designNo},m.designId))})}),e.jsxs(a,{item:!0,xs:12,md:3,children:[e.jsx(l,{fullWidth:!0,select:!0,label:"Batch No.",name:"batchNo",value:r.batchNo,onChange:z,size:"small",InputLabelProps:{sx:{color:"black"}},children:ee.map(m=>e.jsx(L,{value:m.batchNo,children:m.batchNo},m.batchNo))})," "]}),e.jsx(a,{item:!0,xs:12,md:3,children:e.jsx(l,{label:"Base Color",fullWidth:!0,size:"small",name:"baseColorName",value:r.baseColorName,disabled:!0,InputLabelProps:{sx:{color:"black"}},sx:m=>({...r.baseColorName!==""&&{".css-4a5t8g-MuiInputBase-input-MuiOutlinedInput-input":{backgroundColor:"#c9c9c9 !important"}},"& .MuiInputBase-input.Mui-disabled":{WebkitTextFillColor:"black"},"& .MuiInputBase-root.Mui-disabled":{backgroundColor:"#f9f9f9"},"& .MuiOutlinedInput-root.Mui-disabled .MuiOutlinedInput-notchedOutline":{},"& .MuiInputLabel-root.Mui-disabled":{color:"rgba(0, 0, 0, 0.87)"}})})})]})]}),e.jsx(de,{color:"#cc8587",sx:{height:1,width:"100%",mt:2}}),e.jsxs(ce,{variant:"outlined",children:[e.jsx(ue,{className:"css-4rfrnx-MuiCardHeader-root",avatar:e.jsx(Ze,{}),title:"Add Schiffli ",titleTypographyProps:{style:{color:"white"}},action:e.jsx(Se,{onClick:H,sx:{mt:"-18px"},children:e.jsx(Fe,{style:{color:"white"}})}),sx:{display:"flex",alignItems:"center",justifyContent:"space-between"}})," ",e.jsxs(De,{expanded:n,onChange:H,sx:{},children:[e.jsx(Ke,{expandIcon:e.jsx(Fe,{}),"aria-controls":"panel1-content",id:"panel1-header",sx:{display:"none"}}),e.jsx($e,{children:e.jsxs(a,{container:!0,spacing:1,width:"Inherit",sx:{paddingY:2,paddingX:2},children:[e.jsxs(a,{item:!0,xs:12,md:3,children:[e.jsx(l,{fullWidth:!0,select:!0,label:"Components",name:"componentId",value:r.componentId,onChange:z,size:"small",required:!0,error:!!G.componentId,helperText:G.componentId,InputLabelProps:{sx:{color:"black"}},children:S.map(m=>e.jsx(L,{value:m.componentId,children:m.componentName},m.componentId))})," "]}),e.jsx(a,{item:!0,xs:12,md:3,children:e.jsx(l,{fullWidth:!0,select:!0,label:"Select Fabric",defaultValue:"",size:"small",name:"fabricId",value:r.fabricId,onChange:z,required:!0,error:!!G.fabricId,helperText:G.fabricId,InputLabelProps:{sx:{color:"black"}},children:he.map(m=>e.jsx(L,{value:m.fabricId,children:m.fabric},m.fabricId))})}),e.jsx(a,{item:!0,xs:12,md:3,children:e.jsx(l,{fullWidth:!0,select:!0,label:"Vendors",defaultValue:"",size:"small",name:"vendorId",value:r.vendorId,onChange:z,required:!0,error:!!G.vendorId,helperText:G.vendorId,InputLabelProps:{sx:{color:"black"}},children:W.map(m=>e.jsx(L,{value:m.lookUpId,children:m.lookUpName},m.lookUpId))})}),e.jsx(a,{item:!0,xs:12,md:3,children:e.jsx(l,{fullWidth:!0,select:!0,label:"Color",size:"small",name:"colorId",value:r.colorId,onChange:z,required:!0,error:!!G.colorId,helperText:G.colorId,InputLabelProps:{sx:{color:"black"}},children:oe.map(m=>e.jsx(L,{value:m.colorId,children:m.color},m.colorId))})}),e.jsx(a,{item:!0,xs:12,md:1.5,children:e.jsx(l,{label:"Po Pcs",fullWidth:!0,size:"small",name:"poPcs",value:r.poPcs,disabled:!0,onChange:z,sx:m=>({...r.poPcs!==""&&{".css-4a5t8g-MuiInputBase-input-MuiOutlinedInput-input":{backgroundColor:"#c9c9c9 !important"}},"& .MuiInputBase-input.Mui-disabled":{WebkitTextFillColor:"black"},"& .MuiInputBase-root.Mui-disabled":{backgroundColor:"#f9f9f9"},"& .MuiOutlinedInput-root.Mui-disabled .MuiOutlinedInput-notchedOutline":{},"& .MuiInputLabel-root.Mui-disabled":{color:"rgba(0, 0, 0, 0.87)"}}),InputLabelProps:{sx:{color:"black"}}})}),e.jsx(a,{item:!0,xs:12,md:1.5,children:e.jsx(l,{label:"Available Quantity",fullWidth:!0,size:"small",name:"availableQty",value:r.availableQty,onChange:z,sx:m=>({...r.availableQty!==""&&{".css-4a5t8g-MuiInputBase-input-MuiOutlinedInput-input":{backgroundColor:"#c9c9c9 !important"}},"& .MuiInputBase-input.Mui-disabled":{WebkitTextFillColor:"black"},"& .MuiInputBase-root.Mui-disabled":{backgroundColor:"#f9f9f9"},"& .MuiOutlinedInput-root.Mui-disabled .MuiOutlinedInput-notchedOutline":{},"& .MuiInputLabel-root.Mui-disabled":{color:"rgba(0, 0, 0, 0.87)"}}),InputLabelProps:{sx:{color:"black"}}})}),e.jsx(a,{item:!0,xs:12,md:1.5,children:e.jsx(l,{label:"Thaan Quantity",fullWidth:!0,type:"number",size:"small",name:"thaanQty",value:r.thaanQty,onChange:z,required:!0,error:!!G.thaanQty,helperText:G.thaanQty,InputLabelProps:{sx:{color:"black"}}})}),e.jsx(a,{item:!0,xs:12,md:1.5,children:e.jsx(l,{fullWidth:!0,select:!0,label:"operatingMachineId",defaultValue:"",size:"small",name:"operatingMachineId",value:r.operatingMachineId,onChange:z,required:!0,error:!!G.operatingMachineId,helperText:G.operatingMachineId,InputLabelProps:{sx:{color:"black"}},children:ie.map(m=>e.jsx(L,{value:m.lookUpId,children:m.lookUpName},m.lookUpId))})}),e.jsx(a,{item:!0,xs:12,md:1.5,children:e.jsx(l,{fullWidth:!0,select:!0,label:"workingHeadId",defaultValue:"",size:"small",name:"workingHeadId",value:r.workingHeadId,onChange:z,required:!0,error:!!G.workingHeadId,helperText:G.workingHeadId,InputLabelProps:{sx:{color:"black"}},children:ge.map(m=>e.jsx(L,{value:m.lookUpId,children:m.lookUpName},m.lookUpId))})}),e.jsx(a,{item:!0,xs:12,md:1.5,children:e.jsx(l,{label:"Cutting Size",fullWidth:!0,type:"number",size:"small",name:"cuttingSize",value:r.cuttingSize,onChange:z,sx:m=>({...r.cuttingSize!==""&&{".css-4a5t8g-MuiInputBase-input-MuiOutlinedInput-input":{backgroundColor:"#c9c9c9 !important"}},"& .MuiInputBase-input.Mui-disabled":{WebkitTextFillColor:"black"},"& .MuiInputBase-root.Mui-disabled":{backgroundColor:"#f9f9f9"},"& .MuiOutlinedInput-root.Mui-disabled .MuiOutlinedInput-notchedOutline":{},"& .MuiInputLabel-root.Mui-disabled":{color:"rgba(0, 0, 0, 0.87)"}}),InputLabelProps:{sx:{color:"black"}}})}),e.jsx(a,{item:!0,xs:12,md:1.5,children:e.jsx(l,{label:"Rate",type:"number",fullWidth:!0,size:"small",name:"rate",value:r.rate,onChange:z,required:!0,error:!!G.rate,helperText:G.rate,InputLabelProps:{sx:{color:"black"}}})}),e.jsx(a,{item:!0,xs:12,md:1.5,children:e.jsx(l,{label:"No. Of Stiches Per Yard",fullWidth:!0,type:"number",size:"small",name:"noOfStichesPerYard",value:r.noOfStichesPerYard,onChange:z,required:!0,error:!!G.noOfStichesPerYard,helperText:G.noOfStichesPerYard,InputLabelProps:{sx:{color:"black"}}})}),e.jsx(a,{item:!0,xs:12,md:1.5,children:e.jsx(l,{label:"No. Of Items Per Thaan",fullWidth:!0,size:"small",type:"number",name:"noOfItemPerThaan",value:r.noOfItemPerThaan,onChange:z,required:!0,error:!!G.noOfItemPerThaan,helperText:G.noOfItemPerThaan,InputLabelProps:{sx:{color:"black"}}})}),e.jsx(a,{item:!0,xs:12,md:1.5,children:e.jsx(l,{label:"Total Embroidry",fullWidth:!0,size:"small",name:"totalEmbroidry",type:"number",value:r.totalEmbroidry,onChange:z,InputLabelProps:{sx:{color:"black"}}})}),e.jsx(a,{item:!0,xs:12,md:1.5,children:e.jsx(l,{label:"Amount Per Yard",fullWidth:!0,type:"number",size:"small",name:"amountPerYard",value:r.amountPerYard,onChange:z,InputLabelProps:{sx:{color:"black"}}})}),e.jsx(a,{item:!0,xs:12,md:1.5,children:e.jsx(l,{label:"Total Pcs",fullWidth:!0,size:"small",name:"totalPcs",value:r.totalPcs,onChange:z,InputLabelProps:{sx:{color:"black"}}})}),e.jsx(a,{item:!0,xs:12,md:1.5,children:e.jsx(l,{label:"Cost Per Component",fullWidth:!0,size:"small",name:"costPerComponent",value:r.costPerComponent,onChange:z,InputLabelProps:{sx:{color:"black"}}})}),e.jsx(a,{item:!0,xs:12,md:1.5,children:e.jsx(l,{label:"Total Amount",fullWidth:!0,size:"small",type:"number",name:"totalAmount",value:r.totalAmount,onChange:z,InputLabelProps:{sx:{color:"black"}}})}),e.jsx(a,{item:!0,xs:12,md:1.5,children:e.jsx(_e,{control:e.jsx(et,{checked:r.laserCut,onChange:be,name:"laserCut"}),label:"Laser Cut"})}),r.laserCut?e.jsx(a,{item:!0,xs:12,md:4.5,children:e.jsxs(a,{container:!0,spacing:1,width:"Inherit",children:[e.jsx(a,{item:!0,xs:12,md:6,children:e.jsx(l,{label:"Laser Cut Rate",fullWidth:!0,size:"small",name:"laserCutRate",value:r.laserCutRate,onChange:z,InputLabelProps:{sx:{color:"black"}}})}),e.jsx(a,{item:!0,xs:12,md:6,children:e.jsx(l,{label:"Pcs For LaserCut",fullWidth:!0,size:"small",name:"pcsForLaserCut",value:r.pcsForLaserCut,onChange:z,InputLabelProps:{sx:{color:"black"}}})})]})}):null,e.jsx(a,{item:!0,xs:12,textAlign:"right",sx:{mt:2},children:e.jsx(le,{variant:"contained",size:"small",onClick:Ie,children:"Save"})})]})})]})]}),e.jsx(a,{item:!0,xs:12,md:12,children:e.jsx(de,{sx:{height:1,width:"100%",marginTop:1,marginBottom:0}})}),e.jsxs(ce,{variant:"outlined",children:[e.jsx(ue,{className:"css-4rfrnx-MuiCardHeader-root",avatar:e.jsx(Le,{}),title:"View Schiffli ",titleTypographyProps:{style:{color:"white"}}}),e.jsx(a,{container:!0,spacing:2,width:"Inherit",sx:{paddingY:2,paddingX:2},children:e.jsx(a,{sx:{marginTop:2},item:!0,xs:12,children:e.jsx(ke,{iColumns:M,initialRows:V,setInitialData:f,deleteApi:"https://gecxc.com:4041/api/Schiffli/DeleteSchiffiById?schiffiId=",deleteBy:"schiffiliId",refetch:y,setAccordionExpanded:x,fileName:"Schffili List",isLoading:q})})})]})]})},Wt=wt,Ht=({additionalProcessData:i,setAdditionalProcessData:D,refetchAdditionalProcessList:q,handleClickOpen:u})=>{const{user:t}=Me(),[f,r]=o.useState([]),{enqueueSnackbar:c}=Oe(),n=f.reduce((h,I)=>h+(I.quantity??0),0).toFixed(2);console.log("Quantity",n);const[x,H]=o.useState({additionalProcessDetId:0,additionalProcessId:i.additionalProcessId||0,designId:i.designNo||"",planningHeaderId:i.planningHeaderId||0,batchNo:i.batchNo||"",componentName:i.componentName||"",componentId:i.componentId||"",colorName:i.colorName||"",colorId:i.colorId||"",fabricName:i.fabricName||"",fabricId:i.fabricId||"",uomId:i.uomId||"",uom:i.uom||"",vendorId:"",pcsPerComponent:i.pcsPerComponent||"",remainingPcsPerComponent:i.pcsPerComponent-n||"",processTypeName:i.processTypeName||"",processTypeId:i.processTypeId||"",quantity:"",ratePerPcs:0,totalAmount:0,costPerComponent:"",createdOn:new Date().toISOString(),createdBy:t.empId,lastUpdatedOn:new Date().toISOString(),LastUpdatedBy:t.empId});o.useEffect(()=>{H({...x,remainingPcsPerComponent:i.pcsPerComponent-n||""})},[f]);const{data:d}=Pe(),{data:Q,refetch:v}=ht(x.additionalProcessId,{skip:!x.additionalProcessId}),[E,N]=o.useState([]);o.useEffect(()=>{if(d){const h=d.result[0];N(h.vendorList)}},[d]),o.useEffect(()=>{Q&&r(Q.result.map((h,I)=>({id:I,...h})))},[Q,v]),console.log("initialRows",f);const A=h=>{const{name:I,value:k}=h.target;H({...x,[I]:k})};o.useEffect(()=>{const h=()=>{const k=parseFloat(x.quantity)||0,w=parseFloat(x.ratePerPcs)||0;return(k*w).toFixed(2)};H(k=>({...k,totalAmount:h()}));const I=()=>{const k=parseFloat(x.totalAmount)||0,w=parseFloat(x.poPcs)||0;return(k/w).toFixed(2)};H(k=>({...k,costPerComponent:I()}))},[x.quantity,x.ratePerPcs,x.totalAmount]);const _=async()=>{console.log(x);try{const h=await pe.post("https://gecxc.com:4041/api/AdditionalProcess/SaveAdditionalProcessDetails",x);console.log("Save response:",h.data),h.data.success?c("Schiffili saved successfully!",{variant:"success",autoHideDuration:5e3}):(c(`${h.data.message} !`,{variant:"error",autoHideDuration:5e3}),console.log("response.message",h.data.message)),v(),H(I=>({...I,vendorId:"",pcsPerComponent:i.pcsPerComponent||"",quantity:"",ratePerPcs:0,totalAmount:0,costPerComponent:"",createdOn:new Date().toISOString(),createdBy:t.empId,lastUpdatedOn:new Date().toISOString(),LastUpdatedBy:t.empId})),q()}catch(h){console.error("Error saving data:",h),c("Schiffili not saved successfully!",{variant:"error",autoHideDuration:5e3})}},J=[{field:"vendorName",headerName:"Vendor",flex:2},{field:"processType",headerName:"Process Type",flex:1},{field:"pcsPerComponent",headerName:" Pcs. Per Component",flex:1},{field:"quantity",headerName:"Quantitity",flex:1},{field:"ratePerPcs",headerName:"Rate Per Pcs.",flex:1},{field:"totalAmount",headerName:"Total Amount",flex:1}];return e.jsxs(ye,{noValidate:!0,component:"form",sx:{display:"flex",flexDirection:"column",m:"auto",width:"Inherit"},children:[e.jsxs(a,{container:!0,spacing:1,width:"Inherit",sx:{paddingY:2,paddingX:2},children:[e.jsx(a,{item:!0,xs:12,md:3,children:e.jsx(l,{fullWidth:!0,label:"Select Design",name:"designId",value:x.designId,onChange:A,size:"small",disabled:!0,sx:h=>({...x.designId!==""&&{".css-4a5t8g-MuiInputBase-input-MuiOutlinedInput-input":{backgroundColor:"#c9c9c9 !important"}},"& .MuiInputBase-input.Mui-disabled":{WebkitTextFillColor:"black"},"& .MuiInputBase-root.Mui-disabled":{backgroundColor:"#f9f9f9"},"& .MuiOutlinedInput-root.Mui-disabled .MuiOutlinedInput-notchedOutline":{},"& .MuiInputLabel-root.Mui-disabled":{color:"rgba(0, 0, 0, 0.87)"}}),InputLabelProps:{sx:{color:"black"}}})}),e.jsxs(a,{item:!0,xs:12,md:3,children:[e.jsx(l,{fullWidth:!0,label:"Batch No.",name:"batchNo",value:x.batchNo,onChange:A,size:"small",disabled:!0,sx:h=>({...x.batchNo!==""&&{".css-4a5t8g-MuiInputBase-input-MuiOutlinedInput-input":{backgroundColor:"#c9c9c9 !important"}},"& .MuiInputBase-input.Mui-disabled":{WebkitTextFillColor:"black"},"& .MuiInputBase-root.Mui-disabled":{backgroundColor:"#f9f9f9"},"& .MuiOutlinedInput-root.Mui-disabled .MuiOutlinedInput-notchedOutline":{},"& .MuiInputLabel-root.Mui-disabled":{color:"rgba(0, 0, 0, 0.87)"}}),InputLabelProps:{sx:{color:"black"}}})," "]}),e.jsxs(a,{item:!0,xs:12,md:3,children:[e.jsx(l,{fullWidth:!0,label:"Components",name:"componentName",value:x.componentName,onChange:A,size:"small",disabled:!0,sx:h=>({...x.componentName!==""&&{".css-4a5t8g-MuiInputBase-input-MuiOutlinedInput-input":{backgroundColor:"#c9c9c9 !important"}},"& .MuiInputBase-input.Mui-disabled":{WebkitTextFillColor:"black"},"& .MuiInputBase-root.Mui-disabled":{backgroundColor:"#f9f9f9"},"& .MuiOutlinedInput-root.Mui-disabled .MuiOutlinedInput-notchedOutline":{},"& .MuiInputLabel-root.Mui-disabled":{color:"rgba(0, 0, 0, 0.87)"}}),InputLabelProps:{sx:{color:"black"}}})," "]}),e.jsx(a,{item:!0,xs:12,md:3,children:e.jsx(l,{fullWidth:!0,label:"Select Fabric",defaultValue:"",size:"small",name:"fabricName",value:x.fabricName,onChange:A,disabled:!0,sx:h=>({...x.fabricName!==""&&{".css-4a5t8g-MuiInputBase-input-MuiOutlinedInput-input":{backgroundColor:"#c9c9c9 !important"}},"& .MuiInputBase-input.Mui-disabled":{WebkitTextFillColor:"black"},"& .MuiInputBase-root.Mui-disabled":{backgroundColor:"#f9f9f9"},"& .MuiOutlinedInput-root.Mui-disabled .MuiOutlinedInput-notchedOutline":{},"& .MuiInputLabel-root.Mui-disabled":{color:"rgba(0, 0, 0, 0.87)"}}),InputLabelProps:{sx:{color:"black"}}})}),e.jsx(a,{item:!0,xs:12,md:3,children:e.jsx(l,{fullWidth:!0,label:"Color",size:"small",name:"colorName",value:x.colorName,onChange:A,disabled:!0,sx:h=>({...x.colorName!==""&&{".css-4a5t8g-MuiInputBase-input-MuiOutlinedInput-input":{backgroundColor:"#c9c9c9 !important"}},"& .MuiInputBase-input.Mui-disabled":{WebkitTextFillColor:"black"},"& .MuiInputBase-root.Mui-disabled":{backgroundColor:"#f9f9f9"},"& .MuiOutlinedInput-root.Mui-disabled .MuiOutlinedInput-notchedOutline":{},"& .MuiInputLabel-root.Mui-disabled":{color:"rgba(0, 0, 0, 0.87)"}}),InputLabelProps:{sx:{color:"black"}}})}),e.jsx(a,{item:!0,xs:12,md:3,children:e.jsx(l,{fullWidth:!0,label:"Process Type",defaultValue:"",size:"small",name:"processTypeName",value:x.processTypeName,onChange:A,disabled:!0,sx:h=>({...x.processTypeName!==""&&{".css-4a5t8g-MuiInputBase-input-MuiOutlinedInput-input":{backgroundColor:"#c9c9c9 !important"}},"& .MuiInputBase-input.Mui-disabled":{WebkitTextFillColor:"black"},"& .MuiInputBase-root.Mui-disabled":{backgroundColor:"#f9f9f9"},"& .MuiOutlinedInput-root.Mui-disabled .MuiOutlinedInput-notchedOutline":{},"& .MuiInputLabel-root.Mui-disabled":{color:"rgba(0, 0, 0, 0.87)"}}),InputLabelProps:{sx:{color:"black"}}})}),e.jsx(a,{item:!0,xs:12,md:1.5,children:e.jsx(l,{label:"Pcs. Per Component",fullWidth:!0,size:"small",name:"pcsPerComponent",value:x.pcsPerComponent,onChange:A,disabled:!0,sx:h=>({...x.pcsPerComponent!==""&&{".css-4a5t8g-MuiInputBase-input-MuiOutlinedInput-input":{backgroundColor:"#c9c9c9 !important"}},"& .MuiInputBase-input.Mui-disabled":{WebkitTextFillColor:"black"},"& .MuiInputBase-root.Mui-disabled":{backgroundColor:"#f9f9f9"},"& .MuiOutlinedInput-root.Mui-disabled .MuiOutlinedInput-notchedOutline":{},"& .MuiInputLabel-root.Mui-disabled":{color:"rgba(0, 0, 0, 0.87)"}}),InputLabelProps:{sx:{color:"black"}}})}),e.jsx(a,{item:!0,xs:12,md:1.5,children:e.jsx(l,{label:"Remaining Pcs. Per Component",fullWidth:!0,size:"small",name:"remainingPcsPerComponent",value:x.remainingPcsPerComponent,onChange:A,disabled:!0,sx:h=>({...x.remainingPcsPerComponent!==""&&{".css-4a5t8g-MuiInputBase-input-MuiOutlinedInput-input":{backgroundColor:"#c9c9c9 !important"}},"& .MuiInputBase-input.Mui-disabled":{WebkitTextFillColor:"black"},"& .MuiInputBase-root.Mui-disabled":{backgroundColor:"#f9f9f9"},"& .MuiOutlinedInput-root.Mui-disabled .MuiOutlinedInput-notchedOutline":{},"& .MuiInputLabel-root.Mui-disabled":{color:"rgba(0, 0, 0, 0.87)"}}),InputLabelProps:{sx:{color:"black"}}})})]}),e.jsx(de,{color:"#921e22",sx:{height:2,width:"100%"}}),e.jsxs(a,{container:!0,spacing:1,width:"Inherit",sx:{paddingY:2,paddingX:2},children:[e.jsx(a,{item:!0,xs:12,md:3,children:e.jsx(l,{fullWidth:!0,select:!0,label:"Vendors",size:"small",name:"vendorId",value:x.vendorId,onChange:A,InputLabelProps:{sx:{color:"black"}},children:E.map(h=>e.jsx(L,{value:h.lookUpId,children:h.lookUpName},h.lookUpId))})}),e.jsx(a,{item:!0,xs:12,md:3,children:e.jsx(l,{label:"Quantity",fullWidth:!0,type:"number",size:"small",name:"quantity",value:x.quantity,onChange:A,InputLabelProps:{sx:{color:"black"}}})}),e.jsx(a,{item:!0,xs:12,md:3,children:e.jsx(l,{label:"Rate Per Pcs",type:"number",fullWidth:!0,size:"small",name:"ratePerPcs",value:x.ratePerPcs,onChange:A,InputLabelProps:{sx:{color:"black"}}})}),e.jsx(a,{item:!0,xs:12,md:3,children:e.jsx(l,{label:"Total Amount",fullWidth:!0,type:"number",size:"small",name:"totalAmount",value:x.totalAmount,onChange:A,InputLabelProps:{sx:{color:"black"}}})}),e.jsx(a,{item:!0,xs:12,md:3,children:e.jsx(l,{label:"UOM",fullWidth:!0,size:"small",name:"uom",value:x.uom,onChange:A,disabled:!0,sx:h=>({...x.uom!==""&&{".css-4a5t8g-MuiInputBase-input-MuiOutlinedInput-input":{backgroundColor:"#c9c9c9 !important"}},"& .MuiInputBase-input.Mui-disabled":{WebkitTextFillColor:"black"},"& .MuiInputBase-root.Mui-disabled":{backgroundColor:"#f9f9f9"},"& .MuiOutlinedInput-root.Mui-disabled .MuiOutlinedInput-notchedOutline":{},"& .MuiInputLabel-root.Mui-disabled":{color:"rgba(0, 0, 0, 0.87)"}}),InputLabelProps:{sx:{color:"black"}}})}),e.jsx(a,{item:!0,xs:12,textAlign:"right",sx:{mt:2},children:e.jsx(le,{variant:"contained",size:"small",onClick:_,children:"Save"})})]}),e.jsx(de,{color:"#921e22",sx:{height:2,width:"100%"}}),e.jsx(a,{container:!0,spacing:2,width:"Inherit",sx:{paddingY:2,paddingX:2},children:e.jsx(a,{sx:{marginTop:2},item:!0,xs:12,children:e.jsx(ke,{iColumns:J,initialRows:f,deleteApi:"https://gecxc.com:4041/api/AdditionalProcess/DeleteAdditionalProcessDetails?apdId=",deleteBy:"additionalProcessDetId",refetch:v,disableEdit:!0})})})]})},Rt=()=>{const{user:i}=Me(),{enqueueSnackbar:D}=Oe(),[q,u]=o.useState(!0),[t,f]=o.useState([]),[r,c]=o.useState({additionalProcessId:0,designId:"",planningHeaderId:0,batchNo:"",componentId:"",colorId:"",fabricId:"",uomId:"",baseColorName:"",poPcs:"",pcsPerComponent:"",processTypeId:"",createdOn:new Date().toISOString(),createdBy:i.empId,lastUpdatedOn:new Date().toISOString(),LastUpdatedBy:i.empId});console.log("initialData",t),o.useEffect(()=>{c({additionalProcessId:(t==null?void 0:t.additionalProcessId)||0,designId:(t==null?void 0:t.designId)||"",planningHeaderId:(t==null?void 0:t.planningHeaderId)||0,batchNo:(t==null?void 0:t.batchNo)||"",componentId:(t==null?void 0:t.componentId)||"",fabricId:(t==null?void 0:t.fabricId)||"",colorId:(t==null?void 0:t.colorId)||"",poPcs:(t==null?void 0:t.poPcs)||"",baseColorName:(t==null?void 0:t.baseColorName)||"",pcsPerComponent:(t==null?void 0:t.pcsPerComponent)||"",uomId:(t==null?void 0:t.uomId)||"",processTypeId:(t==null?void 0:t.processTypeId)||"",createdOn:(t==null?void 0:t.createdOn)||new Date().toISOString(),createdBy:(t==null?void 0:t.createdBy)||i.empId,lastUpdatedOn:new Date().toISOString(),LastUpdatedBy:i.empId})},[t]);const[n,x]=o.useState(!1),{data:H}=Ne(),[d,Q]=o.useState(""),{data:v}=Pe(),{data:E,refetch:N}=Ae(d,{skip:!d}),{data:A,refetch:_}=ze(r.designId,{skip:!r.designId}),{data:J}=We({batchNo:r.planningHeaderId,componentId:r.componentId},{skip:!r.planningHeaderId||!r.componentId}),{data:B}=He({batchNo:r.planningHeaderId,componentId:r.componentId,fabricId:r.fabricId},{skip:!r.planningHeaderId||!r.componentId||!r.fabricId}),{data:h,refetch:I}=gt(r.planningHeaderId,{skip:!r.planningHeaderId}),{data:k}=Re(r.planningHeaderId,{skip:!r.planningHeaderId});console.log("lookupData",v),console.log("collectionData",H),console.log("colorData",B);const[w,y]=o.useState([]),[j,Y]=o.useState([]),[ae,ee]=o.useState([]),[re,he]=o.useState([]),[C,W]=o.useState([]),[Z,ie]=o.useState([]),[me,ge]=o.useState([]),[te,oe]=o.useState([]),[X,V]=o.useState([]),[F,S]=o.useState([]),[se,fe]=o.useState([]);console.log("batchData",A),o.useEffect(()=>{E&&y(E.result)},[E]),o.useEffect(()=>{A&&Y(A.result)},[A]),o.useEffect(()=>{J&&ee(J.result)},[J]),o.useEffect(()=>{B&&V(B.result)},[B]),o.useEffect(()=>{k&&fe(k.result)},[k]),o.useEffect(()=>{if(v){const p=v.result[0];W(p.uomList),ie(p.processList)}},[v]),o.useEffect(()=>{h&&(u(!1),S(h.result.map((p,s)=>({id:s,...p}))))},[h,I]),o.useEffect(()=>{if(v){const p=v.result[0];he(p.vendorList),ge(p.operatingMachineList),oe(p.workingHeadList)}},[v]),console.log("initialRows",F);const be=(H==null?void 0:H.result)||[],z=p=>{const{name:s,value:b}=p.target;if(s==="collectionId")be.find(O=>O.collectionId===parseInt(b)),Q(b),S([]),u(!0),c({...r,collectionId:b,designId:"",planningHeaderId:0,batchNo:"",componentId:"",colorId:"",fabricId:"",uomId:"",baseColorName:"",poPcs:"",pcsPerComponent:"",processTypeId:"",createdOn:new Date().toISOString(),createdBy:i.empId,lastUpdatedOn:new Date().toISOString(),LastUpdatedBy:i.empId});else if(s==="designId"){const O=w.find(U=>U.designId===parseInt(b));S([]),u(!0),c({...r,designId:b,baseColorId:O?O.colorId:"",baseColorName:O?O.colorName:"",planningHeaderId:0,batchNo:"",componentId:"",colorId:"",fabricId:"",uomId:"",poPcs:"",pcsPerComponent:"",processTypeId:"",createdOn:new Date().toISOString(),createdBy:i.empId,lastUpdatedOn:new Date().toISOString(),LastUpdatedBy:i.empId})}else if(s==="batchNo"){const O=j.find(U=>U.batchNo===b);c({...r,batchNo:b,planningHeaderId:O?O.planningHeaderId:"",poPcs:O?O.poPcs:"",componentId:"",colorId:"",fabricId:"",uomId:"",pcsPerComponent:"",processTypeId:"",createdOn:new Date().toISOString(),createdBy:i.empId,lastUpdatedOn:new Date().toISOString(),LastUpdatedBy:i.empId}),x(!0)}else c({...r,[s]:b})};console.log("colors",X);const G=async()=>{console.log("formData",r);try{const p=await pe.post("https://gecxc.com:4041/api/AdditionalProcess/SaveAdditionalProcess",r);console.log("Save response:",p.data),p.data.success?D("Schiffili saved successfully!",{variant:"success",autoHideDuration:5e3}):(D(`${p.data.message} !`,{variant:"error",autoHideDuration:5e3}),console.log("response.message",p.data.message)),c(s=>({additionalProcessId:0,designId:s.designId,planningHeaderId:s.planningHeaderId,batchNo:s.batchNo,baseColorName:s.baseColorName,poPcs:s.poPcs,componentId:"",colorId:"",fabricId:"",uomId:"",pcsPerComponent:"",processTypeId:"",createdOn:new Date().toISOString(),createdBy:i.empId,lastUpdatedOn:new Date().toISOString(),LastUpdatedBy:i.empId})),I()}catch(p){console.error("Error saving data:",p),D("Schiffili not saved successfully!",{variant:"error",autoHideDuration:5e3})}};console.log("formData",r),o.forwardRef(function(s,b){return e.jsx(bt,{direction:"up",ref:b,...s})});const[ve,Ie]=o.useState({}),[P,M]=o.useState(!1),K=p=>{Ie(p),M(!0)},m=()=>{M(!1),Ie({}),I()},g=[{field:"designNo",headerName:"Design"},{field:"batchNo",headerName:"Batch"},{field:"componentName",headerName:"Component"},{field:"fabricName",headerName:"Fabric"},{field:"colorName",headerName:"Color"},{field:"processTypeName",headerName:"Process Type"},{field:"pcsPerComponent",headerName:"Pcs Per Component"},{field:"assignedQty",headerName:"Assigned Quantity"},{field:"AddVendor",headerName:"Add Vendor",renderCell:p=>e.jsx("div",{style:{display:"flex",justifyContent:"space-around"},children:e.jsx(Se,{color:"primary",onClick:()=>K(p.row),children:e.jsx(Ye,{})})})}];return e.jsxs(e.Fragment,{children:[e.jsxs(ce,{variant:"outlined",children:[e.jsx(ue,{className:"css-4rfrnx-MuiCardHeader-root",avatar:e.jsx(we,{src:at,sx:{background:"transparent"}}),title:"Additional Process ",titleTypographyProps:{style:{color:"white"}}}),e.jsxs(a,{container:!0,spacing:1,width:"Inherit",sx:{paddingY:2,paddingX:2},children:[e.jsxs(a,{item:!0,xs:12,md:3,children:[e.jsx(l,{fullWidth:!0,select:!0,label:"Select Collection",name:"collectionId",value:d,onChange:z,size:"small",InputLabelProps:{sx:{color:"black"}},children:be.map(p=>e.jsx(L,{value:p.collectionId,children:p.collectionName},p.collectionId))})," "]}),e.jsx(a,{item:!0,xs:12,md:3,children:e.jsx(l,{fullWidth:!0,select:!0,label:"Select Design",name:"designId",value:r.designId,onChange:z,size:"small",InputLabelProps:{sx:{color:"black"}},children:w.map(p=>e.jsx(L,{value:p.designId,children:p.designNo},p.designId))})}),e.jsxs(a,{item:!0,xs:12,md:3,children:[e.jsx(l,{fullWidth:!0,select:!0,label:"Batch No.",name:"batchNo",value:r.batchNo,onChange:z,size:"small",InputLabelProps:{sx:{color:"black"}},children:j.map(p=>e.jsx(L,{value:p.batchNo,children:p.batchNo},p.batchNo))})," "]}),e.jsx(a,{item:!0,xs:12,md:3,children:e.jsx(l,{label:"Base Color",fullWidth:!0,size:"small",name:"baseColorName",value:r.baseColorName,onChange:z,disabled:!0,sx:p=>({...r.baseColorName!==""&&{".css-4a5t8g-MuiInputBase-input-MuiOutlinedInput-input":{backgroundColor:"#c9c9c9 !important"}},"& .MuiInputBase-input.Mui-disabled":{WebkitTextFillColor:"black"},"& .MuiInputBase-root.Mui-disabled":{backgroundColor:"#f9f9f9"},"& .MuiOutlinedInput-root.Mui-disabled .MuiOutlinedInput-notchedOutline":{},"& .MuiInputLabel-root.Mui-disabled":{color:"rgba(0, 0, 0, 0.87)"}}),InputLabelProps:{sx:{color:"black"}}})}),e.jsxs(a,{item:!0,xs:12,md:12,children:[e.jsx(de,{color:"#921e22",sx:{height:2,width:"100%"}})," "]}),e.jsxs(a,{item:!0,xs:12,md:3,children:[e.jsx(l,{fullWidth:!0,select:!0,label:"Components",name:"componentId",value:r.componentId,onChange:z,size:"small",InputLabelProps:{sx:{color:"black"}},children:se.map(p=>e.jsx(L,{value:p.componentId,children:p.componentName},p.componentId))})," "]}),e.jsx(a,{item:!0,xs:12,md:3,children:e.jsx(l,{fullWidth:!0,select:!0,label:"Select Fabric",defaultValue:"",size:"small",name:"fabricId",value:r.fabricId,onChange:z,InputLabelProps:{sx:{color:"black"}},children:ae.map(p=>e.jsx(L,{value:p.fabricId,children:p.fabric},p.fabricId))})}),e.jsx(a,{item:!0,xs:12,md:3,children:e.jsx(l,{fullWidth:!0,select:!0,label:"Color",size:"small",name:"colorId",value:r.colorId,onChange:z,InputLabelProps:{sx:{color:"black"}},children:X.map(p=>e.jsx(L,{value:p.colorId,children:p.color},p.colorId))})}),e.jsx(a,{item:!0,xs:12,md:1.5,children:e.jsx(l,{label:"Po Pcs",fullWidth:!0,size:"small",name:"poPcs",value:r.poPcs,onChange:z,disabled:!0,sx:p=>({...r.poPcs!==""&&{".css-4a5t8g-MuiInputBase-input-MuiOutlinedInput-input":{backgroundColor:"#c9c9c9 !important"}},"& .MuiInputBase-input.Mui-disabled":{WebkitTextFillColor:"black"},"& .MuiInputBase-root.Mui-disabled":{backgroundColor:"#f9f9f9"},"& .MuiOutlinedInput-root.Mui-disabled .MuiOutlinedInput-notchedOutline":{},"& .MuiInputLabel-root.Mui-disabled":{color:"rgba(0, 0, 0, 0.87)"}}),InputLabelProps:{sx:{color:"black"}}})}),e.jsx(a,{item:!0,xs:12,md:1.5,children:e.jsx(l,{label:"Pcs. Per Component",fullWidth:!0,size:"small",name:"pcsPerComponent",value:r.pcsPerComponent,onChange:z,InputLabelProps:{sx:{color:"black"}}})}),e.jsx(a,{item:!0,xs:12,md:3,children:e.jsx(l,{fullWidth:!0,select:!0,label:"UOM",type:"number",defaultValue:140,size:"small",name:"uomId",value:r.uomId,onChange:z,InputLabelProps:{sx:{color:"black"}},children:C.map(p=>e.jsx(L,{value:p.lookUpId,children:p.lookUpName},p.lookUpId))})}),e.jsx(a,{item:!0,xs:12,md:3,children:e.jsx(l,{fullWidth:!0,select:!0,label:"Process Type",size:"small",name:"processTypeId",value:r.processTypeId,onChange:z,InputLabelProps:{sx:{color:"black"}},children:Z.map(p=>e.jsx(L,{value:p.lookUpId,children:p.lookUpName},p.lookUpId))})}),e.jsx(a,{item:!0,xs:12,textAlign:"right",sx:{mt:0},children:e.jsx(le,{variant:"contained",size:"small",onClick:G,children:"Save"})})]})]}),e.jsx(de,{color:"#cc8587",sx:{height:1,width:"100%",mt:2}}),e.jsxs(ce,{variant:"outlined",children:[e.jsx(ue,{className:"css-4rfrnx-MuiCardHeader-root",avatar:e.jsx(Le,{}),title:"View Additional Process ",titleTypographyProps:{style:{color:"white"}}}),e.jsx(a,{container:!0,spacing:2,width:"Inherit",sx:{paddingY:2,paddingX:2},children:e.jsxs(a,{sx:{marginTop:2},item:!0,xs:12,children:[e.jsx(ke,{iColumns:g,initialRows:F,setInitialData:f,deleteApi:"https://gecxc.com:4041/api/AdditionalProcess/DeleteAdditionalProcess?adId=",deleteBy:"additionalProcessId",refetch:I,setAccordionExpanded:x,fileName:"AdditionalProcess",isLoading:q}),e.jsxs(Qe,{open:P,onClose:m,fullWidth:!0,maxWidth:"xl",children:[e.jsxs(Ue,{sx:{backgroundColor:"#A11F23",color:"#ffffff",display:"flex",justifyContent:"space-between",alignItems:"center",paddingX:"24px",paddingY:"4px"},children:[e.jsx(Ce,{variant:"h4",component:"div",color:"#ffffff",gutterBottom:!0,fontSize:20,fontWeight:2,fontStyle:"normal",children:"Assign Vendors "}),e.jsx(Se,{onClick:m,sx:{color:"#ffffff"},children:e.jsx(Ge,{})})]}),e.jsxs(qe,{children:[e.jsx(Ee,{id:"alert-dialog-slide-description"}),e.jsx(Ht,{additionalProcessData:ve,setAdditionalProcessData:Ie,refetchAdditionalProcessList:I,handleClickOpen:K})]})]})]})})]})]})},Qt=Rt;function Ut({}){const[i,D]=o.useState(!0),{data:q}=Pe(),[u,t]=o.useState([]),[f,r]=o.useState([]),[c,n]=o.useState([]),[x,H]=o.useState([]),[d,Q]=o.useState([]);Me(),o.useEffect(()=>{q&&(n(q.result[0].vendorList),r(q.result[0].serviceList),t(q.result[0].serviceTypeList),Q(q.result[0].uomList))},[q]);const[v,E]=o.useState({additionalServiceId:0,collectionId:"",serviceTypeId:"",serviceListId:"",vendorId:"",poPcs:"",qty:"",uomId:"string",rate:"",totalAmount:"",costperPiece:"",uom:"",createdBy:0,createdOn:new Date().toISOString()}),N=async I=>{const{name:k,value:w}=I.target;if(console.log(`Updating ${k} to ${w}`),E({...v,[k]:w}),k==="collectionId"){const y=x.find(j=>j.collectionId===w);y&&E(j=>({...j,poPcs:y.poPcs}))}};o.useEffect(()=>{const I=()=>{const w=parseFloat(v.qty)||0,y=parseFloat(v.rate)||0;return(w*y).toFixed(2)};E(w=>({...w,totalAmount:I()}));const k=()=>{const w=parseFloat(v.poPcs)||0,y=parseFloat(v.totalAmount)||0;return(w/y).toFixed(2)};E(w=>({...w,costperPiece:k()}))},[v.qty,v.rate,v.totalAmount,v.costperPiece]);const A=async()=>{try{const I=await pe.post("https://gecxc.com:4041/api/AdditionalServices/SaveAdditionalServices",v);console.log("Form data saved:",I.data),E({additionalServiceId:0,collectionId:"",serviceTypeId:"",serviceListId:"",vendorId:"",poPcs:"",qty:"",uomId:"string",rate:"",totalAmount:"",costperPiece:""}),onSaveSuccess&&onSaveSuccess()}catch(I){console.error("Error saving data:",I)}};o.useEffect(()=>{(async()=>{try{const k=await pe.get("https://gecxc.com:4041/api/CollectionRegistration/GetCollectionList?appId=1");console.log("GetCollectionFromPlanningHeader",k),H(k.data.result)}catch(k){console.error("Error fetching design options:",k)}})()},[]);const[_,J]=o.useState([]),B=o.useCallback(async()=>{try{const I=await pe.get(`https://gecxc.com:4041/api/AdditionalServices/GetAdditionalServicesListByCollectionId?collectionId=${v.collectionId}`);Array.isArray(I.data.result)?(D(!1),J(I.data.result.map((k,w)=>({id:w,...k})))):(console.error("API returned unexpected data format:",I.data.result),J([]))}catch(I){console.error("Error fetching data:",I),J([])}},[v.collectionId]);o.useEffect(()=>{B()},[B]);const h=[{field:"collectionName",headerName:"Collection Name",flex:1},{field:"serviceType",headerName:"Service Type",flex:1},{field:"serviceListName",headerName:"Service List Name",flex:1},{field:"vendor",headerName:"Vendor",flex:1},{field:"poPcs",headerName:"PO Pieces"},{field:"qty",headerName:"Quantity"},{field:"uom",headerName:"UOM"},{field:"rate",headerName:"Rate"},{field:"totalAmount",headerName:"Total Amount"},{field:"costperPiece",headerName:"Cost per Piece"}];return e.jsxs(e.Fragment,{children:[e.jsxs(ce,{variant:"outlined",children:[e.jsx(ue,{className:"css-4rfrnx-MuiCardHeader-root",title:"Additional Services",titleTypographyProps:{style:{color:"white"}}}),e.jsxs(a,{container:!0,spacing:1,width:"Inherit",sx:{paddingY:2,paddingX:2},children:[e.jsx(a,{item:!0,xs:12,md:4,children:e.jsx(l,{fullWidth:!0,select:!0,label:"Select Collection",name:"collectionId",value:v.collectionId,onChange:N,size:"small",InputLabelProps:{sx:{color:"black"}},children:x.length>0?x.map(I=>e.jsx(L,{id:"collectionId",value:I.collectionId,children:I.collectionName},I.collectionId)):e.jsx(L,{disabled:!0,children:"No Collections Available"})})}),e.jsx(a,{item:!0,md:4,width:"inherit",paddingX:1,children:e.jsx(l,{id:"outlined-select-option",select:!0,label:"Service Type",name:"serviceTypeId",value:v.serviceTypeId,onChange:N,variant:"outlined",size:"small",fullWidth:!0,InputLabelProps:{sx:{color:"black"}},children:u.map(I=>e.jsx(L,{value:I.lookUpId,children:I.lookUpName},I.lookUpId))})}),e.jsx(a,{item:!0,md:4,width:"inherit",paddingX:1,children:e.jsx(l,{id:"outlined-select-option",select:!0,label:"Service List Id",name:"serviceListId",value:v.serviceListId,onChange:N,variant:"outlined",size:"small",fullWidth:!0,InputLabelProps:{sx:{color:"black"}},children:f.map(I=>e.jsx(L,{value:I.lookUpId,children:I.lookUpName},I.lookUpId))})}),e.jsx(a,{item:!0,xs:12,md:4,children:e.jsx(l,{fullWidth:!0,select:!0,label:"Vendor Name",size:"small",name:"vendorId",value:v.vendorId,onChange:N,InputLabelProps:{sx:{color:"black"}},children:c.map(I=>e.jsx(L,{value:I.lookUpId,children:I.lookUpName},I.lookUpId))})}),e.jsx(a,{item:!0,md:2,width:"inherit",paddingX:1,children:e.jsx(l,{id:"outlined-required",label:"PO PC's",name:"poPcs",value:v.poPcs,onChange:N,type:"number",size:"small",fullWidth:!0,disabled:!0,sx:I=>({...v.poPcs!==""&&{".css-4a5t8g-MuiInputBase-input-MuiOutlinedInput-input":{backgroundColor:"#c9c9c9 !important"}},"& .MuiInputBase-input.Mui-disabled":{WebkitTextFillColor:"black"},"& .MuiInputBase-root.Mui-disabled":{backgroundColor:"#f9f9f9"},"& .MuiOutlinedInput-root.Mui-disabled .MuiOutlinedInput-notchedOutline":{},"& .MuiInputLabel-root.Mui-disabled":{color:"rgba(0, 0, 0, 0.87)"}}),InputLabelProps:{sx:{color:"black"}}})}),e.jsx(a,{item:!0,md:2,width:"inherit",paddingX:1,children:e.jsx(l,{id:"outlined-required",label:"Qty",name:"qty",value:v.qty,onChange:N,type:"number",size:"small",required:!0,fullWidth:!0,InputLabelProps:{sx:{color:"black"}}})}),e.jsx(a,{item:!0,md:2,width:"inherit",paddingX:1,children:e.jsx(l,{fullWidth:!0,select:!0,label:"UOM",defaultValue:"",size:"small",name:"uomId",value:v.uomId,onChange:N,InputLabelProps:{sx:{color:"black"}},children:d.map(I=>e.jsx(L,{value:I.lookUpId,children:I.lookUpName},I.lookUpId))})}),e.jsx(a,{item:!0,md:2,width:"inherit",paddingX:1,children:e.jsx(l,{id:"outlined-required",label:"Rate",name:"rate",value:v.rate,onChange:N,type:"number",size:"small",fullWidth:!0,required:!0,InputLabelProps:{sx:{color:"black"}}})}),e.jsx(a,{item:!0,md:2,width:"inherit",paddingX:1,children:e.jsx(l,{id:"outlined-required",label:"Total Amount",name:"totalAmount",value:v.totalAmount,onChange:N,type:"number",size:"small",fullWidth:!0,required:!0,InputLabelProps:{sx:{color:"black"}}})}),e.jsx(a,{item:!0,md:2,width:"inherit",paddingX:1,children:e.jsx(l,{id:"outlined-required",label:"Cost per Piece",name:"costperPiece",value:v.costperPiece,onChange:N,type:"number",size:"small",required:!0,fullWidth:!0,InputLabelProps:{sx:{color:"black"}}})}),e.jsx(a,{item:!0,md:12,width:"inherit",paddingX:1,textAlign:"right",children:e.jsx(le,{variant:"contained",color:"primary",size:"small",onClick:A,children:"Save"})})]})]}),e.jsx(de,{color:"#cc8587",sx:{height:1,width:"100%",mt:2}}),e.jsxs(ce,{variant:"outlined",children:[e.jsx(ue,{className:"css-4rfrnx-MuiCardHeader-root",title:"View Additional Services",titleTypographyProps:{style:{color:"white"}}}),e.jsx(ke,{iColumns:h,initialRows:_,isLoading:i})]})]})}const Be=["Pre Planning","Fabrication","Dyeing/Printing  ","Embroidery ","Schiffli","Additional Process","Additional Services"];function _t(){const[i,D]=o.useState(0),[q,u]=o.useState(new Set),[t,f]=o.useState(null),[r,c]=o.useState([]),{enqueueSnackbar:n}=Oe(),{data:x,refetch:H}=Pe(),d=j=>{f(j.currentTarget)},Q=()=>{f(null)},v=!!t,E=v?"simple-popover":void 0,N=j=>j===1,A=j=>q.has(j),_=()=>{let j=q;A(i)&&(j=new Set(j.values()),j.delete(i)),D(Y=>Y+1),u(j)},J=()=>{D(j=>j-1)},B=()=>{if(!N(i))throw new Error("You can't skip a step that isn't optional.");D(j=>j+1),u(j=>{const Y=new Set(j.values());return Y.add(i),Y})},h=()=>{D(0)},[I,k]=o.useState({lookUpId:"",lookUpName:"",lookUpDomain:"",lookUpCategory:"",enabled:"",createdOn:new Date().toISOString()}),w=async()=>{if(!I.lookUpDomain||!I.lookUpName){n("Please fill in all required fields.",{variant:"error",autoHideDuration:5e3});return}try{const j=await pe.get(`https://gecxc.com:4041/api/Common/SaveLookUp?lookupDomain=${I.lookUpDomain}&LookUpName=${I.lookUpName}&appId=1`);return console.log("Form data saved:",j.data),n("Lookup saved successfully!",{variant:"success",autoHideDuration:5e3}),k({lookUpId:"",lookUpName:"",lookUpDomain:"",lookUpCategory:"",enabled:"",createdOn:new Date().toISOString()}),H(),j.data}catch(j){throw console.error("Error saving data:",j),n("Error saving data. Please try again.",{variant:"error",autoHideDuration:5e3}),j}},y=j=>{k({...I,[j.target.name]:j.target.value})};return o.useEffect(()=>{(async()=>{try{const Y=await pe.get("https://gecxc.com:4041/api/Common/GetLookUpDomains?appId=1");console.log("LookupData",Y),c(Y.data.result)}catch(Y){console.error("Error fetching design options:",Y)}})()},[]),e.jsxs(ye,{sx:{width:"100%"},children:[e.jsxs(a,{container:!0,spacing:1,width:"Inherit",children:[e.jsx(a,{item:!0,sm:6,children:e.jsx(Ce,{variant:"h2",gutterBottom:!0,children:"Planning Process"})}),e.jsxs(a,{item:!0,sm:6,textAlign:"right",children:[e.jsx(le,{"aria-describedby":E,variant:"outlined",size:"small",onClick:d,children:"+Lookup"}),e.jsx(Ct,{id:"mouse-over-popover",open:v,anchorEl:t,onClose:Q,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"right"},sx:{".MuiPopover-paper":{width:"300px",padding:"16px"}},children:e.jsxs(a,{container:!0,spacing:3,width:"Inherit",children:[e.jsx(a,{item:!0,sm:12,children:e.jsx(l,{fullWidth:!0,id:"outlined-select-currency",select:!0,label:"Select Lookup",size:"small",value:I.lookUpDomain,name:"lookUpDomain",onChange:y,children:r.map(j=>e.jsx(L,{value:j.lookUpDomain,children:j.lookUpDomain},j.lookUpDomain))})}),e.jsx(a,{item:!0,sm:12,children:e.jsx(l,{fullWidth:!0,label:"Add Lookup Description",value:I.lookUpName,onChange:y,name:"lookUpName",size:"small"})}),e.jsx(a,{item:!0,sm:3,textAlign:"right",children:e.jsx(le,{variant:"contained",size:"small",onClick:w,children:"Save"})})]})})]})]}),e.jsx(It,{activeStep:i,children:Be.map((j,Y)=>{const ae={},ee={};return N(Y)&&(ee.optional=e.jsx(Ce,{variant:"caption",children:"Optional"})),A(Y)&&(ae.completed=!1),e.jsx(xt,{...ae,children:e.jsxs(ft,{...ee,onClick:()=>D(Y),style:{cursor:"pointer"},children:[" ",j]})},j)})}),e.jsxs(ye,{sx:{display:"flex",flexDirection:"row",pt:2},children:[e.jsx(le,{color:"inherit",disabled:i===0,onClick:J,sx:{mr:1},children:"Back"}),e.jsx(ye,{sx:{flex:"1 1 auto"}}),N(i)&&e.jsx(le,{color:"inherit",onClick:B,sx:{mr:1},children:"Skip"}),e.jsx(le,{onClick:_,children:i===Be.length-1?"Finish":"Next"})]}),i===Be.length?e.jsxs(o.Fragment,{children:[e.jsx(Ce,{sx:{mt:2,mb:1},children:"All steps completed - you're finished"}),e.jsxs(ye,{sx:{display:"flex",flexDirection:"row",pt:2},children:[e.jsx(ye,{sx:{flex:"1 1 auto"}}),e.jsx(le,{onClick:h,children:"Reset"})]})]}):e.jsxs(o.Fragment,{children:[i===0&&e.jsx(Bt,{}),i===1&&e.jsx(yt,{}),i===2&&e.jsx(zt,{}),i===3&&e.jsx(At,{}),i===4&&e.jsx(Wt,{}),i===5&&e.jsx(Qt,{}),i===6&&e.jsx(Ut,{}),e.jsxs(ye,{sx:{display:"flex",flexDirection:"row",pt:2},children:[e.jsx(le,{color:"inherit",disabled:i===0,onClick:J,sx:{mr:1},children:"Back"}),e.jsx(ye,{sx:{flex:"1 1 auto"}}),N(i)&&e.jsx(le,{color:"inherit",onClick:B,sx:{mr:1},children:"Skip"}),e.jsx(le,{onClick:_,children:i===Be.length-1?"Finish":"Next"})]})]})]})}export{_t as default};
