import{s as oe,c as G,u as M,ad as E,j as e,C as W,d as A,G as m,T as z,ae as re,n as ie,B as N,Q as ne,M as de}from"./index-k9GWQJOu.js";import{r as s,R as P}from"./vendor-BXCbSo2_.js";import{d as le}from"./CategoryOutlined-MdM7JIJy.js";import{d as I}from"./AssignmentOutlined-DQJc0R_Q.js";import"./ReceivingDetails-DOjPavAN.js";import{u as ce,R as L,a as Q,b as F,c as $,d as H,B as ue}from"./ReuseableDataGrid-D6KGNruf.js";import{d as Y}from"./Close-CwC_dym4.js";import{S as C}from"./StatusChip-DQNIzaKK.js";import{D as pe}from"./DyeingIssuanceView-C0XubrT0.js";import{T as w}from"./TextField-Bw61L3Ab.js";import{I as X,B as k}from"./axios-CaswPiu6.js";import{M as O}from"./MenuItem-BJ2KxKJk.js";import{T as me,a as fe,b as j,c as p}from"./TabPanel-CYIvsX5V.js";import"./Skeleton-C1-xTFDk.js";oe(w)(({theme:i})=>({"& .MuiInputBase-input":{fontSize:"0.875rem",padding:"4px 6px"},width:"auto",height:"auto",minWidth:"100px",minHeight:"30px"}));const he=({formData:i})=>{ce(),G(),M();const[o,n]=s.useState([]),{data:d,error:f,isLoading:h,refetch:c}=E(i.poId,{skip:!i.poId});s.useEffect(()=>{d&&n(d.result.filter(r=>r.isRejectedOgpExists==="Y").map((r,y)=>({id:y+1,...r})))},[d,c]);const[x,u]=P.useState(!1),[a,b]=P.useState(!1),R=()=>{u(!1)};console.log("iss",a);const g=[{field:"id",headerName:"Sr#"},{field:"rtvNo",headerName:"RTV#"},{field:"fabricName",headerName:"Fabric"},{field:"vendorName",headerName:"Vendor"},{field:"rejectedQty",headerName:"Rejected",renderCell:r=>e.jsx(C,{label:r.row.rejectedQty,status:"Rejected"})},{field:"rejectionReason",headerName:"Reason"},{field:"rejectionDate",headerName:"Rejected On",valueGetter:r=>new Date(r).toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"2-digit"})},{field:"rejectionStatusName",headerName:"Status",renderCell:r=>e.jsx(C,{label:r.row.rejectionStatusName,status:"Completed"})}];return e.jsxs(W,{variant:"outlined",sx:{marginTop:2},children:[e.jsx(A,{className:"css-4rfrnx-MuiCardHeader-root",title:"View Completed RTV",titleTypographyProps:{style:{color:"white"}}}),e.jsx(m,{container:!0,spacing:1,width:"Inherit",sx:{paddingY:2,paddingX:2},children:e.jsxs(m,{item:!0,xs:12,children:[e.jsx(L,{initialRows:o,iColumns:g,hideAction:!0}),e.jsxs(Q,{open:x,onClose:R,fullWidth:!0,maxWidth:"xl",children:[e.jsxs(F,{sx:{backgroundColor:"#A11F23",color:"#ffffff",display:"flex",justifyContent:"space-between",alignItems:"center",paddingX:"24px",paddingY:"4px",mb:2.5},children:[e.jsx(z,{variant:"h4",component:"div",color:"#ffffff",gutterBottom:!0,fontSize:20,fontWeight:2,fontStyle:"normal",children:"Inspection"}),e.jsx(X,{onClick:R,sx:{color:"#ffffff"},children:e.jsx(Y,{})})]}),e.jsx($,{children:e.jsx(H,{id:"alert-dialog-slide-description"})})]})]})})]})},xe=()=>{G();const{user:i}=M(),[o,n]=s.useState({issuanceId:"",poId:"",productionId:"",ogpNumber:"",appId:i.appId,createdOn:new Date().toISOString(),createdBy:i.empId,lastUpdatedOn:new Date().toISOString(),LastUpdatedBy:i.empId}),[d,f]=s.useState([]),[h,c]=s.useState([]),[x,u]=s.useState([]),{data:a,error:b,isLoading:R,refetch:g}=E(o.poId,{skip:!o.poId}),{data:r,refetch:y}=re(o.productionId,{skip:!o.productionId}),{data:S,refetch:U}=ie(),[_,q]=s.useState([]);s.useEffect(()=>{S&&q(S.result.map((t,l)=>({id:l,...t})))},[S,U]),s.useEffect(()=>{a&&f(a.result.filter(t=>t.rejectionStatus===5&&t.isRejectedOgpExists==="N").map((t,l)=>({id:l+1,...t})))},[a,g]),s.useEffect(()=>{r&&c(r.result.map((t,l)=>({id:l+1,...t})))},[r,y]),console.log("initialRows",d);const D=t=>{const{name:l,value:T}=t.target;if(l==="poId"){const B=h.find(se=>se.poId===parseInt(T));n({...o,poId:T,issuanceId:B?B.issuanceId:""})}else n({...o,[l]:T})};console.log("formData",o);const[J,V]=s.useState(!1);s.useState(!1);const[K,Z]=s.useState(!1),ee=async t=>{Z(t),V(!0)},v=()=>{V(!1)},te=async t=>{u(t.issuanceId)},ae=[{field:"id",headerName:"Sr#"},{field:"rtvNo",headerName:"RTV#"},{field:"fabricName",headerName:"Fabric"},{field:"vendorName",headerName:"Vendor"},{field:"rejectedQty",headerName:"Rejected",renderCell:t=>e.jsx(C,{label:t.row.rejectedQty,status:"Rejected"})},{field:"rejectionReason",headerName:"Reason"},{field:"rejectionDate",headerName:"Rejected On",valueGetter:t=>new Date(t).toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"2-digit"})},{field:"rejectionStatusName",headerName:"Status",renderCell:t=>e.jsx(C,{label:t.row.rejectionStatusName,status:"Completed"})},{field:"Actions",headerName:"Actions",renderCell:t=>e.jsx("div",{style:{display:"flex",justifyContent:"space-around"},children:e.jsxs(ue,{variant:"text",size:"small",sx:{mt:1},children:[e.jsx(k,{size:"small",color:"primary",onClick:()=>ee(t.row),children:"RTV"}),e.jsx(k,{size:"small",color:"primary",onClick:()=>te(t.row),children:"POST"})]})})}];return e.jsxs(N,{sx:{width:"100%",typography:"body1"},children:[e.jsxs(W,{variant:"outlined",children:[e.jsx(A,{className:"css-4rfrnx-MuiCardHeader-root",title:"Return To Vendor",titleTypographyProps:{style:{color:"white"}}}),e.jsxs(m,{container:!0,spacing:1,width:"Inherit",sx:{paddingY:2,paddingX:2},children:[e.jsx(m,{item:!0,xs:12,md:3,children:e.jsx(w,{fullWidth:!0,select:!0,label:"Production",name:"productionId",value:o.productionId,onChange:D,size:"small",children:_.map(t=>e.jsx(O,{value:t.productionId,children:t.collectionName},t.productionId))})}),e.jsx(m,{item:!0,xs:12,md:3,children:e.jsx(w,{fullWidth:!0,select:!0,label:"PO#",name:"poId",value:o.poId,onChange:D,size:"small",children:h.map(t=>e.jsx(O,{value:t.poId,children:t.poIdName},t.poId))})}),e.jsxs(m,{item:!0,xs:12,children:[e.jsx(L,{initialRows:d,iColumns:ae,hideAction:!0}),e.jsxs(Q,{open:J,onClose:v,fullWidth:!0,maxWidth:"xl",children:[e.jsxs(F,{sx:{backgroundColor:"#A11F23",color:"#ffffff",display:"flex",justifyContent:"space-between",alignItems:"center",paddingX:"24px",paddingY:"4px"},children:[e.jsx(z,{variant:"h4",component:"div",color:"#ffffff",gutterBottom:!0,fontSize:20,fontWeight:2,fontStyle:"normal",children:"Rejection OGP"}),e.jsx(X,{onClick:v,sx:{color:"#ffffff"},children:e.jsx(Y,{})})]}),e.jsxs($,{children:[e.jsx(H,{id:"alert-dialog-slide-description"}),e.jsx(pe,{iss:K,handleClose:v,refetchData:g,isRejected:!0})]})]})]})]})]}),e.jsx(he,{formData:o})]})},Be=()=>{var c,x,u;const i=ne(),o=(c=i.state)==null?void 0:c.data,n=(u=(x=i.state)==null?void 0:x.tab)==null?void 0:u.toString();console.log("rowData",o),console.log("tab",n);const[d,f]=s.useState("1"),h=(a,b)=>{f(b),console.log("value",d)};return s.useEffect(()=>{n&&f(n)},[n]),e.jsx(de,{style:{borderWidth:1,borderStyle:"dotted",borderColor:"#a11f23",width:"auto",maxHeight:{xs:"80vh",md:"auto"},overflow:"auto"},children:e.jsx(N,{sx:{width:"100%",typography:"body1"},children:e.jsxs(me,{value:d,children:[e.jsx(N,{sx:{borderBottom:1,borderColor:"divider"},children:e.jsxs(fe,{onChange:h,children:[e.jsx(j,{icon:e.jsx(le,{}),label:"Dyeing RTV",value:"1",sx:a=>({"& .MuiTouchRipple-child":{backgroundColor:`${a.palette.primary.main} !important`}})}),e.jsx(j,{icon:e.jsx(I,{}),label:"Embroidery RTV",value:"2",sx:a=>({"& .MuiTouchRipple-child":{backgroundColor:`${a.palette.primary.main} !important`}})}),e.jsx(j,{icon:e.jsx(I,{}),label:"Schiffili RTV",value:"3",sx:a=>({"& .MuiTouchRipple-child":{backgroundColor:`${a.palette.primary.main} !important`}})}),e.jsx(j,{icon:e.jsx(I,{}),label:"Additional Process RTV",value:"4",sx:a=>({"& .MuiTouchRipple-child":{backgroundColor:`${a.palette.primary.main} !important`}})}),e.jsx(j,{icon:e.jsx(I,{}),label:"Additional Services RTV",value:"5",sx:a=>({"& .MuiTouchRipple-child":{backgroundColor:`${a.palette.primary.main} !important`}})})]})}),e.jsx(p,{value:"1",children:e.jsx(xe,{})}),e.jsx(p,{value:"2"}),e.jsx(p,{value:"3"}),e.jsx(p,{value:"4"}),e.jsx(p,{value:"5"}),e.jsx(p,{value:"6"})]})})})};export{Be as default};
