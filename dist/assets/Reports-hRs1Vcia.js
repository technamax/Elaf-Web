import{j as r,C as D,d as I,G as d}from"./index-BQnKJm_U.js";import{r as a}from"./vendor-BXCbSo2_.js";import{T as x}from"./TextField-B9bDqCXW.js";import{M as P}from"./MenuItem-CqoynPPu.js";const E=({rId:c,paramIssuanceId:n,OGPNumber:p,ogpNumber:f})=>{const[u,S]=a.useState([]),[s,h]=a.useState(""),[j,m]=a.useState(""),[g,R]=a.useState(""),i=a.useRef(null);a.useEffect(()=>{(async()=>{try{const o=await(await fetch("http://100.42.177.77:83/api/Reports/GetReportsByAppId?appId=1")).json();if(S(o.result),c){const l=o.result.find(y=>y.reportId===c);l&&(m(c),h(l.reportUrl),R(l.reportDesc))}}catch(t){console.error("Error fetching reports:",t)}})()},[c]);const w=e=>{const t=e.target.value,o=u.find(l=>l.reportId===t);m(t),h(o?o.reportUrl:""),R(o?o.reportDesc:"")};return a.useEffect(()=>{if(n){const e=i.current;if(e&&s){const t=`${s}&ParamIssuanceId=${n||""}&ParamOGP=${f||""}`;e.src=t}}if(p){const e=i.current;if(e&&s){const t=`${s}&ParamIGPNumber=${p||""}`;e.src=t}}},[s,n,p,f]),r.jsxs(D,{variant:"outlined",children:[r.jsx(I,{className:"css-4rfrnx-MuiCardHeader-root",title:"View Reports ",titleTypographyProps:{style:{color:"white"}}})," ",r.jsxs(d,{container:!0,spacing:2,width:"Inherit",sx:{paddingY:2,paddingX:2},children:[r.jsx(d,{item:!0,xs:12,md:6,children:r.jsx(x,{fullWidth:!0,select:!0,label:"Select Report",name:"selectedReport",value:c||j,onChange:w,size:"small",InputLabelProps:{sx:{color:"black"}},children:u.map(e=>r.jsx(P,{value:e.reportId,children:e.reportName},e.reportId))})}),r.jsx(d,{item:!0,xs:12,md:6,children:r.jsx(x,{fullWidth:!0,label:"Report Description",name:"selectedReportDesc",value:g,InputProps:{readOnly:!0},size:"small",InputLabelProps:{sx:{color:"black"}}})})]}),s&&r.jsx("iframe",{ref:i,src:s,style:{height:"80vh",width:"100%",border:"none",marginTop:"20px"},title:"SSRS Report"})]})};export{E as default};
