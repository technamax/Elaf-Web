import{j as e,_ as De,r as Je,i as Ze,S as et,u as Ce,c as Ne,a4 as Ae,b as Pe,a5 as Oe,a6 as Ue,a7 as Ee,a8 as Be,a9 as tt,aa as Me,C as J,d as Z,ab as Le,G as a,D as de,T as be,ac as st,ad as at,ae as rt,af as ot,ag as nt,ah as lt,B as Ie,ai as dt,aj as it}from"./index-C1TTrB0-.js";import{r}from"./vendor-BXCbSo2_.js";import{b as ye,B as _,a as se}from"./axios-B7wrOyLZ.js";import{d as ke,c as me,A as Te,e as we,f as ze,S as ct,a as ut,b as mt,F as ht}from"./Fabrication-DeM2FKEK.js";import{d as Fe}from"./VisibilityOutlined-D5GutfOA.js";import{l as We,R as Se,D as pt,a as gt,b as ft,c as xt}from"./ReuseableDataGrid-HhNFiKBw.js";import{T as n,P as It}from"./TextField-B7aHXDX8.js";import{M as P}from"./Skeleton-CDhxNUY7.js";import{A as He,F as Qe,C as Ge}from"./DataGrid-DX6mHUG0.js";import{d as bt}from"./dayjs.min-DTtJEyt-.js";import"./ExcelExport-B7r-IVNw.js";let Ve=!1;const vt=r.forwardRef(function(s,m){return Ve||(console.warn(["MUI: The Autocomplete component was moved from the lab to the core.","","You should use `import { Autocomplete } from '@mui/material'`","or `import Autocomplete from '@mui/material/Autocomplete'`"].join(`
`)),Ve=!0),e.jsx(He,De({ref:m},s))});var Ye={},jt=Ze;Object.defineProperty(Ye,"__esModule",{value:!0});var Ke=Ye.default=void 0,yt=jt(Je()),Ct=e;Ke=Ye.default=(0,yt.default)((0,Ct.jsx)("path",{d:"M21 10h-3L2 3v7l9 2-9 2v7l8-3.5V21c0 1.1.9 2 2 2h9c1.1 0 2-.9 2-2v-9c0-1.1-.9-2-2-2m0 11h-9v-9h9zm-4.5-1L13 16h2v-3h3v3h2z"}),"SendAndArchive");const St="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAACXBIWXMAAAsTAAALEwEAmpwYAAACk0lEQVR4nO2WzU4UQRSFe14CgoiMKPIqolEiIQq+gEFgFPHnFVyILI3GnQIbxxhG3IkaYxT8iUZFoxuDbokoIaNE/czNnE6KSjdT07Yb40kqqa6qW+dW3XNvdRT9R4MAHgD3640Dh/MkHQTOqMWIv9PGydOBUeCsWoz4O208PwdcxCz1xoGBKG8Abc5JPwBrataP0fY3iLcCk8C6SF4DV4HzatZf1Ny6vrfkRd4PrABV4BywE9huKpc2rA0ARaATGAe+yebgn5IfB34BD0XQCzwlHU+AA1r7CPgJlLKS94n8GtAM3CIcFaAJKGuPviwxX9XJjfxlCtGMyJLwQrbzwNeGNEFNRFVdZdrJb2ttAbizyU10SBNXQslbgR8SnMXcxagEOGyxdmxs3ZDmxjybHmWKZUdriAOnZWhqf+ZtVgyw3+HZPAZ2qX8yxIGbwCudxsdwgH3JszERtqtOVEIc+ARMKbc3xNy79r1a+xHodsYtDec8W6sl01YxQxxYVfzdWM4krDPiGEveXMHLjhMqUGshDlQTHLDNCg06MJvgwJcQB96lhMBSrddZ1y0nloDdXkbc9WwPKQSLIQ7M6rGxGuBjKMB+JEGE24A3tnfUgIo7E+p+1jTsUn8wxIEWFaJxKdrFmBwrJRSiEc2d8mz2AxPas6WuAwbgkspncZNaPyexWbuXsuaGbuQ7cDEKBbVHZEVParMeliRUPLW7eK4XcUF7NQU7YAD26NrKciLtJtJObuTXtce+KAuAI9pgXq9aj0SVhgXFvEN9y4Cjmci9kvtZmpjQw9KuOhH/kvUr1bq0xmK+bLZRHqB2nZd1Gyinp5yfUuu/1ZyRX7CfmlzIXUgLx6SH93o3ltUv6z8hf+LoX8ZvSFCuNiG5hzcAAAAASUVORK5CYII=",Pt=()=>{const f=et(),{user:s}=Ce(),{enqueueSnackbar:m}=Ne(),[t,c]=r.useState([]),[h,H]=r.useState(!1),[o,I]=r.useState({embroideryId:0,designId:"",batchNo:"",planningHeaderId:"",componentId:"",fabricId:"",vendorId:"",poPcs:"",baseColorId:"",baseColorName:"",colorId:"",availableQty:"",noOfHead:"",repeats:"",cuttingSize:"",itemsPerRepeat:"",totalPcs:"",totalAmount:"",threadStiches:"",threadRate:"",threadAmount:"",tillaStiches:"",tilaRate:"",tilaAmount:"",sequence:"",sequenceRate:"",sequenceAmount:"",isSolving:!1,solvingLayers:0,solvingInMeters:"",solvingRate:0,solvingAmount:"",threadAdditional:[],costPerComponent:"",createdBy:s.empId,createdOn:new Date().toISOString(),lastUpdatedOn:new Date().toISOString(),lastUpdatedBy:s.empId});r.useEffect(()=>{I({embroideryId:(t==null?void 0:t.embroideryId)||0,designId:(t==null?void 0:t.designId)||"",batchNo:(t==null?void 0:t.batchNo)||"",planningHeaderId:(t==null?void 0:t.planningHeaderId)||"",componentId:(t==null?void 0:t.componentId)||"",fabricId:(t==null?void 0:t.fabricId)||"",vendorId:(t==null?void 0:t.vendorId)||"",poPcs:(t==null?void 0:t.poPcs)||"",baseColorId:(t==null?void 0:t.baseColorId)||"",baseColorName:(t==null?void 0:t.baseColorName)||"",colorId:(t==null?void 0:t.colorId)||"",availableQty:(t==null?void 0:t.availableQty)||"",noOfHead:(t==null?void 0:t.noOfHead)||"",repeats:(t==null?void 0:t.repeats)||"",cuttingSize:(t==null?void 0:t.cuttingSize)||"",itemsPerRepeat:(t==null?void 0:t.itemsPerRepeat)||"",totalPcs:(t==null?void 0:t.totalPcs)||"",totalAmount:(t==null?void 0:t.totalAmount)||"",threadStiches:(t==null?void 0:t.threadStiches)||"",threadRate:(t==null?void 0:t.threadRate)||"",threadAmount:(t==null?void 0:t.threadAmount)||"",tillaStiches:(t==null?void 0:t.tillaStiches)||"",tilaRate:(t==null?void 0:t.tilaRate)||"",tilaAmount:(t==null?void 0:t.tilaAmount)||"",sequence:(t==null?void 0:t.sequence)||"",sequenceRate:(t==null?void 0:t.sequenceRate)||"",sequenceAmount:(t==null?void 0:t.sequenceAmount)||"",isSolving:(t==null?void 0:t.isSolving)||!1,solvingLayers:(t==null?void 0:t.solvingLayers)||0,solvingInMeters:(t==null?void 0:t.solvingInMeters)||"",solvingRate:(t==null?void 0:t.solvingRate)||0,solvingAmount:(t==null?void 0:t.solvingAmount)||"",threadAdditional:(t==null?void 0:t.threadAdditional)||[],costPerComponent:(t==null?void 0:t.costPerComponent)||"",createdOn:(t==null?void 0:t.createdOn)||new Date().toISOString(),createdBy:(t==null?void 0:t.createdBy)||s.empId,lastUpdatedOn:new Date().toISOString(),lastUpdatedBy:s.empId})},[t]);const G=["Boring","Pooni","Laser","Doori","Dissolving"];function V(d,x,l){return{fontWeight:x.indexOf(d)===-1?l.typography.fontWeightRegular:l.typography.fontWeightMedium}}const{data:j}=Ae(),[k,q]=r.useState(""),{data:E}=Pe(),{data:T,refetch:Y}=Oe(k,{skip:!k}),{data:B,refetch:K}=Ue(o.designId,{skip:!o.designId}),{data:p}=Ee({batchNo:o.planningHeaderId,componentId:o.componentId},{skip:!o.planningHeaderId||!o.componentId}),{data:O}=Be({batchNo:o.planningHeaderId,componentId:o.componentId,fabricId:o.fabricId},{skip:!o.planningHeaderId||!o.componentId||!o.fabricId}),{data:A,refetch:R}=tt(o.planningHeaderId,{skip:!o.planningHeaderId}),{data:y}=Me(o.planningHeaderId,{skip:!o.planningHeaderId});console.log("formData.planningHeaderId",o.planningHeaderId),console.log("collectionData",j);const[L,D]=r.useState(!1),ee=(d,x)=>{D(!L)},[he,pe]=r.useState([]),[ne,te]=r.useState([]),[ge,ae]=r.useState([]),[ie,W]=r.useState([]),[U,re]=r.useState([]),[oe,M]=r.useState([]),[X,fe]=r.useState([]),[ce,ue]=r.useState([]);console.log("batchList",ne),console.log("formData",o),r.useEffect(()=>{T&&pe(T.result)},[T]),r.useEffect(()=>{B&&te(B.result)},[B]),r.useEffect(()=>{p&&ae(p.result)},[p]),r.useEffect(()=>{O&&M(p.result)},[O]),r.useEffect(()=>{y&&ue(y.result)},[y]),r.useEffect(()=>{A&&fe(A.result.map((d,x)=>({id:x,...d})))},[A,R]),console.log("embroideryList",A),console.log("initialRows",X),r.useEffect(()=>{if(E){const d=E.result[0];W(d.vendorList),re(d.noOfHeadsList)}},[E]);const le=(j==null?void 0:j.result)||[];r.useEffect(()=>{const d=()=>{const F=parseFloat(o.repeats)||0,$=parseFloat(o.itemsPerRepeat)||0;return(F*$).toFixed(2)};I(F=>({...F,totalPcs:d()}));const x=()=>{const F=parseFloat(o.threadStiches)||0,$=parseFloat(o.threadRate)||0,xe=parseFloat(o.noOfHead)||0,je=parseFloat(o.repeats)||0;return(F/1e3*($*je*xe)).toFixed(2)};I(F=>({...F,threadAmount:x()}));const l=()=>{const F=parseFloat(o.tillaStiches)||0,$=parseFloat(o.tilaRate)||0,xe=parseFloat(o.noOfHead)||0,je=parseFloat(o.repeats)||0;return(F/1e3*($*je*xe)).toFixed(2)};I(F=>({...F,tilaAmount:l()}));const v=()=>{const F=parseFloat(o.sequence)||0,$=parseFloat(o.sequenceRate)||0,xe=parseFloat(o.noOfHead)||0,je=parseFloat(o.repeats)||0;return(F/1e3*($*je*xe)).toFixed(2)};I(F=>({...F,sequenceAmount:v()}));const C=()=>{const F=parseFloat(o.repeats)||0,$=parseFloat(o.noOfHead)||0,xe=parseFloat(o.solvingLayers)||0;return(F*$*13/39.37*xe).toFixed(2)};I(F=>({...F,solvingInMeters:C()}));const Q=()=>{const F=parseFloat(o.solvingInMeters)||0,$=parseFloat(o.solvingRate)||0;return parseFloat(o.solvingLayers),(F*$).toFixed(2)};I(F=>({...F,solvingAmount:Q()}));const ve=()=>{const F=parseFloat(o.threadAmount)||0,$=parseFloat(o.tilaAmount)||0,xe=parseFloat(o.sequenceAmount)||0,je=parseFloat(o.solvingAmount)||0;return(F+$+xe+je).toFixed(2)};I(F=>({...F,totalAmount:ve()}));const qe=()=>{const F=parseFloat(o.totalAmount)||0,$=parseFloat(o.totalPcs)||0;return(F/$).toFixed(2)};I(F=>({...F,costPerComponent:qe()}))},[o.threadAmount,o.totalAmount,o.sequenceAmount,o.solvingAmount,o.repeats,o.tilaAmount,o.itemsPerRepeat,o.threadRate,o.threadStiches,o.noOfHead,o.tilaRate,o.tillaStiches,o.sequenceRate,o.sequence,o.solvingLayers,o.solvingInMeters,o.solvingRate]);const N=d=>{const{name:x,checked:l}=d.target;I(v=>({...v,[x]:l}))},b=d=>{const{name:x,value:l}=d.target;if(x==="collectionId")le.find(v=>v.collectionId===parseInt(l)),q(l),H(!0),I({...o,collectionId:l,designId:"",batchNo:"",planningHeaderId:"",componentId:"",fabricId:"",vendorId:"",poPcs:"",baseColorId:"",baseColorName:"",colorId:"",availableQty:"",noOfHead:"",repeats:"",cuttingSize:"",itemsPerRepeat:"",totalPcs:"",totalAmount:"",threadStiches:"",threadRate:"",threadAmount:"",tillaStiches:"",tilaRate:"",tilaAmount:"",sequence:"",sequenceRate:"",sequenceAmount:"",isSolving:!1,solvingLayers:0,solvingInMeters:"",solvingRate:0,solvingAmount:"",threadAdditional:[],costPerComponent:""});else if(x==="designId"){const v=he.find(C=>C.designId===parseInt(l));I({...o,designId:l,baseColorId:v?v.colorId:"",baseColorName:v?v.colorName:"",batchNo:"",planningHeaderId:"",componentId:"",fabricId:"",vendorId:"",poPcs:"",colorId:"",availableQty:"",noOfHead:"",repeats:"",cuttingSize:"",itemsPerRepeat:"",totalPcs:"",totalAmount:"",threadStiches:"",threadRate:"",threadAmount:"",tillaStiches:"",tilaRate:"",tilaAmount:"",sequence:"",sequenceRate:"",sequenceAmount:"",isSolving:!1,solvingLayers:0,solvingInMeters:"",solvingRate:0,solvingAmount:"",threadAdditional:[],costPerComponent:""})}else if(x==="colorId"){const v=oe.find(C=>C.colorId===l);I({...o,colorId:l,availableQty:v?v.total:"",cuttingSize:v?v.cuttingSize:"",repeats:v?v.repeats:""})}else if(x==="batchNo"){const v=ne.find(C=>C.batchNo===l);I({...o,batchNo:l,planningHeaderId:v?v.planningHeaderId:"",poPcs:v?v.poPcs:"",componentId:"",fabricId:"",vendorId:"",baseColorId:"",baseColorName:"",colorId:"",availableQty:"",noOfHead:"",repeats:"",cuttingSize:"",itemsPerRepeat:"",totalPcs:"",totalAmount:"",threadStiches:"",threadRate:"",threadAmount:"",tillaStiches:"",tilaRate:"",tilaAmount:"",sequence:"",sequenceRate:"",sequenceAmount:"",isSolving:!1,solvingLayers:0,solvingInMeters:"",solvingRate:0,solvingAmount:"",threadAdditional:[],costPerComponent:""}),D(!0),H(!1)}else I({...o,[x]:l}),S(v=>({...v,[x]:""}))},[g,S]=r.useState({}),w=async()=>{const d=z();if(Object.keys(d).length>0){S(d);return}try{const x=await se.post("https://gecxc.com:4041/api/Embroidery/SaveEmbroidery",{...o,threadAdditional:o.threadAdditional.join(", ")});console.log("Save response:",x.data),x.data.success?m("Fabrication saved successfully!",{variant:"success",autoHideDuration:5e3}):(m(`${x.data.message} !`,{variant:"error",autoHideDuration:5e3}),console.log("response.message",x.data.message)),I(l=>({embroideryId:0,designId:l.designId,batchNo:l.batchNo,planningHeaderId:l.planningHeaderId,componentId:"",fabricId:"",vendorId:"",poPcs:l.poPcs,baseColorId:l.baseColorId,baseColorName:l.baseColorName,colorId:"",availableQty:"",noOfHead:"",repeats:"",cuttingSize:"",itemsPerRepeat:"",totalPcs:"",totalAmount:"",threadStiches:"",threadRate:"",threadAmount:"",tillaStiches:"",tilaRate:"",tilaAmount:"",sequence:"",sequenceRate:"",sequenceAmount:"",isSolving:!1,solvingLayers:0,solvingInMeters:"",solvingRate:0,solvingAmount:"",threadAdditional:[],costPerComponent:"",createdOn:new Date().toISOString(),createdBy:s.empId,lastUpdatedOn:new Date().toISOString(),lastUpdatedBy:s.empId})),R()}catch(x){console.error("Error saving data:",x),m("Dyeing not saved successfully!",{variant:"error",autoHideDuration:5e3})}},z=()=>{const d={};return o.fabricId||(d.fabricId="fabricId is required"),o.colorId||(d.colorId="colorId is required"),o.vendorId||(d.vendorId="vendorId is required"),o.componentId||(d.componentId="componentId is required"),o.noOfHead||(d.noOfHead="noOfHead is required"),o.itemsPerRepeat||(d.itemsPerRepeat="itemsPerRepeat is required"),o.threadStiches||(d.threadStiches="threadStiches is required"),o.threadRate||(d.threadRate="threadRate is required"),o.tillaStiches||(d.tillaStiches="tillaStiches is required"),o.tilaRate||(d.tilaRate="tilaRate is required"),o.sequence||(d.sequence="sequence is required"),o.sequenceRate||(d.sequenceRate="sequenceRate is required"),d};console.log("initialRows",X);const u=[{field:"designNo",headerName:"Design"},{field:"batchNo",headerName:"Batch No."},{field:"componentName",headerName:"Component "},{field:"fabricName",headerName:"Fabric "},{field:"vendorId",headerName:"Vendor"},{field:"poPcs",headerName:"Po Pcs"},{field:"colourName",headerName:"Color"},{field:"availableQty",headerName:"Available Qty"},{field:"noOfHeadsName",headerName:"No. Of Heads"},{field:"repeats",headerName:"Repeats"},{field:"cuttingSize",headerName:"Cutting Size"},{field:"itemsPerRepeat",headerName:"Items Per Repeat"},{field:"totalPcs",headerName:"Total Pcs"},{field:"threadStiches",headerName:"Thread Stitches"},{field:"threadRate",headerName:"Thread Rate"},{field:"threadAmount",headerName:"Thread Amount"},{field:"tillaStiches",headerName:"Tilla Stitches"},{field:"tilaRate",headerName:"Tilla Rate"},{field:"tilaAmount",headerName:"Tilla Amount"},{field:"sequence",headerName:"sequence"},{field:"sequenceRate",headerName:"Sequence Rate"},{field:"sequenceAmount",headerName:"Sequence Amount"},{field:"isSolving",headerName:"Is Solving"},{field:"solvingLayers",headerName:"Solving Layers"},{field:"solvingInMeters",headerName:"Solving In Meters"},{field:"solvingRate",headerName:"Solving Rate"},{field:"solvingAmount",headerName:"Solving Amount"},{field:"threadAdditional",headerName:"ThreadAdditional"},{field:"costPerComponent",headerName:"Cost Per Component"}];return e.jsxs(e.Fragment,{children:[e.jsxs(J,{variant:"outlined",children:[e.jsx(Z,{className:"css-4rfrnx-MuiCardHeader-root",avatar:e.jsx(Le,{src:St,sx:{background:"transparent"}}),title:"Embroidery  ",titleTypographyProps:{style:{color:"white"}}}),e.jsxs(a,{container:!0,spacing:2,width:"Inherit",sx:{paddingY:2,paddingX:2},children:[" ",e.jsxs(a,{item:!0,xs:12,md:3,children:[e.jsx(n,{fullWidth:!0,select:!0,label:"Select Collection",name:"collectionId",value:k,onChange:b,size:"small",children:le.map(d=>e.jsx(P,{value:d.collectionId,children:d.collectionName},d.collectionId))})," "]}),e.jsx(a,{item:!0,xs:12,md:3,children:e.jsx(n,{fullWidth:!0,select:!0,label:"Select Design",name:"designId",value:o.designId,onChange:b,size:"small",children:he.map(d=>e.jsx(P,{value:d.designId,children:d.designNo},d.designId))})}),e.jsxs(a,{item:!0,xs:12,md:3,children:[e.jsx(n,{fullWidth:!0,select:!0,label:"Batch No.",name:"batchNo",value:o.batchNo,onChange:b,size:"small",children:ne.map(d=>e.jsx(P,{value:d.batchNo,children:d.batchNo},d.batchNo))})," "]}),e.jsx(a,{item:!0,xs:12,md:3,children:e.jsx(n,{label:"Base Color",fullWidth:!0,size:"small",name:"baseColorName",value:o.baseColorName,onChange:b,disabled:!0})})]})]}),e.jsx(a,{item:!0,xs:12,md:12,children:e.jsx(de,{color:"#cc8587",sx:{height:1,width:"100%",mt:2}})}),e.jsxs(J,{variant:"outlined",children:[e.jsx(Z,{className:"css-4rfrnx-MuiCardHeader-root",avatar:e.jsx(ke,{}),title:"Add Embroidery",titleTypographyProps:{style:{color:"white"}},action:e.jsx(ye,{onClick:ee,sx:{mt:"-18px"},children:e.jsx(me,{style:{color:"white"}})}),sx:{display:"flex",alignItems:"center",justifyContent:"space-between"}})," ",e.jsxs(Te,{expanded:L,onChange:ee,sx:{},children:[e.jsx(we,{expandIcon:e.jsx(me,{}),"aria-controls":"panel1-content",id:"panel1-header",sx:{display:"none"}}),e.jsxs(ze,{children:[e.jsxs(a,{container:!0,spacing:2,width:"Inherit",sx:{paddingY:2,paddingX:2},children:[" ",e.jsxs(a,{item:!0,xs:12,md:3,children:[e.jsx(n,{fullWidth:!0,select:!0,label:"Components",name:"componentId",value:o.componentId,onChange:b,size:"small",required:!0,error:!!g.componentId,helperText:g.componentId,children:ce.map(d=>e.jsx(P,{value:d.componentId,children:d.componentName},d.componentId))})," "]}),e.jsx(a,{item:!0,xs:12,md:3,children:e.jsx(n,{fullWidth:!0,select:!0,label:"Select Fabric",defaultValue:"",size:"small",name:"fabricId",value:o.fabricId,onChange:b,required:!0,error:!!g.fabricId,helperText:g.fabricId,children:ge.map(d=>e.jsx(P,{value:d.fabricId,children:d.fabric},d.fabricId))})}),e.jsx(a,{item:!0,xs:12,md:3,children:e.jsx(n,{fullWidth:!0,select:!0,label:"Vendors",defaultValue:"",size:"small",name:"vendorId",value:o.vendorId,onChange:b,required:!0,error:!!g.vendorId,helperText:g.vendorId,children:ie.map(d=>e.jsx(P,{value:d.lookUpId,children:d.lookUpName},d.lookUpId))})}),e.jsx(a,{item:!0,xs:12,md:3,children:e.jsx(n,{fullWidth:!0,select:!0,label:"Color",size:"small",name:"colorId",value:o.colorId,onChange:b,required:!0,error:!!g.colorId,helperText:g.colorId,children:oe.map(d=>e.jsx(P,{value:d.colorId,children:d.color},d.colorId))})}),e.jsx(a,{item:!0,xs:12,md:1.5,children:e.jsx(n,{label:"Po Pcs",fullWidth:!0,size:"small",name:"poPcs",value:o.poPcs,onChange:b,disabled:!0})}),e.jsx(a,{item:!0,xs:12,md:1.5,children:e.jsx(n,{label:"Available Quantity",fullWidth:!0,size:"small",name:"availableQty",type:"number",value:o.availableQty,onChange:b})}),e.jsx(a,{item:!0,xs:12,md:1.5,children:e.jsx(n,{label:"Repeats",type:"number",fullWidth:!0,size:"small",name:"repeats",value:o.repeats,onChange:b})}),e.jsx(a,{item:!0,xs:12,md:1.5,children:e.jsx(n,{fullWidth:!0,select:!0,label:"Heads",defaultValue:"",size:"small",name:"noOfHead",value:o.noOfHead,onChange:b,required:!0,error:!!g.noOfHead,helperText:g.noOfHead,children:U.map(d=>e.jsx(P,{value:d.lookUpId,children:d.lookUpName},d.lookUpId))})}),e.jsx(a,{item:!0,xs:12,md:1.5,children:e.jsx(n,{label:"Cutting Size",fullWidth:!0,size:"small",name:"cuttingSize",type:"number",value:o.cuttingSize,onChange:b})}),e.jsx(a,{item:!0,xs:12,md:1.5,children:e.jsx(n,{label:"itemsPerRepeat",fullWidth:!0,type:"number",size:"small",name:"itemsPerRepeat",value:o.itemsPerRepeat,onChange:b,required:!0,error:!!g.itemsPerRepeat,helperText:g.itemsPerRepeat})}),e.jsx(a,{item:!0,xs:12,md:1.5,children:e.jsx(n,{label:"total Pcs.",fullWidth:!0,size:"small",type:"number",name:"totalPcs",value:o.totalPcs,onChange:b})}),e.jsx(a,{item:!0,xs:12,md:1.5,children:e.jsx(n,{label:"Total Amount",fullWidth:!0,type:"number",size:"small",name:"totalAmount",value:o.totalAmount,onChange:b})}),e.jsx(a,{item:!0,xs:12,md:1.5,children:e.jsx(n,{label:"Cost Per Component",fullWidth:!0,size:"small",name:"costPerComponent",value:o.costPerComponent,onChange:b})}),e.jsx(a,{item:!0,xs:12,md:3,children:e.jsx(n,{select:!0,label:"Additional",value:o.threadAdditional,name:"threadAdditional",size:"small",onChange:b,fullWidth:!0,SelectProps:{multiple:!0},children:G.map(d=>e.jsx(P,{value:d,style:V(d,o.threadAdditional,f),children:d},d))})}),e.jsx(a,{item:!0,xs:12,md:4}),e.jsx(a,{item:!0,xs:12,md:6,children:e.jsxs(a,{container:!0,spacing:1,width:"Inherit",children:[e.jsx(a,{item:!0,xs:12,md:12,children:e.jsx(be,{variant:"h5",gutterBottom:!0,children:"Thread"})})," ",e.jsx(a,{item:!0,xs:12,md:4,children:e.jsx(n,{label:"Stitches",fullWidth:!0,size:"small",type:"number",name:"threadStiches",value:o.threadStiches,onChange:b,required:!0,error:!!g.threadStiches,helperText:g.threadStiches})}),e.jsx(a,{item:!0,xs:12,md:4,children:e.jsx(n,{label:"Rate",type:"number",fullWidth:!0,size:"small",name:"threadRate",value:o.threadRate,onChange:b,required:!0,error:!!g.threadRate,helperText:g.threadRate})}),e.jsx(a,{item:!0,xs:12,md:4,children:e.jsx(n,{label:"Amount",fullWidth:!0,size:"small",type:"number",name:"threadAmount",value:o.threadAmount,onChange:b})})]})}),e.jsx(a,{item:!0,xs:12,md:6,children:e.jsxs(a,{container:!0,spacing:1,width:"Inherit",children:[e.jsx(a,{item:!0,xs:12,md:12,children:e.jsx(be,{variant:"h5",gutterBottom:!0,children:"Tilla"})})," ",e.jsx(a,{item:!0,xs:12,md:4,children:e.jsx(n,{label:"Stitches",fullWidth:!0,size:"small",type:"number",name:"tillaStiches",value:o.tillaStiches,onChange:b,required:!0,error:!!g.tillaStiches,helperText:g.tillaStiches})}),e.jsx(a,{item:!0,xs:12,md:4,children:e.jsx(n,{label:"Rate",fullWidth:!0,size:"small",type:"number",name:"tilaRate",value:o.tilaRate,onChange:b,required:!0,error:!!g.tilaRate,helperText:g.tilaRate})}),e.jsx(a,{item:!0,xs:12,md:4,children:e.jsx(n,{label:"Amount",fullWidth:!0,size:"small",name:"tilaAmount",value:o.tilaAmount,onChange:b})})]})}),e.jsxs(a,{item:!0,xs:12,md:6,children:[e.jsxs(a,{container:!0,spacing:1,width:"Inherit",children:[e.jsx(a,{item:!0,xs:12,md:12,children:e.jsx(be,{variant:"h5",gutterBottom:!0,children:"Sequence"})})," ",e.jsx(a,{item:!0,xs:12,md:4,children:e.jsx(n,{label:"Sequence",fullWidth:!0,size:"small",name:"sequence",type:"number",value:o.sequence,onChange:b,required:!0,error:!!g.sequence,helperText:g.sequence})}),e.jsx(a,{item:!0,xs:12,md:4,children:e.jsx(n,{label:"Rate",fullWidth:!0,type:"number",size:"small",name:"sequenceRate",value:o.sequenceRate,onChange:b,required:!0,error:!!g.sequenceRate,helperText:g.sequenceRate})}),e.jsx(a,{item:!0,xs:12,md:4,children:e.jsx(n,{label:"Amount",fullWidth:!0,size:"small",name:"sequenceAmount",value:o.sequenceAmount,onChange:b})})]})," "]}),o.isSolving?e.jsx(a,{item:!0,xs:12,md:6,children:e.jsxs(a,{container:!0,spacing:1,width:"Inherit",children:[e.jsx(a,{item:!0,xs:12,md:12,children:e.jsx(be,{variant:"h5",gutterBottom:!0,children:"Solving"})})," ",e.jsx(a,{item:!0,xs:12,md:3,children:e.jsx(n,{label:"Layers",fullWidth:!0,size:"small",type:"number",name:"solvingLayers",value:o.solvingLayers,onChange:b})}),e.jsx(a,{item:!0,xs:12,md:3,children:e.jsx(n,{label:"Meters",type:"number",fullWidth:!0,size:"small",name:"solvingInMeters",value:o.solvingInMeters,onChange:b})}),e.jsx(a,{item:!0,xs:12,md:3,children:e.jsx(n,{label:"Rate",fullWidth:!0,type:"number",size:"small",name:"solvingRate",value:o.solvingRate,onChange:b})}),e.jsx(a,{item:!0,xs:12,md:3,children:e.jsx(n,{label:"Amount",fullWidth:!0,size:"small",type:"number",name:"solvingAmount",value:o.solvingAmount,onChange:b})})]})}):null,e.jsx(a,{item:!0,xs:12,md:12,children:e.jsx(Qe,{control:e.jsx(Ge,{checked:o.isSolving,onChange:N,name:"isSolving"}),label:"isSolving"})}),e.jsx(a,{item:!0,xs:12,textAlign:"right",sx:{mt:2},children:e.jsx(_,{variant:"contained",size:"small",onClick:w,children:"Save"})})]})," "]})," "]})]}),e.jsx(a,{item:!0,xs:12,md:12,children:e.jsx(de,{sx:{height:1,width:"100%",marginTop:1,marginBottom:0}})}),e.jsxs(J,{variant:"outlined",children:[e.jsx(Z,{className:"css-4rfrnx-MuiCardHeader-root",avatar:e.jsx(Fe,{}),title:"View Embroidery ",titleTypographyProps:{style:{color:"white"}}})," ",e.jsx(a,{container:!0,spacing:2,width:"Inherit",sx:{paddingY:2,paddingX:2},children:e.jsxs(a,{sx:{marginTop:2},item:!0,xs:12,children:[" ",h?e.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"},children:e.jsx("img",{src:We,alt:"Loading",style:{width:200,height:200}})}):e.jsx(Se,{iColumns:u,initialRows:X,setInitialData:c,deleteApi:"https://gecxc.com:4041/api/Embroidery/DeleteEmbroideryById?embroideryId=",deleteBy:"embroideryId",refetch:R,setAccordionExpanded:D,fileName:"Embroidery List"})]})})]})]})},Nt=Pt,At=()=>{const{user:f}=Ce();console.log("user",f);const[s,m]=r.useState([]),[t,c]=r.useState([]),[h,H]=r.useState({planningId:0,collectionId:"",baseColorId:"",baseColorName:"",noOfDesigns:"",noOfColors:"",planningHeaderId:"",designId:"",batchNo:"",componentId:"",cuttingSize:"",colorId:"",fabricId:"",noOfHeads:"",repeats:"",repeatSize:"",uomId:"",totalFabric:"",shrinkage:"",wastage:"",total:"",appId:1,createdOn:new Date().toISOString(),createdBy:f.empId,lastUpdatedBy:f.empId,lastUpdatedOn:new Date().toISOString(),isSchiffili:!1,repeatsInMtr:""});console.log("formData",h),r.useEffect(()=>{H({planningId:(s==null?void 0:s.planningId)||0,collectionId:(s==null?void 0:s.collectionId)||"",baseColorId:(s==null?void 0:s.baseColorId)||"",baseColorName:(s==null?void 0:s.baseColorName)||"",noOfDesigns:(s==null?void 0:s.noOfDesigns)||"",noOfColors:(s==null?void 0:s.noOfColors)||"",planningHeaderId:(s==null?void 0:s.planningHeaderId)||"",designId:(s==null?void 0:s.designId)||"",batchNo:(s==null?void 0:s.batchNo)||"",componentId:(s==null?void 0:s.componentId)||"",cuttingSize:(s==null?void 0:s.cuttingSize)||"",colorId:(s==null?void 0:s.colorId)||"",fabricId:(s==null?void 0:s.fabricId)||"",noOfHeads:(s==null?void 0:s.noOfHeads)||"",repeats:(s==null?void 0:s.repeats)||"",repeatSize:(s==null?void 0:s.repeatSize)||"",uomId:(s==null?void 0:s.uomId)||"",totalFabric:(s==null?void 0:s.totalFabric)||"",shrinkage:(s==null?void 0:s.shrinkage)||"",wastage:(s==null?void 0:s.wastage)||"",total:(s==null?void 0:s.total)||"",appId:1,createdOn:(s==null?void 0:s.createdOn)||new Date().toISOString(),createdBy:(s==null?void 0:s.createdBy)||f.empId,lastUpdatedBy:f.empId,lastUpdatedOn:new Date().toISOString(),isSchiffili:(s==null?void 0:s.isSchiffili)||!1,repeatsInMtr:(s==null?void 0:s.repeatsInMtr)||""})},[s]);const{data:o}=Ae(),[I,G]=r.useState(""),{data:V,refetch:j}=Oe(I,{skip:!I}),{data:k,refetch:q}=st(h.planningHeaderId,{skip:!h.planningHeaderId}),[E,T]=r.useState([]),{enqueueSnackbar:Y}=Ne();r.useEffect(()=>{V&&(T(V.result),j())},[V]),r.useEffect(()=>{k&&c(k.result.map((u,i)=>({id:i,...u})))},[k,q]),console.log("designList",E),console.log("collectionData",o);const B=(o==null?void 0:o.result)||[],[K,p]=r.useState(!1),[O,A]=r.useState([]),[R,y]=r.useState([]),[L,D]=r.useState([]),[ee,he]=r.useState([]),[pe,ne]=r.useState([]),[te,ge]=r.useState([]);r.useEffect(()=>{(async()=>{try{const d=(await se.get("https://gecxc.com:4041/API/Common/GetPrePlanningLookUp?appID=1")).data.result[0];A(d.componentList),D(d.colorList),y(d.fabricList),ne(d.noOfHeadsList),he(d.uom)}catch(i){console.error("Error fetching pre-planning lookup data:",i)}})()},[]),r.useEffect(()=>{const u=async i=>{try{const d=await se.get(`https://gecxc.com:4041/api/PrePlanning/GetPrePlanningHeaderByDesignId?designId=${i}`);console.log(d.data),ge(d.data.result)}catch(d){console.error("Error fetching pre-planning lookup data:",d)}};h.designId&&u(h.designId)},[h.designId,h.planningHeaderId]),r.useEffect(()=>{const u=()=>{const l=parseFloat(h.repeats)||0,v=parseFloat(h.repeatSize)||0,C=(l*v).toFixed(2);return parseFloat(C).toLocaleString()};H(l=>({...l,totalFabric:u()}));const i=()=>{const l=parseFloat(h.totalFabric.replace(/,/g,""))||0,v=parseFloat(h.shrinkage)||0,C=parseFloat(h.wastage)||0,Q=(l*(100+(v+C))/100).toFixed(2);return parseFloat(Q).toLocaleString()};H(l=>({...l,total:i()}));const d=()=>(parseFloat(h.repeats),(.9144*(parseFloat(h.repeatSize)||0)).toFixed(2));H(l=>({...l,repeatsInMtr:d()}));const x=()=>{const l=parseFloat(h.repeats)||0;return((parseFloat(h.repeatsInMtr)||0)*l).toFixed(2)};H(l=>({...l,totalFabric:l.isSchiffili?x():u()}))},[h.repeats,h.repeatSize,h.totalFabric,h.shrinkage,h.wastage,h.repeatsInMtr,h.isSchiffili]);const[ae,ie]=r.useState(!1);r.useState(!1);const W=u=>{const{name:i,value:d}=u.target;if(i==="collectionId"){const x=B.find(l=>l.collectionId===parseInt(d));p(!0),G(d),H({...h,componentId:"",cuttingSize:"",colorId:"",fabricId:"",noOfHeads:"",repeats:"",repeatSize:"",uomId:"",totalFabric:"",shrinkage:"",wastage:"",total:"",collectionId:d,noOfDesigns:x?x.noOfDesigns:"",noOfColors:x?x.noOfColors:""})}else if(i==="designId"){const x=E.find(l=>l.designId===parseInt(d));H({...h,componentId:"",cuttingSize:"",colorId:"",fabricId:"",noOfHeads:"",repeats:"",repeatSize:"",uomId:"",totalFabric:"",shrinkage:"",wastage:"",total:"",designId:d,baseColorId:x?x.colorId:"",baseColorName:x?x.colorName:""})}else if(i==="batchNo"){const x=te.find(l=>l.batchNo===d);H({...h,componentId:"",cuttingSize:"",colorId:"",fabricId:"",noOfHeads:"",repeats:"",repeatSize:"",uomId:"",totalFabric:"",shrinkage:"",wastage:"",total:"",batchNo:d,planningHeaderId:x?x.planningHeaderId:""}),ie(!0),p(!1)}else H({...h,[i]:d})},[U,re]=r.useState({}),oe=async()=>{const u=M();if(Object.keys(u).length>0){re(u);return}try{const i={...h,totalFabric:parseFloat(h.totalFabric.replace(/,/g,"")),total:parseFloat(h.total.replace(/,/g,""))},d=await se.post("https://gecxc.com:4041/api/PrePlanning/SavePrePlanning",i);console.log("Data saved successfully:",d.data),console.log("Save response:",d.data),d.data.success?Y("Fabrication saved successfully!",{variant:"success",autoHideDuration:5e3}):(Y(`${d.data.message} !`,{variant:"error",autoHideDuration:5e3}),console.log("response.message",d.data.message)),H(x=>({planningId:0,collectionId:x.collectionId,designId:x.designId,batchNo:x.batchNo,planningHeaderId:x.planningHeaderId,baseColorId:x.baseColorId,baseColorName:x.baseColorName,noOfDesigns:x.noOfDesigns,noOfColors:x.noOfColors,componentId:"",cuttingSize:"",colorId:"",fabricId:"",noOfHeads:"",repeats:"",repeatSize:"",uomId:"",totalFabric:"",shrinkage:"",wastage:"",total:"",appId:1,createdOn:new Date().toISOString(),createdBy:f.empId,lastUpdatedOn:new Date().toISOString(),lastUpdatedBy:f.empId,isSchiffili:!1,repeatsInMtr:""})),q()}catch(i){console.error("Error saving data:",i),Y("Pre Planning not saved successfully!",{variant:"error",autoHideDuration:5e3})}},M=()=>{const u={};return h.componentId||(u.componentId="componentId is required"),h.colorId||(u.colorId="colorId is required"),h.fabricId||(u.fabricId="fabricId is required"),h.cuttingSize||(u.cuttingSize="cuttingSize is required"),h.noOfHeads||(u.noOfHeads="noOfHeads is required"),h.repeats||(u.repeats="repeats is required"),h.repeatSize||(u.repeatSize="repeatSize is required"),h.uomId||(u.uomId="uomId is required"),h.shrinkage||(u.shrinkage="shrinkage is required"),h.wastage||(u.wastage="wastage is required"),u},X=u=>{const{name:i,checked:d}=u.target;H(x=>({...x,[i]:d,uomId:d?139:x.uomId}))};console.log("initialRows",t);const fe=t.reduce((u,i)=>u+(i.totalFabric??0),0).toFixed(2),ce=parseFloat(fe).toLocaleString();console.log("localizedTotalFabric",ce);const ue=t.reduce((u,i)=>u+(i.total??0),0).toFixed(2),le=parseFloat(ue).toLocaleString(),N=[...t,{id:"TOTAL_FABRIC",label:"Total Fabric",totalFabric:ce,total:le}],b={sortable:!1,pinnable:!1,hideable:!1};console.log("rows",N);const g=[{field:"componentName",headerName:"Component",...b,colSpan:(u,i)=>{if(i.id==="TOTAL_FABRIC")return 7},valueGetter:(u,i)=>i.id==="TOTAL_FABRIC"?i.label:u},{field:"color",headerName:"Color",...b},{field:"cuttingSize",headerName:"Cutting Size",...b},{field:"fabric",headerName:"Fabrication",...b},{field:"noOfHeadName",headerName:"No. Of Heads",...b},{field:"repeats",headerName:"Repeats",valueGetter:u=>u.toLocaleString(),...b},{field:"repeatSize",headerName:"Repeat Size",valueGetter:u=>u.toLocaleString(),...b},{field:"totalFabric",headerName:"Total Fabric",valueGetter:u=>u.toLocaleString(),...b},{field:"uom",headerName:"UOM",colSpan:(u,i)=>{if(i.id==="TOTAL_FABRIC")return 4},valueGetter:(u,i)=>i.id==="TOTAL_FABRIC"?"OverAll Total":u},{field:"isSchiffili",headerName:"Is Shiffili"},{field:"shrinkage",headerName:"Shrinkage %"},{field:"wastage",headerName:"Wastage %"},{field:"total",headerName:"Total",valueGetter:u=>u.toLocaleString(),colSpan:(u,i)=>{if(i.id==="TOTAL_FABRIC")return 2}}],S=({row:u,field:i})=>u.id==="TOTAL_FABRIC"&&(i==="componentName"||i==="uom")?"bold":"";console.log("batchList:",te);const w="https://gecxc.com:4041/api/PrePlanning/DeletePreplanningByPlanningId?PlanningId=",z=(u,i)=>{ie(!ae)};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"CardHeader",children:e.jsxs(J,{variant:"outlined",children:[e.jsx(Z,{className:"css-4rfrnx-MuiCardHeader-root",avatar:e.jsx(Ke,{}),title:"Pre Planning",titleTypographyProps:{style:{color:"white"}},children:" "}),e.jsxs(a,{container:!0,spacing:2,width:"Inherit",sx:{paddingY:2,paddingX:2},children:[e.jsxs(a,{item:!0,xs:12,md:2,children:[e.jsx(n,{fullWidth:!0,select:!0,label:"Select Collection",name:"collectionId",value:h.collectionId,onChange:W,size:"small",required:!0,children:B.map(u=>e.jsx(P,{value:u.collectionId,children:u.collectionName},u.collectionId))})," "]}),e.jsx(a,{item:!0,xs:12,md:2,children:e.jsx(n,{fullWidth:!0,select:!0,label:"Select Design",name:"designId",value:h.designId,onChange:W,size:"small",required:!0,children:E.map(u=>e.jsx(P,{value:u.designId,children:u.designNo},u.designId))})}),e.jsxs(a,{item:!0,xs:12,md:2,children:[e.jsx(n,{fullWidth:!0,select:!0,label:"Batch No.",name:"batchNo",value:h.batchNo,onChange:W,size:"small",required:!0,children:te.map(u=>e.jsx(P,{value:u.batchNo,children:u.batchNo},u.batchNo))})," "]}),e.jsx(a,{item:!0,xs:12,md:2,children:e.jsx(n,{label:"No of Design",fullWidth:!0,size:"small",name:"noOfDesigns",value:h.noOfDesigns,onChange:W,disabled:!0})}),e.jsx(a,{item:!0,xs:12,md:2,children:e.jsx(n,{label:"No of Color",fullWidth:!0,size:"small",name:"noOfColors",value:h.noOfColors,onChange:W,disabled:!0})}),e.jsx(a,{item:!0,xs:12,md:2,children:e.jsx(n,{label:"Base Color",fullWidth:!0,size:"small",name:"baseColorName",value:h.baseColorName,onChange:W,disabled:!0})})]})]})}),e.jsxs(J,{variant:"outlined",children:[e.jsx(Z,{className:"MainCard",avatar:e.jsx(ke,{}),title:"Add Pre Planning",titleTypographyProps:{style:{color:"white"}},action:e.jsx(ye,{onClick:z,sx:{mt:"-18px"},children:e.jsx(me,{style:{color:"white"}})}),sx:{display:"flex",alignItems:"center",justifyContent:"space-between"}}),e.jsxs(Te,{expanded:ae,onChange:z,sx:{},children:[e.jsx(we,{expandIcon:e.jsx(me,{}),"aria-controls":"panel1-content",id:"panel1-header",sx:{display:"none"}}),e.jsx(ze,{children:e.jsxs(a,{container:!0,spacing:2,width:"Inherit",sx:{paddingY:2,paddingX:2},children:[e.jsx(a,{item:!0,xs:12,md:2,children:e.jsx(He,{fullWidth:!0,options:O,getOptionLabel:u=>u.lookUpName,value:O.find(u=>u.lookUpId===h.componentId)||null,onChange:(u,i)=>{W({target:{name:"componentId",value:i?i.lookUpId:""}})},renderOption:(u,i)=>{const{lookUpName:d}=i;return e.jsx("span",{...u,children:d})},renderInput:u=>e.jsx(n,{...u,label:"Select Component",size:"small",name:"componentId",value:h.componentId,required:!0,error:!!U.componentId,helperText:U.componentId,sx:{backgroundColor:"white","& input":{backgroundColor:"white"}}}),PaperComponent:({children:u})=>e.jsx("div",{style:{backgroundColor:"white"},children:u})})}),e.jsxs(a,{item:!0,xs:12,md:2,children:[" ",e.jsx(He,{fullWidth:!0,options:L,getOptionLabel:u=>u.lookUpName,value:L.find(u=>u.lookUpId===h.colorId)||null,onChange:(u,i)=>{W({target:{name:"colorId",value:i?i.lookUpId:""}})},renderInput:u=>e.jsx(n,{...u,label:"Color",size:"small",value:h.colorId,name:"colorId",required:!0,error:!!U.colorId,helperText:U.colorId,sx:{backgroundColor:"white","& input":{backgroundColor:"white"}}}),PaperComponent:({children:u})=>e.jsx("div",{style:{backgroundColor:"white"},children:u})})]}),e.jsx(a,{item:!0,xs:12,md:2,children:e.jsx(n,{label:"Cutting Size",fullWidth:!0,size:"small",name:"cuttingSize",type:"number",value:h.cuttingSize,onChange:W,required:!0,error:!!U.cuttingSize,helperText:U.cuttingSize})}),e.jsx(a,{item:!0,xs:12,md:2,children:e.jsx(He,{fullWidth:!0,options:R,getOptionLabel:u=>u.lookUpName,value:R.find(u=>u.lookUpId===h.fabricId)||null,onChange:(u,i)=>{W({target:{name:"fabricId",value:i?i.lookUpId:""}})},renderInput:u=>e.jsx(n,{...u,label:"Fabrication",size:"small",name:"fabricId",value:h.fabricId,required:!0,error:!!U.fabricId,helperText:U.fabricId,sx:{backgroundColor:"white","& input":{backgroundColor:"white"}}}),PaperComponent:({children:u})=>e.jsx("div",{style:{backgroundColor:"white"},children:u})})}),e.jsx(a,{item:!0,xs:12,md:2,children:e.jsx(n,{fullWidth:!0,select:!0,label:"No of Heads",defaultValue:"",size:"small",name:"noOfHeads",value:h.noOfHeads,onChange:W,error:!!U.noOfHeads,helperText:U.noOfHeads,required:!0,children:pe.map(u=>e.jsx(P,{value:u.lookUpId,children:u.lookUpName},u.lookUpId))})}),e.jsx(a,{item:!0,xs:12,md:2,children:e.jsx(n,{label:"Repeats",fullWidth:!0,size:"small",name:"repeats",type:"number",value:h.repeats,onChange:W,error:!!U.repeats,helperText:U.repeats,required:!0})}),e.jsx(a,{item:!0,xs:12,md:2,children:e.jsx(n,{label:"Repeat Size",fullWidth:!0,type:"number",size:"small",name:"repeatSize",value:h.repeatSize,onChange:W,error:!!U.repeatSize,helperText:U.repeatSize,required:!0})}),e.jsx(a,{item:!0,xs:12,md:2,children:e.jsx(n,{label:"Total Fabric",fullWidth:!0,size:"small",name:"totalFabric",value:h.totalFabric,onChange:W})}),e.jsx(a,{item:!0,xs:12,md:2,children:e.jsx(n,{fullWidth:!0,select:!0,label:"UOM",type:"number",defaultValue:"",size:"small",name:"uomId",value:h.uomId,onChange:W,error:!!U.uomId,helperText:U.uomId,required:!0,disabled:h.isSchiffili,children:ee.map(u=>e.jsx(P,{value:u.lookUpId,children:u.lookUpName},u.lookUpId))})}),e.jsx(a,{item:!0,xs:12,md:2,children:e.jsx(n,{label:"Shrinkage %",fullWidth:!0,size:"small",type:"number",name:"shrinkage",value:h.shrinkage,onChange:W,error:!!U.shrinkage,helperText:U.shrinkage,required:!0})}),e.jsx(a,{item:!0,xs:12,md:2,children:e.jsx(n,{label:"Wastage %",fullWidth:!0,size:"small",type:"number",name:"wastage",value:h.wastage,onChange:W,error:!!U.wastage,helperText:U.wastage,required:!0})}),e.jsx(a,{item:!0,xs:12,md:2,children:e.jsx(n,{label:"Total",fullWidth:!0,size:"small",name:"total",value:h.total,onChange:W})}),e.jsx(a,{item:!0,xs:12,md:2,textAlign:"right",children:e.jsx(Qe,{control:e.jsx(Ge,{checked:h.isSchiffili,onChange:X,name:"isSchiffili"}),label:"Is Schiffli"})}),h.isSchiffili?e.jsx(a,{item:!0,xs:12,md:6,children:e.jsx(a,{container:!0,spacing:1,width:"Inherit",children:e.jsx(a,{item:!0,xs:12,md:4,children:e.jsx(n,{label:"repeat in mtr",fullWidth:!0,size:"small",name:"repeatsInMtr",disabled:!0,value:h.repeatsInMtr,onChange:W})})})}):null,e.jsx(a,{item:!0,xs:12,textAlign:"right",children:e.jsx(_,{variant:"contained",size:"small",onClick:oe,children:"Save"})})]})})]})]}),e.jsx(a,{item:!0,xs:12,md:12,children:e.jsx(de,{sx:{height:1,width:"100%",marginTop:1,marginBottom:0}})}),e.jsxs(J,{variant:"outlined",children:[e.jsx(Z,{className:"MainCard",avatar:e.jsx(Fe,{}),title:"View",titleTypographyProps:{style:{color:"white"}}}),e.jsx(a,{sx:{paddingY:1,paddingX:1},children:e.jsx(a,{sx:{},item:!0,xs:12,children:K?e.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"},children:e.jsx("img",{src:We,alt:"Loading",style:{width:200,height:200}})}):e.jsx(Se,{iColumns:g,initialRows:N,setInitialData:m,deleteApi:w,deleteBy:"planningId",refetch:q,getCellClassName:S,setAccordionExpanded:ie,fileName:"PrePlanningList"})})})]})]})},Ot=At,kt="/assets/roller-ezgif.com-instagif-CY-x4C-U.gif",Tt=()=>{const{user:f}=Ce();console.log("user",f);const[s,m]=r.useState([]),[t,c]=r.useState({dpId:0,designId:"",batchNo:"",planningHeaderId:"",fabricId:"",colorId:"",color:"",vendorId:"",processType:"",AvailableQty:"",Shrinkage:"",Wastage:"",OutputQty:"",UOM:"",uomId:"",RatePerUOM:"",UnitRatePerPo:"",TotalExclGst:"",GST:"0",TotalIncludingGst:"",poPcs:"",baseColorName:"",createdBy:f.empId,createdOn:new Date().toISOString(),lastUpdatedOn:new Date().toISOString(),lastUpdatedBy:f.empId});r.useEffect(()=>{c({dpId:s.dpId||0,designId:(s==null?void 0:s.designId)||"",planningHeaderId:(s==null?void 0:s.planningHeaderId)||0,batchNo:(s==null?void 0:s.batchNo)||"",fabricId:(s==null?void 0:s.fabricId)||"",colorId:(s==null?void 0:s.colorId)||"",color:(s==null?void 0:s.color)||"",vendorId:(s==null?void 0:s.vendorId)||"",processType:(s==null?void 0:s.processType)||"",AvailableQty:(s==null?void 0:s.availableQty)||"",Shrinkage:(s==null?void 0:s.shrinkage)||"",Wastage:(s==null?void 0:s.wastage)||"",OutputQty:(s==null?void 0:s.outputQty)||0,UOM:(s==null?void 0:s.uom)||0,uomId:(s==null?void 0:s.uomId)||"",RatePerUOM:(s==null?void 0:s.ratePerUOM)||0,UnitRatePerPo:(s==null?void 0:s.unitRatePerPo)||"",TotalExclGst:(s==null?void 0:s.totalExclGst)||"",GST:(s==null?void 0:s.gst)||"",TotalIncludingGst:(s==null?void 0:s.totalIncludingGst)||"",poPcs:(s==null?void 0:s.poPcs)||0,baseColorName:(s==null?void 0:s.baseColorName)||0,createdOn:(s==null?void 0:s.createdOn)||new Date().toISOString(),createdBy:(s==null?void 0:s.createdBy)||f.empId,lastUpdatedOn:new Date().toISOString(),lastUpdatedBy:f.empId})},[s]);const{enqueueSnackbar:h}=Ne(),[H,o]=r.useState(!1);console.log("Dyeing form data to send",t);const{data:I}=Ae(),[G,V]=r.useState(""),{data:j}=Pe(),{data:k,refetch:q}=Oe(G,{skip:!G}),{data:E,refetch:T}=Ue(t.designId,{skip:!t.designId}),{data:Y}=at(t.planningHeaderId,{skip:!t.planningHeaderId}),{data:B}=rt({fabricId:t.fabricId,planningHeaderId:t.planningHeaderId},{skip:!t.fabricId||!t.planningHeaderId}),{data:K,refetch:p}=ot(t.planningHeaderId,{skip:!t.planningHeaderId}),[O,A]=r.useState([]),[R,y]=r.useState([]),[L,D]=r.useState([]),[ee,he]=r.useState([]),[pe,ne]=r.useState([]),[te,ge]=r.useState([]),[ae,ie]=r.useState([]),[W,U]=r.useState(!1);console.log("batchList",R),console.log("formData",t);const re=(g,S)=>{U(!W)};r.useEffect(()=>{k&&A(k.result)},[k]),r.useEffect(()=>{E&&y(E.result)},[E]),r.useEffect(()=>{Y&&D(Y.result)},[Y]),r.useEffect(()=>{B&&ge(B.result)},[B]),r.useEffect(()=>{j&&ie(j.result[0].vendorList)},[Y]),console.log(ae),r.useEffect(()=>{K&&ne(K.result.map((g,S)=>({id:S,...g})))},[K,p]),r.useEffect(()=>{if(j){const g=j.result[0];he(g.uomList)}},[j]);const oe=(I==null?void 0:I.result)||[],M=g=>{const{name:S,value:w}=g.target;if(S==="collectionId")oe.find(z=>z.collectionId===parseInt(w)),V(w),o(!0),c({...t,collectionId:w,designId:"",batchNo:"",planningHeaderId:"",fabricId:"",colorId:"",color:"",vendorId:"",processType:"",AvailableQty:"",Shrinkage:"",Wastage:"",OutputQty:"",UOM:"",uomId:"",RatePerUOM:"",UnitRatePerPo:"",TotalExclGst:"",GST:"0",TotalIncludingGst:"",poPcs:"",baseColorName:""});else if(S==="designId"){const z=O.find(u=>u.designId===parseInt(w));c({...t,designId:w,baseColorId:z?z.colorId:"",baseColorName:z?z.colorName:"",batchNo:"",planningHeaderId:"",fabricId:"",colorId:"",color:"",vendorId:"",processType:"",AvailableQty:"",Shrinkage:"",Wastage:"",OutputQty:"",UOM:"",uomId:"",RatePerUOM:"",UnitRatePerPo:"",TotalExclGst:"",GST:"0",TotalIncludingGst:"",poPcs:""})}else if(S==="batchNo"){const z=R.find(u=>u.batchNo===w);c({...t,batchNo:w,planningHeaderId:z?z.planningHeaderId:"",poPcs:z?z.poPcs:"",fabricId:"",colorId:"",color:"",vendorId:"",processType:"",AvailableQty:"",Shrinkage:"",Wastage:"",OutputQty:"",UOM:"",uomId:"",RatePerUOM:"",UnitRatePerPo:"",TotalExclGst:"",GST:"0",TotalIncludingGst:""}),U(!0),o(!1)}else if(S==="fabricId")L.find(z=>z.fabricId===w),console.log("Selected Fabric:",L),c({...t,fabricId:w});else if(S==="ColorId"){const z=te.find(u=>u.colorId===w.colorId);c({...t,ColorId:w.colorId,color:z.color,AvailableQty:z.total,UOM:z.uom,Shrinkage:z.shrinkage,Wastage:z.wastage})}else c(S==="processType"?{...t,processType:w}:S==="vendorId"?{...t,vendorId:w}:{...t,[S]:w})};r.useEffect(()=>{const g=()=>{const v=parseFloat(t.AvailableQty)||0,C=parseFloat(t.Shrinkage)||0,Q=parseFloat(t.Wastage)||0;return(v*(100-(C+Q))/100).toFixed(2)},S=()=>{const v=parseFloat(t.AvailableQty)||0,C=parseFloat(t.RatePerUOM)||0;return(v*C).toFixed(2)},w=(v,C)=>(v*(1+C/100)).toFixed(2),z=g(),u=S(),i=parseFloat(t.GST)||0,d=w(u,i),x=parseFloat(t.poPcs)||0,l=x?d/x:0;c(v=>({...v,OutputQty:z,TotalExclGst:u,TotalIncludingGst:d,UnitRatePerPo:l.toFixed(2)}))},[t.AvailableQty,t.Shrinkage,t.Wastage,t.RatePerUOM,t.GST,t.poPcs,t.UnitRatePerPo]);const[X,fe]=r.useState({}),ce=async()=>{const g=ue();if(Object.keys(g).length>0){fe(g);return}try{const S=await se.post("https://gecxc.com:4041/api/DyeingPrinting/SaveDyeingPrinting",t);console.log("Save response:",S.data),S.data.success?h("Fabrication saved successfully!",{variant:"success",autoHideDuration:5e3}):(h(`${S.data.message} !`,{variant:"error",autoHideDuration:5e3}),console.log("response.message",S.data.message)),c(w=>({designId:w.designId,planningHeaderId:w.planningHeaderId,batchNo:w.batchNo,dpId:0,fabricId:"",colorId:"",color:"",vendorId:"",processType:"",AvailableQty:"",Shrinkage:"",Wastage:"",OutputQty:"",UOM:"",uomId:"",RatePerUOM:"",UnitRatePerPo:"",TotalExclGst:"",GST:"0",TotalIncludingGst:"",poPcs:w.poPcs,baseColorName:"",createdOn:new Date().toISOString(),createdBy:f.empId,lastUpdatedOn:new Date().toISOString(),lastUpdatedBy:f.empId})),p()}catch(S){console.error("Error saving data:",S),h("Dyeing not saved successfully!",{variant:"error",autoHideDuration:5e3})}},ue=()=>{const g={};return t.fabricId||(g.fabricId="fabricId is required"),t.colorId||(g.colorId="colorId is required"),t.vendorId||(g.vendorId="vendorId is required"),t.processType||(g.processType="processType is required"),t.GST||(g.GST="GST is required"),t.RatePerUOM||(g.RatePerUOM="RatePerUOM is required"),g},le=[{value:"Dyeing",label:"Dyeing"},{value:"Printing",label:"Printing"}],N=[{field:"fabricName",headerName:"Fabric"},{field:"colorName",headerName:"Color"},{field:"vendorName",headerName:"Vendor"},{field:"processType",headerName:"Process Type"},{field:"uom",headerName:"uom"},{field:"availableQty",headerName:"Available Quantitity"},{field:"shrinkage",headerName:"Shrinkage"},{field:"wastage",headerName:"Wastage"},{field:"outputQty",headerName:"Output Qty"},{field:"ratePerUOM",headerName:"Rate"},{field:"totalExclGst",headerName:"Total Excl. Gst"},{field:"gst",headerName:"GST"},{field:"totalIncludingGst",headerName:"Total Including GST"},{field:"unitRatePerPo",headerName:"UnitRate Per Po."}];return e.jsxs(e.Fragment,{children:[e.jsxs(J,{variant:"outlined",children:[e.jsx(Z,{className:"css-4rfrnx-MuiCardHeader-root",avatar:e.jsx(Le,{src:kt,sx:{background:"transparent"}}),title:"Dyeing ",titleTypographyProps:{style:{color:"white"}}}),e.jsxs(a,{container:!0,spacing:2,width:"Inherit",sx:{paddingY:2,paddingX:2},children:[e.jsxs(a,{item:!0,xs:12,md:3,children:[e.jsx(n,{fullWidth:!0,select:!0,label:"Select Collection",name:"collectionId",value:G,onChange:M,size:"small",children:oe.map(g=>e.jsx(P,{value:g.collectionId,children:g.collectionName},g.collectionId))})," "]}),e.jsx(a,{item:!0,xs:12,md:3,children:e.jsx(n,{fullWidth:!0,select:!0,label:"Select Design",name:"designId",value:t.designId,onChange:M,size:"small",children:O.map(g=>e.jsx(P,{value:g.designId,children:g.designNo},g.designId))})}),e.jsxs(a,{item:!0,xs:12,md:3,children:[e.jsx(n,{fullWidth:!0,select:!0,label:"Batch No.",name:"batchNo",value:t.batchNo,onChange:M,size:"small",children:R.map(g=>e.jsx(P,{value:g.batchNo,children:g.batchNo},g.batchNo))})," "]}),e.jsx(a,{item:!0,xs:12,md:3,children:e.jsx(n,{label:"Base Color",fullWidth:!0,size:"small",name:"baseColorName",value:t.baseColorName,onChange:M,disabled:!0})}),e.jsx(a,{item:!0,xs:12,md:3,children:e.jsx(n,{fullWidth:!0,select:!0,label:"Select Fabric",defaultValue:"",size:"small",name:"fabricId",value:t.fabricId,onChange:M,error:!!X.fabricId,helperText:X.fabricId,required:!0,children:L.map(g=>e.jsx(P,{value:g.fabricId,children:g.fabric},g.fabricId))})}),e.jsx(a,{item:!0,xs:12,md:3,children:e.jsx(vt,{fullWidth:!0,options:te,getOptionLabel:g=>g.color||"",renderInput:g=>e.jsx(n,{...g,label:"Color",name:"colorId",size:"small",error:!!X.colorId,helperText:X.colorId,required:!0}),value:te.find(g=>g.colorId===t.colorId)||null,onChange:(g,S)=>{c(w=>({...w,colorId:S?S.colorId:"",color:S?S.color:"",AvailableQty:S?S.total:"",UOM:S?S.uom:"",uomId:S?S.uomId:"",Shrinkage:S?S.shrinkage:"",Wastage:S?S.wastage:""}))}})})]})]}),e.jsx(de,{color:"#cc8587",sx:{height:1,width:"100%",mt:2}}),e.jsxs(J,{variant:"outlined",children:[e.jsx(Z,{className:"css-4rfrnx-MuiCardHeader-root",avatar:e.jsx(ke,{}),title:"Add Dyeing ",titleTypographyProps:{style:{color:"white"}},action:e.jsx(ye,{onClick:re,sx:{mt:"-18px"},children:e.jsx(me,{style:{color:"white"}})}),sx:{display:"flex",alignItems:"center",justifyContent:"space-between"}}),e.jsxs(Te,{expanded:W,onChange:re,sx:{},children:[e.jsx(we,{expandIcon:e.jsx(me,{}),"aria-controls":"panel1-content",id:"panel1-header",sx:{display:"none"}}),e.jsx(ze,{children:e.jsxs(a,{container:!0,spacing:2,width:"Inherit",sx:{paddingY:2,paddingX:2},children:[e.jsx(a,{item:!0,xs:12,md:3,children:e.jsx(n,{fullWidth:!0,select:!0,label:"Vendor Name",size:"small",name:"vendorId",value:t.vendorId,onChange:M,error:!!X.vendorId,helperText:X.vendorId,required:!0,children:ae.map(g=>e.jsx(P,{value:g.lookUpId,children:g.lookUpName},g.lookUpId))})}),e.jsx(a,{item:!0,xs:12,md:3,children:e.jsx(n,{fullWidth:!0,select:!0,label:"Process Type",size:"small",name:"processType",value:t.processType,onChange:M,error:!!X.processType,helperText:X.processType,required:!0,children:le.map(g=>e.jsx(P,{value:g.value,children:g.label},g.value))})}),e.jsx(a,{item:!0,xs:12,md:3,children:e.jsx(n,{label:"Po Pcs",fullWidth:!0,size:"small",name:"poPcs",value:t.poPcs,onChange:M,disabled:!0})}),e.jsx(a,{item:!0,xs:12,md:1.5,children:e.jsx(n,{label:"UOM",fullWidth:!0,size:"small",name:"UOM",value:t.UOM,onChange:M})}),e.jsx(a,{item:!0,xs:12,md:1.5,children:e.jsx(n,{label:"AvailableQty",fullWidth:!0,size:"small",type:"number",name:"AvailableQty",value:t.AvailableQty,onChange:M})}),e.jsx(a,{item:!0,xs:12,md:1.5,children:e.jsx(n,{label:"Shrinkage%",type:"number",fullWidth:!0,size:"small",name:"Shrinkage",value:t.Shrinkage,onChange:M})}),e.jsx(a,{item:!0,xs:12,md:1.5,children:e.jsx(n,{label:"Wastage%",fullWidth:!0,size:"small",type:"number",name:"Wastage",value:t.Wastage,onChange:M})}),e.jsx(a,{item:!0,xs:12,md:1.5,children:e.jsx(n,{label:"Output Qty",fullWidth:!0,size:"small",name:"OutputQty",type:"number",value:t.OutputQty,onChange:M})}),e.jsx(a,{item:!0,xs:12,md:1.5,children:e.jsx(n,{label:"Rate",fullWidth:!0,size:"small",type:"number",name:"RatePerUOM",value:t.RatePerUOM,onChange:M,error:!!X.RatePerUOM,helperText:X.RatePerUOM,required:!0})}),e.jsx(a,{item:!0,xs:12,md:1.5,children:e.jsx(n,{label:"Total Excluding GST",type:"number",fullWidth:!0,size:"small",name:"TotalExclGst",value:t.TotalExclGst,onChange:M})}),e.jsxs(a,{item:!0,xs:12,md:1.5,children:[e.jsx(n,{label:"GST",fullWidth:!0,type:"number",size:"small",name:"GST",value:t.GST,onChange:M,error:!!X.GST,helperText:X.GST,required:!0})," "]}),e.jsx(a,{item:!0,xs:12,md:1.5,children:e.jsx(n,{label:"Total:Including Gst",fullWidth:!0,size:"small",name:"TotalExclGst",value:t.TotalIncludingGst,onChange:M})}),e.jsx(a,{item:!0,xs:12,md:1.5,children:e.jsx(n,{label:"Unit P: T/Po PC's",fullWidth:!0,size:"small",name:"UnitRatePerPo",value:t.UnitRatePerPo,onChange:M})}),e.jsx(a,{item:!0,xs:12,md:12,textAlign:"right",children:e.jsx(_,{variant:"contained",color:"primary",size:"small",onClick:ce,children:"Save"})})]})})]})]}),e.jsx(a,{item:!0,xs:12,md:12,children:e.jsx(de,{sx:{height:1,width:"100%",marginTop:1,marginBottom:0}})}),e.jsxs(J,{variant:"outlined",children:[e.jsx(Z,{className:"css-4rfrnx-MuiCardHeader-root",avatar:e.jsx(Fe,{}),title:"View Dyeing ",titleTypographyProps:{style:{color:"white"}}})," ",e.jsx(a,{container:!0,spacing:2,width:"Inherit",sx:{paddingY:2,paddingX:2},children:e.jsx(a,{item:!0,xs:12,md:12,paddingTop:1,children:H?e.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"},children:e.jsx("img",{src:We,alt:"Loading",style:{width:200,height:200}})}):e.jsx(Se,{iColumns:N,initialRows:pe,setInitialData:m,deleteApi:"https://gecxc.com:4041/api/DyeingPrinting/DeleteDyeingPrintingById?DPId=",deleteBy:"dpId",refetch:p,setAccordionExpanded:U,fileName:"Dyeing&PrintingList"})})})]})]})},wt=Tt,_e="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAACXBIWXMAAAsTAAALEwEAmpwYAAADr0lEQVR4nNXXaciVVRAH8Kv1Jtoi5psFZZYUtoimhUVlaJHZghK2UBFCtGkbZdgiBG1GHyowaaEdWogWElvMFjJpw4oWwrJsVetDtNNevxjeuXW8PPe991rvh/5w4TznnDkzZ87Mf+bWav8H4Dgcgc9wfcPanViFidioL5Rvj2/wIqbgCyzA3XgKH+BI/+DWijMGpYEjO1U+FH8Uh++Jj6yPNzG5YW5wccYxWItF6anwWP9OjJiE7/FuYcCTeDnHjQYsLWR3w8cYi/OxP57AzE49cSGewzgswfJ0/0u4HwfgWYyq3w5deBXH4wXchHU4GgvbVdwPR+EVPI1NMCDesviFos3SqIiTaSl7BW5Pw5/Ho3gYl2Nuu8G3NG+8X85tgcMxCxfhLBxWf/N08bJU+h52xRrciGdwdj7bsFbKx+fbnZTfe+cNflGNX/EQJqQ3Pi+MPgN3pAd/x8GtlO+BT/I2A1P4T+0hMuYdzC/Om56XCW/NyOCt5gs9Lo5oPxBD8u07xesZK5vjtjRqXKEj0vGEZgYsxGXYOKO8U/yE3ZN0PsSVuCHOLHTsgxVVykdmgAzKAGuFryvmLsDVBXnF+w9OCt+60BXcMarRgBA8D91Jvc2URrqNSZkJ+f1dUvRbDfu/wqbpiXmFrluCIUvlke+rsS3OaaJ8WUmxhewO+LYXT52KneLWhcx167EhRtQ3JKNVYUqTuAkmfDBStoncI7kvMmvLHAcdTywPORT35rjqbdfWySPzfDF+wAPF/Hb4skJ2Xa6HzL45fiwCvTRgJq7NvK/CmcXeuQ1rpxdrF1fIBvn0z5ScXuXFGk7Md4nbVeGUYu8lDWvnFmtzKmR/C+JpZcA03JXjqoBaWfD9VplGkqjq890VvUJgTfHuezUzYMdgsBxHRavCpAaZoQ3fQblVWJLrK0suaDSgXwbakCSTKkQp7WoiP6AX5pyVJPd3GjYzYgFmZzT/2OSwVdkLblOU7PuauF4+Z3fGxqWtDBiblawrWbE3hIFv4OcW++Ylta9uqyHVU3rnpNBr/h2WZ1WMrLmmpfJABEnW7uD44dlybwjCk8OyWX0/YqvWLvSUy3jTXbIt77QsL8q+YnReZnTbyuvA1OTuqZkhMyoqXSNWRH+Y8sem8sm1DYWehvLtjPrhObdzZspVuDnL7GnBI4XMPUlQIzZYeR3ZGc1ObzyeFW981viByRtjsttdnO3cyRF8tf8Serj8oPhjmu11tNqfZnpFzz8fh/TJn9O+xl9lMwg6mBWmPgAAAABJRU5ErkJggg==",zt=()=>{const{user:f}=Ce(),{enqueueSnackbar:s}=Ne(),[m,t]=r.useState([]),[c,h]=r.useState({schiffiliId:0,designId:"",planningHeaderId:0,batchNo:"",componentId:"",poPcs:"",baseColorName:"",fabricId:"",vendorId:"",colorId:"",availableQty:"",thaanQty:0,operatingMachineId:0,operatingMachine:"",workingHeadId:0,cuttingSize:"",rate:"",costPerComponent:"",totalEmbroidry:0,noOfItemPerThaan:0,noOfStichesPerYard:0,amountPerYard:0,totalPcs:0,laserCut:!1,laserCutRate:0,pcsForLaserCut:0,totalAmount:0,createdBy:f.empId,createdOn:new Date().toISOString(),lastUpdatedOn:new Date().toISOString(),lastUpdatedBy:f.empId});r.useEffect(()=>{h({schiffiliId:m.schiffiliId||0,designId:(m==null?void 0:m.designId)||"",planningHeaderId:(m==null?void 0:m.planningHeaderId)||0,batchNo:(m==null?void 0:m.batchNo)||"",componentId:(m==null?void 0:m.componentId)||"",poPcs:(m==null?void 0:m.poPcs)||"",baseColorName:(m==null?void 0:m.baseColorName)||"",fabricId:(m==null?void 0:m.fabricId)||"",vendorId:(m==null?void 0:m.vendorId)||"",colorId:(m==null?void 0:m.colorId)||"",availableQty:(m==null?void 0:m.availableQty)||"",thaanQty:(m==null?void 0:m.thaanQty)||0,operatingMachineId:(m==null?void 0:m.operatingMachineId)||0,operatingMachine:(m==null?void 0:m.operatingMachine)||"",workingHeadId:(m==null?void 0:m.workingHeadId)||0,cuttingSize:(m==null?void 0:m.cuttingSize)||"",rate:(m==null?void 0:m.rate)||"",costPerComponent:(m==null?void 0:m.costPerComponent)||"",totalEmbroidry:(m==null?void 0:m.totalEmbroidry)||0,noOfItemPerThaan:(m==null?void 0:m.noOfItemPerThaan)||0,noOfStichesPerYard:(m==null?void 0:m.noOfStichesPerYard)||0,amountPerYard:(m==null?void 0:m.amountPerYard)||0,totalPcs:(m==null?void 0:m.totalPcs)||0,laserCut:(m==null?void 0:m.laserCut)||!1,laserCutRate:(m==null?void 0:m.laserCutRate)||0,pcsForLaserCut:(m==null?void 0:m.pcsForLaserCut)||0,totalAmount:(m==null?void 0:m.totalAmount)||0,createdOn:(m==null?void 0:m.createdOn)||new Date().toISOString(),createdBy:(m==null?void 0:m.createdBy)||f.empId,lastUpdatedOn:new Date().toISOString(),lastUpdatedBy:f.empId})},[m]);const[H,o]=r.useState(!1),I=(i,d)=>{o(!H)},[G,V]=r.useState(!1),{data:j}=Ae(),[k,q]=r.useState(""),{data:E}=Pe(),{data:T,refetch:Y}=Oe(k,{skip:!k}),{data:B,refetch:K}=Ue(c.designId,{skip:!c.designId}),{data:p}=Ee({batchNo:c.planningHeaderId,componentId:c.componentId},{skip:!c.planningHeaderId||!c.componentId}),{data:O}=Be({batchNo:c.planningHeaderId,componentId:c.componentId,fabricId:c.fabricId},{skip:!c.planningHeaderId||!c.componentId||!c.fabricId}),{data:A,refetch:R}=nt(c.planningHeaderId,{skip:!c.planningHeaderId}),{data:y}=Me(c.planningHeaderId,{skip:!c.planningHeaderId});console.log("formData.planningHeaderId",c.planningHeaderId),console.log("collectionData",j),console.log("schiffliList",A);const[L,D]=r.useState([]),[ee,he]=r.useState([]),[pe,ne]=r.useState([]),[te,ge]=r.useState([]),[ae,ie]=r.useState([]),[W,U]=r.useState([]),[re,oe]=r.useState([]),[M,X]=r.useState([]),[fe,ce]=r.useState([]);r.useEffect(()=>{T&&D(T.result)},[T]),r.useEffect(()=>{B&&he(B.result)},[B]),r.useEffect(()=>{p&&ne(p.result)},[p]),r.useEffect(()=>{O&&oe(p.result)},[O]),r.useEffect(()=>{y&&ce(y.result)},[y]),r.useEffect(()=>{A&&X(A.result.map((i,d)=>({id:d,...i})))},[A,R]),r.useEffect(()=>{if(E){const i=E.result[0];ge(i.vendorList),ie(i.operatingMachineList),U(i.workingHeadList)}},[E]),console.log("initialRows",M);const ue=(j==null?void 0:j.result)||[];r.useEffect(()=>{const i=()=>{const C=parseFloat(c.thaanQty)||0,Q=parseFloat(c.operatingMachine)||0;return(C*Q).toFixed(2)};h(C=>({...C,totalEmbroidry:i()}));const d=()=>{const C=parseFloat(c.thaanQty)||0,Q=parseFloat(c.noOfStichesPerYard)||0;return(C*Q).toFixed(2)};h(C=>({...C,totalPcs:d()}));const x=()=>{const C=parseFloat(c.noOfStichesPerYard)||0,Q=parseFloat(c.rate)||0;return(C/1e3*Q).toFixed(2)};h(C=>({...C,amountPerYard:x()}));const l=()=>{const C=parseFloat(c.totalAmount)||0,Q=parseFloat(c.totalPcs)||0;return(C/Q).toFixed(2)};h(C=>({...C,costPerComponent:l()}));const v=()=>{const C=parseFloat(c.amountPerYard)||0,Q=parseFloat(c.totalEmbroidry)||0,ve=parseFloat(c.laserCutRate)||0,qe=parseFloat(c.pcsForLaserCut)||0;return(C*Q+qe*ve).toFixed(2)};h(C=>({...C,totalAmount:v()}))},[c.thaanQty,c.operatingMachine,c.noOfStichesPerYard,c.rate,c.totalAmount,c.totalPcs,c.amountPerYard,c.totalEmbroidry,c.laserCutRate,c.pcsForLaserCut]);const le=i=>{const{name:d,checked:x}=i.target;h(l=>({...l,[d]:x}))},N=i=>{const{name:d,value:x}=i.target;if(d==="collectionId")ue.find(l=>l.collectionId===parseInt(x)),q(x),V(!0),h({...c,collectionId:x,designId:"",planningHeaderId:0,batchNo:"",componentId:"",poPcs:"",baseColorName:"",fabricId:"",vendorId:"",colorId:"",availableQty:"",thaanQty:0,operatingMachineId:0,operatingMachine:"",workingHeadId:0,cuttingSize:"",rate:"",costPerComponent:"",totalEmbroidry:0,noOfItemPerThaan:0,noOfStichesPerYard:0,amountPerYard:0,totalPcs:0,laserCut:!1,laserCutRate:0,pcsForLaserCut:0,totalAmount:0});else if(d==="designId"){const l=L.find(v=>v.designId===parseInt(x));h({...c,designId:x,baseColorId:l?l.colorId:"",baseColorName:l?l.colorName:"",planningHeaderId:0,batchNo:"",componentId:"",poPcs:"",fabricId:"",vendorId:"",colorId:"",availableQty:"",thaanQty:0,operatingMachineId:0,operatingMachine:"",workingHeadId:0,cuttingSize:"",rate:"",costPerComponent:"",totalEmbroidry:0,noOfItemPerThaan:0,noOfStichesPerYard:0,amountPerYard:0,totalPcs:0,laserCut:!1,laserCutRate:0,pcsForLaserCut:0,totalAmount:0})}else if(d==="batchNo"){const l=ee.find(v=>v.batchNo===x);h({...c,batchNo:x,planningHeaderId:l?l.planningHeaderId:"",poPcs:l?l.poPcs:"",componentId:"",baseColorName:"",fabricId:"",vendorId:"",colorId:"",availableQty:"",thaanQty:0,operatingMachineId:0,operatingMachine:"",workingHeadId:0,cuttingSize:"",rate:"",costPerComponent:"",totalEmbroidry:0,noOfItemPerThaan:0,noOfStichesPerYard:0,amountPerYard:0,totalPcs:0,laserCut:!1,laserCutRate:0,pcsForLaserCut:0,totalAmount:0}),o(!0),V(!1)}else if(d==="colorId"){const l=re.find(v=>v.colorId===x);h({...c,colorId:x,availableQty:l?l.total:"",cuttingSize:l?l.cuttingSize:"",repeats:l?l.repeats:""})}else if(d==="operatingMachineId"){const l=ae.find(v=>v.lookUpId===x);h({...c,operatingMachineId:x,operatingMachine:l?l.lookUpName:""})}else h({...c,[d]:x})};console.log("colors",re);const[b,g]=r.useState({}),S=async()=>{const i=w();if(Object.keys(i).length>0){g(i);return}try{const d=await se.post("https://gecxc.com:4041/api/Schiffli/SaveSchiffili",c);console.log("Save response:",d.data),d.data.success?s("Fabrication saved successfully!",{variant:"success",autoHideDuration:5e3}):(s(`${d.data.message} !`,{variant:"error",autoHideDuration:5e3}),console.log("response.message",d.data.message)),h(x=>({designId:x.designId,planningHeaderId:x.planningHeaderId,batchNo:x.batchNo,baseColorName:x.baseColorName,schiffiliId:0,componentId:"",poPcs:x.poPcs,fabricId:"",vendorId:"",colorId:"",availableQty:"",thaanQty:0,operatingMachineId:0,operatingMachine:"",workingHeadId:0,cuttingSize:"",rate:"",costPerComponent:"",totalEmbroidry:0,noOfItemPerThaan:0,noOfStichesPerYard:0,amountPerYard:0,totalPcs:0,laserCut:!1,laserCutRate:0,pcsForLaserCut:0,totalAmount:0,createdOn:new Date().toISOString(),createdBy:f.empId,lastUpdatedOn:new Date().toISOString(),lastUpdatedBy:f.empId})),R()}catch(d){console.error("Error saving data:",d),s("Dyeing not saved successfully!",{variant:"error",autoHideDuration:5e3})}},w=()=>{const i={};return c.fabricId||(i.fabricId="fabricId is required"),c.colorId||(i.colorId="colorId is required"),c.vendorId||(i.vendorId="vendorId is required"),c.componentId||(i.componentId="componentId is required"),c.thaanQty||(i.thaanQty="thaanQty is required"),c.workingHeadId||(i.workingHeadId="workingHeadId is required"),c.rate||(i.rate="rate is required"),c.operatingMachineId||(i.operatingMachineId="operatingMachineId is required"),c.noOfStichesPerYard||(i.noOfStichesPerYard="noOfStichesPerYard is required"),c.noOfItemPerThaan||(i.noOfItemPerThaan="noOfItemPerThaan is required"),i};console.log("formData",c);const z=[{field:"componentName",headerName:"Component"},{field:"fabricName",headerName:"Fabric"},{field:"vendorName",headerName:"Vendor"},{field:"colourName",headerName:"Color"},{field:"thaanQty",headerName:"Thaan Quantity"},{field:"availableQty",headerName:"Available Quantitity"},{field:"operatingMachineName",headerName:"Operating Machine"},{field:"noOfHeadsName",headerName:"Working Head"},{field:"cuttingSize",headerName:"Cutting Size"},{field:"rate",headerName:"Rate"},{field:"noOfStichesPerYard",headerName:"No. Of Stiches Per Yard"},{field:"noOfItemPerThaan",headerName:"No. Of Item Per Thaan"},{field:"totalEmbroidry",headerName:"Total Embroidry"},{field:"amountPerYard",headerName:"Amount Per Yard"},{field:"totalPcs",headerName:"Total Pcs"},{field:"totalAmount",headerName:"Total Amount"},{field:"costPerComponent",headerName:"Cost Per Component"},{field:"laserCutRate",headerName:"LaserCut Rate"},{field:"pcsForLaserCut",headerName:"Pcs.For Laser Cut"}];return e.jsxs(e.Fragment,{children:[e.jsxs(J,{variant:"outlined",children:[e.jsx(Z,{className:"css-4rfrnx-MuiCardHeader-root",avatar:e.jsx(Le,{src:_e,sx:{background:"transparent"}}),title:"Schiffli ",titleTypographyProps:{style:{color:"white"}}}),e.jsxs(a,{container:!0,spacing:2,width:"Inherit",sx:{paddingY:2,paddingX:2},children:[e.jsxs(a,{item:!0,xs:12,md:3,children:[e.jsx(n,{fullWidth:!0,select:!0,label:"Select Collection",name:"collectionId",value:k,onChange:N,size:"small",children:ue.map(i=>e.jsx(P,{value:i.collectionId,children:i.collectionName},i.collectionId))})," "]}),e.jsx(a,{item:!0,xs:12,md:3,children:e.jsx(n,{fullWidth:!0,select:!0,label:"Select Design",name:"designId",value:c.designId,onChange:N,size:"small",children:L.map(i=>e.jsx(P,{value:i.designId,children:i.designNo},i.designId))})}),e.jsxs(a,{item:!0,xs:12,md:3,children:[e.jsx(n,{fullWidth:!0,select:!0,label:"Batch No.",name:"batchNo",value:c.batchNo,onChange:N,size:"small",children:ee.map(i=>e.jsx(P,{value:i.batchNo,children:i.batchNo},i.batchNo))})," "]}),e.jsxs(a,{item:!0,xs:12,md:3,children:[e.jsx(n,{fullWidth:!0,select:!0,label:"Components",name:"componentId",value:c.componentId,onChange:N,size:"small",required:!0,error:!!b.componentId,helperText:b.componentId,children:fe.map(i=>e.jsx(P,{value:i.componentId,children:i.componentName},i.componentId))})," "]}),e.jsx(a,{item:!0,xs:12,md:3,children:e.jsx(n,{label:"Base Color",fullWidth:!0,size:"small",name:"baseColorName",value:c.baseColorName,onChange:N,disabled:!0})})]})]}),e.jsx(de,{color:"#cc8587",sx:{height:1,width:"100%",mt:2}}),e.jsxs(J,{variant:"outlined",children:[e.jsx(Z,{className:"css-4rfrnx-MuiCardHeader-root",avatar:e.jsx(ke,{}),title:"Add Schiffli ",titleTypographyProps:{style:{color:"white"}},action:e.jsx(ye,{onClick:I,sx:{mt:"-18px"},children:e.jsx(me,{style:{color:"white"}})}),sx:{display:"flex",alignItems:"center",justifyContent:"space-between"}})," ",e.jsxs(Te,{expanded:H,onChange:I,sx:{},children:[e.jsx(we,{expandIcon:e.jsx(me,{}),"aria-controls":"panel1-content",id:"panel1-header",sx:{display:"none"}}),e.jsx(ze,{children:e.jsxs(a,{container:!0,spacing:2,width:"Inherit",sx:{paddingY:2,paddingX:2},children:[e.jsx(a,{item:!0,xs:12,md:3,children:e.jsx(n,{fullWidth:!0,select:!0,label:"Select Fabric",defaultValue:"",size:"small",name:"fabricId",value:c.fabricId,onChange:N,required:!0,error:!!b.fabricId,helperText:b.fabricId,children:pe.map(i=>e.jsx(P,{value:i.fabricId,children:i.fabric},i.fabricId))})}),e.jsx(a,{item:!0,xs:12,md:3,children:e.jsx(n,{fullWidth:!0,select:!0,label:"Vendors",defaultValue:"",size:"small",name:"vendorId",value:c.vendorId,onChange:N,required:!0,error:!!b.vendorId,helperText:b.vendorId,children:te.map(i=>e.jsx(P,{value:i.lookUpId,children:i.lookUpName},i.lookUpId))})}),e.jsx(a,{item:!0,xs:12,md:3,children:e.jsx(n,{fullWidth:!0,select:!0,label:"Color",size:"small",name:"colorId",value:c.colorId,onChange:N,required:!0,error:!!b.colorId,helperText:b.colorId,children:re.map(i=>e.jsx(P,{value:i.colorId,children:i.color},i.colorId))})}),e.jsx(a,{item:!0,xs:12,md:1.5,children:e.jsx(n,{label:"Po Pcs",fullWidth:!0,size:"small",name:"poPcs",value:c.poPcs,disabled:!0,onChange:N})}),e.jsx(a,{item:!0,xs:12,md:1.5,children:e.jsx(n,{label:"Available Quantity",fullWidth:!0,size:"small",name:"availableQty",value:c.availableQty,onChange:N})}),e.jsx(a,{item:!0,xs:12,md:1.5,children:e.jsx(n,{label:"Thaan Quantity",fullWidth:!0,type:"number",size:"small",name:"thaanQty",value:c.thaanQty,onChange:N,required:!0,error:!!b.thaanQty,helperText:b.thaanQty})}),e.jsx(a,{item:!0,xs:12,md:1.5,children:e.jsx(n,{fullWidth:!0,select:!0,label:"operatingMachineId",defaultValue:"",size:"small",name:"operatingMachineId",value:c.operatingMachineId,onChange:N,required:!0,error:!!b.operatingMachineId,helperText:b.operatingMachineId,children:ae.map(i=>e.jsx(P,{value:i.lookUpId,children:i.lookUpName},i.lookUpId))})}),e.jsx(a,{item:!0,xs:12,md:1.5,children:e.jsx(n,{fullWidth:!0,select:!0,label:"workingHeadId",defaultValue:"",size:"small",name:"workingHeadId",value:c.workingHeadId,onChange:N,required:!0,error:!!b.workingHeadId,helperText:b.workingHeadId,children:W.map(i=>e.jsx(P,{value:i.lookUpId,children:i.lookUpName},i.lookUpId))})}),e.jsx(a,{item:!0,xs:12,md:1.5,children:e.jsx(n,{label:"Cutting Size",fullWidth:!0,type:"number",size:"small",name:"cuttingSize",value:c.cuttingSize,onChange:N})}),e.jsx(a,{item:!0,xs:12,md:1.5,children:e.jsx(n,{label:"Rate",type:"number",fullWidth:!0,size:"small",name:"rate",value:c.rate,onChange:N,required:!0,error:!!b.rate,helperText:b.rate})}),e.jsx(a,{item:!0,xs:12,md:1.5,children:e.jsx(n,{label:"No. Of Stiches Per Yard",fullWidth:!0,type:"number",size:"small",name:"noOfStichesPerYard",value:c.noOfStichesPerYard,onChange:N,required:!0,error:!!b.noOfStichesPerYard,helperText:b.noOfStichesPerYard})}),e.jsx(a,{item:!0,xs:12,md:1.5,children:e.jsx(n,{label:"No. Of Items Per Thaan",fullWidth:!0,size:"small",type:"number",name:"noOfItemPerThaan",value:c.noOfItemPerThaan,onChange:N,required:!0,error:!!b.noOfItemPerThaan,helperText:b.noOfItemPerThaan})}),e.jsx(a,{item:!0,xs:12,md:1.5,children:e.jsx(n,{label:"Total Embroidry",fullWidth:!0,size:"small",name:"totalEmbroidry",type:"number",value:c.totalEmbroidry,onChange:N})}),e.jsx(a,{item:!0,xs:12,md:1.5,children:e.jsx(n,{label:"Amount Per Yard",fullWidth:!0,type:"number",size:"small",name:"amountPerYard",value:c.amountPerYard,onChange:N})}),e.jsx(a,{item:!0,xs:12,md:1.5,children:e.jsx(n,{label:"Total Pcs",fullWidth:!0,size:"small",name:"totalPcs",value:c.totalPcs,onChange:N})}),e.jsx(a,{item:!0,xs:12,md:1.5,children:e.jsx(n,{label:"Cost Per Component",fullWidth:!0,size:"small",name:"costPerComponent",value:c.costPerComponent,onChange:N})}),e.jsx(a,{item:!0,xs:12,md:1.5,children:e.jsx(n,{label:"Total Amount",fullWidth:!0,size:"small",type:"number",name:"totalAmount",value:c.totalAmount,onChange:N})}),e.jsx(a,{item:!0,xs:12,md:1.5,children:e.jsx(Qe,{control:e.jsx(Ge,{checked:c.laserCut,onChange:le,name:"laserCut"}),label:"Laser Cut"})}),c.laserCut?e.jsx(a,{item:!0,xs:12,md:4.5,children:e.jsxs(a,{container:!0,spacing:1,width:"Inherit",children:[e.jsx(a,{item:!0,xs:12,md:6,children:e.jsx(n,{label:"Laser Cut Rate",fullWidth:!0,size:"small",name:"laserCutRate",value:c.laserCutRate,onChange:N})}),e.jsx(a,{item:!0,xs:12,md:6,children:e.jsx(n,{label:"Pcs For LaserCut",fullWidth:!0,size:"small",name:"pcsForLaserCut",value:c.pcsForLaserCut,onChange:N})})]})}):null,e.jsx(a,{item:!0,xs:12,textAlign:"right",sx:{mt:2},children:e.jsx(_,{variant:"contained",size:"small",onClick:S,children:"Save"})})]})})]})]}),e.jsx(a,{item:!0,xs:12,md:12,children:e.jsx(de,{sx:{height:1,width:"100%",marginTop:1,marginBottom:0}})}),e.jsxs(J,{variant:"outlined",children:[e.jsx(Z,{className:"css-4rfrnx-MuiCardHeader-root",avatar:e.jsx(Fe,{}),title:"View Schiffli ",titleTypographyProps:{style:{color:"white"}}}),e.jsx(a,{container:!0,spacing:2,width:"Inherit",sx:{paddingY:2,paddingX:2},children:e.jsx(a,{sx:{marginTop:2},item:!0,xs:12,children:G?e.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"},children:e.jsx("img",{src:We,alt:"Loading",style:{width:200,height:200}})}):e.jsx(Se,{iColumns:z,initialRows:M,setInitialData:t,deleteApi:"https://gecxc.com:4041/api/Schiffli/DeleteSchiffiById?schiffiId=",deleteBy:"schiffiliId",refetch:R,setAccordionExpanded:o,fileName:"Schffili List"})})})]})]})},Ft=zt,Rt=({additionalProcessData:f,setAdditionalProcessData:s,refetchAdditionalProcessList:m,handleClickOpen:t})=>{const{user:c}=Ce(),[h,H]=r.useState([]),o=h.reduce((p,O)=>p+(O.quantity??0),0).toFixed(2);console.log("Quantity",o);const[I,G]=r.useState({additionalProcessDetId:0,additionalProcessId:f.additionalProcessId||0,designId:f.designId||"",planningHeaderId:f.planningHeaderId||0,batchNo:f.batchNo||"",componentName:f.componentName||"",componentId:f.componentId||"",colorName:f.colorName||"",colorId:f.colorId||"",fabricName:f.fabricName||"",fabricId:f.fabricId||"",uomId:f.uomId||"",uom:f.uom||"",vendorId:"",pcsPerComponent:f.pcsPerComponent||"",remainingPcsPerComponent:f.pcsPerComponent-o||"",processTypeName:f.processTypeName||"",processTypeId:f.processTypeId||"",quantity:"",ratePerPcs:0,totalAmount:0,costPerComponent:"",createdOn:new Date().toISOString(),createdBy:c.empId,lastUpdatedOn:new Date().toISOString(),LastUpdatedBy:c.empId});r.useEffect(()=>{G({...I,remainingPcsPerComponent:f.pcsPerComponent-o||""})},[h]);const{data:V}=Pe(),{data:j,refetch:k}=lt(I.additionalProcessId,{skip:!I.additionalProcessId}),[q,E]=r.useState([]);r.useEffect(()=>{if(V){const p=V.result[0];E(p.vendorList)}},[V]),r.useEffect(()=>{j&&H(j.result.map((p,O)=>({id:O,...p})))},[j,k]),console.log("initialRows",h);const T=p=>{const{name:O,value:A}=p.target;G({...I,[O]:A})};r.useEffect(()=>{const p=()=>{const A=parseFloat(I.quantity)||0,R=parseFloat(I.ratePerPcs)||0;return(A*R).toFixed(2)};G(A=>({...A,totalAmount:p()}));const O=()=>{const A=parseFloat(I.totalAmount)||0,R=parseFloat(I.poPcs)||0;return(A/R).toFixed(2)};G(A=>({...A,costPerComponent:O()}))},[I.quantity,I.ratePerPcs,I.totalAmount]);const Y=async()=>{console.log(I);try{const p=await se.post("https://gecxc.com:4041/api/AdditionalProcess/SaveAdditionalProcessDetails",I);console.log("Save response:",p.data),k(),G(O=>({...O,vendorId:"",pcsPerComponent:f.pcsPerComponent||"",quantity:"",ratePerPcs:0,totalAmount:0,costPerComponent:"",createdOn:new Date().toISOString(),createdBy:c.empId,lastUpdatedOn:new Date().toISOString(),LastUpdatedBy:c.empId})),m(),setAccordionExpanded(!1)}catch(p){console.error("Error saving data:",p)}},B=[{field:"vendorName",headerName:"Vendor",flex:2},{field:"processType",headerName:"Process Type",flex:1},{field:"pcsPerComponent",headerName:" Pcs. Per Component",flex:1},{field:"quantity",headerName:"Quantitity",flex:1},{field:"ratePerPcs",headerName:"Rate Per Pcs.",flex:1},{field:"totalAmount",headerName:"Total Amount",flex:1}];return e.jsxs(Ie,{noValidate:!0,component:"form",sx:{display:"flex",flexDirection:"column",m:"auto",width:"Inherit"},children:[e.jsxs(a,{container:!0,spacing:2,width:"Inherit",sx:{paddingY:2,paddingX:2},children:[e.jsxs(a,{item:!0,xs:12,md:3,children:[e.jsx(n,{fullWidth:!0,label:"Select Collection",name:"collectionId",value:I.selectedCollectionId,onChange:T,size:"small",disabled:!0})," "]}),e.jsx(a,{item:!0,xs:12,md:3,children:e.jsx(n,{fullWidth:!0,label:"Select Design",name:"designId",value:I.designId,onChange:T,size:"small",disabled:!0})}),e.jsxs(a,{item:!0,xs:12,md:3,children:[e.jsx(n,{fullWidth:!0,label:"Batch No.",name:"batchNo",value:I.batchNo,onChange:T,size:"small",disabled:!0})," "]}),e.jsxs(a,{item:!0,xs:12,md:3,children:[e.jsx(n,{fullWidth:!0,label:"Components",name:"componentName",value:I.componentName,onChange:T,size:"small",disabled:!0})," "]}),e.jsx(a,{item:!0,xs:12,md:3,children:e.jsx(n,{fullWidth:!0,label:"Select Fabric",defaultValue:"",size:"small",name:"fabricName",value:I.fabricName,onChange:T,disabled:!0})}),e.jsx(a,{item:!0,xs:12,md:3,children:e.jsx(n,{fullWidth:!0,label:"Color",size:"small",name:"colorName",value:I.colorName,onChange:T,disabled:!0})}),e.jsx(a,{item:!0,xs:12,md:3,children:e.jsx(n,{fullWidth:!0,label:"Process Type",defaultValue:"",size:"small",name:"processTypeName",value:I.processTypeName,onChange:T,disabled:!0})}),e.jsx(a,{item:!0,xs:12,md:1.5,children:e.jsx(n,{label:"Pcs. Per Component",fullWidth:!0,size:"small",name:"pcsPerComponent",value:I.pcsPerComponent,onChange:T,disabled:!0})}),e.jsx(a,{item:!0,xs:12,md:1.5,children:e.jsx(n,{label:"Remaining Pcs. Per Component",fullWidth:!0,size:"small",name:"remainingPcsPerComponent",value:I.remainingPcsPerComponent,onChange:T,disabled:!0})})]}),e.jsx(de,{color:"#921e22",sx:{height:2,width:"100%"}}),e.jsxs(a,{container:!0,spacing:2,width:"Inherit",sx:{paddingY:2,paddingX:2},children:[e.jsx(a,{item:!0,xs:12,md:3,children:e.jsx(n,{fullWidth:!0,select:!0,label:"Vendors",size:"small",name:"vendorId",value:I.vendorId,onChange:T,children:q.map(p=>e.jsx(P,{value:p.lookUpId,children:p.lookUpName},p.lookUpId))})}),e.jsx(a,{item:!0,xs:12,md:3,children:e.jsx(n,{label:"Quantity",fullWidth:!0,type:"number",size:"small",name:"quantity",value:I.quantity,onChange:T})}),e.jsx(a,{item:!0,xs:12,md:3,children:e.jsx(n,{label:"Rate Per Pcs",type:"number",fullWidth:!0,size:"small",name:"ratePerPcs",value:I.ratePerPcs,onChange:T})}),e.jsx(a,{item:!0,xs:12,md:3,children:e.jsx(n,{label:"Total Amount",fullWidth:!0,type:"number",size:"small",name:"totalAmount",value:I.totalAmount,onChange:T})}),e.jsx(a,{item:!0,xs:12,md:3,children:e.jsx(n,{label:"UOM",fullWidth:!0,size:"small",name:"uom",value:I.uom,onChange:T,disabled:!0})}),e.jsx(a,{item:!0,xs:12,textAlign:"right",sx:{mt:2},children:e.jsx(_,{variant:"contained",size:"small",onClick:Y,children:"Save"})})]}),e.jsx(a,{container:!0,spacing:2,width:"Inherit",sx:{paddingY:2,paddingX:2},children:e.jsx(a,{sx:{marginTop:2},item:!0,xs:12,children:e.jsx(Se,{iColumns:B,initialRows:h,deleteApi:"https://gecxc.com:4041/api/AdditionalProcess/DeleteAdditionalProcessDetails?apdId=",deleteBy:"additionalProcessDetId",refetch:k,disableEdit:!0})})})]})};var Xe={},Ht=Ze;Object.defineProperty(Xe,"__esModule",{value:!0});var $e=Xe.default=void 0,Ut=Ht(Je()),Lt=e;$e=Xe.default=(0,Ut.default)((0,Lt.jsx)("path",{d:"M13 8c0-2.21-1.79-4-4-4S5 5.79 5 8s1.79 4 4 4 4-1.79 4-4m-2 0c0 1.1-.9 2-2 2s-2-.9-2-2 .9-2 2-2 2 .9 2 2M1 18v2h16v-2c0-2.66-5.33-4-8-4s-8 1.34-8 4m2 0c.2-.71 3.3-2 6-2 2.69 0 5.78 1.28 6 2zm17-3v-3h3v-2h-3V7h-2v3h-3v2h3v3z"}),"PersonAddAlt1Outlined");const Wt=()=>{const{user:f}=Ce(),[s,m]=r.useState([]),[t,c]=r.useState({additionalProcessId:0,designId:"",planningHeaderId:0,batchNo:"",componentId:"",colorId:"",fabricId:"",uomId:"",baseColorName:"",poPcs:"",pcsPerComponent:"",processTypeId:"",createdOn:new Date().toISOString(),createdBy:f.empId,lastUpdatedOn:new Date().toISOString(),LastUpdatedBy:f.empId});console.log("initialData",s),r.useEffect(()=>{c({additionalProcessId:(s==null?void 0:s.additionalProcessId)||0,designId:(s==null?void 0:s.designId)||"",planningHeaderId:(s==null?void 0:s.planningHeaderId)||0,batchNo:(s==null?void 0:s.batchNo)||"",componentId:(s==null?void 0:s.componentId)||"",fabricId:(s==null?void 0:s.fabricId)||"",colorId:(s==null?void 0:s.colorId)||"",poPcs:(s==null?void 0:s.poPcs)||"",baseColorName:(s==null?void 0:s.baseColorName)||"",pcsPerComponent:(s==null?void 0:s.pcsPerComponent)||"",uomId:(s==null?void 0:s.uomId)||"",processTypeId:(s==null?void 0:s.processTypeId)||"",createdOn:(s==null?void 0:s.createdOn)||new Date().toISOString(),createdBy:(s==null?void 0:s.createdBy)||f.empId,lastUpdatedOn:new Date().toISOString(),LastUpdatedBy:f.empId})},[s]);const[h,H]=r.useState(!1),o=(l,v)=>{H(!h)},{data:I}=Ae(),[G,V]=r.useState(""),{data:j}=Pe(),{data:k,refetch:q}=Oe(G,{skip:!G}),{data:E,refetch:T}=Ue(t.designId,{skip:!t.designId}),{data:Y}=Ee({batchNo:t.planningHeaderId,componentId:t.componentId},{skip:!t.planningHeaderId||!t.componentId}),{data:B}=Be({batchNo:t.planningHeaderId,componentId:t.componentId,fabricId:t.fabricId},{skip:!t.planningHeaderId||!t.componentId||!t.fabricId}),{data:K,refetch:p}=dt(t.planningHeaderId,{skip:!t.planningHeaderId}),{data:O}=Me(t.planningHeaderId,{skip:!t.planningHeaderId});console.log("lookupData",j),console.log("collectionData",I),console.log("colorData",B);const[A,R]=r.useState([]),[y,L]=r.useState([]),[D,ee]=r.useState([]),[he,pe]=r.useState([]),[ne,te]=r.useState([]),[ge,ae]=r.useState([]),[ie,W]=r.useState([]),[U,re]=r.useState([]),[oe,M]=r.useState([]),[X,fe]=r.useState([]),[ce,ue]=r.useState([]);console.log("batchData",E),r.useEffect(()=>{k&&R(k.result)},[k]),r.useEffect(()=>{E&&L(E.result)},[E]),r.useEffect(()=>{Y&&ee(Y.result)},[Y]),r.useEffect(()=>{B&&M(B.result)},[B]),r.useEffect(()=>{O&&ue(O.result)},[O]),r.useEffect(()=>{if(j){const l=j.result[0];te(l.uomList),ae(l.processList)}},[j]),r.useEffect(()=>{K&&fe(K.result.map((l,v)=>({id:v,...l})))},[K,p]),r.useEffect(()=>{if(j){const l=j.result[0];pe(l.vendorList),W(l.operatingMachineList),re(l.workingHeadList)}},[j]),console.log("initialRows",X);const le=(I==null?void 0:I.result)||[],N=l=>{const{name:v,value:C}=l.target;if(v==="collectionId")le.find(Q=>Q.collectionId===parseInt(C)),V(C),c({...t,collectionId:C});else if(v==="designId"){const Q=A.find(ve=>ve.designId===parseInt(C));c({...t,designId:C,baseColorId:Q?Q.colorId:"",baseColorName:Q?Q.colorName:""})}else if(v==="batchNo"){const Q=y.find(ve=>ve.batchNo===C);c({...t,batchNo:C,planningHeaderId:Q?Q.planningHeaderId:"",poPcs:Q?Q.poPcs:""}),H(!0)}else c({...t,[v]:C})};console.log("colors",oe);const b=async()=>{console.log("formData",t);try{const l=await se.post("https://gecxc.com:4041/api/AdditionalProcess/SaveAdditionalProcess",t);console.log("Save response:",l.data),c(v=>({additionalProcessId:0,designId:v.designId,planningHeaderId:v.planningHeaderId,batchNo:v.batchNo,baseColorName:v.baseColorName,poPcs:v.poPcs,componentId:"",colorId:"",fabricId:"",uomId:"",pcsPerComponent:"",processTypeId:"",createdOn:new Date().toISOString(),createdBy:f.empId,lastUpdatedOn:new Date().toISOString(),LastUpdatedBy:f.empId})),p()}catch(l){console.error("Error saving data:",l)}};console.log("formData",t),r.forwardRef(function(v,C){return e.jsx(it,{direction:"up",ref:C,...v})});const[g,S]=r.useState({}),[w,z]=r.useState(!1),u=l=>{S(l),z(!0)},i=()=>{z(!1),S({}),p()},d=[{field:"designNo",headerName:"Design"},{field:"batchNo",headerName:"Batch"},{field:"componentName",headerName:"Component"},{field:"fabricName",headerName:"Fabric"},{field:"colorName",headerName:"Color"},{field:"processTypeName",headerName:"Process Type"},{field:"pcsPerComponent",headerName:"Pcs Per Component"},{field:"assignedQty",headerName:"Assigned Quantity"},{field:"AddVendor",headerName:"Add Vendor",renderCell:l=>e.jsx("div",{style:{display:"flex",justifyContent:"space-around"},children:e.jsx(ye,{color:"primary",onClick:()=>u(l.row),children:e.jsx($e,{})})})}];return e.jsxs(e.Fragment,{children:[e.jsxs(J,{variant:"outlined",children:[e.jsx(Z,{className:"css-4rfrnx-MuiCardHeader-root",avatar:e.jsx(Le,{src:_e,sx:{background:"transparent"}}),title:"Additional Process ",titleTypographyProps:{style:{color:"white"}}}),e.jsxs(a,{container:!0,spacing:2,width:"Inherit",sx:{paddingY:2,paddingX:2},children:[e.jsxs(a,{item:!0,xs:12,md:3,children:[e.jsx(n,{fullWidth:!0,select:!0,label:"Select Collection",name:"collectionId",value:G,onChange:N,size:"small",children:le.map(l=>e.jsx(P,{value:l.collectionId,children:l.collectionName},l.collectionId))})," "]}),e.jsx(a,{item:!0,xs:12,md:3,children:e.jsx(n,{fullWidth:!0,select:!0,label:"Select Design",name:"designId",value:t.designId,onChange:N,size:"small",children:A.map(l=>e.jsx(P,{value:l.designId,children:l.designNo},l.designId))})}),e.jsxs(a,{item:!0,xs:12,md:3,children:[e.jsx(n,{fullWidth:!0,select:!0,label:"Batch No.",name:"batchNo",value:t.batchNo,onChange:N,size:"small",children:y.map(l=>e.jsx(P,{value:l.batchNo,children:l.batchNo},l.batchNo))})," "]}),e.jsxs(a,{item:!0,xs:12,md:3,children:[e.jsx(n,{fullWidth:!0,select:!0,label:"Components",name:"componentId",value:t.componentId,onChange:N,size:"small",children:ce.map(l=>e.jsx(P,{value:l.componentId,children:l.componentName},l.componentId))})," "]}),e.jsx(a,{item:!0,xs:12,md:3,children:e.jsx(n,{label:"Base Color",fullWidth:!0,size:"small",name:"baseColorName",value:t.baseColorName,onChange:N,disabled:!0})})]})]}),e.jsx(de,{color:"#cc8587",sx:{height:1,width:"100%",mt:2}}),e.jsxs(J,{variant:"outlined",children:[e.jsx(Z,{className:"css-4rfrnx-MuiCardHeader-root",avatar:e.jsx(ke,{}),title:"Add Additional Process ",titleTypographyProps:{style:{color:"white"}},action:e.jsx(ye,{onClick:o,sx:{mt:"-18px"},children:e.jsx(me,{style:{color:"white"}})}),sx:{display:"flex",alignItems:"center",justifyContent:"space-between"}})," ",e.jsxs(Te,{expanded:h,onChange:o,sx:{},children:[e.jsx(we,{expandIcon:e.jsx(me,{}),"aria-controls":"panel1-content",id:"panel1-header",sx:{display:"none"}}),e.jsx(ze,{children:e.jsxs(a,{container:!0,spacing:2,width:"Inherit",sx:{paddingY:2,paddingX:2},children:[e.jsx(a,{item:!0,xs:12,md:3,children:e.jsx(n,{fullWidth:!0,select:!0,label:"Select Fabric",defaultValue:"",size:"small",name:"fabricId",value:t.fabricId,onChange:N,children:D.map(l=>e.jsx(P,{value:l.fabricId,children:l.fabric},l.fabricId))})}),e.jsx(a,{item:!0,xs:12,md:3,children:e.jsx(n,{fullWidth:!0,select:!0,label:"Color",size:"small",name:"colorId",value:t.colorId,onChange:N,children:oe.map(l=>e.jsx(P,{value:l.colorId,children:l.color},l.colorId))})}),e.jsx(a,{item:!0,xs:12,md:1.5,children:e.jsx(n,{label:"Po Pcs",fullWidth:!0,size:"small",name:"poPcs",value:t.poPcs,onChange:N,disabled:!0})}),e.jsx(a,{item:!0,xs:12,md:1.5,children:e.jsx(n,{label:"Pcs. Per Component",fullWidth:!0,size:"small",name:"pcsPerComponent",value:t.pcsPerComponent,onChange:N})}),e.jsx(a,{item:!0,xs:12,md:2,children:e.jsx(n,{fullWidth:!0,select:!0,label:"UOM",type:"number",defaultValue:140,size:"small",name:"uomId",value:t.uomId,onChange:N,children:ne.map(l=>e.jsx(P,{value:l.lookUpId,children:l.lookUpName},l.lookUpId))})}),e.jsx(a,{item:!0,xs:12,md:3,children:e.jsx(n,{fullWidth:!0,select:!0,label:"Process Type",size:"small",name:"processTypeId",value:t.processTypeId,onChange:N,children:ge.map(l=>e.jsx(P,{value:l.lookUpId,children:l.lookUpName},l.lookUpId))})}),e.jsx(a,{item:!0,xs:12,textAlign:"right",sx:{mt:2},children:e.jsx(_,{variant:"contained",size:"small",onClick:b,children:"Save"})})]})})]})]}),e.jsx(de,{color:"#cc8587",sx:{height:1,width:"100%",mt:2}}),e.jsxs(J,{variant:"outlined",children:[e.jsx(Z,{className:"css-4rfrnx-MuiCardHeader-root",avatar:e.jsx(Fe,{}),title:"View Additional Process ",titleTypographyProps:{style:{color:"white"}}}),e.jsx(a,{container:!0,spacing:2,width:"Inherit",sx:{paddingY:2,paddingX:2},children:e.jsxs(a,{sx:{marginTop:2},item:!0,xs:12,children:[e.jsx(Se,{iColumns:d,initialRows:X,setInitialData:m,deleteApi:"https://gecxc.com:4041/api/AdditionalProcess/DeleteAdditionalProcess?adId=",deleteBy:"additionalProcessId",refetch:p,setAccordionExpanded:H,fileName:"AdditionalProcess"}),e.jsxs(pt,{open:w,onClose:i,fullWidth:!0,maxWidth:"lg",children:[e.jsxs(gt,{sx:{backgroundColor:"#A11F23",color:"#ffffff",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx(be,{variant:"h6",component:"div",color:"#ffffff",children:"Assign Vendors "}),e.jsx(ye,{onClick:i,sx:{color:"#ffffff"},children:e.jsx(bt,{})})]}),e.jsxs(ft,{children:[e.jsx(xt,{id:"alert-dialog-slide-description"}),e.jsx(Rt,{additionalProcessData:g,setAdditionalProcessData:S,refetchAdditionalProcessList:p,handleClickOpen:u})]})]})]})})]})]})},qt=Wt;function Et({}){const{data:f}=Pe(),[s,m]=r.useState([]),[t,c]=r.useState([]),[h,H]=r.useState([]),[o,I]=r.useState([]),[G,V]=r.useState([]);Ce(),r.useEffect(()=>{f&&(H(f.result[0].vendorList),c(f.result[0].serviceList),m(f.result[0].serviceTypeList),V(f.result[0].uomList))},[f]);const[j,k]=r.useState({additionalServiceId:0,collectionId:"",serviceTypeId:"",serviceListId:"",vendorId:"",poPcs:"",qty:"",uomId:"string",rate:"",totalAmount:"",costperPiece:"",uom:"",createdBy:0,createdOn:new Date().toISOString()}),q=async p=>{const{name:O,value:A}=p.target;if(console.log(`Updating ${O} to ${A}`),k({...j,[O]:A}),O==="collectionId"){const R=o.find(y=>y.collectionId===A);R&&k(y=>({...y,poPcs:R.poPcs}))}};r.useEffect(()=>{const p=()=>{const A=parseFloat(j.qty)||0,R=parseFloat(j.rate)||0;return(A*R).toFixed(2)};k(A=>({...A,totalAmount:p()}));const O=()=>{const A=parseFloat(j.poPcs)||0,R=parseFloat(j.totalAmount)||0;return(A*R).toFixed(2)};k(A=>({...A,costperPiece:O()}))},[j.qty,j.rate,j.totalAmount,j.costperPiece]);const E=async()=>{try{const p=await se.post("https://gecxc.com:4041/api/AdditionalServices/SaveAdditionalServices",j);console.log("Form data saved:",p.data),k({additionalServiceId:0,collectionId:"",serviceTypeId:"",serviceListId:"",vendorId:"",poPcs:"",qty:"",uomId:"string",rate:"",totalAmount:"",costperPiece:""}),onSaveSuccess&&onSaveSuccess()}catch(p){console.error("Error saving data:",p)}};r.useEffect(()=>{(async()=>{try{const O=await se.get("https://gecxc.com:4041/api/CollectionRegistration/GetCollectionList?appId=1");console.log("GetCollectionFromPlanningHeader",O),I(O.data.result)}catch(O){console.error("Error fetching design options:",O)}})()},[]);const[T,Y]=r.useState([]),B=r.useCallback(async()=>{try{const p=await se.get(`https://gecxc.com:4041/api/AdditionalServices/GetAdditionalServicesListByCollectionId?collectionId=${j.collectionId}`);Array.isArray(p.data.result)?Y(p.data.result.map((O,A)=>({id:A,...O}))):(console.error("API returned unexpected data format:",p.data.result),Y([]))}catch(p){console.error("Error fetching data:",p),Y([])}},[j.collectionId]);r.useEffect(()=>{B()},[B]);const K=[{field:"collectionName",headerName:"Collection Name",flex:1},{field:"serviceType",headerName:"Service Type",flex:1},{field:"serviceListName",headerName:"Service List Name",flex:1},{field:"vendor",headerName:"Vendor",flex:1},{field:"poPcs",headerName:"PO Pieces"},{field:"qty",headerName:"Quantity"},{field:"uom",headerName:"UOM"},{field:"rate",headerName:"Rate"},{field:"totalAmount",headerName:"Total Amount"},{field:"costperPiece",headerName:"Cost per Piece"}];return e.jsxs(e.Fragment,{children:[e.jsxs(J,{variant:"outlined",children:[e.jsx(Z,{className:"css-4rfrnx-MuiCardHeader-root",title:"Additional Services",titleTypographyProps:{style:{color:"white"}}}),e.jsxs(a,{container:!0,spacing:2,width:"Inherit",sx:{paddingY:2,paddingX:2},children:[e.jsx(a,{item:!0,xs:12,md:4,children:e.jsx(n,{fullWidth:!0,select:!0,label:"Select Collection",name:"collectionId",value:j.collectionId,onChange:q,size:"small",children:o.length>0?o.map(p=>e.jsx(P,{id:"collectionId",value:p.collectionId,children:p.collectionName},p.collectionId)):e.jsx(P,{disabled:!0,children:"No Collections Available"})})}),e.jsx(a,{item:!0,md:4,width:"inherit",paddingX:1,children:e.jsx(n,{id:"outlined-select-option",select:!0,label:"Service Type",name:"serviceTypeId",value:j.serviceTypeId,onChange:q,variant:"outlined",size:"small",fullWidth:!0,children:s.map(p=>e.jsx(P,{value:p.lookUpId,children:p.lookUpName},p.lookUpId))})}),e.jsx(a,{item:!0,md:4,width:"inherit",paddingX:1,children:e.jsx(n,{id:"outlined-select-option",select:!0,label:"Service List Id",name:"serviceListId",value:j.serviceListId,onChange:q,variant:"outlined",size:"small",fullWidth:!0,children:t.map(p=>e.jsx(P,{value:p.lookUpId,children:p.lookUpName},p.lookUpId))})}),e.jsx(a,{item:!0,xs:12,md:4,children:e.jsx(n,{fullWidth:!0,select:!0,label:"Vendor Name",size:"small",name:"vendorId",value:j.vendorId,onChange:q,children:h.map(p=>e.jsx(P,{value:p.lookUpId,children:p.lookUpName},p.lookUpId))})}),e.jsx(a,{item:!0,md:2,width:"inherit",paddingX:1,children:e.jsx(n,{id:"outlined-required",label:"PO PC's",name:"poPcs",value:j.poPcs,onChange:q,type:"number",size:"small",fullWidth:!0,disabled:!0})}),e.jsx(a,{item:!0,md:2,width:"inherit",paddingX:1,children:e.jsx(n,{id:"outlined-required",label:"Qty",name:"qty",value:j.qty,onChange:q,type:"number",size:"small",required:!0,fullWidth:!0})}),e.jsx(a,{item:!0,md:2,width:"inherit",paddingX:1,children:e.jsx(n,{fullWidth:!0,select:!0,label:"UOM",defaultValue:"",size:"small",name:"uomId",value:j.uomId,onChange:q,children:G.map(p=>e.jsx(P,{value:p.lookUpId,children:p.lookUpName},p.lookUpId))})}),e.jsx(a,{item:!0,md:2,width:"inherit",paddingX:1,children:e.jsx(n,{id:"outlined-required",label:"Rate",name:"rate",value:j.rate,onChange:q,type:"number",size:"small",fullWidth:!0,required:!0})}),e.jsx(a,{item:!0,md:2,width:"inherit",paddingX:1,children:e.jsx(n,{id:"outlined-required",label:"Total Amount",name:"totalAmount",value:j.totalAmount,onChange:q,type:"number",size:"small",fullWidth:!0,required:!0})}),e.jsx(a,{item:!0,md:2,width:"inherit",paddingX:1,children:e.jsx(n,{id:"outlined-required",label:"Cost per Piece",name:"costperPiece",value:j.costperPiece,onChange:q,type:"number",size:"small",required:!0,fullWidth:!0})}),e.jsx(a,{item:!0,md:12,width:"inherit",paddingX:1,textAlign:"right",children:e.jsx(_,{variant:"contained",color:"primary",size:"small",onClick:E,children:"Save"})})]})]}),e.jsx(de,{color:"#cc8587",sx:{height:1,width:"100%",mt:2}}),e.jsxs(J,{variant:"outlined",children:[e.jsx(Z,{className:"css-4rfrnx-MuiCardHeader-root",title:"View Additional Services",titleTypographyProps:{style:{color:"white"}}}),e.jsx(Se,{iColumns:K,initialRows:T})]})]})}const Re=["Pre Planning","Fabrication","Dyeing/Printing  ","Embroidery ","Schiffli","Additional Process","Additional Services"];function $t(){const[f,s]=r.useState(0),[m,t]=r.useState(new Set),[c,h]=r.useState(null),[H,o]=r.useState([]),{enqueueSnackbar:I}=Ne(),G=y=>{h(y.currentTarget)},V=()=>{h(null)},j=!!c,k=j?"simple-popover":void 0,q=y=>y===1,E=y=>m.has(y),T=()=>{let y=m;E(f)&&(y=new Set(y.values()),y.delete(f)),s(L=>L+1),t(y)},Y=()=>{s(y=>y-1)},B=()=>{if(!q(f))throw new Error("You can't skip a step that isn't optional.");s(y=>y+1),t(y=>{const L=new Set(y.values());return L.add(f),L})},K=()=>{s(0)},[p,O]=r.useState({lookUpId:"",lookUpName:"",lookUpDomain:"",lookUpCategory:"",enabled:"",createdOn:new Date().toISOString()}),A=async()=>{if(!p.lookUpDomain||!p.lookUpName){I("Please fill in all required fields.",{variant:"error",autoHideDuration:5e3});return}try{const y=await se.get(`https://gecxc.com:4041/api/Common/SaveLookUp?lookupDomain=${p.lookUpDomain}&LookUpName=${p.lookUpName}&appId=1`);return console.log("Form data saved:",y.data),I("Lookup saved successfully!",{variant:"success",autoHideDuration:5e3}),O({lookUpId:"",lookUpName:"",lookUpDomain:"",lookUpCategory:"",enabled:"",createdOn:new Date().toISOString()}),y.data}catch(y){throw console.error("Error saving data:",y),I("Error saving data. Please try again.",{variant:"error",autoHideDuration:5e3}),y}},R=y=>{O({...p,[y.target.name]:y.target.value})};return r.useEffect(()=>{(async()=>{try{const L=await se.get("https://gecxc.com:4041/api/Common/GetLookUpDomains?appId=1");console.log("LookupData",L),o(L.data.result)}catch(L){console.error("Error fetching design options:",L)}})()},[]),e.jsxs(Ie,{sx:{width:"100%"},children:[e.jsxs(a,{container:!0,spacing:1,width:"Inherit",children:[e.jsx(a,{item:!0,sm:6,children:e.jsx(be,{variant:"h2",gutterBottom:!0,children:"Planning Process"})}),e.jsxs(a,{item:!0,sm:6,textAlign:"right",children:[e.jsx(_,{"aria-describedby":k,variant:"outlined",size:"small",onClick:G,children:"+Lookup"}),e.jsx(It,{id:"mouse-over-popover",open:j,anchorEl:c,onClose:V,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"right"},sx:{".MuiPopover-paper":{width:"300px",padding:"16px"}},children:e.jsxs(a,{container:!0,spacing:3,width:"Inherit",children:[e.jsx(a,{item:!0,sm:12,children:e.jsx(n,{fullWidth:!0,id:"outlined-select-currency",select:!0,label:"Select Lookup",size:"small",value:p.lookUpDomain,name:"lookUpDomain",onChange:R,children:H.map(y=>e.jsx(P,{value:y.lookUpDomain,children:y.lookUpDomain},y.lookUpDomain))})}),e.jsx(a,{item:!0,sm:12,children:e.jsx(n,{fullWidth:!0,label:"Add Lookup Description",value:p.lookUpName,onChange:R,name:"lookUpName",size:"small"})}),e.jsx(a,{item:!0,sm:3,textAlign:"right",children:e.jsx(_,{variant:"contained",size:"small",onClick:A,children:"Save"})})]})})]})]}),e.jsx(ct,{activeStep:f,children:Re.map((y,L)=>{const D={},ee={};return q(L)&&(ee.optional=e.jsx(be,{variant:"caption",children:"Optional"})),E(L)&&(D.completed=!1),e.jsx(ut,{...D,children:e.jsxs(mt,{...ee,onClick:()=>s(L),style:{cursor:"pointer"},children:[" ",y]})},y)})}),e.jsxs(Ie,{sx:{display:"flex",flexDirection:"row",pt:2},children:[e.jsx(_,{color:"inherit",disabled:f===0,onClick:Y,sx:{mr:1},children:"Back"}),e.jsx(Ie,{sx:{flex:"1 1 auto"}}),q(f)&&e.jsx(_,{color:"inherit",onClick:B,sx:{mr:1},children:"Skip"}),e.jsx(_,{onClick:T,children:f===Re.length-1?"Finish":"Next"})]}),f===Re.length?e.jsxs(r.Fragment,{children:[e.jsx(be,{sx:{mt:2,mb:1},children:"All steps completed - you're finished"}),e.jsxs(Ie,{sx:{display:"flex",flexDirection:"row",pt:2},children:[e.jsx(Ie,{sx:{flex:"1 1 auto"}}),e.jsx(_,{onClick:K,children:"Reset"})]})]}):e.jsxs(r.Fragment,{children:[f===0&&e.jsx(Ot,{}),f===1&&e.jsx(ht,{}),f===2&&e.jsx(wt,{}),f===3&&e.jsx(Nt,{}),f===4&&e.jsx(Ft,{}),f===5&&e.jsx(qt,{}),f===6&&e.jsx(Et,{}),e.jsxs(Ie,{sx:{display:"flex",flexDirection:"row",pt:2},children:[e.jsx(_,{color:"inherit",disabled:f===0,onClick:Y,sx:{mr:1},children:"Back"}),e.jsx(Ie,{sx:{flex:"1 1 auto"}}),q(f)&&e.jsx(_,{color:"inherit",onClick:B,sx:{mr:1},children:"Skip"}),e.jsx(_,{onClick:T,children:f===Re.length-1?"Finish":"Next"})]})]})]})}export{$t as default};
