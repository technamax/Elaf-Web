import{r as l,o as Ve,p as Xe,s as Ke,_ as ue,w as Ze,z as _e,i as Je,j as e,l as De,h as te,g as et,a2 as tt,a3 as at,N as rt,a4 as ye,a as ze,a5 as Ce,a6 as Be,a7 as Ee,a8 as Ue,a9 as Me,C as ae,d as re,G as r,D as me,T as he,aa as Oe,B as le,S as fe,b as we,ab as nt,ac as ot,ad as st,ae as lt,af as dt,M as Ge}from"./index-CKTVVP_6.js";import{a as V}from"./axios-khraMxXR.js";import{A as Pe,c as Se,d as Ne,e as Ae,f as qe,g as Qe,S as it,a as ct,b as ut,F as ht}from"./Fabrication-C-LoRus_.js";import{d as We,a as Re,F as mt}from"./EditAbleDataGrid-BlWYtF0i.js";import{a as pt,b as gt,T as s,B as J,P as xt}from"./TextField-B5ngiqDR.js";import{M as P}from"./Skeleton-CpDlskaV.js";import{A as je,C as Te,D as Ie}from"./DataGrid-D2x9nR7R.js";import{G as Ye}from"./GridToolbar-CpMdzc5q.js";function ft(a){return l.Children.toArray(a).filter(t=>l.isValidElement(t))}function bt(a){return Xe("MuiButtonGroup",a)}const $=Ve("MuiButtonGroup",["root","contained","outlined","text","disableElevation","disabled","firstButton","fullWidth","vertical","grouped","groupedHorizontal","groupedVertical","groupedText","groupedTextHorizontal","groupedTextVertical","groupedTextPrimary","groupedTextSecondary","groupedOutlined","groupedOutlinedHorizontal","groupedOutlinedVertical","groupedOutlinedPrimary","groupedOutlinedSecondary","groupedContained","groupedContainedHorizontal","groupedContainedVertical","groupedContainedPrimary","groupedContainedSecondary","lastButton","middleButton"]),It=["children","className","color","component","disabled","disableElevation","disableFocusRipple","disableRipple","fullWidth","orientation","size","variant"],vt=(a,t)=>{const{ownerState:n}=a;return[{[`& .${$.grouped}`]:t.grouped},{[`& .${$.grouped}`]:t[`grouped${te(n.orientation)}`]},{[`& .${$.grouped}`]:t[`grouped${te(n.variant)}`]},{[`& .${$.grouped}`]:t[`grouped${te(n.variant)}${te(n.orientation)}`]},{[`& .${$.grouped}`]:t[`grouped${te(n.variant)}${te(n.color)}`]},{[`& .${$.firstButton}`]:t.firstButton},{[`& .${$.lastButton}`]:t.lastButton},{[`& .${$.middleButton}`]:t.middleButton},t.root,t[n.variant],n.disableElevation===!0&&t.disableElevation,n.fullWidth&&t.fullWidth,n.orientation==="vertical"&&t.vertical]},jt=a=>{const{classes:t,color:n,disabled:o,disableElevation:g,fullWidth:O,orientation:A,variant:f}=a,I={root:["root",f,A==="vertical"&&"vertical",O&&"fullWidth",g&&"disableElevation"],grouped:["grouped",`grouped${te(A)}`,`grouped${te(f)}`,`grouped${te(f)}${te(A)}`,`grouped${te(f)}${te(n)}`,o&&"disabled"],firstButton:["firstButton"],lastButton:["lastButton"],middleButton:["middleButton"]};return et(I,bt,t)},yt=Ke("div",{name:"MuiButtonGroup",slot:"Root",overridesResolver:vt})(({theme:a,ownerState:t})=>ue({display:"inline-flex",borderRadius:(a.vars||a).shape.borderRadius},t.variant==="contained"&&{boxShadow:(a.vars||a).shadows[2]},t.disableElevation&&{boxShadow:"none"},t.fullWidth&&{width:"100%"},t.orientation==="vertical"&&{flexDirection:"column"},{[`& .${$.grouped}`]:ue({minWidth:40,"&:hover":ue({},t.variant==="contained"&&{boxShadow:"none"})},t.variant==="contained"&&{boxShadow:"none"}),[`& .${$.firstButton},& .${$.middleButton}`]:ue({},t.orientation==="horizontal"&&{borderTopRightRadius:0,borderBottomRightRadius:0},t.orientation==="vertical"&&{borderBottomRightRadius:0,borderBottomLeftRadius:0},t.variant==="text"&&t.orientation==="horizontal"&&{borderRight:a.vars?`1px solid rgba(${a.vars.palette.common.onBackgroundChannel} / 0.23)`:`1px solid ${a.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)"}`,[`&.${$.disabled}`]:{borderRight:`1px solid ${(a.vars||a).palette.action.disabled}`}},t.variant==="text"&&t.orientation==="vertical"&&{borderBottom:a.vars?`1px solid rgba(${a.vars.palette.common.onBackgroundChannel} / 0.23)`:`1px solid ${a.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)"}`,[`&.${$.disabled}`]:{borderBottom:`1px solid ${(a.vars||a).palette.action.disabled}`}},t.variant==="text"&&t.color!=="inherit"&&{borderColor:a.vars?`rgba(${a.vars.palette[t.color].mainChannel} / 0.5)`:Ze(a.palette[t.color].main,.5)},t.variant==="outlined"&&t.orientation==="horizontal"&&{borderRightColor:"transparent"},t.variant==="outlined"&&t.orientation==="vertical"&&{borderBottomColor:"transparent"},t.variant==="contained"&&t.orientation==="horizontal"&&{borderRight:`1px solid ${(a.vars||a).palette.grey[400]}`,[`&.${$.disabled}`]:{borderRight:`1px solid ${(a.vars||a).palette.action.disabled}`}},t.variant==="contained"&&t.orientation==="vertical"&&{borderBottom:`1px solid ${(a.vars||a).palette.grey[400]}`,[`&.${$.disabled}`]:{borderBottom:`1px solid ${(a.vars||a).palette.action.disabled}`}},t.variant==="contained"&&t.color!=="inherit"&&{borderColor:(a.vars||a).palette[t.color].dark},{"&:hover":ue({},t.variant==="outlined"&&t.orientation==="horizontal"&&{borderRightColor:"currentColor"},t.variant==="outlined"&&t.orientation==="vertical"&&{borderBottomColor:"currentColor"})}),[`& .${$.lastButton},& .${$.middleButton}`]:ue({},t.orientation==="horizontal"&&{borderTopLeftRadius:0,borderBottomLeftRadius:0},t.orientation==="vertical"&&{borderTopRightRadius:0,borderTopLeftRadius:0},t.variant==="outlined"&&t.orientation==="horizontal"&&{marginLeft:-1},t.variant==="outlined"&&t.orientation==="vertical"&&{marginTop:-1})})),Fe=l.forwardRef(function(t,n){const o=_e({props:t,name:"MuiButtonGroup"}),{children:g,className:O,color:A="primary",component:f="div",disabled:I=!1,disableElevation:M=!1,disableFocusRipple:B=!1,disableRipple:F=!1,fullWidth:b=!1,orientation:R="horizontal",size:X="medium",variant:L="outlined"}=o,K=Je(o,It),G=ue({},o,{color:A,component:f,disabled:I,disableElevation:M,disableFocusRipple:B,disableRipple:F,fullWidth:b,orientation:R,size:X,variant:L}),Q=jt(G),H=l.useMemo(()=>({className:Q.grouped,color:A,disabled:I,disableElevation:M,disableFocusRipple:B,disableRipple:F,fullWidth:b,size:X,variant:L}),[A,I,M,B,F,b,X,L,Q.grouped]),D=ft(g),Z=D.length,ee=x=>{const w=x===0,d=x===Z-1;return w&&d?"":w?Q.firstButton:d?Q.lastButton:Q.middleButton};return e.jsx(yt,ue({as:f,role:"group",className:De(Q.root,O),ref:n,ownerState:G},K,{children:e.jsx(pt.Provider,{value:H,children:D.map((x,w)=>e.jsx(gt.Provider,{value:ee(w),children:x},w))})}))});let He=!1;const Ct=l.forwardRef(function(t,n){return He||(console.warn(["MUI: The Autocomplete component was moved from the lab to the core.","","You should use `import { Autocomplete } from '@mui/material'`","or `import Autocomplete from '@mui/material/Autocomplete'`"].join(`
`)),He=!0),e.jsx(je,ue({ref:n},t))});var Le={},Pt=at;Object.defineProperty(Le,"__esModule",{value:!0});var $e=Le.default=void 0,St=Pt(tt()),Nt=e;$e=Le.default=(0,St.default)((0,Nt.jsx)("path",{d:"M21 10h-3L2 3v7l9 2-9 2v7l8-3.5V21c0 1.1.9 2 2 2h9c1.1 0 2-.9 2-2v-9c0-1.1-.9-2-2-2m0 11h-9v-9h9zm-4.5-1L13 16h2v-3h3v3h2z"}),"SendAndArchive");const At=()=>{const a=rt(),[t,n]=l.useState([]),[o,g]=l.useState({embroideryId:(t==null?void 0:t.embroideryId)||0,designId:(t==null?void 0:t.designId)||"",batchNo:(t==null?void 0:t.batchNo)||"",planningHeaderId:(t==null?void 0:t.planningHeaderId)||"",componentId:(t==null?void 0:t.componentId)||"",fabricId:(t==null?void 0:t.fabricId)||"",vendorId:(t==null?void 0:t.vendorId)||"",poPcs:(t==null?void 0:t.poPcs)||"",baseColorId:(t==null?void 0:t.baseColorId)||"",baseColorName:(t==null?void 0:t.baseColorName)||"",colorId:(t==null?void 0:t.colorId)||"",availableQty:(t==null?void 0:t.availableQty)||"",noOfHead:(t==null?void 0:t.noOfHead)||"",repeats:(t==null?void 0:t.repeats)||"",cuttingSize:(t==null?void 0:t.cuttingSize)||"",itemsPerRepeat:(t==null?void 0:t.itemsPerRepeat)||"",totalPcs:(t==null?void 0:t.totalPcs)||"",totalAmount:(t==null?void 0:t.totalAmount)||"",threadStiches:(t==null?void 0:t.threadStiches)||"",threadRate:(t==null?void 0:t.threadRate)||"",threadAmount:(t==null?void 0:t.threadAmount)||"",tillaStiches:(t==null?void 0:t.tillaStiches)||"",tilaRate:(t==null?void 0:t.tilaRate)||"",tilaAmount:(t==null?void 0:t.tilaAmount)||"",sequence:(t==null?void 0:t.sequence)||"",sequenceRate:(t==null?void 0:t.sequenceRate)||"",sequenceAmount:(t==null?void 0:t.sequenceAmount)||"",isSolving:(t==null?void 0:t.isSolving)||!1,solvingLayers:(t==null?void 0:t.solvingLayers)||0,solvingInMeters:(t==null?void 0:t.solvingInMeters)||"",solvingRate:(t==null?void 0:t.solvingRate)||0,solvingAmount:(t==null?void 0:t.solvingAmount)||"",threadAdditional:(t==null?void 0:t.threadAdditional)||[],costPerComponent:(t==null?void 0:t.costPerComponent)||"",createdOn:(t==null?void 0:t.createdOn)||new Date().toISOString(),createdBy:(t==null?void 0:t.createdBy)||0,lastUpdatedOn:new Date().toISOString(),LastUpdatedBy:0});l.useEffect(()=>{g({embroideryId:(t==null?void 0:t.embroideryId)||0,designId:(t==null?void 0:t.designId)||"",batchNo:(t==null?void 0:t.batchNo)||"",planningHeaderId:(t==null?void 0:t.planningHeaderId)||"",componentId:(t==null?void 0:t.componentId)||"",fabricId:(t==null?void 0:t.fabricId)||"",vendorId:(t==null?void 0:t.vendorId)||"",poPcs:(t==null?void 0:t.poPcs)||"",baseColorId:(t==null?void 0:t.baseColorId)||"",baseColorName:(t==null?void 0:t.baseColorName)||"",colorId:(t==null?void 0:t.colorId)||"",availableQty:(t==null?void 0:t.availableQty)||"",noOfHead:(t==null?void 0:t.noOfHead)||"",repeats:(t==null?void 0:t.repeats)||"",cuttingSize:(t==null?void 0:t.cuttingSize)||"",itemsPerRepeat:(t==null?void 0:t.itemsPerRepeat)||"",totalPcs:(t==null?void 0:t.totalPcs)||"",totalAmount:(t==null?void 0:t.totalAmount)||"",threadStiches:(t==null?void 0:t.threadStiches)||"",threadRate:(t==null?void 0:t.threadRate)||"",threadAmount:(t==null?void 0:t.threadAmount)||"",tillaStiches:(t==null?void 0:t.tillaStiches)||"",tilaRate:(t==null?void 0:t.tilaRate)||"",tilaAmount:(t==null?void 0:t.tilaAmount)||"",sequence:(t==null?void 0:t.sequence)||"",sequenceRate:(t==null?void 0:t.sequenceRate)||"",sequenceAmount:(t==null?void 0:t.sequenceAmount)||"",isSolving:(t==null?void 0:t.isSolving)||!1,solvingLayers:(t==null?void 0:t.solvingLayers)||0,solvingInMeters:(t==null?void 0:t.solvingInMeters)||"",solvingRate:(t==null?void 0:t.solvingRate)||0,solvingAmount:(t==null?void 0:t.solvingAmount)||"",threadAdditional:(t==null?void 0:t.threadAdditional)||[],costPerComponent:(t==null?void 0:t.costPerComponent)||"",createdOn:(t==null?void 0:t.createdOn)||new Date().toISOString(),createdBy:(t==null?void 0:t.createdBy)||0,lastUpdatedOn:new Date().toISOString(),LastUpdatedBy:0})},[t]);const O=["Boring","Pooni","Laser","Doori","Dissolving"];function A(c,C,p){return{fontWeight:C.indexOf(c)===-1?p.typography.fontWeightRegular:p.typography.fontWeightMedium}}const{data:f}=ye(),[I,M]=l.useState(""),{data:B}=ze(),{data:F,refetch:b}=Ce(I,{skip:!I}),{data:R,refetch:X}=Be(o.designId,{skip:!o.designId}),{data:L}=Ee({batchNo:o.planningHeaderId,componentId:o.componentId},{skip:!o.planningHeaderId||!o.componentId}),{data:K}=Ue({batchNo:o.planningHeaderId,componentId:o.componentId,fabricId:o.fabricId},{skip:!o.planningHeaderId||!o.componentId||!o.fabricId}),{data:G}=Me(o.planningHeaderId,{skip:!o.planningHeaderId});console.log("formData.planningHeaderId",o.planningHeaderId),console.log("collectionData",f);const[Q,H]=l.useState(!1),D=(c,C)=>{H(C)},[Z,ee]=l.useState([]),[x,w]=l.useState([]),[d,q]=l.useState([]),[de,oe]=l.useState([]),[W,ge]=l.useState([]),[pe,ne]=l.useState([]),[se,ie]=l.useState([]),[E,u]=l.useState([]);console.log("batchList",x),console.log("formData",o),l.useEffect(()=>{F&&ee(F.result)},[F]),l.useEffect(()=>{R&&w(R.result)},[R]),l.useEffect(()=>{L&&q(L.result)},[L]),l.useEffect(()=>{K&&ne(L.result)},[K]),l.useEffect(()=>{G&&u(G.result)},[G]),console.log("initialRows",se),l.useEffect(()=>{if(B){const c=B.result[0];oe(c.vendorList),ge(c.noOfHeadsList)}},[B]);const v=(f==null?void 0:f.result)||[],S=async c=>{const C=`https://gecxc.com:4041/api/Embroidery/GetEmbroideryListByBatchNo?batchNo=${c}`;try{return(await V.get(C)).data}catch(p){throw console.error("Error fetching embroidery data:",p),p}},j=async()=>{if(o.planningHeaderId)try{const c=await S(o.planningHeaderId),C=c.result.map((p,N)=>({...p,id:N+1}));ie(C),console.log("fetchEmbroideryData",c),console.log("initialRows",se)}catch(c){console.error(c.message)}};l.useEffect(()=>{j()},[o.planningHeaderId]),l.useEffect(()=>{const c=()=>{const z=parseFloat(o.repeats)||0,_=parseFloat(o.itemsPerRepeat)||0;return z*_};g(z=>({...z,totalPcs:c()}));const C=()=>{const z=parseFloat(o.threadStiches)||0,_=parseFloat(o.threadRate)||0,ce=parseFloat(o.noOfHead)||0,xe=parseFloat(o.repeats)||0;return z/1e3*(_*xe*ce)};g(z=>({...z,threadAmount:C()}));const p=()=>{const z=parseFloat(o.tillaStiches)||0,_=parseFloat(o.tilaRate)||0,ce=parseFloat(o.noOfHead)||0,xe=parseFloat(o.repeats)||0;return z/1e3*(_*xe*ce)};g(z=>({...z,tilaAmount:p()}));const N=()=>{const z=parseFloat(o.sequence)||0,_=parseFloat(o.sequenceRate)||0,ce=parseFloat(o.noOfHead)||0,xe=parseFloat(o.repeats)||0;return z/1e3*(_*xe*ce)};g(z=>({...z,sequenceAmount:N()}));const k=()=>{const z=parseFloat(o.repeats)||0,_=parseFloat(o.noOfHead)||0,ce=parseFloat(o.solvingLayers)||0;return z*_*13/39.37*ce};g(z=>({...z,solvingInMeters:k()}));const Y=()=>{const z=parseFloat(o.solvingInMeters)||0,_=parseFloat(o.solvingRate)||0;return parseFloat(o.solvingLayers),z*_};g(z=>({...z,solvingAmount:Y()}));const be=()=>{const z=parseFloat(o.threadAmount)||0,_=parseFloat(o.tilaAmount)||0,ce=parseFloat(o.sequenceAmount)||0,xe=parseFloat(o.solvingAmount)||0;return z+_+ce+xe};g(z=>({...z,totalAmount:be()}));const ke=()=>{const z=parseFloat(o.totalAmount)||0,_=parseFloat(o.totalPcs)||0;return z/_};g(z=>({...z,costPerComponent:ke()}))},[o.threadAmount,o.totalAmount,o.sequenceAmount,o.solvingAmount,o.repeats,o.tilaAmount,o.itemsPerRepeat,o.threadRate,o.threadStiches,o.noOfHead,o.tilaRate,o.tillaStiches,o.sequenceRate,o.sequence,o.solvingLayers,o.solvingInMeters,o.solvingRate]);const m=c=>{const{name:C,checked:p}=c.target;g(N=>({...N,[C]:p}))},i=c=>{const{name:C,value:p}=c.target;if(C==="collectionId")v.find(N=>N.collectionId===parseInt(p)),M(p),g({...o,collectionId:p});else if(C==="designId"){const N=Z.find(k=>k.designId===parseInt(p));g({...o,designId:p,baseColorId:N?N.colorId:"",baseColorName:N?N.colorName:""})}else if(C==="colorId"){const N=pe.find(k=>k.colorId===p);g({...o,colorId:p,availableQty:N?N.total:"",cuttingSize:N?N.cuttingSize:"",repeats:N?N.repeats:""})}else if(C==="batchNo"){const N=x.find(k=>k.batchNo===p);g({...o,batchNo:p,planningHeaderId:N?N.planningHeaderId:"",poPcs:N?N.poPcs:""}),H(!0)}else g({...o,[C]:p})},y=async()=>{try{const c=await V.post("https://gecxc.com:4041/api/Embroidery/SaveEmbroidery",{...o,threadAdditional:o.threadAdditional.join(", ")});console.log("Save response:",c.data),j(),n({}),H(!1),g({embroideryId:0,componentId:"",fabricId:"",vendorId:"",poPcs:"",baseColorId:"",baseColorName:"",colorId:"",availableQty:"",noOfHead:"",repeats:"",cuttingSize:"",itemsPerRepeat:"",totalPcs:"",totalAmount:"",threadStiches:"",threadRate:"",threadAmount:"",tillaStiches:"",tilaRate:"",tilaAmount:"",sequence:"",sequenceRate:"",sequenceAmount:"",isSolving:!1,solvingLayers:0,solvingInMeters:"",solvingRate:0,solvingAmount:"",threadAdditional:[],costPerComponent:"",createdOn:new Date().toISOString(),createdBy:0,lastUpdatedOn:new Date().toISOString(),LastUpdatedBy:0})}catch(c){console.error("Error saving data:",c)}};console.log("initialRows",se);const U=c=>{const C=c.threadAdditional?c.threadAdditional.split(",").map(p=>p.trim()):[];n({...c,threadAdditional:C})};console.log("initialData",t);const T=async c=>{try{await V.delete(`https://gecxc.com:4041/api/Embroidery/DeleteEmbroideryById?embroideryId=${c}`),j(),console.log("deleted")}catch(C){console.error("Error deleting data:",C)}},h=[{field:"designId",headerName:"Design Id"},{field:"batchNo",headerName:"Batch No."},{field:"componentName",headerName:"Component Id"},{field:"fabricName",headerName:"Fabric Id"},{field:"vendorId",headerName:"Vendor Id"},{field:"poPcs",headerName:"Po Pcs"},{field:"baseColorName",headerName:"Base Color"},{field:"colourName",headerName:"Color"},{field:"availableQty",headerName:"Available Qty"},{field:"noOfHead",headerName:"No. Of Heads"},{field:"repeats",headerName:"Repeats"},{field:"cuttingSize",headerName:"Cutting Size"},{field:"itemsPerRepeat",headerName:"Items Per Repeat"},{field:"totalPcs",headerName:"Total Pcs"},{field:"threadStiches",headerName:"Thread Stitches"},{field:"threadRate",headerName:"Thread Rate"},{field:"threadAmount",headerName:"Thread Amount"},{field:"tillaStiches",headerName:"Tilla Stitches"},{field:"tilaRate",headerName:"Tilla Rate"},{field:"tilaAmount",headerName:"Tilla Amount"},{field:"sequence",headerName:"sequence"},{field:"sequenceRate",headerName:"Sequence Rate"},{field:"sequenceAmount",headerName:"Sequence Amount"},{field:"isSolving",headerName:"Is Solving"},{field:"solvingLayers",headerName:"Solving Layers"},{field:"solvingInMeters",headerName:"Solving In Meters"},{field:"solvingRate",headerName:"Solving Rate"},{field:"solvingAmount",headerName:"Solving Amount"},{field:"threadAdditional",headerName:"ThreadAdditional"},{field:"costPerComponent",headerName:"Cost Per Component"},{field:"Action",headerName:"Actions",renderCell:c=>e.jsx("div",{style:{display:"flex",justifyContent:"space-around"},children:e.jsxs(Fe,{size:"small",variant:"text",children:[e.jsx(fe,{"aria-label":"Edit",onClick:()=>U(c.row),children:e.jsx(We,{})}),e.jsx(fe,{"aria-label":"delete",color:"primary",onClick:()=>T(c.row.embroideryId),children:e.jsx(Re,{})})]})})}];return e.jsxs(e.Fragment,{children:[e.jsxs(ae,{variant:"outlined",children:[e.jsx(re,{className:"css-4rfrnx-MuiCardHeader-root",title:"Embroidery  ",titleTypographyProps:{style:{color:"white"}}}),e.jsxs(r,{container:!0,spacing:2,width:"Inherit",sx:{paddingY:2,paddingX:2},children:[" ",e.jsxs(r,{item:!0,xs:12,md:3,children:[e.jsx(s,{fullWidth:!0,select:!0,label:"Select Collection",name:"collectionId",value:I,onChange:i,size:"small",children:v.map(c=>e.jsx(P,{value:c.collectionId,children:c.collectionName},c.collectionId))})," "]}),e.jsx(r,{item:!0,xs:12,md:3,children:e.jsx(s,{fullWidth:!0,select:!0,label:"Select Design",name:"designId",value:o.designId,onChange:i,size:"small",children:Z.map(c=>e.jsx(P,{value:c.designId,children:c.designNo},c.designId))})}),e.jsxs(r,{item:!0,xs:12,md:3,children:[e.jsx(s,{fullWidth:!0,select:!0,label:"Batch No.",name:"batchNo",value:o.batchNo,onChange:i,size:"small",children:x.map(c=>e.jsx(P,{value:c.batchNo,children:c.batchNo},c.batchNo))})," "]}),e.jsx(r,{item:!0,xs:12,md:3,children:e.jsx(s,{label:"Base Color",fullWidth:!0,size:"small",name:"baseColorName",value:o.baseColorName,onChange:i,disabled:!0})}),e.jsx(r,{item:!0,xs:12,textAlign:"right",sx:{mt:2},children:e.jsx(J,{variant:"contained",size:"small",onClick:y,children:"Save"})})]})]}),e.jsx(r,{item:!0,xs:12,md:12,children:e.jsx(me,{color:"#cc8587",sx:{height:1,width:"100%",mt:2}})}),e.jsxs(ae,{variant:"outlined",children:[e.jsx(re,{className:"css-4rfrnx-MuiCardHeader-root",title:"Add Embroidery",titleTypographyProps:{style:{color:"white"}}}),e.jsxs(Pe,{expanded:Q,onChange:D,sx:{},children:[e.jsx(Se,{expandIcon:e.jsx(Ne,{}),"aria-controls":"panel1-content",id:"panel1-header"}),e.jsxs(Ae,{children:[e.jsxs(r,{container:!0,spacing:2,width:"Inherit",sx:{paddingY:2,paddingX:2},children:[" ",e.jsxs(r,{item:!0,xs:12,md:3,children:[e.jsx(s,{fullWidth:!0,select:!0,label:"Components",name:"componentId",value:o.componentId,onChange:i,size:"small",children:E.map(c=>e.jsx(P,{value:c.componentId,children:c.componentName},c.componentId))})," "]}),e.jsx(r,{item:!0,xs:12,md:3,children:e.jsx(s,{fullWidth:!0,select:!0,label:"Select Fabric",defaultValue:"",size:"small",name:"fabricId",value:o.fabricId,onChange:i,children:d.map(c=>e.jsx(P,{value:c.fabricId,children:c.fabric},c.fabricId))})}),e.jsx(r,{item:!0,xs:12,md:3,children:e.jsx(s,{fullWidth:!0,select:!0,label:"Vendors",defaultValue:"",size:"small",name:"vendorId",value:o.vendorId,onChange:i,children:de.map(c=>e.jsx(P,{value:c.lookUpId,children:c.lookUpName},c.lookUpId))})}),e.jsx(r,{item:!0,xs:12,md:3,children:e.jsx(s,{fullWidth:!0,select:!0,label:"Color",size:"small",name:"colorId",value:o.colorId,onChange:i,children:pe.map(c=>e.jsx(P,{value:c.colorId,children:c.color},c.colorId))})}),e.jsx(r,{item:!0,xs:12,md:1.5,children:e.jsx(s,{label:"Po Pcs",fullWidth:!0,size:"small",name:"poPcs",value:o.poPcs,onChange:i})}),e.jsx(r,{item:!0,xs:12,md:1.5,children:e.jsx(s,{label:"Available Quantity",fullWidth:!0,size:"small",name:"availableQty",type:"number",value:o.availableQty,onChange:i})}),e.jsx(r,{item:!0,xs:12,md:1.5,children:e.jsx(s,{label:"Repeats",type:"number",fullWidth:!0,size:"small",name:"repeats",value:o.repeats,onChange:i})}),e.jsx(r,{item:!0,xs:12,md:1.5,children:e.jsx(s,{fullWidth:!0,select:!0,label:"Heads",defaultValue:"",size:"small",name:"noOfHead",value:o.noOfHead,onChange:i,children:W.map(c=>e.jsx(P,{value:c.lookUpId,children:c.lookUpName},c.lookUpId))})}),e.jsx(r,{item:!0,xs:12,md:1.5,children:e.jsx(s,{label:"Cutting Size",fullWidth:!0,size:"small",name:"cuttingSize",type:"number",value:o.cuttingSize,onChange:i})}),e.jsx(r,{item:!0,xs:12,md:1.5,children:e.jsx(s,{label:"itemsPerRepeat",fullWidth:!0,type:"number",size:"small",name:"itemsPerRepeat",value:o.itemsPerRepeat,onChange:i})}),e.jsx(r,{item:!0,xs:12,md:1.5,children:e.jsx(s,{label:"total Pcs.",fullWidth:!0,size:"small",type:"number",name:"totalPcs",value:o.totalPcs,onChange:i})}),e.jsx(r,{item:!0,xs:12,md:1.5,children:e.jsx(s,{label:"Total Amount",fullWidth:!0,type:"number",size:"small",name:"totalAmount",value:o.totalAmount,onChange:i})}),e.jsx(r,{item:!0,xs:12,md:1.5,children:e.jsx(s,{label:"Cost Per Component",fullWidth:!0,size:"small",name:"costPerComponent",value:o.costPerComponent,onChange:i})}),e.jsx(r,{item:!0,xs:12,md:3,children:e.jsx(s,{select:!0,label:"Additional",value:o.threadAdditional,name:"threadAdditional",size:"small",onChange:i,fullWidth:!0,SelectProps:{multiple:!0},children:O.map(c=>e.jsx(P,{value:c,style:A(c,o.threadAdditional,a),children:c},c))})}),e.jsx(r,{item:!0,xs:12,md:4}),e.jsx(r,{item:!0,xs:12,md:6,children:e.jsxs(r,{container:!0,spacing:1,width:"Inherit",children:[e.jsx(r,{item:!0,xs:12,md:12,children:e.jsx(he,{variant:"h5",gutterBottom:!0,children:"Thread"})})," ",e.jsx(r,{item:!0,xs:12,md:4,children:e.jsx(s,{label:"Stitches",fullWidth:!0,size:"small",type:"number",name:"threadStiches",value:o.threadStiches,onChange:i})}),e.jsx(r,{item:!0,xs:12,md:4,children:e.jsx(s,{label:"Rate",type:"number",fullWidth:!0,size:"small",name:"threadRate",value:o.threadRate,onChange:i})}),e.jsx(r,{item:!0,xs:12,md:4,children:e.jsx(s,{label:"Amount",fullWidth:!0,size:"small",type:"number",name:"threadAmount",value:o.threadAmount,onChange:i})})]})}),e.jsx(r,{item:!0,xs:12,md:6,children:e.jsxs(r,{container:!0,spacing:1,width:"Inherit",children:[e.jsx(r,{item:!0,xs:12,md:12,children:e.jsx(he,{variant:"h5",gutterBottom:!0,children:"Tilla"})})," ",e.jsx(r,{item:!0,xs:12,md:4,children:e.jsx(s,{label:"Stitches",fullWidth:!0,size:"small",type:"number",name:"tillaStiches",value:o.tillaStiches,onChange:i})}),e.jsx(r,{item:!0,xs:12,md:4,children:e.jsx(s,{label:"Rate",fullWidth:!0,size:"small",type:"number",name:"tilaRate",value:o.tilaRate,onChange:i})}),e.jsx(r,{item:!0,xs:12,md:4,children:e.jsx(s,{label:"Amount",fullWidth:!0,size:"small",name:"tilaAmount",value:o.tilaAmount,onChange:i})})]})}),e.jsxs(r,{item:!0,xs:12,md:6,children:[e.jsxs(r,{container:!0,spacing:1,width:"Inherit",children:[e.jsx(r,{item:!0,xs:12,md:12,children:e.jsx(he,{variant:"h5",gutterBottom:!0,children:"Sequence"})})," ",e.jsx(r,{item:!0,xs:12,md:4,children:e.jsx(s,{label:"Sequence",fullWidth:!0,size:"small",name:"sequence",type:"number",value:o.sequence,onChange:i})}),e.jsx(r,{item:!0,xs:12,md:4,children:e.jsx(s,{label:"Rate",fullWidth:!0,type:"number",size:"small",name:"sequenceRate",value:o.sequenceRate,onChange:i})}),e.jsx(r,{item:!0,xs:12,md:4,children:e.jsx(s,{label:"Amount",fullWidth:!0,size:"small",name:"sequenceAmount",value:o.sequenceAmount,onChange:i})})]})," "]}),o.isSolving?e.jsx(r,{item:!0,xs:12,md:6,children:e.jsxs(r,{container:!0,spacing:1,width:"Inherit",children:[e.jsx(r,{item:!0,xs:12,md:12,children:e.jsx(he,{variant:"h5",gutterBottom:!0,children:"Solving"})})," ",e.jsx(r,{item:!0,xs:12,md:3,children:e.jsx(s,{label:"Layers",fullWidth:!0,size:"small",type:"number",name:"solvingLayers",value:o.solvingLayers,onChange:i})}),e.jsx(r,{item:!0,xs:12,md:3,children:e.jsx(s,{label:"Meters",type:"number",fullWidth:!0,size:"small",name:"solvingInMeters",value:o.solvingInMeters,onChange:i})}),e.jsx(r,{item:!0,xs:12,md:3,children:e.jsx(s,{label:"Rate",fullWidth:!0,type:"number",size:"small",name:"solvingRate",value:o.solvingRate,onChange:i})}),e.jsx(r,{item:!0,xs:12,md:3,children:e.jsx(s,{label:"Amount",fullWidth:!0,size:"small",type:"number",name:"solvingAmount",value:o.solvingAmount,onChange:i})})]})}):null,e.jsx(r,{item:!0,xs:12,md:12,children:e.jsx(Oe,{control:e.jsx(Te,{checked:o.isSolving,onChange:m,name:"isSolving"}),label:"isSolving"})})]})," "]})," "]})]}),e.jsx(me,{color:"#cc8587",sx:{height:1,width:"100%",mt:2}}),e.jsxs(ae,{variant:"outlined",children:[e.jsx(re,{className:"css-4rfrnx-MuiCardHeader-root",title:"View Embroidery ",titleTypographyProps:{style:{color:"white"}}})," ",e.jsx(r,{container:!0,spacing:2,width:"Inherit",sx:{paddingY:2,paddingX:2},children:e.jsx(r,{sx:{marginTop:2},item:!0,xs:12,children:e.jsx(le,{sx:{height:500,width:"inherit","& .actions":{color:"text.secondary"},"& .textPrimary":{color:"text.primary"}},children:e.jsx(Ie,{rows:se,columns:h,rowLength:100,sx:{boxShadow:2,border:2,borderColor:"primary.light","& .MuiDataGrid-cell:hover":{color:"primary.main"}}})})})})]})]})},kt=At,zt="/assets/loadingGif-CrY4Z_y7.gif",Bt=()=>{const{data:a}=ye(),[t,n]=l.useState(""),{data:o,refetch:g}=Ce(t,{skip:!t}),[O,A]=l.useState([]),{enqueueSnackbar:f}=we();l.useEffect(()=>{o&&(A(o.result),g())},[o]),console.log("designList",O),console.log("collectionData",a);const I=(a==null?void 0:a.result)||[],[M,B]=l.useState(!1),[F,b]=l.useState([]),[R,X]=l.useState([]),[L,K]=l.useState([]),[G,Q]=l.useState([]),[H,D]=l.useState([]),[Z,ee]=l.useState([]),[x,w]=l.useState([]),[d,q]=l.useState({collectionId:"",baseColorId:"",baseColorName:"",noOfDesigns:"",noOfColors:"",planningHeaderId:"",designId:"",batchNo:"",componentId:"",cuttingSize:"",colorId:"",fabricId:"",noOfHeads:"",repeats:"",repeatSize:"",uomId:"",totalFabric:"",shrinkage:"",wastage:"",total:"",appId:1,createdOn:new Date().toISOString(),createdBy:0,lastUpdatedBy:0,lastUpdatedOn:new Date().toISOString(),isSchiffili:!1,repeatsInMtr:""});l.useEffect(()=>{(async()=>{try{const S=(await V.get("https://gecxc.com:4041/API/Common/GetPrePlanningLookUp?appID=1")).data.result[0];b(S.componentList),K(S.colorList),X(S.fabricList),D(S.noOfHeadsList),Q(S.uom)}catch(v){console.error("Error fetching pre-planning lookup data:",v)}})()},[]),l.useEffect(()=>{const u=async S=>{try{const j=await V.get(`https://gecxc.com:4041/api/PrePlanning/GetPrePlanningHeaderByDesignId?designId=${S}`);console.log(j.data),ee(j.data.result)}catch(j){console.error("Error fetching pre-planning lookup data:",j)}},v=async S=>{try{const j=await V.get(`https://gecxc.com:4041/api/PrePlanning/GetPrePlanningByPlanningHeaderId?planningHeaderId=${S}`);console.log("GetPrePlanningByPlanningHeaderI",j.data.result),w(j.data.result.map((m,i)=>({...m,id:i})))}catch(j){console.error("Error fetching pre-planning lookup data:",j)}};d.designId&&u(d.designId),d.designId&&v(d.planningHeaderId)},[d.designId,d.planningHeaderId]),l.useEffect(()=>{const u=()=>{const m=parseFloat(d.repeats)||0,i=parseFloat(d.repeatSize)||0;return m*i};q(m=>({...m,totalFabric:u()}));const v=()=>{const m=parseFloat(d.totalFabric)||0,i=parseFloat(d.shrinkage)||0,y=parseFloat(d.wastage)||0;return m*(100+(i+y))/100};q(m=>({...m,total:v()}));const S=()=>(parseFloat(d.repeats),.9144*(parseFloat(d.repeatSize)||0));q(m=>({...m,repeatsInMtr:S()}));const j=()=>{const m=parseFloat(d.repeats)||0;return(parseFloat(d.repeatsInMtr)||0)*m};q(m=>({...m,totalFabric:m.isSchiffili?j():u()}))},[d.repeats,d.repeatSize,d.totalFabric,d.shrinkage,d.wastage,d.repeatsInMtr,d.isSchiffili]);const[de,oe]=l.useState(!1);l.useState(!1);const W=u=>{const{name:v,value:S}=u.target;if(v==="collectionId"){const j=I.find(m=>m.collectionId===parseInt(S));n(S),q({...d,collectionId:S,noOfDesigns:j?j.noOfDesigns:"",noOfColors:j?j.noOfColors:""})}else if(v==="designId"){const j=O.find(m=>m.designId===parseInt(S));q({...d,designId:S,baseColorId:j?j.colorId:"",baseColorName:j?j.colorName:""})}else if(v==="batchNo"){const j=Z.find(m=>m.batchNo===S);q({...d,batchNo:S,planningHeaderId:j?j.planningHeaderId:""}),oe(!0)}else q({...d,[v]:S})},ge=async()=>{try{const u=await V.post("https://gecxc.com:4041/api/PrePlanning/SavePrePlanning",{designId:parseInt(d.designId),planningHeaderId:parseInt(d.planningHeaderId),componentId:parseInt(d.componentId),colorId:parseInt(d.colorId),batchNo:d.batchNo,baseColorId:parseInt(d.baseColorId),cuttingSize:parseFloat(d.cuttingSize),fabricId:parseInt(d.fabricId),noOfHeads:parseInt(d.noOfHeads),repeats:parseFloat(d.repeats),repeatSize:parseFloat(d.repeatSize),uomId:parseInt(d.uomId),totalFabric:parseFloat(d.totalFabric),shrinkage:parseFloat(d.shrinkage),wastage:parseFloat(d.wastage),total:parseFloat(d.total),appId:d.appId,createdOn:d.createdOn,createdBy:d.createdBy,lastUpdatedBy:d.lastUpdatedBy,lastUpdatedOn:d.lastUpdatedOn,isSchiffili:d.isSchiffili,repeatsInMtr:d.repeatsInMtr});console.log("Data saved successfully:",u.data),f("Pre Planning saved successfully!",{variant:"success",autoHideDuration:5e3}),q({collectionId:d.collectionId,designId:d.designId,batchNo:d.batchNo,baseColorName:d.baseColorName,planningHeaderId:d.planningHeaderId,noOfDesigns:d.noOfDesigns,noOfColors:d.noOfColors,componentId:"",cuttingSize:"",colorId:"",fabricId:"",noOfHeads:"",repeats:"",repeatSize:"",uomId:"",totalFabric:"",shrinkage:"",wastage:"",total:"",appId:1,createdOn:new Date().toISOString(),createdBy:0,lastUpdatedBy:0,lastUpdatedOn:new Date().toISOString(),isSchiffili:!1,repeatsInMtr:""});const v=await V.get(`https://gecxc.com:4041/api/PrePlanning/GetPrePlanningByPlanningHeaderId?planningHeaderId=${d.planningHeaderId}`);w(v.data.result.map((S,j)=>({...S,id:j}))),oe(!1)}catch(u){console.error("Error saving data:",u),f("Pre Planning not saved successfully!",{variant:"error",autoHideDuration:5e3})}},pe=u=>{const{name:v,checked:S}=u.target;q(j=>({...j,[v]:S,uomId:S?139:j.uomId}))},ne=[{field:"componentId",headerName:"Component",editable:!0,flex:1,type:"singleSelect",valueOptions:F.map(u=>({value:u.lookUpId,label:u.lookUpName}))},{field:"colorId",headerName:"Color",editable:!0,flex:1,type:"singleSelect",valueOptions:L.map(u=>({value:u.lookUpId,label:u.lookUpName}))},{field:"cuttingSize",headerName:"Cutting Size",flex:1,editable:!0},{field:"fabricId",headerName:"Fabrication",editable:!0,flex:1,type:"singleSelect",valueOptions:R.map(u=>({value:u.lookUpId,label:u.lookUpName}))},{field:"noOfHeads",headerName:"No. Of Heads",editable:!0,flex:1,type:"singleSelect",valueOptions:H.map(u=>({value:u.lookUpId,label:u.lookUpName}))},{field:"repeats",headerName:"Repeats",flex:1,editable:!0},{field:"repeatSize",headerName:"Repeat Size",flex:1,editable:!0},{field:"totalFabric",headerName:"Total Fabric",flex:1,editable:!0,valueSetter:(u,v)=>{const S=v.repeats??0,j=v.repeatSize??0,m=S*j;return console.log("totalFabric",m),{...v,totalFabric:m}}},{field:"uomId",headerName:"UOM",editable:!0,flex:1,type:"singleSelect",valueOptions:G.map(u=>({value:u.lookUpId,label:u.lookUpName}))},{field:"shrinkage",headerName:"Shrinkage %",flex:1,editable:!0},{field:"wastage",headerName:"Wastage %",flex:1,editable:!0},{field:"total",headerName:"Total",flex:1,editable:!0,valueSetter:(u,v)=>{const S=v.shrinkage??0,j=v.wastage??0,m=v.totalFabric??0,i=m*(100+(S+j))/100;return console.log("totalFabric",m),{...v,total:i}}}];console.log("batchList:",Z);const se="https://gecxc.com:4041/api/PrePlanning/SavePrePlanning",ie="https://gecxc.com:4041/api/PrePlanning/DeletePreplanningByPlanningId?PlanningId=",E=(u,v)=>{oe(v)};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"CardHeader",children:e.jsxs(ae,{variant:"outlined",children:[e.jsx(re,{className:"css-4rfrnx-MuiCardHeader-root",avatar:e.jsx($e,{}),title:"Pre Planning",titleTypographyProps:{style:{color:"white"}},children:" "}),e.jsxs(r,{container:!0,spacing:2,width:"Inherit",sx:{paddingY:2,paddingX:2},children:[e.jsxs(r,{item:!0,xs:12,md:2,children:[e.jsx(s,{fullWidth:!0,select:!0,label:"Select Collection",name:"collectionId",value:d.collectionId,onChange:W,size:"small",children:I.map(u=>e.jsx(P,{value:u.collectionId,children:u.collectionName},u.collectionId))})," "]}),e.jsx(r,{item:!0,xs:12,md:2,children:e.jsx(s,{fullWidth:!0,select:!0,label:"Select Design",name:"designId",value:d.designId,onChange:W,size:"small",children:O.map(u=>e.jsx(P,{value:u.designId,children:u.designNo},u.designId))})}),e.jsxs(r,{item:!0,xs:12,md:2,children:[e.jsx(s,{fullWidth:!0,select:!0,label:"Batch No.",name:"batchNo",value:d.batchNo,onChange:W,size:"small",children:Z.map(u=>e.jsx(P,{value:u.batchNo,children:u.batchNo},u.batchNo))})," "]}),e.jsx(r,{item:!0,xs:12,md:2,children:e.jsx(s,{label:"No of Design",fullWidth:!0,size:"small",name:"noOfDesigns",value:d.noOfDesigns,onChange:W,disabled:!0})}),e.jsx(r,{item:!0,xs:12,md:2,children:e.jsx(s,{label:"No of Color",fullWidth:!0,size:"small",name:"noOfColors",value:d.noOfColors,onChange:W,disabled:!0})}),e.jsx(r,{item:!0,xs:12,md:2,children:e.jsx(s,{label:"Base Color",fullWidth:!0,size:"small",name:"baseColorName",value:d.baseColorName,onChange:W,disabled:!0})})]})]})}),e.jsxs(ae,{variant:"outlined",children:[e.jsx(re,{className:"MainCard",avatar:e.jsx(qe,{}),title:"Add Pre Planning",titleTypographyProps:{style:{color:"white"}}}),e.jsxs(Pe,{expanded:de,onChange:E,sx:{},children:[e.jsx(Se,{expandIcon:e.jsx(Ne,{}),"aria-controls":"panel1-content",id:"panel1-header"}),e.jsx(Ae,{children:e.jsxs(r,{container:!0,spacing:2,width:"Inherit",sx:{paddingY:2,paddingX:2},children:[e.jsx(r,{item:!0,xs:12,md:2,children:e.jsx(je,{fullWidth:!0,options:F,getOptionLabel:u=>u.lookUpName,value:F.find(u=>u.lookUpId===d.componentId)||null,onChange:(u,v)=>{W({target:{name:"componentId",value:v?v.lookUpId:""}})},renderInput:u=>e.jsx(s,{...u,label:"Select Component",size:"small",name:"componentId",value:d.componentId})})}),e.jsxs(r,{item:!0,xs:12,md:2,children:[" ",e.jsx(je,{fullWidth:!0,options:L,getOptionLabel:u=>u.lookUpName,value:L.find(u=>u.lookUpId===d.colorId)||null,onChange:(u,v)=>{W({target:{name:"colorId",value:v?v.lookUpId:""}})},renderInput:u=>e.jsx(s,{...u,label:"Color",size:"small",value:d.colorId,name:"colorId"})})]}),e.jsx(r,{item:!0,xs:12,md:2,children:e.jsx(s,{label:"Cutting Size",fullWidth:!0,size:"small",name:"cuttingSize",type:"number",value:d.cuttingSize,onChange:W})}),e.jsx(r,{item:!0,xs:12,md:2,children:e.jsx(je,{fullWidth:!0,options:R,getOptionLabel:u=>u.lookUpName,value:R.find(u=>u.lookUpId===d.fabricId)||null,onChange:(u,v)=>{W({target:{name:"fabricId",value:v?v.lookUpId:""}})},renderInput:u=>e.jsx(s,{...u,label:"Fabrication",size:"small",name:"fabricId",value:d.fabricId})})}),e.jsx(r,{item:!0,xs:12,md:2,children:e.jsx(s,{fullWidth:!0,select:!0,label:"No of Heads",defaultValue:"",size:"small",name:"noOfHeads",value:d.noOfHeads,onChange:W,children:H.map(u=>e.jsx(P,{value:u.lookUpId,children:u.lookUpName},u.lookUpId))})}),e.jsx(r,{item:!0,xs:12,md:2,children:e.jsx(s,{label:"Repeats",fullWidth:!0,size:"small",name:"repeats",type:"number",value:d.repeats,onChange:W})}),e.jsx(r,{item:!0,xs:12,md:2,children:e.jsx(s,{label:"Repeat Size",fullWidth:!0,type:"number",size:"small",name:"repeatSize",value:d.repeatSize,onChange:W})}),e.jsx(r,{item:!0,xs:12,md:2,children:e.jsx(s,{label:"Total Fabric",fullWidth:!0,size:"small",name:"totalFabric",value:d.totalFabric,onChange:W})}),e.jsx(r,{item:!0,xs:12,md:2,children:e.jsx(s,{fullWidth:!0,select:!0,label:"UOM",type:"number",defaultValue:"",size:"small",name:"uomId",value:d.uomId,onChange:W,disabled:d.isSchiffili,children:G.map(u=>e.jsx(P,{value:u.lookUpId,children:u.lookUpName},u.lookUpId))})}),e.jsx(r,{item:!0,xs:12,md:2,children:e.jsx(s,{label:"Shrinkage %",fullWidth:!0,size:"small",type:"number",name:"shrinkage",value:d.shrinkage,onChange:W})}),e.jsx(r,{item:!0,xs:12,md:2,children:e.jsx(s,{label:"Wastage %",fullWidth:!0,size:"small",type:"number",name:"wastage",value:d.wastage,onChange:W})}),e.jsx(r,{item:!0,xs:12,md:2,children:e.jsx(s,{label:"Total",fullWidth:!0,type:"number",size:"small",name:"total",value:d.total,onChange:W})}),e.jsx(r,{item:!0,xs:12,md:1,textAlign:"right",children:e.jsx(Oe,{control:e.jsx(Te,{checked:d.isSchiffili,onChange:pe,name:"isSchiffili"}),label:"Is Schiffli"})}),d.isSchiffili?e.jsx(r,{item:!0,xs:12,md:3,children:e.jsx(r,{container:!0,spacing:1,width:"Inherit",children:e.jsx(r,{item:!0,xs:12,md:4,children:e.jsx(s,{label:"repeat in mtr",fullWidth:!0,size:"small",name:"repeatsInMtr",disabled:!0,value:d.repeatsInMtr,onChange:W})})})}):null,e.jsx(r,{item:!0,xs:12,textAlign:"right",children:e.jsx(J,{variant:"contained",size:"small",onClick:ge,children:"Save"})})]})})]})]}),e.jsx(r,{item:!0,xs:12,md:12,children:e.jsx(me,{sx:{height:1,width:"100%",marginTop:1,marginBottom:0}})}),e.jsxs(ae,{variant:"outlined",children:[e.jsx(re,{className:"MainCard",avatar:e.jsx(Qe,{}),title:"View",titleTypographyProps:{style:{color:"white"}}}),e.jsx(r,{sx:{paddingY:1,paddingX:1},children:e.jsx(r,{sx:{},item:!0,xs:12,children:M?e.jsx("div",{style:{display:"flex",top:"40%",position:"absolute",left:"45%"},children:e.jsx("img",{src:zt,alt:"Loading",style:{width:300}})}):e.jsx(mt,{ncolumns:ne,initialRows:x,formData:d,editAPi:se,deleteApi:ie,deleteBy:"planningId",disableAddRecord:!0})})})]})]})},Ot=Bt,wt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAACXBIWXMAAAsTAAALEwEAmpwYAAADl0lEQVR4nO2Y6W+MURTGB60tdiooagmJPZQgltRa+75GLEG1aGxtao9diDSERPFBRIgtPuGLXcSa2uKbf+Ynh+dtbsb7ztyZjlakJ5n03Pee985zz/pMY7EGaZD/SIAOwARgMTAHGAXk1CegxsB04CbwGXgCnAP2AIeBKuAp8AE4AXSrK2BNgBLgK3AeGBHiyWLZmCc7A8sEtBJo8TfBjQPeAkeBlh72ecBaYBfQHyjS+z3/BrhShax3yN4oeW0D0CZkvxGwCFgNjJb3e2UypBeAq0DTkP0pwAzpzYF99jfirH666CSgGmiWCYAXgSMJ9kvi1rmWewnsBwNLgb3AwdqCqwAuO96Zq8Sv8VAEwNlJzl0nux9hKeELbizwDMgC2ip0Xa1dSG8ju8nATOcS+5KFTnYl8uKmdMA1BT4CfbXe6H6pvmCjs853iqS189wKYlPcxyq5jwAOAG6lA3C73c5Z/3FLoNjjnPKIBm9tZ6Z1BOBTquCy1AZcT4wMKlVrOzzf46wdIc9aypMGbhrwOqXmDSwBToc8n6ww2qfA86wxlsshBdLechhYCTy2HE8F4HUf7/gKsNPRs60POmsrvodAJ9/DrON/018rhG0Kxxag0BuVI8Bmp0COW+HouYV4omZ0dsxH1JseSC9ye5RGVV7Ee+1EHF6IzWQ5e0VxAH9FB1iglvXeC5xeGm9fFFa5ypkVEe/dtT0rLOAksNvZWxM0dpGNQdItKoOAG6kAXAgckF4a54kCYGjEe9VxF3nurI3AdpReGJAETaVDRsVSATgLOCY9xzwBTAVWmScSvPcUGCLdbM86e4UBvVKa5Ij9NLPwptpiJgQhdp71SdYG+M1Snomh3HbtlTYDpa9WHyyzeQ1c8ganA6w/vUxi01okojKeTUfYDzePSbdCaWFhBt6l9TPARk/UsNcF3tiEAOYDXwyAh3cL3MIDtqZNtYz7WR4lAFdDpYB5wJkk53UL+KGm0Eid0zxdgLlyf3YicCYa+mWxBKJpsVx6uRpzj1htBNhvDVsVuEw/K2fF2QzVRVp5kI/10q8F3LHWInJQqZD3jWjOwzzPCnLvftQ0yrjgMaLE/YqDyQI8ArrUFcB79gMowb6lxyuxlVNOQ29fVwDzlYPdtW4kCl+hCVGlfmeN+pxsUiOnGQA5XgymWj3xjv6TUOMltZUr0s2ucexfEn5Pnu8qtoRTqt4E6Ck65k/tG6RBYvUvPwHk8jkSqvSzmwAAAABJRU5ErkJggg==",Wt=()=>{const[a,t]=l.useState([]),[n,o]=l.useState({dpId:0,designId:"",batchNo:"",planningHeaderId:"",fabricId:"",colorId:"",color:"",vendorId:"",processType:"",AvailableQty:"",Shrinkage:"",Wastage:"",OutputQty:"",UOM:"",uomId:"",RatePerUOM:"",UnitRatePerPo:"",TotalExclGst:"",GST:"0",TotalIncludingGst:"",createdBy:0,poPcs:"",baseColorName:""});l.useEffect(()=>{o({dpId:a.dpId||0,designId:(a==null?void 0:a.designId)||"",planningHeaderId:(a==null?void 0:a.planningHeaderId)||0,batchNo:(a==null?void 0:a.batchNo)||"",fabricId:(a==null?void 0:a.fabricId)||"",colorId:(a==null?void 0:a.colorId)||"",color:(a==null?void 0:a.color)||"",vendorId:(a==null?void 0:a.vendorId)||"",processType:(a==null?void 0:a.processType)||"",AvailableQty:(a==null?void 0:a.availableQty)||"",Shrinkage:(a==null?void 0:a.shrinkage)||"",Wastage:(a==null?void 0:a.wastage)||"",OutputQty:(a==null?void 0:a.outputQty)||0,UOM:(a==null?void 0:a.uom)||0,uomId:(a==null?void 0:a.uomId)||"",RatePerUOM:(a==null?void 0:a.ratePerUOM)||0,UnitRatePerPo:(a==null?void 0:a.unitRatePerPo)||"",TotalExclGst:(a==null?void 0:a.totalExclGst)||"",GST:(a==null?void 0:a.gst)||"",TotalIncludingGst:(a==null?void 0:a.totalIncludingGst)||"",createdBy:(a==null?void 0:a.createdBy)||0,poPcs:(a==null?void 0:a.poPcs)||0,baseColorName:(a==null?void 0:a.baseColorName)||0})},[a]);const{enqueueSnackbar:g}=we();console.log("Dyeing form data to send",n);const{data:O}=ye(),[A,f]=l.useState(""),{data:I}=ze(),{data:M,refetch:B}=Ce(A,{skip:!A}),{data:F,refetch:b}=Be(n.designId,{skip:!n.designId}),{data:R}=nt(n.planningHeaderId,{skip:!n.planningHeaderId}),{data:X}=ot({fabricId:n.fabricId,planningHeaderId:n.planningHeaderId},{skip:!n.fabricId||!n.planningHeaderId}),{data:L,refetch:K}=st(n.planningHeaderId,{skip:!n.planningHeaderId}),[G,Q]=l.useState([]),[H,D]=l.useState([]),[Z,ee]=l.useState([]),[x,w]=l.useState([]),[d,q]=l.useState([]),[de,oe]=l.useState([]),[W,ge]=l.useState([]),[pe,ne]=l.useState(!1);console.log("batchList",H),console.log("formData",n);const se=(i,y)=>{ne(y)};l.useEffect(()=>{M&&Q(M.result)},[M]),l.useEffect(()=>{F&&D(F.result)},[F]),l.useEffect(()=>{R&&ee(R.result)},[R]),l.useEffect(()=>{X&&oe(X.result)},[X]),l.useEffect(()=>{I&&ge(I.result[0].vendorList)},[R]),console.log(W),l.useEffect(()=>{L&&q(L.result.map((i,y)=>({id:y,...i})))},[L,K]),l.useEffect(()=>{if(I){const i=I.result[0];w(i.uomList)}},[I]);const ie=(O==null?void 0:O.result)||[],E=i=>{const{name:y,value:U}=i.target;if(y==="collectionId")ie.find(T=>T.collectionId===parseInt(U)),f(U),o({...n,collectionId:U});else if(y==="designId"){const T=G.find(h=>h.designId===parseInt(U));o({...n,designId:U,baseColorId:T?T.colorId:"",baseColorName:T?T.colorName:""})}else if(y==="batchNo"){const T=H.find(h=>h.batchNo===U);o({...n,batchNo:U,planningHeaderId:T?T.planningHeaderId:"",poPcs:T?T.poPcs:""}),ne(!0)}else if(y==="fabricId")Z.find(T=>T.fabricId===U),console.log("Selected Fabric:",Z),o({...n,fabricId:U});else if(y==="ColorId"){const T=de.find(h=>h.colorId===U.colorId);o({...n,ColorId:U.colorId,color:T.color,AvailableQty:T.total,UOM:T.uom,Shrinkage:T.shrinkage,Wastage:T.wastage})}else o(y==="processType"?{...n,processType:U}:y==="vendorId"?{...n,vendorId:U}:{...n,[y]:U})};l.useEffect(()=>{const i=()=>{const k=parseFloat(n.AvailableQty)||0,Y=parseFloat(n.Shrinkage)||0,be=parseFloat(n.Wastage)||0;return k*(100-(Y+be))/100},y=()=>{const k=parseFloat(n.AvailableQty)||0,Y=parseFloat(n.RatePerUOM)||0;return k*Y},U=(k,Y)=>k*(1+Y/100),T=i(),h=y(),c=parseFloat(n.GST)||0,C=U(h,c),p=parseFloat(n.poPcs)||0,N=p?C/p:0;o(k=>({...k,OutputQty:T,TotalExclGst:h.toFixed(2),TotalIncludingGst:C.toFixed(2),UnitRatePerPo:N.toFixed(2)}))},[n.AvailableQty,n.Shrinkage,n.Wastage,n.RatePerUOM,n.GST,n.poPcs,n.UnitRatePerPo]);const u=async()=>{if(!n.designId||!n.batchNo){alert("Please fill all required fields.");return}try{const i=await V.post("https://gecxc.com:4041/api/DyeingPrinting/SaveDyeingPrinting",n);i.status===200?(console.log("Data saved successfully:",i.data),g("Dyeing saved successfully!",{variant:"success",autoHideDuration:5e3}),o(y=>({designId:y.designId,planningHeaderId:y.planningHeaderId,batchNo:y.batchNo,dpId:0,fabricId:"",colorId:"",color:"",vendorId:"",processType:"",AvailableQty:"",Shrinkage:"",Wastage:"",OutputQty:"",UOM:"",uomId:"",RatePerUOM:"",UnitRatePerPo:"",TotalExclGst:"",GST:"0",TotalIncludingGst:"",createdBy:0,poPcs:"",baseColorName:""})),K()):(console.error("Failed to save data:",i.data),g("Dyeing not saved successfully!",{variant:"error",autoHideDuration:5e3})),ne(!1)}catch(i){console.error("Error saving data:",i)}},v=[{value:"D",label:"Dyeing"},{value:"P",label:"Printing"}],S=i=>{t(i)};console.log("initialData",a);const j=async i=>{try{await V.delete(`https://gecxc.com:4041/api/DyeingPrinting/DeleteDyeingPrintingById?DPId=${i}`),K(),console.log("deleted")}catch(y){console.error("Error deleting data:",y)}},m=[{field:"fabricName",headerName:"Fabric"},{field:"colorName",headerName:"Color"},{field:"vendorName",headerName:"Vendor"},{field:"processType",headerName:"Process Type"},{field:"uom",headerName:"uom"},{field:"availableQty",headerName:"Available Quantitity"},{field:"shrinkage",headerName:"Shrinkage"},{field:"wastage",headerName:"Wastage"},{field:"outputQty",headerName:"Output Qty"},{field:"ratePerUOM",headerName:"Rate"},{field:"totalExclGst",headerName:"Total Excl. Gst"},{field:"gst",headerName:"GST"},{field:"totalIncludingGst",headerName:"Total Including GST"},{field:"unitRatePerPo",headerName:"UnitRate Per Po."},{field:"Action",headerName:"Actions",renderCell:i=>e.jsx("div",{style:{display:"flex",justifyContent:"space-around"},children:e.jsxs(Fe,{size:"small",variant:"text",children:[e.jsx(fe,{"aria-label":"Edit",onClick:()=>S(i.row),children:e.jsx(We,{})}),e.jsx(fe,{"aria-label":"delete",color:"primary",onClick:()=>j(i.row.dpId),children:e.jsx(Re,{})})]})})}];return e.jsxs(e.Fragment,{children:[e.jsxs(ae,{variant:"outlined",children:[e.jsx(re,{className:"css-4rfrnx-MuiCardHeader-root",avatar:e.jsx(lt,{src:wt,sx:{background:"transparent"}}),title:"Dyeing ",titleTypographyProps:{style:{color:"white"}}}),e.jsxs(r,{container:!0,spacing:2,width:"Inherit",sx:{paddingY:2,paddingX:2},children:[e.jsxs(r,{item:!0,xs:12,md:3,children:[e.jsx(s,{fullWidth:!0,select:!0,label:"Select Collection",name:"collectionId",value:A,onChange:E,size:"small",children:ie.map(i=>e.jsx(P,{value:i.collectionId,children:i.collectionName},i.collectionId))})," "]}),e.jsx(r,{item:!0,xs:12,md:3,children:e.jsx(s,{fullWidth:!0,select:!0,label:"Select Design",name:"designId",value:n.designId,onChange:E,size:"small",children:G.map(i=>e.jsx(P,{value:i.designId,children:i.designNo},i.designId))})}),e.jsxs(r,{item:!0,xs:12,md:3,children:[e.jsx(s,{fullWidth:!0,select:!0,label:"Batch No.",name:"batchNo",value:n.batchNo,onChange:E,size:"small",children:H.map(i=>e.jsx(P,{value:i.batchNo,children:i.batchNo},i.batchNo))})," "]}),e.jsx(r,{item:!0,xs:12,md:3,children:e.jsx(s,{label:"Base Color",fullWidth:!0,size:"small",name:"baseColorName",value:n.baseColorName,onChange:E,disabled:!0})}),e.jsx(r,{item:!0,xs:12,md:3,children:e.jsx(s,{fullWidth:!0,select:!0,label:"Select Fabric",defaultValue:"",size:"small",name:"fabricId",value:n.fabricId,onChange:E,children:Z.map(i=>e.jsx(P,{value:i.fabricId,children:i.fabric},i.fabricId))})}),e.jsx(r,{item:!0,xs:12,md:3,children:e.jsx(Ct,{fullWidth:!0,options:de,getOptionLabel:i=>i.color||"",renderInput:i=>e.jsx(s,{...i,label:"Color",name:"colorId",size:"small"}),value:de.find(i=>i.colorId===n.colorId)||null,onChange:(i,y)=>{o(U=>({...U,colorId:y?y.colorId:"",color:y?y.color:"",AvailableQty:y?y.total:"",UOM:y?y.uom:"",uomId:y?y.uomId:"",Shrinkage:y?y.shrinkage:"",Wastage:y?y.wastage:""}))}})})]})]}),e.jsx(me,{color:"#cc8587",sx:{height:1,width:"100%",mt:2}}),e.jsxs(ae,{variant:"outlined",children:[e.jsx(re,{className:"css-4rfrnx-MuiCardHeader-root",avatar:e.jsx(qe,{}),title:"Add Dyeing ",titleTypographyProps:{style:{color:"white"}}}),e.jsxs(Pe,{expanded:pe,onChange:se,sx:{},children:[e.jsx(Se,{expandIcon:e.jsx(Ne,{}),"aria-controls":"panel1-content",id:"panel1-header"}),e.jsx(Ae,{children:e.jsxs(r,{container:!0,spacing:2,width:"Inherit",sx:{paddingY:2,paddingX:2},children:[e.jsx(r,{item:!0,xs:12,md:3,children:e.jsx(s,{fullWidth:!0,select:!0,label:"Vendor Name",size:"small",name:"vendorId",value:n.vendorId,onChange:E,children:W.map(i=>e.jsx(P,{value:i.lookUpId,children:i.lookUpName},i.lookUpId))})}),e.jsx(r,{item:!0,xs:12,md:3,children:e.jsx(s,{fullWidth:!0,select:!0,label:"Process Type",size:"small",name:"processType",value:n.processType,onChange:E,children:v.map(i=>e.jsx(P,{value:i.value,children:i.label},i.value))})}),e.jsx(r,{item:!0,xs:12,md:3,children:e.jsx(s,{label:"Po Pcs",fullWidth:!0,size:"small",name:"poPcs",value:n.poPcs,onChange:E})}),e.jsx(r,{item:!0,xs:12,md:1.5,children:e.jsx(s,{label:"UOM",fullWidth:!0,size:"small",name:"UOM",value:n.UOM,onChange:E})}),e.jsx(r,{item:!0,xs:12,md:1.5,children:e.jsx(s,{label:"AvailableQty",fullWidth:!0,size:"small",type:"number",name:"AvailableQty",value:n.AvailableQty,onChange:E})}),e.jsx(r,{item:!0,xs:12,md:1.5,children:e.jsx(s,{label:"Shrinkage%",type:"number",fullWidth:!0,size:"small",name:"Shrinkage",value:n.Shrinkage,onChange:E})}),e.jsx(r,{item:!0,xs:12,md:1.5,children:e.jsx(s,{label:"Wastage%",fullWidth:!0,size:"small",type:"number",name:"Wastage",value:n.Wastage,onChange:E})}),e.jsx(r,{item:!0,xs:12,md:1.5,children:e.jsx(s,{label:"Output Qty",fullWidth:!0,size:"small",name:"OutputQty",type:"number",value:n.OutputQty,onChange:E})}),e.jsx(r,{item:!0,xs:12,md:1.5,children:e.jsx(s,{label:"Rate",fullWidth:!0,size:"small",type:"number",name:"RatePerUOM",value:n.RatePerUOM,onChange:E})}),e.jsx(r,{item:!0,xs:12,md:1.5,children:e.jsx(s,{label:"Total Excluding GST",type:"number",fullWidth:!0,size:"small",name:"TotalExclGst",value:n.TotalExclGst,onChange:E})}),e.jsxs(r,{item:!0,xs:12,md:1.5,children:[e.jsx(s,{label:"GST",fullWidth:!0,type:"number",size:"small",name:"GST",value:n.GST,onChange:E})," "]}),e.jsx(r,{item:!0,xs:12,md:1.5,children:e.jsx(s,{label:"Total:Including Gst",fullWidth:!0,size:"small",name:"TotalExclGst",value:n.TotalIncludingGst,onChange:E})}),e.jsx(r,{item:!0,xs:12,md:1.5,children:e.jsx(s,{label:"Unit P: T/Po PC's",fullWidth:!0,size:"small",name:"UnitRatePerPo",value:n.UnitRatePerPo,onChange:E})}),e.jsx(r,{item:!0,xs:12,md:12,textAlign:"right",children:e.jsx(J,{variant:"contained",color:"primary",size:"small",onClick:u,children:"Save"})})]})})]})]}),e.jsx(me,{color:"#cc8587",sx:{height:1,width:"100%",mt:2}}),e.jsxs(ae,{variant:"outlined",children:[e.jsx(re,{className:"css-4rfrnx-MuiCardHeader-root",avatar:e.jsx(Qe,{}),title:"View Dyeing ",titleTypographyProps:{style:{color:"white"}}})," ",e.jsx(r,{container:!0,spacing:2,width:"Inherit",sx:{paddingY:2,paddingX:2},children:e.jsx(r,{item:!0,xs:12,md:12,paddingTop:1,children:e.jsx(le,{sx:{height:500,width:"inherit","& .actions":{color:"text.secondary"},"& .textPrimary":{color:"text.primary"}},children:e.jsx(Ie,{rows:d,columns:m,rowLength:100,sx:{boxShadow:2,border:2,borderColor:"primary.light","& .MuiDataGrid-cell:hover":{color:"primary.main"}}})})})})]})]})},Rt=Wt,Tt=()=>{const[a,t]=l.useState([]),[n,o]=l.useState({schiffiliId:0,designId:"",planningHeaderId:0,batchNo:"",componentId:"",poPcs:"",baseColorName:"",fabricId:"",vendorId:"",colorId:"",availableQty:"",thaanQty:0,operatingMachineId:0,operatingMachine:"",workingHeadId:0,cuttingSize:"",rate:"",costPerComponent:"",totalEmbroidry:0,noOfItemPerThaan:0,noOfStichesPerYard:0,amountPerYard:0,totalPcs:0,laserCut:!1,laserCutRate:0,pcsForLaserCut:0,totalAmount:0,createdOn:new Date().toISOString(),createdBy:0,lastUpdatedOn:new Date().toISOString(),LastUpdatedBy:0});l.useEffect(()=>{o({schiffiliId:a.schiffiliId||0,designId:(a==null?void 0:a.designId)||"",planningHeaderId:(a==null?void 0:a.planningHeaderId)||0,batchNo:(a==null?void 0:a.batchNo)||"",componentId:(a==null?void 0:a.componentId)||"",poPcs:(a==null?void 0:a.poPcs)||"",baseColorName:(a==null?void 0:a.baseColorName)||"",fabricId:(a==null?void 0:a.fabricId)||"",vendorId:(a==null?void 0:a.vendorId)||"",colorId:(a==null?void 0:a.colorId)||"",availableQty:(a==null?void 0:a.availableQty)||"",thaanQty:(a==null?void 0:a.thaanQty)||0,operatingMachineId:(a==null?void 0:a.operatingMachineId)||0,operatingMachine:(a==null?void 0:a.operatingMachine)||"",workingHeadId:(a==null?void 0:a.workingHeadId)||0,cuttingSize:(a==null?void 0:a.cuttingSize)||"",rate:(a==null?void 0:a.rate)||"",costPerComponent:(a==null?void 0:a.costPerComponent)||"",totalEmbroidry:(a==null?void 0:a.totalEmbroidry)||0,noOfItemPerThaan:(a==null?void 0:a.noOfItemPerThaan)||0,noOfStichesPerYard:(a==null?void 0:a.noOfStichesPerYard)||0,amountPerYard:(a==null?void 0:a.amountPerYard)||0,totalPcs:(a==null?void 0:a.totalPcs)||0,laserCut:(a==null?void 0:a.laserCut)||!1,laserCutRate:(a==null?void 0:a.laserCutRate)||0,pcsForLaserCut:(a==null?void 0:a.pcsForLaserCut)||0,totalAmount:(a==null?void 0:a.totalAmount)||0,reatedOn:(a==null?void 0:a.createdOn)||new Date().toISOString(),createdBy:(a==null?void 0:a.createdBy)||0,lastUpdatedOn:new Date().toISOString(),LastUpdatedBy:0})},[a]);const[g,O]=l.useState(!1),A=(h,c)=>{O(c)},{data:f}=ye(),[I,M]=l.useState(""),{data:B}=ze(),{data:F,refetch:b}=Ce(I,{skip:!I}),{data:R,refetch:X}=Be(n.designId,{skip:!n.designId}),{data:L}=Ee({batchNo:n.planningHeaderId,componentId:n.componentId},{skip:!n.planningHeaderId||!n.componentId}),{data:K}=Ue({batchNo:n.planningHeaderId,componentId:n.componentId,fabricId:n.fabricId},{skip:!n.planningHeaderId||!n.componentId||!n.fabricId}),{data:G,refetch:Q}=dt(n.planningHeaderId,{skip:!n.planningHeaderId}),{data:H}=Me(n.planningHeaderId,{skip:!n.planningHeaderId});console.log("formData.planningHeaderId",n.planningHeaderId),console.log("collectionData",f),console.log("schiffliList",G);const[D,Z]=l.useState([]),[ee,x]=l.useState([]),[w,d]=l.useState([]),[q,de]=l.useState([]),[oe,W]=l.useState([]),[ge,pe]=l.useState([]),[ne,se]=l.useState([]),[ie,E]=l.useState([]),[u,v]=l.useState([]);l.useEffect(()=>{F&&Z(F.result)},[F]),l.useEffect(()=>{R&&x(R.result)},[R]),l.useEffect(()=>{L&&d(L.result)},[L]),l.useEffect(()=>{K&&se(L.result)},[K]),l.useEffect(()=>{H&&v(H.result)},[H]),l.useEffect(()=>{G&&E(G.result.map((h,c)=>({id:c,...h})))},[G,Q]),l.useEffect(()=>{if(B){const h=B.result[0];de(h.vendorList),W(h.operatingMachineList),pe(h.workingHeadList)}},[B]),console.log("initialRows",ie);const S=(f==null?void 0:f.result)||[];l.useEffect(()=>{const h=()=>{const k=parseFloat(n.thaanQty)||0,Y=parseFloat(n.operatingMachine)||0;return k*Y};o(k=>({...k,totalEmbroidry:h()}));const c=()=>{const k=parseFloat(n.thaanQty)||0,Y=parseFloat(n.noOfStichesPerYard)||0;return k*Y};o(k=>({...k,totalPcs:c()}));const C=()=>{const k=parseFloat(n.noOfStichesPerYard)||0,Y=parseFloat(n.rate)||0;return k/1e3*Y};o(k=>({...k,amountPerYard:C()}));const p=()=>{const k=parseFloat(n.totalAmount)||0,Y=parseFloat(n.totalPcs)||0;return k/Y};o(k=>({...k,costPerComponent:p()}));const N=()=>{const k=parseFloat(n.amountPerYard)||0,Y=parseFloat(n.totalEmbroidry)||0,be=parseFloat(n.laserCutRate)||0,ke=parseFloat(n.pcsForLaserCut)||0;return k*Y+ke*be};o(k=>({...k,totalAmount:N()}))},[n.thaanQty,n.operatingMachine,n.noOfStichesPerYard,n.rate,n.totalAmount,n.totalPcs,n.amountPerYard,n.totalEmbroidry,n.laserCutRate,n.pcsForLaserCut]);const j=h=>{const{name:c,checked:C}=h.target;o(p=>({...p,[c]:C}))},m=h=>{const{name:c,value:C}=h.target;if(c==="collectionId")S.find(p=>p.collectionId===parseInt(C)),M(C),o({...n,collectionId:C});else if(c==="designId"){const p=D.find(N=>N.designId===parseInt(C));o({...n,designId:C,baseColorId:p?p.colorId:"",baseColorName:p?p.colorName:""})}else if(c==="batchNo"){const p=ee.find(N=>N.batchNo===C);o({...n,batchNo:C,planningHeaderId:p?p.planningHeaderId:"",poPcs:p?p.poPcs:""}),O(!0)}else if(c==="colorId"){const p=ne.find(N=>N.colorId===C);o({...n,colorId:C,availableQty:p?p.total:"",cuttingSize:p?p.cuttingSize:"",repeats:p?p.repeats:""})}else if(c==="operatingMachineId"){const p=oe.find(N=>N.lookUpId===C);o({...n,operatingMachineId:C,operatingMachine:p?p.lookUpName:""})}else o({...n,[c]:C})};console.log("colors",ne);const i=async()=>{try{const h=await V.post("https://gecxc.com:4041/api/Schiffli/SaveSchiffili",n);console.log("Save response:",h.data),o(c=>({designId:c.designId,planningHeaderId:c.planningHeaderId,batchNo:c.batchNo,baseColorName:c.baseColorName,schiffiliId:0,componentId:"",poPcs:"",fabricId:"",vendorId:"",colorId:"",availableQty:"",thaanQty:0,operatingMachineId:0,operatingMachine:"",workingHeadId:0,cuttingSize:"",rate:"",costPerComponent:"",totalEmbroidry:0,noOfItemPerThaan:0,noOfStichesPerYard:0,amountPerYard:0,totalPcs:0,laserCut:!1,laserCutRate:0,pcsForLaserCut:0,totalAmount:0,createdOn:new Date().toISOString(),createdBy:0,lastUpdatedOn:new Date().toISOString(),LastUpdatedBy:0})),Q(),O(!1)}catch(h){console.error("Error saving data:",h)}};console.log("formData",n);const y=h=>{t(h)};console.log("initialData",a);const U=async h=>{try{await V.delete(`https://gecxc.com:4041/api/Schiffli/DeleteSchiffiById?schiffiId=${h}`),Q(),console.log("deleted")}catch(c){console.error("Error deleting data:",c)}},T=[{field:"componentName",headerName:"Component"},{field:"fabricName",headerName:"Fabric"},{field:"vendorName",headerName:"Vendor"},{field:"colourName",headerName:"Color"},{field:"thaanQty",headerName:"Thaan Quantity"},{field:"availableQty",headerName:"Available Quantitity"},{field:"operatingMachineName",headerName:"Operating Machine"},{field:"noOfHeadsName",headerName:"Working Head"},{field:"cuttingSize",headerName:"Cutting Size"},{field:"rate",headerName:"Rate"},{field:"noOfStichesPerYard",headerName:"No. Of Stiches Per Yard"},{field:"noOfItemPerThaan",headerName:"No. Of Item Per Thaan"},{field:"totalEmbroidry",headerName:"Total Embroidry"},{field:"amountPerYard",headerName:"Amount Per Yard"},{field:"totalPcs",headerName:"Total Pcs"},{field:"totalAmount",headerName:"Total Amount"},{field:"costPerComponent",headerName:"Cost Per Component"},{field:"laserCutRate",headerName:"LaserCut Rate"},{field:"pcsForLaserCut",headerName:"Pcs.For Laser Cut"},{field:"Action",headerName:"Actions",renderCell:h=>e.jsx("div",{style:{display:"flex",justifyContent:"space-around"},children:e.jsxs(Fe,{size:"small",variant:"text",children:[e.jsx(fe,{"aria-label":"Edit",onClick:()=>y(h.row),children:e.jsx(We,{})}),e.jsx(fe,{"aria-label":"delete",color:"primary",onClick:()=>U(h.row.schiffiliId),children:e.jsx(Re,{})})]})})}];return e.jsxs(e.Fragment,{children:[e.jsxs(ae,{variant:"outlined",children:[e.jsx(re,{className:"css-4rfrnx-MuiCardHeader-root",title:"Schiffli ",titleTypographyProps:{style:{color:"white"}}}),e.jsxs(r,{container:!0,spacing:2,width:"Inherit",sx:{paddingY:2,paddingX:2},children:[e.jsxs(r,{item:!0,xs:12,md:3,children:[e.jsx(s,{fullWidth:!0,select:!0,label:"Select Collection",name:"collectionId",value:I,onChange:m,size:"small",children:S.map(h=>e.jsx(P,{value:h.collectionId,children:h.collectionName},h.collectionId))})," "]}),e.jsx(r,{item:!0,xs:12,md:3,children:e.jsx(s,{fullWidth:!0,select:!0,label:"Select Design",name:"designId",value:n.designId,onChange:m,size:"small",children:D.map(h=>e.jsx(P,{value:h.designId,children:h.designNo},h.designId))})}),e.jsxs(r,{item:!0,xs:12,md:3,children:[e.jsx(s,{fullWidth:!0,select:!0,label:"Batch No.",name:"batchNo",value:n.batchNo,onChange:m,size:"small",children:ee.map(h=>e.jsx(P,{value:h.batchNo,children:h.batchNo},h.batchNo))})," "]}),e.jsxs(r,{item:!0,xs:12,md:3,children:[e.jsx(s,{fullWidth:!0,select:!0,label:"Components",name:"componentId",value:n.componentId,onChange:m,size:"small",children:u.map(h=>e.jsx(P,{value:h.componentId,children:h.componentName},h.componentId))})," "]}),e.jsx(r,{item:!0,xs:12,md:3,children:e.jsx(s,{label:"Base Color",fullWidth:!0,size:"small",name:"baseColorName",value:n.baseColorName,onChange:m,disabled:!0})}),e.jsx(r,{item:!0,xs:12,textAlign:"right",children:e.jsx(J,{variant:"contained",size:"small",onClick:i,children:"Save"})})]})]}),e.jsx(me,{color:"#cc8587",sx:{height:1,width:"100%",mt:2}}),e.jsxs(ae,{variant:"outlined",children:[e.jsx(re,{className:"css-4rfrnx-MuiCardHeader-root",title:"Add Schiffli ",titleTypographyProps:{style:{color:"white"}}}),e.jsxs(Pe,{expanded:g,onChange:A,sx:{},children:[e.jsx(Se,{expandIcon:e.jsx(Ne,{}),"aria-controls":"panel1-content",id:"panel1-header"}),e.jsx(Ae,{children:e.jsxs(r,{container:!0,spacing:2,width:"Inherit",sx:{paddingY:2,paddingX:2},children:[e.jsx(r,{item:!0,xs:12,md:3,children:e.jsx(s,{fullWidth:!0,select:!0,label:"Select Fabric",defaultValue:"",size:"small",name:"fabricId",value:n.fabricId,onChange:m,children:w.map(h=>e.jsx(P,{value:h.fabricId,children:h.fabric},h.fabricId))})}),e.jsx(r,{item:!0,xs:12,md:3,children:e.jsx(s,{fullWidth:!0,select:!0,label:"Vendors",defaultValue:"",size:"small",name:"vendorId",value:n.vendorId,onChange:m,children:q.map(h=>e.jsx(P,{value:h.lookUpId,children:h.lookUpName},h.lookUpId))})}),e.jsx(r,{item:!0,xs:12,md:3,children:e.jsx(s,{fullWidth:!0,select:!0,label:"Color",size:"small",name:"colorId",value:n.colorId,onChange:m,children:ne.map(h=>e.jsx(P,{value:h.colorId,children:h.color},h.colorId))})}),e.jsx(r,{item:!0,xs:12,md:1.5,children:e.jsx(s,{label:"Po Pcs",fullWidth:!0,size:"small",name:"poPcs",value:n.poPcs,onChange:m})}),e.jsx(r,{item:!0,xs:12,md:1.5,children:e.jsx(s,{label:"Available Quantity",fullWidth:!0,size:"small",name:"availableQty",value:n.availableQty,onChange:m})}),e.jsx(r,{item:!0,xs:12,md:1.5,children:e.jsx(s,{label:"Thaan Quantity",fullWidth:!0,type:"number",size:"small",name:"thaanQty",value:n.thaanQty,onChange:m})}),e.jsx(r,{item:!0,xs:12,md:1.5,children:e.jsx(s,{fullWidth:!0,select:!0,label:"operatingMachineId",defaultValue:"",size:"small",name:"operatingMachineId",value:n.operatingMachineId,onChange:m,children:oe.map(h=>e.jsx(P,{value:h.lookUpId,children:h.lookUpName},h.lookUpId))})}),e.jsx(r,{item:!0,xs:12,md:1.5,children:e.jsx(s,{fullWidth:!0,select:!0,label:"workingHeadId",defaultValue:"",size:"small",name:"workingHeadId",value:n.workingHeadId,onChange:m,children:ge.map(h=>e.jsx(P,{value:h.lookUpId,children:h.lookUpName},h.lookUpId))})}),e.jsx(r,{item:!0,xs:12,md:1.5,children:e.jsx(s,{label:"Cutting Size",fullWidth:!0,type:"number",size:"small",name:"cuttingSize",value:n.cuttingSize,onChange:m})}),e.jsx(r,{item:!0,xs:12,md:1.5,children:e.jsx(s,{label:"Rate",type:"number",fullWidth:!0,size:"small",name:"rate",value:n.rate,onChange:m})}),e.jsx(r,{item:!0,xs:12,md:1.5,children:e.jsx(s,{label:"No. Of Stiches Per Yard",fullWidth:!0,type:"number",size:"small",name:"noOfStichesPerYard",value:n.noOfStichesPerYard,onChange:m})}),e.jsx(r,{item:!0,xs:12,md:1.5,children:e.jsx(s,{label:"No. Of Items Per Thaan",fullWidth:!0,size:"small",type:"number",name:"noOfItemPerThaan",value:n.noOfItemPerThaan,onChange:m})}),e.jsx(r,{item:!0,xs:12,md:1.5,children:e.jsx(s,{label:"Total Embroidry",fullWidth:!0,size:"small",name:"totalEmbroidry",type:"number",value:n.totalEmbroidry,onChange:m})}),e.jsx(r,{item:!0,xs:12,md:1.5,children:e.jsx(s,{label:"Amount Per Yard",fullWidth:!0,type:"number",size:"small",name:"amountPerYard",value:n.amountPerYard,onChange:m})}),e.jsx(r,{item:!0,xs:12,md:1.5,children:e.jsx(s,{label:"Total Pcs",fullWidth:!0,size:"small",name:"totalPcs",value:n.totalPcs,onChange:m})}),e.jsx(r,{item:!0,xs:12,md:1.5,children:e.jsx(s,{label:"Cost Per Component",fullWidth:!0,size:"small",name:"costPerComponent",value:n.costPerComponent,onChange:m})}),e.jsx(r,{item:!0,xs:12,md:1.5,children:e.jsx(s,{label:"Total Amount",fullWidth:!0,size:"small",type:"number",name:"totalAmount",value:n.totalAmount,onChange:m})}),n.laserCut?e.jsx(r,{item:!0,xs:12,md:6,children:e.jsxs(r,{container:!0,spacing:1,width:"Inherit",children:[e.jsx(r,{item:!0,xs:12,md:3,children:e.jsx(s,{label:"Laser Cut Rate",fullWidth:!0,size:"small",name:"laserCutRate",value:n.laserCutRate,onChange:m})}),e.jsx(r,{item:!0,xs:12,md:3,children:e.jsx(s,{label:"Pcs For LaserCut",fullWidth:!0,size:"small",name:"pcsForLaserCut",value:n.pcsForLaserCut,onChange:m})})]})}):null,e.jsx(r,{item:!0,xs:12,md:2,children:e.jsx(Oe,{control:e.jsx(Te,{checked:n.laserCut,onChange:j,name:"laserCut"}),label:"Laser Cut"})})]})})]})]}),e.jsx(me,{color:"#cc8587",sx:{height:1,width:"100%",mt:2}}),e.jsxs(ae,{variant:"outlined",children:[e.jsx(re,{className:"css-4rfrnx-MuiCardHeader-root",title:"View Schiffli ",titleTypographyProps:{style:{color:"white"}}}),e.jsx(r,{container:!0,spacing:2,width:"Inherit",sx:{paddingY:2,paddingX:2},children:e.jsx(r,{sx:{marginTop:2},item:!0,xs:12,children:e.jsx(le,{sx:{height:500,width:"inherit","& .actions":{color:"text.secondary"},"& .textPrimary":{color:"text.primary"}},children:e.jsx(Ie,{rows:ie,columns:T,rowLength:100,sx:{boxShadow:2,border:2,borderColor:"primary.light","& .MuiDataGrid-cell:hover":{color:"primary.main"}}})})})})]})]})},Ft=Tt;function Lt(a){const t=[{value:"D# 01-A",label:"D# 01-A"},{value:"D# 01-A",label:"D# 01-A"}],n=[{value:"D# 01-A-MM-Y",label:"D# 01-A-MM-Y"},{value:"No",label:"No"}],o=[{value:"Front",label:"Front"},{value:"Back",label:"Back"}],g=[{value:"Lawn 102/88",label:"Lawn 102/88"},{value:"Lawn 99/88",label:"Lawn 99/88"}],O=[{value:"Khuram",label:"Khuram"},{value:"Ramia",label:"Ramia"}],A=[{value:"Black",label:"Black"},{value:"Red",label:"Red"}],f=[{value:"Hand Work",label:"Hand Work"},{value:"Patch Work",label:"Patch Work"}],[I,M]=l.useState({designId:"",batchNo:"",componentId:"",fabricId:"",colourId:"",costPerComponent:"",baseColor:"",processTypeId:"",quantity:"",ratePerPcs:"",totalAmount:"",uomId:"",pcsPerComponent:"",createdBy:0,createdOn:new Date().toISOString()}),B=async b=>{const{name:R,value:X}=b.target;M({...I,[R]:X})},F=async()=>{console.log(I);try{const b=await V.post("https://gecxc.com:4041/api/AdditionalProcess/SaveAdditionalProcess",I);console.log("Form data saved:",b.data),M({designId:"",batchNo:"",componentId:"",fabricId:"",colourId:"",costPerComponent:"",baseColor:"",processTypeId:"",quantity:"",ratePerPcs:"",totalAmount:"",uomId:"",pcsPerComponent:""}),a&&a()}catch(b){console.error("Error saving data:",b)}};return e.jsxs(r,{container:!0,spacing:2,width:"Inherit",children:[e.jsx(r,{item:!0,md:12,width:"inherit",paddingX:1,children:e.jsx(he,{variant:"h3",gutterBottom:!0,children:"Additional Process"})}),e.jsx(r,{item:!0,md:3,width:"inherit",paddingX:1,children:e.jsx(s,{id:"outlined-select-option",select:!0,label:"Select Design",name:"designId",value:I.designId,onChange:B,defaultValue:"D# 01-A",helperText:"Design",variant:"outlined",size:"small",fullWidth:!0,children:t.map(b=>e.jsx(P,{value:b.value,children:b.label},b.value))})}),e.jsx(r,{item:!0,md:3,width:"inherit",paddingX:1,children:e.jsx(s,{id:"outlined-select-option",select:!0,label:"Select Batch#",name:"batchNo",value:I.batchNo,onChange:B,defaultValue:"D# 01-A-MM-Y",helperText:"Design",variant:"outlined",size:"small",fullWidth:!0,children:n.map(b=>e.jsx(P,{value:b.value,children:b.label},b.value))})}),e.jsx(r,{item:!0,md:3,width:"inherit",paddingX:1,children:e.jsx(s,{id:"outlined-select-option",select:!0,label:"Components",name:"componentId",value:I.componentId,onChange:B,defaultValue:"Front",helperText:"Design",variant:"outlined",size:"small",fullWidth:!0,children:o.map(b=>e.jsx(P,{value:b.value,children:b.label},b.value))})}),e.jsx(r,{item:!0,md:3,width:"inherit",paddingX:1,children:e.jsx(s,{id:"outlined-select-option",select:!0,label:"Fabric",onChange:B,defaultValue:"Lawn 102/88",helperText:"Design",variant:"outlined",size:"small",fullWidth:!0,children:g.map(b=>e.jsx(P,{value:b.value,children:b.label},b.value))})}),e.jsx(r,{item:!0,md:3,width:"inherit",paddingX:1,children:e.jsx(s,{id:"outlined-select-option",select:!0,label:"Vendor Name",onChange:B,variant:"outlined",size:"small",fullWidth:!0,children:O.map(b=>e.jsx(P,{value:b.value,children:b.label},b.value))})}),e.jsx(r,{item:!0,md:3,width:"inherit",paddingX:1,children:e.jsx(s,{id:"outlined-select-option",select:!0,label:" Color",name:"colourId",value:I.colourId,onChange:B,defaultValue:"Black",variant:"outlined",size:"small",fullWidth:!0,children:A.map(b=>e.jsx(P,{value:b.value,children:b.label},b.value))})}),e.jsx(r,{item:!0,md:3,width:"inherit",paddingX:1,children:e.jsx(s,{id:"outlined-select-option",select:!0,label:" Process Type",name:"processTypeId",value:I.processTypeId,onChange:B,defaultValue:"Hand Work",variant:"outlined",size:"small",fullWidth:!0,children:f.map(b=>e.jsx(P,{value:b.value,children:b.label},b.value))})}),e.jsx(r,{item:!0,md:1.5,width:"inherit",paddingX:1,children:e.jsx(s,{id:"outlined-required",label:"Pcs per component",name:"pcsPerComponent",type:"number",value:I.pcsPerComponent,onChange:B,size:"small",required:!0})}),e.jsx(r,{item:!0,md:1.5,width:"inherit",paddingX:1,children:e.jsx(s,{id:"outlined-required",label:"PO PC'S",type:"number",onChange:B,size:"small",disabled:!0})}),e.jsx(r,{item:!0,md:1.5,width:"inherit",paddingX:1,children:e.jsx(s,{id:"outlined-required",label:" Quantity",name:"quantity",type:"number",value:I.quantity,onChange:B,size:"small",required:!0})}),e.jsx(r,{item:!0,md:1.5,width:"inherit",paddingX:1,children:e.jsx(s,{id:"outlined-required",label:"Rate",name:"ratePerPcs",type:"number",value:I.ratePerPcs,onChange:B,size:"small",required:!0})}),e.jsx(r,{item:!0,md:3,width:"inherit",paddingX:1,children:e.jsx(s,{id:"outlined-required",label:"Cost per Component",name:"costPerComponent",type:"number",value:I.costPerComponent,onChange:B,size:"small",required:!0})}),e.jsx(r,{item:!0,md:3,width:"inherit",paddingX:1,children:e.jsx(s,{id:"outlined-required",label:"Total Amount",name:"totalAmount",type:"number",value:I.totalAmount,onChange:B,size:"small",required:!0})}),e.jsx(r,{item:!0,md:12,width:"inherit",paddingX:1,textAlign:"right",children:e.jsx(J,{variant:"contained",color:"primary",size:"small",onClick:F,children:"Add"})})]})}function Ht(){const[a,t]=l.useState([]),n=l.useCallback(async()=>{try{const O=(await V.get("https://gecxc.com:4041/api/AdditionalProcess/GetAdditionalProcessListByBatchNo?batchNo=1")).data.result.map((A,f)=>({id:f,...A}));t(O)}catch(g){console.error("Error fetching data:",g)}},[]);l.useEffect(()=>{n()},[n]);const o=[{field:"designId",headerName:"design Id",width:150},{field:"batchNo",headerName:"batch No",width:200},{field:"componentId",headerName:"component Id",minWidth:120},{field:"fabricId",headerName:"fabric Id",minWidth:120},{field:"colourId",headerName:"colour Id",minWidth:120},{field:"costPerComponent",headerName:"cost Per omponent",minWidth:120},{field:"baseColor",headerName:"base Color",minWidth:120},{field:"processTypeId",headerName:"process Type Id",minWidth:120},{field:"quantity",headerName:"quantity",minWidth:120},{field:"ratePerPcs",headerName:"rate Per Pcs",minWidth:120},{field:"totalAmount",headerName:"total Amount",minWidth:120},{field:"uomId",headerName:"uom Id",minWidth:120},{field:"pcsPerComponent",headerName:"pcs Per Component",minWidth:120}];return e.jsx("div",{style:{height:"auto",width:"100%"},children:e.jsx(Ie,{rows:a,columns:o,fetchData:n,autoHeight:!0,initialState:{pagination:{paginationModel:{page:0,pageSize:10}}},pageSizeOptions:[10,15],localeText:{toolbarDensity:"Size",toolbarDensityLabel:"Size",toolbarDensityCompact:"Small",toolbarDensityStandard:"Medium",toolbarDensityComfortable:"Large"},components:{Toolbar:Ye}})})}function Et(a){return e.jsxs(Ge,{style:{borderWidth:1,borderStyle:"dotted",borderColor:"#a11f23"},children:[e.jsx(Lt,{}),e.jsx(me,{}),e.jsx(Ht,{fetchData:a})]})}function Ut(a){const t=[{value:"Card Printing",label:"Card Printing"},{value:"Additional Service",label:"Additional Service"}],n=[{value:"Elaf PVC Zipper Bag",label:"Elaf PVC Zipper Bag"},{value:"No",label:"No"}],o=[{value:"Mudassir Hussain Packaging Service",label:"Mudassir Hussain Packaging Service"},{value:"No",label:"No"}],[g,O]=l.useState({serviceTypeId:"",serviceListId:"",vendorId:"",poPcs:"",qty:"",uomId:"",rate:"",totalAmount:"",quantity:"",ratePerPcs:"",totalAmount:"",costperPiece:"",uom:"",vendor:null,serviceType:null,serviceListName:null,createdBy:0,createdOn:new Date().toISOString()}),A=async f=>{const{name:I,value:M}=f.target;O({...g,[I]:M})};return e.jsxs(r,{container:!0,spacing:2,width:"Inherit",children:[e.jsx(r,{item:!0,md:12,width:"inherit",paddingX:1,children:e.jsx(he,{variant:"h3",gutterBottom:!0,children:"Additional Services"})}),e.jsx(r,{item:!0,md:4,width:"inherit",paddingX:1,children:e.jsx(s,{id:"outlined-select-option",select:!0,label:"Service Type",name:"serviceTypeId",value:g.serviceTypeId,onChange:A,defaultValue:"Card Printing",helperText:"Service Type",variant:"outlined",size:"small",fullWidth:!0,children:t.map(f=>e.jsx(P,{value:f.value,children:f.label},f.value))})}),e.jsx(r,{item:!0,md:4,width:"inherit",paddingX:1,children:e.jsx(s,{id:"outlined-select-option",select:!0,label:"Service List Id",name:"serviceListId",value:g.serviceList,onChange:A,defaultValue:"Elaf PVC Zipper Bag",helperText:"Service List",variant:"outlined",size:"small",fullWidth:!0,children:n.map(f=>e.jsx(P,{value:f.value,children:f.label},f.value))})}),e.jsx(r,{item:!0,md:4,width:"inherit",paddingX:1,children:e.jsx(s,{id:"outlined-select-option",select:!0,label:"Vendor Name",name:"vendorId",value:g.vendorId,onChange:A,defaultValue:"Mudassir Hussain Packaging Service",helperText:"Service List",variant:"outlined",size:"small",fullWidth:!0,children:o.map(f=>e.jsx(P,{value:f.value,children:f.label},f.value))})}),e.jsx(r,{item:!0,md:4,width:"inherit",paddingX:1,children:e.jsx(s,{id:"outlined-required",label:"PO PC's",name:"poPcs",value:g.poPcs,onChange:A,type:"number",size:"small",disabled:!0})}),e.jsx(r,{item:!0,md:4,width:"inherit",paddingX:1,children:e.jsx(s,{id:"outlined-required",label:"Qty",name:"qty",value:g.qty,onChange:A,type:"number",size:"small",required:!0})}),e.jsx(r,{item:!0,md:4,width:"inherit",paddingX:1,children:e.jsx(s,{id:"outlined-required",label:"UOM",name:"uomId",value:g.uomId,onChange:A,size:"small",required:!0})}),e.jsx(r,{item:!0,md:4,width:"inherit",paddingX:1,children:e.jsx(s,{id:"outlined-required",label:"Rate",name:"rate",value:g.rate,onChange:A,type:"number",size:"small",required:!0})}),e.jsx(r,{item:!0,md:4,width:"inherit",paddingX:1,children:e.jsx(s,{id:"outlined-required",label:"Total Amount",name:"totalAmount",value:g.totalAmount,onChange:A,type:"number",size:"small",required:!0})}),e.jsx(r,{item:!0,md:4,width:"inherit",paddingX:1,children:e.jsx(s,{id:"outlined-required",label:"Cost per Piece",name:"costperPiece",value:g.costperPiece,onChange:A,type:"number",size:"small",required:!0})}),e.jsx(r,{item:!0,md:12,width:"inherit",paddingX:1,textAlign:"right",children:e.jsx(J,{variant:"contained",color:"primary",size:"small",children:"Add"})})]})}function Mt(){const[a,t]=l.useState([]),n=l.useCallback(async()=>{try{const O=(await V.get("https://gecxc.com:4041/api/AdditionalServices/GetdditionalServicesListByServiceTypeId?serviceTypeId=1")).data.result.map((A,f)=>({id:f,...A}));t(O)}catch(g){console.error("Error fetching data:",g)}},[]);l.useEffect(()=>{n()},[n]);const o=[{field:"serviceTypeId",headerName:"Service Type",width:150},{field:"serviceList",headerName:"Service List",width:200},{field:"vendorId",headerName:"Vendor",minWidth:120},{field:"qty",headerName:"Qty",minWidth:120},{field:"uom",headerName:"UOM",minWidth:120},{field:"rate",headerName:"Rate",minWidth:120},{field:"totalAmount",headerName:"Total Amount",minWidth:120},{field:"uomId",headerName:"UOM Id",minWidth:120},{field:"quantity",headerName:"quantity",minWidth:120},{field:"ratePerPcs",headerName:"rate Per Pcs",minWidth:120},{field:"costperPiece",headerName:"cost per Piece",minWidth:120},{field:"vendor",headerName:"Vendor",minWidth:120},{field:"serviceType",headerName:"Service Type",minWidth:120},{field:"serviceListName",headerName:"Service List Name",minWidth:120}];return e.jsx("div",{style:{height:"auto",width:"100%"},children:e.jsx(Ie,{rows:a,columns:o,autoHeight:!0,initialState:{pagination:{paginationModel:{page:0,pageSize:10}}},pageSizeOptions:[10,15],localeText:{toolbarDensity:"Size",toolbarDensityLabel:"Size",toolbarDensityCompact:"Small",toolbarDensityStandard:"Medium",toolbarDensityComfortable:"Large"},components:{Toolbar:Ye}})})}function Gt(a){return e.jsxs(Ge,{style:{borderWidth:1,borderStyle:"dotted",borderColor:"#a11f23"},children:[e.jsx(Ut,{}),e.jsx(me,{}),e.jsx(Mt,{fetchData:a})]})}const ve=["Pre Planning","Fabrication","Dyeing/Printing  ","Embroidery ","Schiffli","Additional Process","Additional Services"];function _t(){const[a,t]=l.useState(0),[n,o]=l.useState(new Set),[g,O]=l.useState(null),[A,f]=l.useState([]),{enqueueSnackbar:I}=we(),M=x=>{O(x.currentTarget)},B=()=>{O(null)},F=!!g,b=F?"simple-popover":void 0,R=x=>x===1,X=x=>n.has(x),L=()=>{let x=n;X(a)&&(x=new Set(x.values()),x.delete(a)),t(w=>w+1),o(x)},K=()=>{t(x=>x-1)},G=()=>{if(!R(a))throw new Error("You can't skip a step that isn't optional.");t(x=>x+1),o(x=>{const w=new Set(x.values());return w.add(a),w})},Q=()=>{t(0)},[H,D]=l.useState({lookUpId:"",lookUpName:"",lookUpDomain:"",lookUpCategory:"",enabled:"",createdOn:new Date().toISOString()}),Z=async()=>{if(!H.lookUpDomain||!H.lookUpName){I("Please fill in all required fields.",{variant:"error",autoHideDuration:5e3});return}try{const x=await V.get(`https://gecxc.com:4041/api/Common/SaveLookUp?lookupDomain=${H.lookUpDomain}&LookUpName=${H.lookUpName}&appId=1`);return console.log("Form data saved:",x.data),I("Lookup saved successfully!",{variant:"success",autoHideDuration:5e3}),D({lookUpId:"",lookUpName:"",lookUpDomain:"",lookUpCategory:"",enabled:"",createdOn:new Date().toISOString()}),x.data}catch(x){throw console.error("Error saving data:",x),I("Error saving data. Please try again.",{variant:"error",autoHideDuration:5e3}),x}},ee=x=>{D({...H,[x.target.name]:x.target.value})};return l.useEffect(()=>{(async()=>{try{const w=await V.get("https://gecxc.com:4041/api/Common/GetLookUpDomains?appId=1");console.log("LookupData",w),f(w.data.result)}catch(w){console.error("Error fetching design options:",w)}})()},[]),e.jsxs(le,{sx:{width:"100%"},children:[e.jsxs(r,{container:!0,spacing:1,width:"Inherit",children:[e.jsx(r,{item:!0,sm:6,children:e.jsx(he,{variant:"h2",gutterBottom:!0,children:"Planning Process"})}),e.jsxs(r,{item:!0,sm:6,textAlign:"right",children:[e.jsx(J,{"aria-describedby":b,variant:"outlined",size:"small",onClick:M,children:"+Lookup"}),e.jsx(xt,{id:"mouse-over-popover",open:F,anchorEl:g,onClose:B,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"right"},sx:{".MuiPopover-paper":{width:"300px",padding:"16px"}},children:e.jsxs(r,{container:!0,spacing:3,width:"Inherit",children:[e.jsx(r,{item:!0,sm:12,children:e.jsx(s,{fullWidth:!0,id:"outlined-select-currency",select:!0,label:"Select Lookup",size:"small",value:H.lookUpDomain,name:"lookUpDomain",onChange:ee,children:A.map(x=>e.jsx(P,{value:x.lookUpDomain,children:x.lookUpDomain},x.lookUpDomain))})}),e.jsx(r,{item:!0,sm:12,children:e.jsx(s,{fullWidth:!0,label:"Add Lookup Description",value:H.lookUpName,onChange:ee,name:"lookUpName",size:"small"})}),e.jsx(r,{item:!0,sm:3,textAlign:"right",children:e.jsx(J,{variant:"contained",size:"small",onClick:Z,children:"Save"})})]})})]})]}),e.jsx(it,{activeStep:a,children:ve.map((x,w)=>{const d={},q={};return R(w)&&(q.optional=e.jsx(he,{variant:"caption",children:"Optional"})),X(w)&&(d.completed=!1),e.jsx(ct,{...d,children:e.jsx(ut,{...q,children:x})},x)})}),e.jsxs(le,{sx:{display:"flex",flexDirection:"row",pt:2},children:[e.jsx(J,{color:"inherit",disabled:a===0,onClick:K,sx:{mr:1},children:"Back"}),e.jsx(le,{sx:{flex:"1 1 auto"}}),R(a)&&e.jsx(J,{color:"inherit",onClick:G,sx:{mr:1},children:"Skip"}),e.jsx(J,{onClick:L,children:a===ve.length-1?"Finish":"Next"})]}),a===ve.length?e.jsxs(l.Fragment,{children:[e.jsx(he,{sx:{mt:2,mb:1},children:"All steps completed - you're finished"}),e.jsxs(le,{sx:{display:"flex",flexDirection:"row",pt:2},children:[e.jsx(le,{sx:{flex:"1 1 auto"}}),e.jsx(J,{onClick:Q,children:"Reset"})]})]}):e.jsxs(l.Fragment,{children:[a===0&&e.jsx(Ot,{}),a===1&&e.jsx(ht,{}),a===2&&e.jsx(Rt,{}),a===3&&e.jsx(kt,{}),a===4&&e.jsx(Ft,{}),a===5&&e.jsx(Et,{}),a===6&&e.jsx(Gt,{}),e.jsxs(le,{sx:{display:"flex",flexDirection:"row",pt:2},children:[e.jsx(J,{color:"inherit",disabled:a===0,onClick:K,sx:{mr:1},children:"Back"}),e.jsx(le,{sx:{flex:"1 1 auto"}}),R(a)&&e.jsx(J,{color:"inherit",onClick:G,sx:{mr:1},children:"Skip"}),e.jsx(J,{onClick:L,children:a===ve.length-1?"Finish":"Next"})]})]})]})}export{_t as default};
