import{j as a,C as k,d as z,G as x}from"./index-k9GWQJOu.js";import{r as n}from"./vendor-BXCbSo2_.js";import{T as j}from"./TextField-Bw61L3Ab.js";import{M as D}from"./MenuItem-BJ2KxKJk.js";const B=({rId:l,DyeingIssuance:m,ogpView:c,receiving:f,inspection:p,igpReport:u,paramIssuanceId:b,OGPNumber:h,PO:i,GRN:I,ogpNumber:C,paramRejectionId:$,issuanceOgp:H})=>{const[P,w]=n.useState([]),[t,R]=n.useState(""),[E,S]=n.useState(""),[T,U]=n.useState(""),s=n.useRef(null);n.useEffect(()=>{(async()=>{try{const o=await(await fetch("http://100.42.177.77:8091/api/Reports/GetReportsByAppId?appId=1")).json();if(w(o.result),l){const d=o.result.find(M=>M.reportId===l);d&&(S(l),R(d.reportUrl),U(d.reportDesc))}}catch(e){console.error("Error fetching reports:",e)}})()},[l]);const y=r=>{const e=r.target.value,o=P.find(d=>d.reportId===e);S(e),R(o?o.reportUrl:""),U(o?o.reportDesc:"")};return n.useEffect(()=>{if(c){const r=s.current;if(r&&t){const e=`${t}&ParamIssuanceId=${(c==null?void 0:c.paramIssuanceId)||""}&ParamOGP=${(c==null?void 0:c.ogpNumber)||""}`;r.src=e}}if(h){const r=s.current;if(r&&t){const e=`${t}&ParamIGPNumber=${h||""}`;r.src=e}}if(m){const r=s.current;if(r&&t){const e=`${t}&ParamIssuanceId=${(m==null?void 0:m.paramIssuanceId)||""}`;r.src=e}}if(f){const r=s.current;if(r&&t){const e=`${t}&ParamIssuanceId=${(f==null?void 0:f.paramIssuanceId)||""}`;r.src=e}}if(p){const r=s.current;if(r&&t){const e=`${t}&ParamInspectionId=${(p==null?void 0:p.ParamInspectionId)||""}`;r.src=e}}if(u){const r=s.current;if(r&&t){const e=`${t}&ParamIGPNumber=${(u==null?void 0:u.ParamIGPNumber)||""}`;r.src=e}}if($>0){const r=s.current;if(r&&t){const e=`${t}&paramRejectionId=${$||""}`;r.src=e}}if(i){const r=s.current;if(r&&t){const e=`${t}&ParamPoIdName=${(i==null?void 0:i.ParamPoIdName)||""}`;r.src=e}}if(I){const r=s.current;if(r&&t){const e=`${t}&ParamInspectionId=${(I==null?void 0:I.ParamInspectionId)||""}`;r.src=e}}},[t,b,h,C]),a.jsxs(k,{variant:"outlined",children:[a.jsx(z,{className:"css-4rfrnx-MuiCardHeader-root",title:"View Reports ",titleTypographyProps:{style:{color:"white"}}})," ",a.jsxs(x,{container:!0,spacing:2,width:"Inherit",sx:{paddingY:2,paddingX:2},children:[a.jsx(x,{item:!0,xs:12,md:6,children:a.jsx(j,{fullWidth:!0,select:!0,label:"Select Report",name:"selectedReport",value:l||E,onChange:y,size:"small",InputLabelProps:{sx:{color:"black"}},children:P.map(r=>a.jsx(D,{value:r.reportId,children:r.reportName},r.reportId))})}),a.jsx(x,{item:!0,xs:12,md:6,children:a.jsx(j,{fullWidth:!0,label:"Report Description",name:"selectedReportDesc",value:T,InputProps:{readOnly:!0},size:"small",InputLabelProps:{sx:{color:"black"}}})})]}),t&&a.jsx("iframe",{ref:s,src:t,style:{height:"80vh",width:"100%",border:"none",marginTop:"20px"},title:"SSRS Report"})]})};export{B as default};
