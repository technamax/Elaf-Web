import{r as l,o as $e,p as Ve,s as Xe,_ as me,w as Ze,z as Ke,i as _e,j as e,l as Je,h as ne,g as De,Y as et,Z as tt,N as at,$ as be,a as ve,a0 as je,a1 as ze,a2 as We,a3 as Te,a4 as He,C as K,d as _,G as o,D as ue,T as fe,a5 as Le,B as ie,S as ge,b as Fe,a6 as st,a7 as ot,a8 as rt,a9 as nt,aa as Ge}from"./index-B8I23nKO.js";import{a as Z}from"./axios-oDLF1z78.js";import{A as ye,c as Ce,d as Pe,e as Se,f as Qe,g as qe,S as lt,a as dt,b as it,F as ct}from"./Fabrication-DyfBO-np.js";import{d as Oe,a as Be,F as ut}from"./EditAbleDataGrid-CbByiX-8.js";import{a as ht,b as mt,T as d,B as ae,P as pt}from"./TextField-DNyM24lV.js";import{M as j}from"./Skeleton-CmigZuP3.js";import{A as ke,C as Ee,D as Ne}from"./DataGrid-BMk-oh2X.js";import{G as gt}from"./GridToolbar-DvQrqf2q.js";function xt(a){return l.Children.toArray(a).filter(t=>l.isValidElement(t))}function ft(a){return Ve("MuiButtonGroup",a)}const X=$e("MuiButtonGroup",["root","contained","outlined","text","disableElevation","disabled","firstButton","fullWidth","vertical","grouped","groupedHorizontal","groupedVertical","groupedText","groupedTextHorizontal","groupedTextVertical","groupedTextPrimary","groupedTextSecondary","groupedOutlined","groupedOutlinedHorizontal","groupedOutlinedVertical","groupedOutlinedPrimary","groupedOutlinedSecondary","groupedContained","groupedContainedHorizontal","groupedContainedVertical","groupedContainedPrimary","groupedContainedSecondary","lastButton","middleButton"]),It=["children","className","color","component","disabled","disableElevation","disableFocusRipple","disableRipple","fullWidth","orientation","size","variant"],bt=(a,t)=>{const{ownerState:s}=a;return[{[`& .${X.grouped}`]:t.grouped},{[`& .${X.grouped}`]:t[`grouped${ne(s.orientation)}`]},{[`& .${X.grouped}`]:t[`grouped${ne(s.variant)}`]},{[`& .${X.grouped}`]:t[`grouped${ne(s.variant)}${ne(s.orientation)}`]},{[`& .${X.grouped}`]:t[`grouped${ne(s.variant)}${ne(s.color)}`]},{[`& .${X.firstButton}`]:t.firstButton},{[`& .${X.lastButton}`]:t.lastButton},{[`& .${X.middleButton}`]:t.middleButton},t.root,t[s.variant],s.disableElevation===!0&&t.disableElevation,s.fullWidth&&t.fullWidth,s.orientation==="vertical"&&t.vertical]},vt=a=>{const{classes:t,color:s,disabled:r,disableElevation:P,fullWidth:w,orientation:N,variant:A}=a,y={root:["root",A,N==="vertical"&&"vertical",w&&"fullWidth",P&&"disableElevation"],grouped:["grouped",`grouped${ne(N)}`,`grouped${ne(A)}`,`grouped${ne(A)}${ne(N)}`,`grouped${ne(A)}${ne(s)}`,r&&"disabled"],firstButton:["firstButton"],lastButton:["lastButton"],middleButton:["middleButton"]};return De(y,ft,t)},jt=Xe("div",{name:"MuiButtonGroup",slot:"Root",overridesResolver:bt})(({theme:a,ownerState:t})=>me({display:"inline-flex",borderRadius:(a.vars||a).shape.borderRadius},t.variant==="contained"&&{boxShadow:(a.vars||a).shadows[2]},t.disableElevation&&{boxShadow:"none"},t.fullWidth&&{width:"100%"},t.orientation==="vertical"&&{flexDirection:"column"},{[`& .${X.grouped}`]:me({minWidth:40,"&:hover":me({},t.variant==="contained"&&{boxShadow:"none"})},t.variant==="contained"&&{boxShadow:"none"}),[`& .${X.firstButton},& .${X.middleButton}`]:me({},t.orientation==="horizontal"&&{borderTopRightRadius:0,borderBottomRightRadius:0},t.orientation==="vertical"&&{borderBottomRightRadius:0,borderBottomLeftRadius:0},t.variant==="text"&&t.orientation==="horizontal"&&{borderRight:a.vars?`1px solid rgba(${a.vars.palette.common.onBackgroundChannel} / 0.23)`:`1px solid ${a.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)"}`,[`&.${X.disabled}`]:{borderRight:`1px solid ${(a.vars||a).palette.action.disabled}`}},t.variant==="text"&&t.orientation==="vertical"&&{borderBottom:a.vars?`1px solid rgba(${a.vars.palette.common.onBackgroundChannel} / 0.23)`:`1px solid ${a.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)"}`,[`&.${X.disabled}`]:{borderBottom:`1px solid ${(a.vars||a).palette.action.disabled}`}},t.variant==="text"&&t.color!=="inherit"&&{borderColor:a.vars?`rgba(${a.vars.palette[t.color].mainChannel} / 0.5)`:Ze(a.palette[t.color].main,.5)},t.variant==="outlined"&&t.orientation==="horizontal"&&{borderRightColor:"transparent"},t.variant==="outlined"&&t.orientation==="vertical"&&{borderBottomColor:"transparent"},t.variant==="contained"&&t.orientation==="horizontal"&&{borderRight:`1px solid ${(a.vars||a).palette.grey[400]}`,[`&.${X.disabled}`]:{borderRight:`1px solid ${(a.vars||a).palette.action.disabled}`}},t.variant==="contained"&&t.orientation==="vertical"&&{borderBottom:`1px solid ${(a.vars||a).palette.grey[400]}`,[`&.${X.disabled}`]:{borderBottom:`1px solid ${(a.vars||a).palette.action.disabled}`}},t.variant==="contained"&&t.color!=="inherit"&&{borderColor:(a.vars||a).palette[t.color].dark},{"&:hover":me({},t.variant==="outlined"&&t.orientation==="horizontal"&&{borderRightColor:"currentColor"},t.variant==="outlined"&&t.orientation==="vertical"&&{borderBottomColor:"currentColor"})}),[`& .${X.lastButton},& .${X.middleButton}`]:me({},t.orientation==="horizontal"&&{borderTopLeftRadius:0,borderBottomLeftRadius:0},t.orientation==="vertical"&&{borderTopRightRadius:0,borderTopLeftRadius:0},t.variant==="outlined"&&t.orientation==="horizontal"&&{marginLeft:-1},t.variant==="outlined"&&t.orientation==="vertical"&&{marginTop:-1})})),we=l.forwardRef(function(t,s){const r=Ke({props:t,name:"MuiButtonGroup"}),{children:P,className:w,color:N="primary",component:A="div",disabled:y=!1,disableElevation:k=!1,disableFocusRipple:G=!1,disableRipple:R=!1,fullWidth:le=!1,orientation:H="horizontal",size:D="medium",variant:B="outlined"}=r,q=_e(r,It),E=me({},r,{color:N,component:A,disabled:y,disableElevation:k,disableFocusRipple:G,disableRipple:R,fullWidth:le,orientation:H,size:D,variant:B}),M=vt(E),W=l.useMemo(()=>({className:M.grouped,color:N,disabled:y,disableElevation:k,disableFocusRipple:G,disableRipple:R,fullWidth:le,size:D,variant:B}),[N,y,k,G,R,le,D,B,M.grouped]),$=xt(P),Y=$.length,J=f=>{const O=f===0,c=f===Y-1;return O&&c?"":O?M.firstButton:c?M.lastButton:M.middleButton};return e.jsx(jt,me({as:A,role:"group",className:Je(M.root,w),ref:s,ownerState:E},q,{children:e.jsx(ht.Provider,{value:W,children:$.map((f,O)=>e.jsx(mt.Provider,{value:J(O),children:f},O))})}))});let Me=!1;const yt=l.forwardRef(function(t,s){return Me||(console.warn(["MUI: The Autocomplete component was moved from the lab to the core.","","You should use `import { Autocomplete } from '@mui/material'`","or `import Autocomplete from '@mui/material/Autocomplete'`"].join(`
`)),Me=!0),e.jsx(ke,me({ref:s},t))});var Ue={},Ct=tt;Object.defineProperty(Ue,"__esModule",{value:!0});var Ye=Ue.default=void 0,Pt=Ct(et()),St=e;Ye=Ue.default=(0,Pt.default)((0,St.jsx)("path",{d:"M21 10h-3L2 3v7l9 2-9 2v7l8-3.5V21c0 1.1.9 2 2 2h9c1.1 0 2-.9 2-2v-9c0-1.1-.9-2-2-2m0 11h-9v-9h9zm-4.5-1L13 16h2v-3h3v3h2z"}),"SendAndArchive");const Nt=()=>{const a=at(),[t,s]=l.useState([]),[r,P]=l.useState({embroideryId:(t==null?void 0:t.embroideryId)||0,designId:(t==null?void 0:t.designId)||"",batchNo:(t==null?void 0:t.batchNo)||"",planningHeaderId:(t==null?void 0:t.planningHeaderId)||"",componentId:(t==null?void 0:t.componentId)||"",fabricId:(t==null?void 0:t.fabricId)||"",vendorId:(t==null?void 0:t.vendorId)||"",poPcs:(t==null?void 0:t.poPcs)||"",baseColorId:(t==null?void 0:t.baseColorId)||"",baseColorName:(t==null?void 0:t.baseColorName)||"",colorId:(t==null?void 0:t.colorId)||"",availableQty:(t==null?void 0:t.availableQty)||"",noOfHead:(t==null?void 0:t.noOfHead)||"",repeats:(t==null?void 0:t.repeats)||"",cuttingSize:(t==null?void 0:t.cuttingSize)||"",itemsPerRepeat:(t==null?void 0:t.itemsPerRepeat)||"",totalPcs:(t==null?void 0:t.totalPcs)||"",totalAmount:(t==null?void 0:t.totalAmount)||"",threadStiches:(t==null?void 0:t.threadStiches)||"",threadRate:(t==null?void 0:t.threadRate)||"",threadAmount:(t==null?void 0:t.threadAmount)||"",tillaStiches:(t==null?void 0:t.tillaStiches)||"",tilaRate:(t==null?void 0:t.tilaRate)||"",tilaAmount:(t==null?void 0:t.tilaAmount)||"",sequence:(t==null?void 0:t.sequence)||"",sequenceRate:(t==null?void 0:t.sequenceRate)||"",sequenceAmount:(t==null?void 0:t.sequenceAmount)||"",isSolving:(t==null?void 0:t.isSolving)||!1,solvingLayers:(t==null?void 0:t.solvingLayers)||0,solvingInMeters:(t==null?void 0:t.solvingInMeters)||"",solvingRate:(t==null?void 0:t.solvingRate)||0,solvingAmount:(t==null?void 0:t.solvingAmount)||"",threadAdditional:(t==null?void 0:t.threadAdditional)||[],costPerComponent:(t==null?void 0:t.costPerComponent)||"",createdOn:(t==null?void 0:t.createdOn)||new Date().toISOString(),createdBy:(t==null?void 0:t.createdBy)||0,lastUpdatedOn:new Date().toISOString(),LastUpdatedBy:0});l.useEffect(()=>{P({embroideryId:(t==null?void 0:t.embroideryId)||0,designId:(t==null?void 0:t.designId)||"",batchNo:(t==null?void 0:t.batchNo)||"",planningHeaderId:(t==null?void 0:t.planningHeaderId)||"",componentId:(t==null?void 0:t.componentId)||"",fabricId:(t==null?void 0:t.fabricId)||"",vendorId:(t==null?void 0:t.vendorId)||"",poPcs:(t==null?void 0:t.poPcs)||"",baseColorId:(t==null?void 0:t.baseColorId)||"",baseColorName:(t==null?void 0:t.baseColorName)||"",colorId:(t==null?void 0:t.colorId)||"",availableQty:(t==null?void 0:t.availableQty)||"",noOfHead:(t==null?void 0:t.noOfHead)||"",repeats:(t==null?void 0:t.repeats)||"",cuttingSize:(t==null?void 0:t.cuttingSize)||"",itemsPerRepeat:(t==null?void 0:t.itemsPerRepeat)||"",totalPcs:(t==null?void 0:t.totalPcs)||"",totalAmount:(t==null?void 0:t.totalAmount)||"",threadStiches:(t==null?void 0:t.threadStiches)||"",threadRate:(t==null?void 0:t.threadRate)||"",threadAmount:(t==null?void 0:t.threadAmount)||"",tillaStiches:(t==null?void 0:t.tillaStiches)||"",tilaRate:(t==null?void 0:t.tilaRate)||"",tilaAmount:(t==null?void 0:t.tilaAmount)||"",sequence:(t==null?void 0:t.sequence)||"",sequenceRate:(t==null?void 0:t.sequenceRate)||"",sequenceAmount:(t==null?void 0:t.sequenceAmount)||"",isSolving:(t==null?void 0:t.isSolving)||!1,solvingLayers:(t==null?void 0:t.solvingLayers)||0,solvingInMeters:(t==null?void 0:t.solvingInMeters)||"",solvingRate:(t==null?void 0:t.solvingRate)||0,solvingAmount:(t==null?void 0:t.solvingAmount)||"",threadAdditional:(t==null?void 0:t.threadAdditional)||[],costPerComponent:(t==null?void 0:t.costPerComponent)||"",createdOn:(t==null?void 0:t.createdOn)||new Date().toISOString(),createdBy:(t==null?void 0:t.createdBy)||0,lastUpdatedOn:new Date().toISOString(),LastUpdatedBy:0})},[t]);const w=["Boring","Pooni","Laser","Doori","Dissolving"];function N(i,x,m){return{fontWeight:x.indexOf(i)===-1?m.typography.fontWeightRegular:m.typography.fontWeightMedium}}const{data:A}=be(),[y,k]=l.useState(""),{data:G}=ve(),{data:R,refetch:le}=je(y,{skip:!y}),{data:H,refetch:D}=ze(r.designId,{skip:!r.designId}),{data:B}=We({batchNo:r.planningHeaderId,componentId:r.componentId},{skip:!r.planningHeaderId||!r.componentId}),{data:q}=Te({batchNo:r.planningHeaderId,componentId:r.componentId,fabricId:r.fabricId},{skip:!r.planningHeaderId||!r.componentId||!r.fabricId}),{data:E}=He(r.planningHeaderId,{skip:!r.planningHeaderId});console.log("formData.planningHeaderId",r.planningHeaderId),console.log("collectionData",A);const[M,W]=l.useState(!1),$=(i,x)=>{W(x)},[Y,J]=l.useState([]),[f,O]=l.useState([]),[c,Q]=l.useState([]),[de,se]=l.useState([]),[T,pe]=l.useState([]),[ce,ee]=l.useState([]),[oe,re]=l.useState([]),[F,h]=l.useState([]);console.log("batchList",f),console.log("formData",r),l.useEffect(()=>{R&&J(R.result)},[R]),l.useEffect(()=>{H&&O(H.result)},[H]),l.useEffect(()=>{B&&Q(B.result)},[B]),l.useEffect(()=>{q&&ee(B.result)},[q]),l.useEffect(()=>{E&&h(E.result)},[E]),console.log("initialRows",oe),l.useEffect(()=>{if(G){const i=G.result[0];se(i.vendorList),pe(i.noOfHeadsList)}},[G]);const I=(A==null?void 0:A.result)||[],C=async i=>{const x=`https://gecxc.com:4041/api/Embroidery/GetEmbroideryListByBatchNo?batchNo=${i}`;try{return(await Z.get(x)).data}catch(m){throw console.error("Error fetching embroidery data:",m),m}},g=async()=>{if(r.planningHeaderId)try{const i=await C(r.planningHeaderId),x=i.result.map((m,b)=>({...m,id:b+1}));re(x),console.log("fetchEmbroideryData",i),console.log("initialRows",oe)}catch(i){console.error(i.message)}};l.useEffect(()=>{g()},[r.planningHeaderId]),l.useEffect(()=>{const i=()=>{const z=parseFloat(r.repeats)||0,te=parseFloat(r.itemsPerRepeat)||0;return z*te};P(z=>({...z,totalPcs:i()}));const x=()=>{const z=parseFloat(r.threadStiches)||0,te=parseFloat(r.threadRate)||0,he=parseFloat(r.noOfHead)||0,xe=parseFloat(r.repeats)||0;return z/1e3*(te*xe*he)};P(z=>({...z,threadAmount:x()}));const m=()=>{const z=parseFloat(r.tillaStiches)||0,te=parseFloat(r.tilaRate)||0,he=parseFloat(r.noOfHead)||0,xe=parseFloat(r.repeats)||0;return z/1e3*(te*xe*he)};P(z=>({...z,tilaAmount:m()}));const b=()=>{const z=parseFloat(r.sequence)||0,te=parseFloat(r.sequenceRate)||0,he=parseFloat(r.noOfHead)||0,xe=parseFloat(r.repeats)||0;return z/1e3*(te*xe*he)};P(z=>({...z,sequenceAmount:b()}));const S=()=>{const z=parseFloat(r.repeats)||0,te=parseFloat(r.noOfHead)||0,he=parseFloat(r.solvingLayers)||0;return z*te*13/39.37*he};P(z=>({...z,solvingInMeters:S()}));const V=()=>{const z=parseFloat(r.solvingInMeters)||0,te=parseFloat(r.solvingRate)||0;return parseFloat(r.solvingLayers),z*te};P(z=>({...z,solvingAmount:V()}));const Ie=()=>{const z=parseFloat(r.threadAmount)||0,te=parseFloat(r.tilaAmount)||0,he=parseFloat(r.sequenceAmount)||0,xe=parseFloat(r.solvingAmount)||0;return z+te+he+xe};P(z=>({...z,totalAmount:Ie()}));const Re=()=>{const z=parseFloat(r.totalAmount)||0,te=parseFloat(r.totalPcs)||0;return z/te};P(z=>({...z,costPerComponent:Re()}))},[r.threadAmount,r.totalAmount,r.sequenceAmount,r.solvingAmount,r.repeats,r.tilaAmount,r.itemsPerRepeat,r.threadRate,r.threadStiches,r.noOfHead,r.tilaRate,r.tillaStiches,r.sequenceRate,r.sequence,r.solvingLayers,r.solvingInMeters,r.solvingRate]);const p=i=>{const{name:x,checked:m}=i.target;P(b=>({...b,[x]:m}))},u=i=>{const{name:x,value:m}=i.target;if(x==="collectionId")I.find(b=>b.collectionId===parseInt(m)),k(m),P({...r,collectionId:m});else if(x==="designId"){const b=Y.find(S=>S.designId===parseInt(m));P({...r,designId:m,baseColorId:b?b.colorId:"",baseColorName:b?b.colorName:""})}else if(x==="colorId"){const b=ce.find(S=>S.colorId===m);P({...r,colorId:m,availableQty:b?b.total:"",cuttingSize:b?b.cuttingSize:"",repeats:b?b.repeats:""})}else if(x==="batchNo"){const b=f.find(S=>S.batchNo===m);P({...r,batchNo:m,planningHeaderId:b?b.planningHeaderId:"",poPcs:b?b.poPcs:""}),W(!0)}else P({...r,[x]:m})},v=async()=>{try{const i=await Z.post("https://gecxc.com:4041/api/Embroidery/SaveEmbroidery",{...r,threadAdditional:r.threadAdditional.join(", ")});console.log("Save response:",i.data),g(),s({}),W(!1),P({embroideryId:0,componentId:"",fabricId:"",vendorId:"",poPcs:"",baseColorId:"",baseColorName:"",colorId:"",availableQty:"",noOfHead:"",repeats:"",cuttingSize:"",itemsPerRepeat:"",totalPcs:"",totalAmount:"",threadStiches:"",threadRate:"",threadAmount:"",tillaStiches:"",tilaRate:"",tilaAmount:"",sequence:"",sequenceRate:"",sequenceAmount:"",isSolving:!1,solvingLayers:0,solvingInMeters:"",solvingRate:0,solvingAmount:"",threadAdditional:[],costPerComponent:"",createdOn:new Date().toISOString(),createdBy:0,lastUpdatedOn:new Date().toISOString(),LastUpdatedBy:0})}catch(i){console.error("Error saving data:",i)}};console.log("initialRows",oe);const U=i=>{const x=i.threadAdditional?i.threadAdditional.split(",").map(m=>m.trim()):[];s({...i,threadAdditional:x})};console.log("initialData",t);const L=async i=>{try{await Z.delete(`https://gecxc.com:4041/api/Embroidery/DeleteEmbroideryById?embroideryId=${i}`),g(),console.log("deleted")}catch(x){console.error("Error deleting data:",x)}},n=[{field:"designId",headerName:"Design Id"},{field:"batchNo",headerName:"Batch No."},{field:"componentName",headerName:"Component Id"},{field:"fabricName",headerName:"Fabric Id"},{field:"vendorId",headerName:"Vendor Id"},{field:"poPcs",headerName:"Po Pcs"},{field:"baseColorName",headerName:"Base Color"},{field:"colourName",headerName:"Color"},{field:"availableQty",headerName:"Available Qty"},{field:"noOfHead",headerName:"No. Of Heads"},{field:"repeats",headerName:"Repeats"},{field:"cuttingSize",headerName:"Cutting Size"},{field:"itemsPerRepeat",headerName:"Items Per Repeat"},{field:"totalPcs",headerName:"Total Pcs"},{field:"threadStiches",headerName:"Thread Stitches"},{field:"threadRate",headerName:"Thread Rate"},{field:"threadAmount",headerName:"Thread Amount"},{field:"tillaStiches",headerName:"Tilla Stitches"},{field:"tilaRate",headerName:"Tilla Rate"},{field:"tilaAmount",headerName:"Tilla Amount"},{field:"sequence",headerName:"sequence"},{field:"sequenceRate",headerName:"Sequence Rate"},{field:"sequenceAmount",headerName:"Sequence Amount"},{field:"isSolving",headerName:"Is Solving"},{field:"solvingLayers",headerName:"Solving Layers"},{field:"solvingInMeters",headerName:"Solving In Meters"},{field:"solvingRate",headerName:"Solving Rate"},{field:"solvingAmount",headerName:"Solving Amount"},{field:"threadAdditional",headerName:"ThreadAdditional"},{field:"costPerComponent",headerName:"Cost Per Component"},{field:"Action",headerName:"Actions",renderCell:i=>e.jsx("div",{style:{display:"flex",justifyContent:"space-around"},children:e.jsxs(we,{size:"small",variant:"text",children:[e.jsx(ge,{"aria-label":"Edit",onClick:()=>U(i.row),children:e.jsx(Oe,{})}),e.jsx(ge,{"aria-label":"delete",color:"primary",onClick:()=>L(i.row.embroideryId),children:e.jsx(Be,{})})]})})}];return e.jsxs(e.Fragment,{children:[e.jsxs(K,{variant:"outlined",children:[e.jsx(_,{className:"css-4rfrnx-MuiCardHeader-root",title:"Embroidery  ",titleTypographyProps:{style:{color:"white"}}}),e.jsxs(o,{container:!0,spacing:2,width:"Inherit",sx:{paddingY:2,paddingX:2},children:[" ",e.jsxs(o,{item:!0,xs:12,md:3,children:[e.jsx(d,{fullWidth:!0,select:!0,label:"Select Collection",name:"collectionId",value:y,onChange:u,size:"small",children:I.map(i=>e.jsx(j,{value:i.collectionId,children:i.collectionName},i.collectionId))})," "]}),e.jsx(o,{item:!0,xs:12,md:3,children:e.jsx(d,{fullWidth:!0,select:!0,label:"Select Design",name:"designId",value:r.designId,onChange:u,size:"small",children:Y.map(i=>e.jsx(j,{value:i.designId,children:i.designNo},i.designId))})}),e.jsxs(o,{item:!0,xs:12,md:3,children:[e.jsx(d,{fullWidth:!0,select:!0,label:"Batch No.",name:"batchNo",value:r.batchNo,onChange:u,size:"small",children:f.map(i=>e.jsx(j,{value:i.batchNo,children:i.batchNo},i.batchNo))})," "]}),e.jsx(o,{item:!0,xs:12,md:3,children:e.jsx(d,{label:"Base Color",fullWidth:!0,size:"small",name:"baseColorName",value:r.baseColorName,onChange:u,disabled:!0})}),e.jsx(o,{item:!0,xs:12,textAlign:"right",sx:{mt:2},children:e.jsx(ae,{variant:"contained",size:"small",onClick:v,children:"Save"})})]})]}),e.jsx(o,{item:!0,xs:12,md:12,children:e.jsx(ue,{color:"#cc8587",sx:{height:1,width:"100%",mt:2}})}),e.jsxs(K,{variant:"outlined",children:[e.jsx(_,{className:"css-4rfrnx-MuiCardHeader-root",title:"Add Embroidery",titleTypographyProps:{style:{color:"white"}}}),e.jsxs(ye,{expanded:M,onChange:$,sx:{},children:[e.jsx(Ce,{expandIcon:e.jsx(Pe,{}),"aria-controls":"panel1-content",id:"panel1-header"}),e.jsxs(Se,{children:[e.jsxs(o,{container:!0,spacing:2,width:"Inherit",sx:{paddingY:2,paddingX:2},children:[" ",e.jsxs(o,{item:!0,xs:12,md:3,children:[e.jsx(d,{fullWidth:!0,select:!0,label:"Components",name:"componentId",value:r.componentId,onChange:u,size:"small",children:F.map(i=>e.jsx(j,{value:i.componentId,children:i.componentName},i.componentId))})," "]}),e.jsx(o,{item:!0,xs:12,md:3,children:e.jsx(d,{fullWidth:!0,select:!0,label:"Select Fabric",defaultValue:"",size:"small",name:"fabricId",value:r.fabricId,onChange:u,children:c.map(i=>e.jsx(j,{value:i.fabricId,children:i.fabric},i.fabricId))})}),e.jsx(o,{item:!0,xs:12,md:3,children:e.jsx(d,{fullWidth:!0,select:!0,label:"Vendors",defaultValue:"",size:"small",name:"vendorId",value:r.vendorId,onChange:u,children:de.map(i=>e.jsx(j,{value:i.lookUpId,children:i.lookUpName},i.lookUpId))})}),e.jsx(o,{item:!0,xs:12,md:3,children:e.jsx(d,{fullWidth:!0,select:!0,label:"Color",size:"small",name:"colorId",value:r.colorId,onChange:u,children:ce.map(i=>e.jsx(j,{value:i.colorId,children:i.color},i.colorId))})}),e.jsx(o,{item:!0,xs:12,md:1.5,children:e.jsx(d,{label:"Po Pcs",fullWidth:!0,size:"small",name:"poPcs",value:r.poPcs,onChange:u})}),e.jsx(o,{item:!0,xs:12,md:1.5,children:e.jsx(d,{label:"Available Quantity",fullWidth:!0,size:"small",name:"availableQty",type:"number",value:r.availableQty,onChange:u})}),e.jsx(o,{item:!0,xs:12,md:1.5,children:e.jsx(d,{label:"Repeats",type:"number",fullWidth:!0,size:"small",name:"repeats",value:r.repeats,onChange:u})}),e.jsx(o,{item:!0,xs:12,md:1.5,children:e.jsx(d,{fullWidth:!0,select:!0,label:"Heads",defaultValue:"",size:"small",name:"noOfHead",value:r.noOfHead,onChange:u,children:T.map(i=>e.jsx(j,{value:i.lookUpId,children:i.lookUpName},i.lookUpId))})}),e.jsx(o,{item:!0,xs:12,md:1.5,children:e.jsx(d,{label:"Cutting Size",fullWidth:!0,size:"small",name:"cuttingSize",type:"number",value:r.cuttingSize,onChange:u})}),e.jsx(o,{item:!0,xs:12,md:1.5,children:e.jsx(d,{label:"itemsPerRepeat",fullWidth:!0,type:"number",size:"small",name:"itemsPerRepeat",value:r.itemsPerRepeat,onChange:u})}),e.jsx(o,{item:!0,xs:12,md:1.5,children:e.jsx(d,{label:"total Pcs.",fullWidth:!0,size:"small",type:"number",name:"totalPcs",value:r.totalPcs,onChange:u})}),e.jsx(o,{item:!0,xs:12,md:1.5,children:e.jsx(d,{label:"Total Amount",fullWidth:!0,type:"number",size:"small",name:"totalAmount",value:r.totalAmount,onChange:u})}),e.jsx(o,{item:!0,xs:12,md:1.5,children:e.jsx(d,{label:"Cost Per Component",fullWidth:!0,size:"small",name:"costPerComponent",value:r.costPerComponent,onChange:u})}),e.jsx(o,{item:!0,xs:12,md:3,children:e.jsx(d,{select:!0,label:"Additional",value:r.threadAdditional,name:"threadAdditional",size:"small",onChange:u,fullWidth:!0,SelectProps:{multiple:!0},children:w.map(i=>e.jsx(j,{value:i,style:N(i,r.threadAdditional,a),children:i},i))})}),e.jsx(o,{item:!0,xs:12,md:4}),e.jsx(o,{item:!0,xs:12,md:6,children:e.jsxs(o,{container:!0,spacing:1,width:"Inherit",children:[e.jsx(o,{item:!0,xs:12,md:12,children:e.jsx(fe,{variant:"h5",gutterBottom:!0,children:"Thread"})})," ",e.jsx(o,{item:!0,xs:12,md:4,children:e.jsx(d,{label:"Stitches",fullWidth:!0,size:"small",type:"number",name:"threadStiches",value:r.threadStiches,onChange:u})}),e.jsx(o,{item:!0,xs:12,md:4,children:e.jsx(d,{label:"Rate",type:"number",fullWidth:!0,size:"small",name:"threadRate",value:r.threadRate,onChange:u})}),e.jsx(o,{item:!0,xs:12,md:4,children:e.jsx(d,{label:"Amount",fullWidth:!0,size:"small",type:"number",name:"threadAmount",value:r.threadAmount,onChange:u})})]})}),e.jsx(o,{item:!0,xs:12,md:6,children:e.jsxs(o,{container:!0,spacing:1,width:"Inherit",children:[e.jsx(o,{item:!0,xs:12,md:12,children:e.jsx(fe,{variant:"h5",gutterBottom:!0,children:"Tilla"})})," ",e.jsx(o,{item:!0,xs:12,md:4,children:e.jsx(d,{label:"Stitches",fullWidth:!0,size:"small",type:"number",name:"tillaStiches",value:r.tillaStiches,onChange:u})}),e.jsx(o,{item:!0,xs:12,md:4,children:e.jsx(d,{label:"Rate",fullWidth:!0,size:"small",type:"number",name:"tilaRate",value:r.tilaRate,onChange:u})}),e.jsx(o,{item:!0,xs:12,md:4,children:e.jsx(d,{label:"Amount",fullWidth:!0,size:"small",name:"tilaAmount",value:r.tilaAmount,onChange:u})})]})}),e.jsxs(o,{item:!0,xs:12,md:6,children:[e.jsxs(o,{container:!0,spacing:1,width:"Inherit",children:[e.jsx(o,{item:!0,xs:12,md:12,children:e.jsx(fe,{variant:"h5",gutterBottom:!0,children:"Sequence"})})," ",e.jsx(o,{item:!0,xs:12,md:4,children:e.jsx(d,{label:"Sequence",fullWidth:!0,size:"small",name:"sequence",type:"number",value:r.sequence,onChange:u})}),e.jsx(o,{item:!0,xs:12,md:4,children:e.jsx(d,{label:"Rate",fullWidth:!0,type:"number",size:"small",name:"sequenceRate",value:r.sequenceRate,onChange:u})}),e.jsx(o,{item:!0,xs:12,md:4,children:e.jsx(d,{label:"Amount",fullWidth:!0,size:"small",name:"sequenceAmount",value:r.sequenceAmount,onChange:u})})]})," "]}),r.isSolving?e.jsx(o,{item:!0,xs:12,md:6,children:e.jsxs(o,{container:!0,spacing:1,width:"Inherit",children:[e.jsx(o,{item:!0,xs:12,md:12,children:e.jsx(fe,{variant:"h5",gutterBottom:!0,children:"Solving"})})," ",e.jsx(o,{item:!0,xs:12,md:3,children:e.jsx(d,{label:"Layers",fullWidth:!0,size:"small",type:"number",name:"solvingLayers",value:r.solvingLayers,onChange:u})}),e.jsx(o,{item:!0,xs:12,md:3,children:e.jsx(d,{label:"Meters",type:"number",fullWidth:!0,size:"small",name:"solvingInMeters",value:r.solvingInMeters,onChange:u})}),e.jsx(o,{item:!0,xs:12,md:3,children:e.jsx(d,{label:"Rate",fullWidth:!0,type:"number",size:"small",name:"solvingRate",value:r.solvingRate,onChange:u})}),e.jsx(o,{item:!0,xs:12,md:3,children:e.jsx(d,{label:"Amount",fullWidth:!0,size:"small",type:"number",name:"solvingAmount",value:r.solvingAmount,onChange:u})})]})}):null,e.jsx(o,{item:!0,xs:12,md:12,children:e.jsx(Le,{control:e.jsx(Ee,{checked:r.isSolving,onChange:p,name:"isSolving"}),label:"isSolving"})})]})," "]})," "]})]}),e.jsx(ue,{color:"#cc8587",sx:{height:1,width:"100%",mt:2}}),e.jsxs(K,{variant:"outlined",children:[e.jsx(_,{className:"css-4rfrnx-MuiCardHeader-root",title:"View Embroidery ",titleTypographyProps:{style:{color:"white"}}})," ",e.jsx(o,{container:!0,spacing:2,width:"Inherit",sx:{paddingY:2,paddingX:2},children:e.jsx(o,{sx:{marginTop:2},item:!0,xs:12,children:e.jsx(ie,{sx:{height:500,width:"inherit","& .actions":{color:"text.secondary"},"& .textPrimary":{color:"text.primary"}},children:e.jsx(Ne,{rows:oe,columns:n,rowLength:100,sx:{boxShadow:2,border:2,borderColor:"primary.light","& .MuiDataGrid-cell:hover":{color:"primary.main"}}})})})})]})]})},At=Nt,kt="/assets/loadingGif-CrY4Z_y7.gif",zt=()=>{const{data:a}=be(),[t,s]=l.useState(""),{data:r,refetch:P}=je(t,{skip:!t}),[w,N]=l.useState([]),{enqueueSnackbar:A}=Fe();l.useEffect(()=>{r&&(N(r.result),P())},[r]),console.log("designList",w),console.log("collectionData",a);const y=(a==null?void 0:a.result)||[],[k,G]=l.useState(!1),[R,le]=l.useState([]),[H,D]=l.useState([]),[B,q]=l.useState([]),[E,M]=l.useState([]),[W,$]=l.useState([]),[Y,J]=l.useState([]),[f,O]=l.useState([]),[c,Q]=l.useState({collectionId:"",baseColorId:"",baseColorName:"",noOfDesigns:"",noOfColors:"",planningHeaderId:"",designId:"",batchNo:"",componentId:"",cuttingSize:"",colorId:"",fabricId:"",noOfHeads:"",repeats:"",repeatSize:"",uomId:"",totalFabric:"",shrinkage:"",wastage:"",total:"",appId:1,createdOn:new Date().toISOString(),createdBy:0,lastUpdatedBy:0,lastUpdatedOn:new Date().toISOString(),isSchiffili:!1,repeatsInMtr:""});l.useEffect(()=>{(async()=>{try{const C=(await Z.get("https://gecxc.com:4041/API/Common/GetPrePlanningLookUp?appID=1")).data.result[0];le(C.componentList),q(C.colorList),D(C.fabricList),$(C.noOfHeadsList),M(C.uom)}catch(I){console.error("Error fetching pre-planning lookup data:",I)}})()},[]),l.useEffect(()=>{const h=async C=>{try{const g=await Z.get(`https://gecxc.com:4041/api/PrePlanning/GetPrePlanningHeaderByDesignId?designId=${C}`);console.log(g.data),J(g.data.result)}catch(g){console.error("Error fetching pre-planning lookup data:",g)}},I=async C=>{try{const g=await Z.get(`https://gecxc.com:4041/api/PrePlanning/GetPrePlanningByPlanningHeaderId?planningHeaderId=${C}`);console.log("GetPrePlanningByPlanningHeaderI",g.data.result),O(g.data.result.map((p,u)=>({...p,id:u})))}catch(g){console.error("Error fetching pre-planning lookup data:",g)}};c.designId&&h(c.designId),c.designId&&I(c.planningHeaderId)},[c.designId,c.planningHeaderId]),l.useEffect(()=>{const h=()=>{const p=parseFloat(c.repeats)||0,u=parseFloat(c.repeatSize)||0;return p*u};Q(p=>({...p,totalFabric:h()}));const I=()=>{const p=parseFloat(c.totalFabric)||0,u=parseFloat(c.shrinkage)||0,v=parseFloat(c.wastage)||0;return p*(100+(u+v))/100};Q(p=>({...p,total:I()}));const C=()=>(parseFloat(c.repeats),.9144*(parseFloat(c.repeatSize)||0));Q(p=>({...p,repeatsInMtr:C()}));const g=()=>{const p=parseFloat(c.repeats)||0;return(parseFloat(c.repeatsInMtr)||0)*p};Q(p=>({...p,totalFabric:p.isSchiffili?g():h()}))},[c.repeats,c.repeatSize,c.totalFabric,c.shrinkage,c.wastage,c.repeatsInMtr,c.isSchiffili]);const[de,se]=l.useState(!1);l.useState(!1);const T=h=>{const{name:I,value:C}=h.target;if(I==="collectionId"){const g=y.find(p=>p.collectionId===parseInt(C));s(C),Q({...c,collectionId:C,noOfDesigns:g?g.noOfDesigns:"",noOfColors:g?g.noOfColors:""})}else if(I==="designId"){const g=w.find(p=>p.designId===parseInt(C));Q({...c,designId:C,baseColorId:g?g.colorId:"",baseColorName:g?g.colorName:""})}else if(I==="batchNo"){const g=Y.find(p=>p.batchNo===C);Q({...c,batchNo:C,planningHeaderId:g?g.planningHeaderId:""}),se(!0)}else Q({...c,[I]:C})},pe=async()=>{try{const h=await Z.post("https://gecxc.com:4041/api/PrePlanning/SavePrePlanning",{designId:parseInt(c.designId),planningHeaderId:parseInt(c.planningHeaderId),componentId:parseInt(c.componentId),colorId:parseInt(c.colorId),batchNo:c.batchNo,baseColorId:parseInt(c.baseColorId),cuttingSize:parseFloat(c.cuttingSize),fabricId:parseInt(c.fabricId),noOfHeads:parseInt(c.noOfHeads),repeats:parseFloat(c.repeats),repeatSize:parseFloat(c.repeatSize),uomId:parseInt(c.uomId),totalFabric:parseFloat(c.totalFabric),shrinkage:parseFloat(c.shrinkage),wastage:parseFloat(c.wastage),total:parseFloat(c.total),appId:c.appId,createdOn:c.createdOn,createdBy:c.createdBy,lastUpdatedBy:c.lastUpdatedBy,lastUpdatedOn:c.lastUpdatedOn,isSchiffili:c.isSchiffili,repeatsInMtr:c.repeatsInMtr});console.log("Data saved successfully:",h.data),A("Pre Planning saved successfully!",{variant:"success",autoHideDuration:5e3}),Q({collectionId:c.collectionId,designId:c.designId,batchNo:c.batchNo,baseColorName:c.baseColorName,planningHeaderId:c.planningHeaderId,noOfDesigns:c.noOfDesigns,noOfColors:c.noOfColors,componentId:"",cuttingSize:"",colorId:"",fabricId:"",noOfHeads:"",repeats:"",repeatSize:"",uomId:"",totalFabric:"",shrinkage:"",wastage:"",total:"",appId:1,createdOn:new Date().toISOString(),createdBy:0,lastUpdatedBy:0,lastUpdatedOn:new Date().toISOString(),isSchiffili:!1,repeatsInMtr:""});const I=await Z.get(`https://gecxc.com:4041/api/PrePlanning/GetPrePlanningByPlanningHeaderId?planningHeaderId=${c.planningHeaderId}`);O(I.data.result.map((C,g)=>({...C,id:g}))),se(!1)}catch(h){console.error("Error saving data:",h),A("Pre Planning not saved successfully!",{variant:"error",autoHideDuration:5e3})}},ce=h=>{const{name:I,checked:C}=h.target;Q(g=>({...g,[I]:C,uomId:C?139:g.uomId}))},ee=[{field:"componentId",headerName:"Component",editable:!0,flex:1,type:"singleSelect",valueOptions:R.map(h=>({value:h.lookUpId,label:h.lookUpName}))},{field:"colorId",headerName:"Color",editable:!0,flex:1,type:"singleSelect",valueOptions:B.map(h=>({value:h.lookUpId,label:h.lookUpName}))},{field:"cuttingSize",headerName:"Cutting Size",flex:1,editable:!0},{field:"fabricId",headerName:"Fabrication",editable:!0,flex:1,type:"singleSelect",valueOptions:H.map(h=>({value:h.lookUpId,label:h.lookUpName}))},{field:"noOfHeads",headerName:"No. Of Heads",editable:!0,flex:1,type:"singleSelect",valueOptions:W.map(h=>({value:h.lookUpId,label:h.lookUpName}))},{field:"repeats",headerName:"Repeats",flex:1,editable:!0},{field:"repeatSize",headerName:"Repeat Size",flex:1,editable:!0},{field:"totalFabric",headerName:"Total Fabric",flex:1,editable:!0,valueSetter:(h,I)=>{const C=I.repeats??0,g=I.repeatSize??0,p=C*g;return console.log("totalFabric",p),{...I,totalFabric:p}}},{field:"uomId",headerName:"UOM",editable:!0,flex:1,type:"singleSelect",valueOptions:E.map(h=>({value:h.lookUpId,label:h.lookUpName}))},{field:"shrinkage",headerName:"Shrinkage %",flex:1,editable:!0},{field:"wastage",headerName:"Wastage %",flex:1,editable:!0},{field:"total",headerName:"Total",flex:1,editable:!0,valueSetter:(h,I)=>{const C=I.shrinkage??0,g=I.wastage??0,p=I.totalFabric??0,u=p*(100+(C+g))/100;return console.log("totalFabric",p),{...I,total:u}}}];console.log("batchList:",Y);const oe="https://gecxc.com:4041/api/PrePlanning/SavePrePlanning",re="https://gecxc.com:4041/api/PrePlanning/DeletePreplanningByPlanningId?PlanningId=",F=(h,I)=>{se(I)};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"CardHeader",children:e.jsxs(K,{variant:"outlined",children:[e.jsx(_,{className:"css-4rfrnx-MuiCardHeader-root",avatar:e.jsx(Ye,{}),title:"Pre Planning",titleTypographyProps:{style:{color:"white"}},children:" "}),e.jsxs(o,{container:!0,spacing:2,width:"Inherit",sx:{paddingY:2,paddingX:2},children:[e.jsxs(o,{item:!0,xs:12,md:2,children:[e.jsx(d,{fullWidth:!0,select:!0,label:"Select Collection",name:"collectionId",value:c.collectionId,onChange:T,size:"small",children:y.map(h=>e.jsx(j,{value:h.collectionId,children:h.collectionName},h.collectionId))})," "]}),e.jsx(o,{item:!0,xs:12,md:2,children:e.jsx(d,{fullWidth:!0,select:!0,label:"Select Design",name:"designId",value:c.designId,onChange:T,size:"small",children:w.map(h=>e.jsx(j,{value:h.designId,children:h.designNo},h.designId))})}),e.jsxs(o,{item:!0,xs:12,md:2,children:[e.jsx(d,{fullWidth:!0,select:!0,label:"Batch No.",name:"batchNo",value:c.batchNo,onChange:T,size:"small",children:Y.map(h=>e.jsx(j,{value:h.batchNo,children:h.batchNo},h.batchNo))})," "]}),e.jsx(o,{item:!0,xs:12,md:2,children:e.jsx(d,{label:"No of Design",fullWidth:!0,size:"small",name:"noOfDesigns",value:c.noOfDesigns,onChange:T,disabled:!0})}),e.jsx(o,{item:!0,xs:12,md:2,children:e.jsx(d,{label:"No of Color",fullWidth:!0,size:"small",name:"noOfColors",value:c.noOfColors,onChange:T,disabled:!0})}),e.jsx(o,{item:!0,xs:12,md:2,children:e.jsx(d,{label:"Base Color",fullWidth:!0,size:"small",name:"baseColorName",value:c.baseColorName,onChange:T,disabled:!0})})]})]})}),e.jsxs(K,{variant:"outlined",children:[e.jsx(_,{className:"MainCard",avatar:e.jsx(Qe,{}),title:"Add Pre Planning",titleTypographyProps:{style:{color:"white"}}}),e.jsxs(ye,{expanded:de,onChange:F,sx:{},children:[e.jsx(Ce,{expandIcon:e.jsx(Pe,{}),"aria-controls":"panel1-content",id:"panel1-header"}),e.jsx(Se,{children:e.jsxs(o,{container:!0,spacing:2,width:"Inherit",sx:{paddingY:2,paddingX:2},children:[e.jsx(o,{item:!0,xs:12,md:2,children:e.jsx(ke,{fullWidth:!0,options:R,getOptionLabel:h=>h.lookUpName,value:R.find(h=>h.lookUpId===c.componentId)||null,onChange:(h,I)=>{T({target:{name:"componentId",value:I?I.lookUpId:""}})},renderInput:h=>e.jsx(d,{...h,label:"Select Component",size:"small",name:"componentId",value:c.componentId})})}),e.jsxs(o,{item:!0,xs:12,md:2,children:[" ",e.jsx(ke,{fullWidth:!0,options:B,getOptionLabel:h=>h.lookUpName,value:B.find(h=>h.lookUpId===c.colorId)||null,onChange:(h,I)=>{T({target:{name:"colorId",value:I?I.lookUpId:""}})},renderInput:h=>e.jsx(d,{...h,label:"Color",size:"small",value:c.colorId,name:"colorId"})})]}),e.jsx(o,{item:!0,xs:12,md:2,children:e.jsx(d,{label:"Cutting Size",fullWidth:!0,size:"small",name:"cuttingSize",type:"number",value:c.cuttingSize,onChange:T})}),e.jsx(o,{item:!0,xs:12,md:2,children:e.jsx(ke,{fullWidth:!0,options:H,getOptionLabel:h=>h.lookUpName,value:H.find(h=>h.lookUpId===c.fabricId)||null,onChange:(h,I)=>{T({target:{name:"fabricId",value:I?I.lookUpId:""}})},renderInput:h=>e.jsx(d,{...h,label:"Fabrication",size:"small",name:"fabricId",value:c.fabricId})})}),e.jsx(o,{item:!0,xs:12,md:2,children:e.jsx(d,{fullWidth:!0,select:!0,label:"No of Heads",defaultValue:"",size:"small",name:"noOfHeads",value:c.noOfHeads,onChange:T,children:W.map(h=>e.jsx(j,{value:h.lookUpId,children:h.lookUpName},h.lookUpId))})}),e.jsx(o,{item:!0,xs:12,md:2,children:e.jsx(d,{label:"Repeats",fullWidth:!0,size:"small",name:"repeats",type:"number",value:c.repeats,onChange:T})}),e.jsx(o,{item:!0,xs:12,md:2,children:e.jsx(d,{label:"Repeat Size",fullWidth:!0,type:"number",size:"small",name:"repeatSize",value:c.repeatSize,onChange:T})}),e.jsx(o,{item:!0,xs:12,md:2,children:e.jsx(d,{label:"Total Fabric",fullWidth:!0,size:"small",name:"totalFabric",value:c.totalFabric,onChange:T})}),e.jsx(o,{item:!0,xs:12,md:2,children:e.jsx(d,{fullWidth:!0,select:!0,label:"UOM",type:"number",defaultValue:"",size:"small",name:"uomId",value:c.uomId,onChange:T,disabled:c.isSchiffili,children:E.map(h=>e.jsx(j,{value:h.lookUpId,children:h.lookUpName},h.lookUpId))})}),e.jsx(o,{item:!0,xs:12,md:2,children:e.jsx(d,{label:"Shrinkage %",fullWidth:!0,size:"small",type:"number",name:"shrinkage",value:c.shrinkage,onChange:T})}),e.jsx(o,{item:!0,xs:12,md:2,children:e.jsx(d,{label:"Wastage %",fullWidth:!0,size:"small",type:"number",name:"wastage",value:c.wastage,onChange:T})}),e.jsx(o,{item:!0,xs:12,md:2,children:e.jsx(d,{label:"Total",fullWidth:!0,type:"number",size:"small",name:"total",value:c.total,onChange:T})}),e.jsx(o,{item:!0,xs:12,md:1,textAlign:"right",children:e.jsx(Le,{control:e.jsx(Ee,{checked:c.isSchiffili,onChange:ce,name:"isSchiffili"}),label:"Is Schiffli"})}),c.isSchiffili?e.jsx(o,{item:!0,xs:12,md:3,children:e.jsx(o,{container:!0,spacing:1,width:"Inherit",children:e.jsx(o,{item:!0,xs:12,md:4,children:e.jsx(d,{label:"repeat in mtr",fullWidth:!0,size:"small",name:"repeatsInMtr",disabled:!0,value:c.repeatsInMtr,onChange:T})})})}):null,e.jsx(o,{item:!0,xs:12,textAlign:"right",children:e.jsx(ae,{variant:"contained",size:"small",onClick:pe,children:"Save"})})]})})]})]}),e.jsx(o,{item:!0,xs:12,md:12,children:e.jsx(ue,{sx:{height:1,width:"100%",marginTop:1,marginBottom:0}})}),e.jsxs(K,{variant:"outlined",children:[e.jsx(_,{className:"MainCard",avatar:e.jsx(qe,{}),title:"View",titleTypographyProps:{style:{color:"white"}}}),e.jsx(o,{sx:{paddingY:1,paddingX:1},children:e.jsx(o,{sx:{},item:!0,xs:12,children:k?e.jsx("div",{style:{display:"flex",top:"40%",position:"absolute",left:"45%"},children:e.jsx("img",{src:kt,alt:"Loading",style:{width:300}})}):e.jsx(ut,{ncolumns:ee,initialRows:f,formData:c,editAPi:oe,deleteApi:re,deleteBy:"planningId",disableAddRecord:!0})})})]})]})},Ot=zt,Bt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAACXBIWXMAAAsTAAALEwEAmpwYAAADl0lEQVR4nO2Y6W+MURTGB60tdiooagmJPZQgltRa+75GLEG1aGxtao9diDSERPFBRIgtPuGLXcSa2uKbf+Ynh+dtbsb7ztyZjlakJ5n03Pee985zz/pMY7EGaZD/SIAOwARgMTAHGAXk1CegxsB04CbwGXgCnAP2AIeBKuAp8AE4AXSrK2BNgBLgK3AeGBHiyWLZmCc7A8sEtBJo8TfBjQPeAkeBlh72ecBaYBfQHyjS+z3/BrhShax3yN4oeW0D0CZkvxGwCFgNjJb3e2UypBeAq0DTkP0pwAzpzYF99jfirH666CSgGmiWCYAXgSMJ9kvi1rmWewnsBwNLgb3AwdqCqwAuO96Zq8Sv8VAEwNlJzl0nux9hKeELbizwDMgC2ip0Xa1dSG8ju8nATOcS+5KFTnYl8uKmdMA1BT4CfbXe6H6pvmCjs853iqS189wKYlPcxyq5jwAOAG6lA3C73c5Z/3FLoNjjnPKIBm9tZ6Z1BOBTquCy1AZcT4wMKlVrOzzf46wdIc9aypMGbhrwOqXmDSwBToc8n6ww2qfA86wxlsshBdLechhYCTy2HE8F4HUf7/gKsNPRs60POmsrvodAJ9/DrON/018rhG0Kxxag0BuVI8Bmp0COW+HouYV4omZ0dsxH1JseSC9ye5RGVV7Ee+1EHF6IzWQ5e0VxAH9FB1iglvXeC5xeGm9fFFa5ypkVEe/dtT0rLOAksNvZWxM0dpGNQdItKoOAG6kAXAgckF4a54kCYGjEe9VxF3nurI3AdpReGJAETaVDRsVSATgLOCY9xzwBTAVWmScSvPcUGCLdbM86e4UBvVKa5Ij9NLPwptpiJgQhdp71SdYG+M1Snomh3HbtlTYDpa9WHyyzeQ1c8ganA6w/vUxi01okojKeTUfYDzePSbdCaWFhBt6l9TPARk/UsNcF3tiEAOYDXwyAh3cL3MIDtqZNtYz7WR4lAFdDpYB5wJkk53UL+KGm0Eid0zxdgLlyf3YicCYa+mWxBKJpsVx6uRpzj1htBNhvDVsVuEw/K2fF2QzVRVp5kI/10q8F3LHWInJQqZD3jWjOwzzPCnLvftQ0yrjgMaLE/YqDyQI8ArrUFcB79gMowb6lxyuxlVNOQ29fVwDzlYPdtW4kCl+hCVGlfmeN+pxsUiOnGQA5XgymWj3xjv6TUOMltZUr0s2ucexfEn5Pnu8qtoRTqt4E6Ck65k/tG6RBYvUvPwHk8jkSqvSzmwAAAABJRU5ErkJggg==",wt=()=>{const[a,t]=l.useState([]),[s,r]=l.useState({dpId:0,designId:"",batchNo:"",planningHeaderId:"",fabricId:"",colorId:"",color:"",vendorId:"",processType:"",AvailableQty:"",Shrinkage:"",Wastage:"",OutputQty:"",UOM:"",uomId:"",RatePerUOM:"",UnitRatePerPo:"",TotalExclGst:"",GST:"0",TotalIncludingGst:"",createdBy:0,poPcs:"",baseColorName:""});l.useEffect(()=>{r({dpId:a.dpId||0,designId:(a==null?void 0:a.designId)||"",planningHeaderId:(a==null?void 0:a.planningHeaderId)||0,batchNo:(a==null?void 0:a.batchNo)||"",fabricId:(a==null?void 0:a.fabricId)||"",colorId:(a==null?void 0:a.colorId)||"",color:(a==null?void 0:a.color)||"",vendorId:(a==null?void 0:a.vendorId)||"",processType:(a==null?void 0:a.processType)||"",AvailableQty:(a==null?void 0:a.availableQty)||"",Shrinkage:(a==null?void 0:a.shrinkage)||"",Wastage:(a==null?void 0:a.wastage)||"",OutputQty:(a==null?void 0:a.outputQty)||0,UOM:(a==null?void 0:a.uom)||0,uomId:(a==null?void 0:a.uomId)||"",RatePerUOM:(a==null?void 0:a.ratePerUOM)||0,UnitRatePerPo:(a==null?void 0:a.unitRatePerPo)||"",TotalExclGst:(a==null?void 0:a.totalExclGst)||"",GST:(a==null?void 0:a.gst)||"",TotalIncludingGst:(a==null?void 0:a.totalIncludingGst)||"",createdBy:(a==null?void 0:a.createdBy)||0,poPcs:(a==null?void 0:a.poPcs)||0,baseColorName:(a==null?void 0:a.baseColorName)||0})},[a]);const{enqueueSnackbar:P}=Fe();console.log("Dyeing form data to send",s);const{data:w}=be(),[N,A]=l.useState(""),{data:y}=ve(),{data:k,refetch:G}=je(N,{skip:!N}),{data:R,refetch:le}=ze(s.designId,{skip:!s.designId}),{data:H}=st(s.planningHeaderId,{skip:!s.planningHeaderId}),{data:D}=ot({fabricId:s.fabricId,planningHeaderId:s.planningHeaderId},{skip:!s.fabricId||!s.planningHeaderId}),{data:B,refetch:q}=rt(s.planningHeaderId,{skip:!s.planningHeaderId}),[E,M]=l.useState([]),[W,$]=l.useState([]),[Y,J]=l.useState([]),[f,O]=l.useState([]),[c,Q]=l.useState([]),[de,se]=l.useState([]),[T,pe]=l.useState([]),[ce,ee]=l.useState(!1);console.log("batchList",W),console.log("formData",s);const oe=(u,v)=>{ee(v)};l.useEffect(()=>{k&&M(k.result)},[k]),l.useEffect(()=>{R&&$(R.result)},[R]),l.useEffect(()=>{H&&J(H.result)},[H]),l.useEffect(()=>{D&&se(D.result)},[D]),l.useEffect(()=>{y&&pe(y.result[0].vendorList)},[H]),console.log(T),l.useEffect(()=>{B&&Q(B.result.map((u,v)=>({id:v,...u})))},[B,q]),l.useEffect(()=>{if(y){const u=y.result[0];O(u.uomList)}},[y]);const re=(w==null?void 0:w.result)||[],F=u=>{const{name:v,value:U}=u.target;if(v==="collectionId")re.find(L=>L.collectionId===parseInt(U)),A(U),r({...s,collectionId:U});else if(v==="designId"){const L=E.find(n=>n.designId===parseInt(U));r({...s,designId:U,baseColorId:L?L.colorId:"",baseColorName:L?L.colorName:""})}else if(v==="batchNo"){const L=W.find(n=>n.batchNo===U);r({...s,batchNo:U,planningHeaderId:L?L.planningHeaderId:"",poPcs:L?L.poPcs:""}),ee(!0)}else if(v==="fabricId")Y.find(L=>L.fabricId===U),console.log("Selected Fabric:",Y),r({...s,fabricId:U});else if(v==="ColorId"){const L=de.find(n=>n.colorId===U.colorId);r({...s,ColorId:U.colorId,color:L.color,AvailableQty:L.total,UOM:L.uom,Shrinkage:L.shrinkage,Wastage:L.wastage})}else r(v==="processType"?{...s,processType:U}:v==="vendorId"?{...s,vendorId:U}:{...s,[v]:U})};l.useEffect(()=>{const u=()=>{const S=parseFloat(s.AvailableQty)||0,V=parseFloat(s.Shrinkage)||0,Ie=parseFloat(s.Wastage)||0;return S*(100-(V+Ie))/100},v=()=>{const S=parseFloat(s.AvailableQty)||0,V=parseFloat(s.RatePerUOM)||0;return S*V},U=(S,V)=>S*(1+V/100),L=u(),n=v(),i=parseFloat(s.GST)||0,x=U(n,i),m=parseFloat(s.poPcs)||0,b=m?x/m:0;r(S=>({...S,OutputQty:L,TotalExclGst:n.toFixed(2),TotalIncludingGst:x.toFixed(2),UnitRatePerPo:b.toFixed(2)}))},[s.AvailableQty,s.Shrinkage,s.Wastage,s.RatePerUOM,s.GST,s.poPcs,s.UnitRatePerPo]);const h=async()=>{if(!s.designId||!s.batchNo){alert("Please fill all required fields.");return}try{const u=await Z.post("https://gecxc.com:4041/api/DyeingPrinting/SaveDyeingPrinting",s);u.status===200?(console.log("Data saved successfully:",u.data),P("Dyeing saved successfully!",{variant:"success",autoHideDuration:5e3}),r(v=>({designId:v.designId,planningHeaderId:v.planningHeaderId,batchNo:v.batchNo,dpId:0,fabricId:"",colorId:"",color:"",vendorId:"",processType:"",AvailableQty:"",Shrinkage:"",Wastage:"",OutputQty:"",UOM:"",uomId:"",RatePerUOM:"",UnitRatePerPo:"",TotalExclGst:"",GST:"0",TotalIncludingGst:"",createdBy:0,poPcs:"",baseColorName:""})),q()):(console.error("Failed to save data:",u.data),P("Dyeing not saved successfully!",{variant:"error",autoHideDuration:5e3})),ee(!1)}catch(u){console.error("Error saving data:",u)}},I=[{value:"D",label:"Dyeing"},{value:"P",label:"Printing"}],C=u=>{t(u)};console.log("initialData",a);const g=async u=>{try{await Z.delete(`https://gecxc.com:4041/api/DyeingPrinting/DeleteDyeingPrintingById?DPId=${u}`),q(),console.log("deleted")}catch(v){console.error("Error deleting data:",v)}},p=[{field:"fabricName",headerName:"Fabric"},{field:"colorName",headerName:"Color"},{field:"vendorName",headerName:"Vendor"},{field:"processType",headerName:"Process Type"},{field:"uom",headerName:"uom"},{field:"availableQty",headerName:"Available Quantitity"},{field:"shrinkage",headerName:"Shrinkage"},{field:"wastage",headerName:"Wastage"},{field:"outputQty",headerName:"Output Qty"},{field:"ratePerUOM",headerName:"Rate"},{field:"totalExclGst",headerName:"Total Excl. Gst"},{field:"gst",headerName:"GST"},{field:"totalIncludingGst",headerName:"Total Including GST"},{field:"unitRatePerPo",headerName:"UnitRate Per Po."},{field:"Action",headerName:"Actions",renderCell:u=>e.jsx("div",{style:{display:"flex",justifyContent:"space-around"},children:e.jsxs(we,{size:"small",variant:"text",children:[e.jsx(ge,{"aria-label":"Edit",onClick:()=>C(u.row),children:e.jsx(Oe,{})}),e.jsx(ge,{"aria-label":"delete",color:"primary",onClick:()=>g(u.row.dpId),children:e.jsx(Be,{})})]})})}];return e.jsxs(e.Fragment,{children:[e.jsxs(K,{variant:"outlined",children:[e.jsx(_,{className:"css-4rfrnx-MuiCardHeader-root",avatar:e.jsx(nt,{src:Bt,sx:{background:"transparent"}}),title:"Dyeing ",titleTypographyProps:{style:{color:"white"}}}),e.jsxs(o,{container:!0,spacing:2,width:"Inherit",sx:{paddingY:2,paddingX:2},children:[e.jsxs(o,{item:!0,xs:12,md:3,children:[e.jsx(d,{fullWidth:!0,select:!0,label:"Select Collection",name:"collectionId",value:N,onChange:F,size:"small",children:re.map(u=>e.jsx(j,{value:u.collectionId,children:u.collectionName},u.collectionId))})," "]}),e.jsx(o,{item:!0,xs:12,md:3,children:e.jsx(d,{fullWidth:!0,select:!0,label:"Select Design",name:"designId",value:s.designId,onChange:F,size:"small",children:E.map(u=>e.jsx(j,{value:u.designId,children:u.designNo},u.designId))})}),e.jsxs(o,{item:!0,xs:12,md:3,children:[e.jsx(d,{fullWidth:!0,select:!0,label:"Batch No.",name:"batchNo",value:s.batchNo,onChange:F,size:"small",children:W.map(u=>e.jsx(j,{value:u.batchNo,children:u.batchNo},u.batchNo))})," "]}),e.jsx(o,{item:!0,xs:12,md:3,children:e.jsx(d,{label:"Base Color",fullWidth:!0,size:"small",name:"baseColorName",value:s.baseColorName,onChange:F,disabled:!0})}),e.jsx(o,{item:!0,xs:12,md:3,children:e.jsx(d,{fullWidth:!0,select:!0,label:"Select Fabric",defaultValue:"",size:"small",name:"fabricId",value:s.fabricId,onChange:F,children:Y.map(u=>e.jsx(j,{value:u.fabricId,children:u.fabric},u.fabricId))})}),e.jsx(o,{item:!0,xs:12,md:3,children:e.jsx(yt,{fullWidth:!0,options:de,getOptionLabel:u=>u.color||"",renderInput:u=>e.jsx(d,{...u,label:"Color",name:"colorId",size:"small"}),value:de.find(u=>u.colorId===s.colorId)||null,onChange:(u,v)=>{r(U=>({...U,colorId:v?v.colorId:"",color:v?v.color:"",AvailableQty:v?v.total:"",UOM:v?v.uom:"",uomId:v?v.uomId:"",Shrinkage:v?v.shrinkage:"",Wastage:v?v.wastage:""}))}})})]})]}),e.jsx(ue,{color:"#cc8587",sx:{height:1,width:"100%",mt:2}}),e.jsxs(K,{variant:"outlined",children:[e.jsx(_,{className:"css-4rfrnx-MuiCardHeader-root",avatar:e.jsx(Qe,{}),title:"Add Dyeing ",titleTypographyProps:{style:{color:"white"}}}),e.jsxs(ye,{expanded:ce,onChange:oe,sx:{},children:[e.jsx(Ce,{expandIcon:e.jsx(Pe,{}),"aria-controls":"panel1-content",id:"panel1-header"}),e.jsx(Se,{children:e.jsxs(o,{container:!0,spacing:2,width:"Inherit",sx:{paddingY:2,paddingX:2},children:[e.jsx(o,{item:!0,xs:12,md:3,children:e.jsx(d,{fullWidth:!0,select:!0,label:"Vendor Name",size:"small",name:"vendorId",value:s.vendorId,onChange:F,children:T.map(u=>e.jsx(j,{value:u.lookUpId,children:u.lookUpName},u.lookUpId))})}),e.jsx(o,{item:!0,xs:12,md:3,children:e.jsx(d,{fullWidth:!0,select:!0,label:"Process Type",size:"small",name:"processType",value:s.processType,onChange:F,children:I.map(u=>e.jsx(j,{value:u.value,children:u.label},u.value))})}),e.jsx(o,{item:!0,xs:12,md:3,children:e.jsx(d,{label:"Po Pcs",fullWidth:!0,size:"small",name:"poPcs",value:s.poPcs,onChange:F})}),e.jsx(o,{item:!0,xs:12,md:1.5,children:e.jsx(d,{label:"UOM",fullWidth:!0,size:"small",name:"UOM",value:s.UOM,onChange:F})}),e.jsx(o,{item:!0,xs:12,md:1.5,children:e.jsx(d,{label:"AvailableQty",fullWidth:!0,size:"small",type:"number",name:"AvailableQty",value:s.AvailableQty,onChange:F})}),e.jsx(o,{item:!0,xs:12,md:1.5,children:e.jsx(d,{label:"Shrinkage%",type:"number",fullWidth:!0,size:"small",name:"Shrinkage",value:s.Shrinkage,onChange:F})}),e.jsx(o,{item:!0,xs:12,md:1.5,children:e.jsx(d,{label:"Wastage%",fullWidth:!0,size:"small",type:"number",name:"Wastage",value:s.Wastage,onChange:F})}),e.jsx(o,{item:!0,xs:12,md:1.5,children:e.jsx(d,{label:"Output Qty",fullWidth:!0,size:"small",name:"OutputQty",type:"number",value:s.OutputQty,onChange:F})}),e.jsx(o,{item:!0,xs:12,md:1.5,children:e.jsx(d,{label:"Rate",fullWidth:!0,size:"small",type:"number",name:"RatePerUOM",value:s.RatePerUOM,onChange:F})}),e.jsx(o,{item:!0,xs:12,md:1.5,children:e.jsx(d,{label:"Total Excluding GST",type:"number",fullWidth:!0,size:"small",name:"TotalExclGst",value:s.TotalExclGst,onChange:F})}),e.jsxs(o,{item:!0,xs:12,md:1.5,children:[e.jsx(d,{label:"GST",fullWidth:!0,type:"number",size:"small",name:"GST",value:s.GST,onChange:F})," "]}),e.jsx(o,{item:!0,xs:12,md:1.5,children:e.jsx(d,{label:"Total:Including Gst",fullWidth:!0,size:"small",name:"TotalExclGst",value:s.TotalIncludingGst,onChange:F})}),e.jsx(o,{item:!0,xs:12,md:1.5,children:e.jsx(d,{label:"Unit P: T/Po PC's",fullWidth:!0,size:"small",name:"UnitRatePerPo",value:s.UnitRatePerPo,onChange:F})}),e.jsx(o,{item:!0,xs:12,md:12,textAlign:"right",children:e.jsx(ae,{variant:"contained",color:"primary",size:"small",onClick:h,children:"Save"})})]})})]})]}),e.jsx(ue,{color:"#cc8587",sx:{height:1,width:"100%",mt:2}}),e.jsxs(K,{variant:"outlined",children:[e.jsx(_,{className:"css-4rfrnx-MuiCardHeader-root",avatar:e.jsx(qe,{}),title:"View Dyeing ",titleTypographyProps:{style:{color:"white"}}})," ",e.jsx(o,{container:!0,spacing:2,width:"Inherit",sx:{paddingY:2,paddingX:2},children:e.jsx(o,{item:!0,xs:12,md:12,paddingTop:1,children:e.jsx(ie,{sx:{height:500,width:"inherit","& .actions":{color:"text.secondary"},"& .textPrimary":{color:"text.primary"}},children:e.jsx(Ne,{rows:c,columns:p,rowLength:100,sx:{boxShadow:2,border:2,borderColor:"primary.light","& .MuiDataGrid-cell:hover":{color:"primary.main"}}})})})})]})]})},Rt=wt,Wt=()=>{const[a,t]=l.useState([]),[s,r]=l.useState({schiffiliId:0,designId:"",planningHeaderId:0,batchNo:"",componentId:"",poPcs:"",baseColorName:"",fabricId:"",vendorId:"",colorId:"",availableQty:"",thaanQty:0,operatingMachineId:0,operatingMachine:"",workingHeadId:0,cuttingSize:"",rate:"",costPerComponent:"",totalEmbroidry:0,noOfItemPerThaan:0,noOfStichesPerYard:0,amountPerYard:0,totalPcs:0,laserCut:!1,laserCutRate:0,pcsForLaserCut:0,totalAmount:0,createdOn:new Date().toISOString(),createdBy:0,lastUpdatedOn:new Date().toISOString(),LastUpdatedBy:0});l.useEffect(()=>{r({schiffiliId:a.schiffiliId||0,designId:(a==null?void 0:a.designId)||"",planningHeaderId:(a==null?void 0:a.planningHeaderId)||0,batchNo:(a==null?void 0:a.batchNo)||"",componentId:(a==null?void 0:a.componentId)||"",poPcs:(a==null?void 0:a.poPcs)||"",baseColorName:(a==null?void 0:a.baseColorName)||"",fabricId:(a==null?void 0:a.fabricId)||"",vendorId:(a==null?void 0:a.vendorId)||"",colorId:(a==null?void 0:a.colorId)||"",availableQty:(a==null?void 0:a.availableQty)||"",thaanQty:(a==null?void 0:a.thaanQty)||0,operatingMachineId:(a==null?void 0:a.operatingMachineId)||0,operatingMachine:(a==null?void 0:a.operatingMachine)||"",workingHeadId:(a==null?void 0:a.workingHeadId)||0,cuttingSize:(a==null?void 0:a.cuttingSize)||"",rate:(a==null?void 0:a.rate)||"",costPerComponent:(a==null?void 0:a.costPerComponent)||"",totalEmbroidry:(a==null?void 0:a.totalEmbroidry)||0,noOfItemPerThaan:(a==null?void 0:a.noOfItemPerThaan)||0,noOfStichesPerYard:(a==null?void 0:a.noOfStichesPerYard)||0,amountPerYard:(a==null?void 0:a.amountPerYard)||0,totalPcs:(a==null?void 0:a.totalPcs)||0,laserCut:(a==null?void 0:a.laserCut)||!1,laserCutRate:(a==null?void 0:a.laserCutRate)||0,pcsForLaserCut:(a==null?void 0:a.pcsForLaserCut)||0,totalAmount:(a==null?void 0:a.totalAmount)||0,reatedOn:(a==null?void 0:a.createdOn)||new Date().toISOString(),createdBy:(a==null?void 0:a.createdBy)||0,lastUpdatedOn:new Date().toISOString(),LastUpdatedBy:0})},[a]);const[P,w]=l.useState(!1),N=(n,i)=>{w(i)},{data:A}=be(),[y,k]=l.useState(""),{data:G}=ve(),{data:R,refetch:le}=je(y,{skip:!y}),{data:H,refetch:D}=ze(s.designId,{skip:!s.designId}),{data:B}=We({batchNo:s.planningHeaderId,componentId:s.componentId},{skip:!s.planningHeaderId||!s.componentId}),{data:q}=Te({batchNo:s.planningHeaderId,componentId:s.componentId,fabricId:s.fabricId},{skip:!s.planningHeaderId||!s.componentId||!s.fabricId}),{data:E,refetch:M}=Ge(s.planningHeaderId,{skip:!s.planningHeaderId}),{data:W}=He(s.planningHeaderId,{skip:!s.planningHeaderId});console.log("formData.planningHeaderId",s.planningHeaderId),console.log("collectionData",A),console.log("schiffliList",E);const[$,Y]=l.useState([]),[J,f]=l.useState([]),[O,c]=l.useState([]),[Q,de]=l.useState([]),[se,T]=l.useState([]),[pe,ce]=l.useState([]),[ee,oe]=l.useState([]),[re,F]=l.useState([]),[h,I]=l.useState([]);l.useEffect(()=>{R&&Y(R.result)},[R]),l.useEffect(()=>{H&&f(H.result)},[H]),l.useEffect(()=>{B&&c(B.result)},[B]),l.useEffect(()=>{q&&oe(B.result)},[q]),l.useEffect(()=>{W&&I(W.result)},[W]),l.useEffect(()=>{E&&F(E.result.map((n,i)=>({id:i,...n})))},[E,M]),l.useEffect(()=>{if(G){const n=G.result[0];de(n.vendorList),T(n.operatingMachineList),ce(n.workingHeadList)}},[G]),console.log("initialRows",re);const C=(A==null?void 0:A.result)||[];l.useEffect(()=>{const n=()=>{const S=parseFloat(s.thaanQty)||0,V=parseFloat(s.operatingMachine)||0;return S*V};r(S=>({...S,totalEmbroidry:n()}));const i=()=>{const S=parseFloat(s.thaanQty)||0,V=parseFloat(s.noOfStichesPerYard)||0;return S*V};r(S=>({...S,totalPcs:i()}));const x=()=>{const S=parseFloat(s.noOfStichesPerYard)||0,V=parseFloat(s.rate)||0;return S/1e3*V};r(S=>({...S,amountPerYard:x()}));const m=()=>{const S=parseFloat(s.totalAmount)||0,V=parseFloat(s.totalPcs)||0;return S/V};r(S=>({...S,costPerComponent:m()}));const b=()=>{const S=parseFloat(s.amountPerYard)||0,V=parseFloat(s.totalEmbroidry)||0,Ie=parseFloat(s.laserCutRate)||0,Re=parseFloat(s.pcsForLaserCut)||0;return S*V+Re*Ie};r(S=>({...S,totalAmount:b()}))},[s.thaanQty,s.operatingMachine,s.noOfStichesPerYard,s.rate,s.totalAmount,s.totalPcs,s.amountPerYard,s.totalEmbroidry,s.laserCutRate,s.pcsForLaserCut]);const g=n=>{const{name:i,checked:x}=n.target;r(m=>({...m,[i]:x}))},p=n=>{const{name:i,value:x}=n.target;if(i==="collectionId")C.find(m=>m.collectionId===parseInt(x)),k(x),r({...s,collectionId:x});else if(i==="designId"){const m=$.find(b=>b.designId===parseInt(x));r({...s,designId:x,baseColorId:m?m.colorId:"",baseColorName:m?m.colorName:""})}else if(i==="batchNo"){const m=J.find(b=>b.batchNo===x);r({...s,batchNo:x,planningHeaderId:m?m.planningHeaderId:"",poPcs:m?m.poPcs:""}),w(!0)}else if(i==="colorId"){const m=ee.find(b=>b.colorId===x);r({...s,colorId:x,availableQty:m?m.total:"",cuttingSize:m?m.cuttingSize:"",repeats:m?m.repeats:""})}else if(i==="operatingMachineId"){const m=se.find(b=>b.lookUpId===x);r({...s,operatingMachineId:x,operatingMachine:m?m.lookUpName:""})}else r({...s,[i]:x})};console.log("colors",ee);const u=async()=>{try{const n=await Z.post("https://gecxc.com:4041/api/Schiffli/SaveSchiffili",s);console.log("Save response:",n.data),r(i=>({designId:i.designId,planningHeaderId:i.planningHeaderId,batchNo:i.batchNo,baseColorName:i.baseColorName,schiffiliId:0,componentId:"",poPcs:"",fabricId:"",vendorId:"",colorId:"",availableQty:"",thaanQty:0,operatingMachineId:0,operatingMachine:"",workingHeadId:0,cuttingSize:"",rate:"",costPerComponent:"",totalEmbroidry:0,noOfItemPerThaan:0,noOfStichesPerYard:0,amountPerYard:0,totalPcs:0,laserCut:!1,laserCutRate:0,pcsForLaserCut:0,totalAmount:0,createdOn:new Date().toISOString(),createdBy:0,lastUpdatedOn:new Date().toISOString(),LastUpdatedBy:0})),M(),w(!1)}catch(n){console.error("Error saving data:",n)}};console.log("formData",s);const v=n=>{t(n)};console.log("initialData",a);const U=async n=>{try{await Z.delete(`https://gecxc.com:4041/api/Schiffli/DeleteSchiffiById?schiffiId=${n}`),M(),console.log("deleted")}catch(i){console.error("Error deleting data:",i)}},L=[{field:"componentName",headerName:"Component"},{field:"fabricName",headerName:"Fabric"},{field:"vendorName",headerName:"Vendor"},{field:"colourName",headerName:"Color"},{field:"thaanQty",headerName:"Thaan Quantity"},{field:"availableQty",headerName:"Available Quantitity"},{field:"operatingMachineName",headerName:"Operating Machine"},{field:"noOfHeadsName",headerName:"Working Head"},{field:"cuttingSize",headerName:"Cutting Size"},{field:"rate",headerName:"Rate"},{field:"noOfStichesPerYard",headerName:"No. Of Stiches Per Yard"},{field:"noOfItemPerThaan",headerName:"No. Of Item Per Thaan"},{field:"totalEmbroidry",headerName:"Total Embroidry"},{field:"amountPerYard",headerName:"Amount Per Yard"},{field:"totalPcs",headerName:"Total Pcs"},{field:"totalAmount",headerName:"Total Amount"},{field:"costPerComponent",headerName:"Cost Per Component"},{field:"laserCutRate",headerName:"LaserCut Rate"},{field:"pcsForLaserCut",headerName:"Pcs.For Laser Cut"},{field:"Action",headerName:"Actions",renderCell:n=>e.jsx("div",{style:{display:"flex",justifyContent:"space-around"},children:e.jsxs(we,{size:"small",variant:"text",children:[e.jsx(ge,{"aria-label":"Edit",onClick:()=>v(n.row),children:e.jsx(Oe,{})}),e.jsx(ge,{"aria-label":"delete",color:"primary",onClick:()=>U(n.row.schiffiliId),children:e.jsx(Be,{})})]})})}];return e.jsxs(e.Fragment,{children:[e.jsxs(K,{variant:"outlined",children:[e.jsx(_,{className:"css-4rfrnx-MuiCardHeader-root",title:"Schiffli ",titleTypographyProps:{style:{color:"white"}}}),e.jsxs(o,{container:!0,spacing:2,width:"Inherit",sx:{paddingY:2,paddingX:2},children:[e.jsxs(o,{item:!0,xs:12,md:3,children:[e.jsx(d,{fullWidth:!0,select:!0,label:"Select Collection",name:"collectionId",value:y,onChange:p,size:"small",children:C.map(n=>e.jsx(j,{value:n.collectionId,children:n.collectionName},n.collectionId))})," "]}),e.jsx(o,{item:!0,xs:12,md:3,children:e.jsx(d,{fullWidth:!0,select:!0,label:"Select Design",name:"designId",value:s.designId,onChange:p,size:"small",children:$.map(n=>e.jsx(j,{value:n.designId,children:n.designNo},n.designId))})}),e.jsxs(o,{item:!0,xs:12,md:3,children:[e.jsx(d,{fullWidth:!0,select:!0,label:"Batch No.",name:"batchNo",value:s.batchNo,onChange:p,size:"small",children:J.map(n=>e.jsx(j,{value:n.batchNo,children:n.batchNo},n.batchNo))})," "]}),e.jsxs(o,{item:!0,xs:12,md:3,children:[e.jsx(d,{fullWidth:!0,select:!0,label:"Components",name:"componentId",value:s.componentId,onChange:p,size:"small",children:h.map(n=>e.jsx(j,{value:n.componentId,children:n.componentName},n.componentId))})," "]}),e.jsx(o,{item:!0,xs:12,md:3,children:e.jsx(d,{label:"Base Color",fullWidth:!0,size:"small",name:"baseColorName",value:s.baseColorName,onChange:p,disabled:!0})}),e.jsx(o,{item:!0,xs:12,textAlign:"right",children:e.jsx(ae,{variant:"contained",size:"small",onClick:u,children:"Save"})})]})]}),e.jsx(ue,{color:"#cc8587",sx:{height:1,width:"100%",mt:2}}),e.jsxs(K,{variant:"outlined",children:[e.jsx(_,{className:"css-4rfrnx-MuiCardHeader-root",title:"Add Schiffli ",titleTypographyProps:{style:{color:"white"}}}),e.jsxs(ye,{expanded:P,onChange:N,sx:{},children:[e.jsx(Ce,{expandIcon:e.jsx(Pe,{}),"aria-controls":"panel1-content",id:"panel1-header"}),e.jsx(Se,{children:e.jsxs(o,{container:!0,spacing:2,width:"Inherit",sx:{paddingY:2,paddingX:2},children:[e.jsx(o,{item:!0,xs:12,md:3,children:e.jsx(d,{fullWidth:!0,select:!0,label:"Select Fabric",defaultValue:"",size:"small",name:"fabricId",value:s.fabricId,onChange:p,children:O.map(n=>e.jsx(j,{value:n.fabricId,children:n.fabric},n.fabricId))})}),e.jsx(o,{item:!0,xs:12,md:3,children:e.jsx(d,{fullWidth:!0,select:!0,label:"Vendors",defaultValue:"",size:"small",name:"vendorId",value:s.vendorId,onChange:p,children:Q.map(n=>e.jsx(j,{value:n.lookUpId,children:n.lookUpName},n.lookUpId))})}),e.jsx(o,{item:!0,xs:12,md:3,children:e.jsx(d,{fullWidth:!0,select:!0,label:"Color",size:"small",name:"colorId",value:s.colorId,onChange:p,children:ee.map(n=>e.jsx(j,{value:n.colorId,children:n.color},n.colorId))})}),e.jsx(o,{item:!0,xs:12,md:1.5,children:e.jsx(d,{label:"Po Pcs",fullWidth:!0,size:"small",name:"poPcs",value:s.poPcs,onChange:p})}),e.jsx(o,{item:!0,xs:12,md:1.5,children:e.jsx(d,{label:"Available Quantity",fullWidth:!0,size:"small",name:"availableQty",value:s.availableQty,onChange:p})}),e.jsx(o,{item:!0,xs:12,md:1.5,children:e.jsx(d,{label:"Thaan Quantity",fullWidth:!0,type:"number",size:"small",name:"thaanQty",value:s.thaanQty,onChange:p})}),e.jsx(o,{item:!0,xs:12,md:1.5,children:e.jsx(d,{fullWidth:!0,select:!0,label:"operatingMachineId",defaultValue:"",size:"small",name:"operatingMachineId",value:s.operatingMachineId,onChange:p,children:se.map(n=>e.jsx(j,{value:n.lookUpId,children:n.lookUpName},n.lookUpId))})}),e.jsx(o,{item:!0,xs:12,md:1.5,children:e.jsx(d,{fullWidth:!0,select:!0,label:"workingHeadId",defaultValue:"",size:"small",name:"workingHeadId",value:s.workingHeadId,onChange:p,children:pe.map(n=>e.jsx(j,{value:n.lookUpId,children:n.lookUpName},n.lookUpId))})}),e.jsx(o,{item:!0,xs:12,md:1.5,children:e.jsx(d,{label:"Cutting Size",fullWidth:!0,type:"number",size:"small",name:"cuttingSize",value:s.cuttingSize,onChange:p})}),e.jsx(o,{item:!0,xs:12,md:1.5,children:e.jsx(d,{label:"Rate",type:"number",fullWidth:!0,size:"small",name:"rate",value:s.rate,onChange:p})}),e.jsx(o,{item:!0,xs:12,md:1.5,children:e.jsx(d,{label:"No. Of Stiches Per Yard",fullWidth:!0,type:"number",size:"small",name:"noOfStichesPerYard",value:s.noOfStichesPerYard,onChange:p})}),e.jsx(o,{item:!0,xs:12,md:1.5,children:e.jsx(d,{label:"No. Of Items Per Thaan",fullWidth:!0,size:"small",type:"number",name:"noOfItemPerThaan",value:s.noOfItemPerThaan,onChange:p})}),e.jsx(o,{item:!0,xs:12,md:1.5,children:e.jsx(d,{label:"Total Embroidry",fullWidth:!0,size:"small",name:"totalEmbroidry",type:"number",value:s.totalEmbroidry,onChange:p})}),e.jsx(o,{item:!0,xs:12,md:1.5,children:e.jsx(d,{label:"Amount Per Yard",fullWidth:!0,type:"number",size:"small",name:"amountPerYard",value:s.amountPerYard,onChange:p})}),e.jsx(o,{item:!0,xs:12,md:1.5,children:e.jsx(d,{label:"Total Pcs",fullWidth:!0,size:"small",name:"totalPcs",value:s.totalPcs,onChange:p})}),e.jsx(o,{item:!0,xs:12,md:1.5,children:e.jsx(d,{label:"Cost Per Component",fullWidth:!0,size:"small",name:"costPerComponent",value:s.costPerComponent,onChange:p})}),e.jsx(o,{item:!0,xs:12,md:1.5,children:e.jsx(d,{label:"Total Amount",fullWidth:!0,size:"small",type:"number",name:"totalAmount",value:s.totalAmount,onChange:p})}),s.laserCut?e.jsx(o,{item:!0,xs:12,md:6,children:e.jsxs(o,{container:!0,spacing:1,width:"Inherit",children:[e.jsx(o,{item:!0,xs:12,md:3,children:e.jsx(d,{label:"Laser Cut Rate",fullWidth:!0,size:"small",name:"laserCutRate",value:s.laserCutRate,onChange:p})}),e.jsx(o,{item:!0,xs:12,md:3,children:e.jsx(d,{label:"Pcs For LaserCut",fullWidth:!0,size:"small",name:"pcsForLaserCut",value:s.pcsForLaserCut,onChange:p})})]})}):null,e.jsx(o,{item:!0,xs:12,md:2,children:e.jsx(Le,{control:e.jsx(Ee,{checked:s.laserCut,onChange:g,name:"laserCut"}),label:"Laser Cut"})})]})})]})]}),e.jsx(ue,{color:"#cc8587",sx:{height:1,width:"100%",mt:2}}),e.jsxs(K,{variant:"outlined",children:[e.jsx(_,{className:"css-4rfrnx-MuiCardHeader-root",title:"View Schiffli ",titleTypographyProps:{style:{color:"white"}}}),e.jsx(o,{container:!0,spacing:2,width:"Inherit",sx:{paddingY:2,paddingX:2},children:e.jsx(o,{sx:{marginTop:2},item:!0,xs:12,children:e.jsx(ie,{sx:{height:500,width:"inherit","& .actions":{color:"text.secondary"},"& .textPrimary":{color:"text.primary"}},children:e.jsx(Ne,{rows:re,columns:L,rowLength:100,sx:{boxShadow:2,border:2,borderColor:"primary.light","& .MuiDataGrid-cell:hover":{color:"primary.main"}}})})})})]})]})},Tt=Wt,Ht=()=>{const[a,t]=l.useState([]),[s,r]=l.useState({additionalProcessId:0,designId:"",planningHeaderId:0,batchNo:"",componentId:"",poPcs:"",baseColorName:"",fabricId:"",vendorId:"",colorId:"",availableQty:"",ratePerPcs:"",costPerComponent:"",totalAmount:"",processType:"",uomId:"",pcsPerComponent:"",createdOn:new Date().toISOString(),createdBy:0,lastUpdatedOn:new Date().toISOString(),LastUpdatedBy:0});l.useEffect(()=>{r({additionalProcessId:a.additionalProcessId||0,designId:(a==null?void 0:a.designId)||"",planningHeaderId:(a==null?void 0:a.planningHeaderId)||0,batchNo:(a==null?void 0:a.batchNo)||"",componentId:(a==null?void 0:a.componentId)||"",poPcs:(a==null?void 0:a.poPcs)||"",baseColorName:(a==null?void 0:a.baseColorName)||"",fabricId:(a==null?void 0:a.fabricId)||"",vendorId:(a==null?void 0:a.vendorId)||"",colorId:(a==null?void 0:a.colorId)||"",availableQty:(a==null?void 0:a.availableQty)||"",ratePerPcs:(a==null?void 0:a.ratePerPcs)||"",costPerComponent:(a==null?void 0:a.costPerComponent)||"",pcsPerComponent:(a==null?void 0:a.pcsPerComponent)||0,totalAmount:(a==null?void 0:a.totalAmount)||0,reatedOn:(a==null?void 0:a.createdOn)||new Date().toISOString(),createdBy:(a==null?void 0:a.createdBy)||0,lastUpdatedOn:new Date().toISOString(),LastUpdatedBy:0})},[a]);const[P,w]=l.useState(!1),N=(n,i)=>{w(i)},{data:A}=be(),[y,k]=l.useState(""),{data:G}=ve(),{data:R,refetch:le}=je(y,{skip:!y}),{data:H,refetch:D}=ze(s.designId,{skip:!s.designId}),{data:B}=We({batchNo:s.planningHeaderId,componentId:s.componentId},{skip:!s.planningHeaderId||!s.componentId}),{data:q}=Te({batchNo:s.planningHeaderId,componentId:s.componentId,fabricId:s.fabricId},{skip:!s.planningHeaderId||!s.componentId||!s.fabricId}),{data:E,refetch:M}=Ge(s.planningHeaderId,{skip:!s.planningHeaderId}),{data:W}=He(s.planningHeaderId,{skip:!s.planningHeaderId});console.log("formData.planningHeaderId",s.planningHeaderId),console.log("collectionData",A),console.log("schiffliList",E);const[$,Y]=l.useState([]),[J,f]=l.useState([]),[O,c]=l.useState([]),[Q,de]=l.useState([]),[se,T]=l.useState([]),[pe,ce]=l.useState([]),[ee,oe]=l.useState([]),[re,F]=l.useState([]),[h,I]=l.useState([]);l.useEffect(()=>{R&&Y(R.result)},[R]),l.useEffect(()=>{H&&f(H.result)},[H]),l.useEffect(()=>{B&&c(B.result)},[B]),l.useEffect(()=>{q&&oe(B.result)},[q]),l.useEffect(()=>{W&&I(W.result)},[W]),l.useEffect(()=>{E&&F(E.result.map((n,i)=>({id:i,...n})))},[E,M]),l.useEffect(()=>{if(G){const n=G.result[0];de(n.vendorList),T(n.operatingMachineList),ce(n.workingHeadList)}},[G]),console.log("initialRows",re);const C=(A==null?void 0:A.result)||[],g=n=>{const{name:i,value:x}=n.target;if(i==="collectionId")C.find(m=>m.collectionId===parseInt(x)),k(x),r({...s,collectionId:x});else if(i==="designId"){const m=$.find(b=>b.designId===parseInt(x));r({...s,designId:x,baseColorId:m?m.colorId:"",baseColorName:m?m.colorName:""})}else if(i==="batchNo"){const m=J.find(b=>b.batchNo===x);r({...s,batchNo:x,planningHeaderId:m?m.planningHeaderId:"",poPcs:m?m.poPcs:""}),w(!0)}else if(i==="colorId"){const m=ee.find(b=>b.colorId===x);r({...s,colorId:x,availableQty:m?m.total:"",cuttingSize:m?m.cuttingSize:"",repeats:m?m.repeats:""})}else if(i==="operatingMachineId"){const m=se.find(b=>b.lookUpId===x);r({...s,operatingMachineId:x,operatingMachine:m?m.lookUpName:""})}else r({...s,[i]:x})};console.log("colors",ee);const p=async()=>{try{const n=await Z.post("https://gecxc.com:4041/api/AdditionalProcess/SaveAdditionalProcess",s);console.log("Save response:",n.data),r(i=>({designId:i.designId,planningHeaderId:i.planningHeaderId,batchNo:i.batchNo,baseColorName:i.baseColorName,additionalProcessId:0,poPcs:"",fabricId:"",vendorId:"",colorId:"",availableQty:"",ratePerPcs:"",costPerComponent:"",uomId:0,pcsPerComponent:0,totalAmount:"",createdOn:new Date().toISOString(),createdBy:0,lastUpdatedOn:new Date().toISOString(),LastUpdatedBy:0})),M(),w(!1)}catch(n){console.error("Error saving data:",n)}};console.log("formData",s);const u=n=>{t(n)};console.log("initialData",a);const v=async n=>{try{await Z.delete(`https://gecxc.com:4041/api/Schiffli/DeleteSchiffiById?schiffiId=${n}`),M(),console.log("deleted")}catch(i){console.error("Error deleting data:",i)}},U=[{value:"D",label:"Dyeing"},{value:"P",label:"Printing"}],L=[{field:"componentName",headerName:"Component"},{field:"fabricName",headerName:"Fabric"},{field:"vendorName",headerName:"Vendor"},{field:"colourName",headerName:"Color"},{field:"thaanQty",headerName:"Thaan Quantity"},{field:"availableQty",headerName:"Available Quantitity"},{field:"operatingMachineName",headerName:"Operating Machine"},{field:"noOfHeadsName",headerName:"Working Head"},{field:"cuttingSize",headerName:"Cutting Size"},{field:"rate",headerName:"Rate"},{field:"noOfStichesPerYard",headerName:"No. Of Stiches Per Yard"},{field:"noOfItemPerThaan",headerName:"No. Of Item Per Thaan"},{field:"totalEmbroidry",headerName:"Total Embroidry"},{field:"amountPerYard",headerName:"Amount Per Yard"},{field:"totalPcs",headerName:"Total Pcs"},{field:"totalAmount",headerName:"Total Amount"},{field:"costPerComponent",headerName:"Cost Per Component"},{field:"laserCutRate",headerName:"LaserCut Rate"},{field:"pcsForLaserCut",headerName:"Pcs.For Laser Cut"},{field:"Action",headerName:"Actions",renderCell:n=>e.jsx("div",{style:{display:"flex",justifyContent:"space-around"},children:e.jsxs(we,{size:"small",variant:"text",children:[e.jsx(ge,{"aria-label":"Edit",onClick:()=>u(n.row),children:e.jsx(Oe,{})}),e.jsx(ge,{"aria-label":"delete",color:"primary",onClick:()=>v(n.row.schiffiliId),children:e.jsx(Be,{})})]})})}];return e.jsxs(e.Fragment,{children:[e.jsxs(K,{variant:"outlined",children:[e.jsx(_,{className:"css-4rfrnx-MuiCardHeader-root",title:"Additional Process ",titleTypographyProps:{style:{color:"white"}}}),e.jsxs(o,{container:!0,spacing:2,width:"Inherit",sx:{paddingY:2,paddingX:2},children:[e.jsxs(o,{item:!0,xs:12,md:3,children:[e.jsx(d,{fullWidth:!0,select:!0,label:"Select Collection",name:"collectionId",value:y,onChange:g,size:"small",children:C.map(n=>e.jsx(j,{value:n.collectionId,children:n.collectionName},n.collectionId))})," "]}),e.jsx(o,{item:!0,xs:12,md:3,children:e.jsx(d,{fullWidth:!0,select:!0,label:"Select Design",name:"designId",value:s.designId,onChange:g,size:"small",children:$.map(n=>e.jsx(j,{value:n.designId,children:n.designNo},n.designId))})}),e.jsxs(o,{item:!0,xs:12,md:3,children:[e.jsx(d,{fullWidth:!0,select:!0,label:"Batch No.",name:"batchNo",value:s.batchNo,onChange:g,size:"small",children:J.map(n=>e.jsx(j,{value:n.batchNo,children:n.batchNo},n.batchNo))})," "]}),e.jsxs(o,{item:!0,xs:12,md:3,children:[e.jsx(d,{fullWidth:!0,select:!0,label:"Components",name:"componentId",value:s.componentId,onChange:g,size:"small",children:h.map(n=>e.jsx(j,{value:n.componentId,children:n.componentName},n.componentId))})," "]}),e.jsx(o,{item:!0,xs:12,md:3,children:e.jsx(d,{label:"Base Color",fullWidth:!0,size:"small",name:"baseColorName",value:s.baseColorName,onChange:g,disabled:!0})}),e.jsx(o,{item:!0,xs:12,textAlign:"right",children:e.jsx(ae,{variant:"contained",size:"small",onClick:p,children:"Save"})})]})]}),e.jsx(ue,{color:"#cc8587",sx:{height:1,width:"100%",mt:2}}),e.jsxs(K,{variant:"outlined",children:[e.jsx(_,{className:"css-4rfrnx-MuiCardHeader-root",title:"Add Additional Process ",titleTypographyProps:{style:{color:"white"}}}),e.jsxs(ye,{expanded:P,onChange:N,sx:{},children:[e.jsx(Ce,{expandIcon:e.jsx(Pe,{}),"aria-controls":"panel1-content",id:"panel1-header"}),e.jsx(Se,{children:e.jsxs(o,{container:!0,spacing:2,width:"Inherit",sx:{paddingY:2,paddingX:2},children:[e.jsx(o,{item:!0,xs:12,md:3,children:e.jsx(d,{fullWidth:!0,select:!0,label:"Select Fabric",defaultValue:"",size:"small",name:"fabricId",value:s.fabricId,onChange:g,children:O.map(n=>e.jsx(j,{value:n.fabricId,children:n.fabric},n.fabricId))})}),e.jsx(o,{item:!0,xs:12,md:3,children:e.jsx(d,{fullWidth:!0,select:!0,label:"Vendors",defaultValue:"",size:"small",name:"vendorId",value:s.vendorId,onChange:g,children:Q.map(n=>e.jsx(j,{value:n.lookUpId,children:n.lookUpName},n.lookUpId))})}),e.jsx(o,{item:!0,xs:12,md:3,children:e.jsx(d,{fullWidth:!0,select:!0,label:"Color",size:"small",name:"colorId",value:s.colorId,onChange:g,children:ee.map(n=>e.jsx(j,{value:n.colorId,children:n.color},n.colorId))})}),e.jsx(o,{item:!0,xs:12,md:1.5,children:e.jsx(d,{label:"Po Pcs",fullWidth:!0,size:"small",name:"poPcs",value:s.poPcs,onChange:g})}),e.jsx(o,{item:!0,xs:12,md:3,children:e.jsx(d,{fullWidth:!0,select:!0,label:"Process Type",size:"small",name:"processType",value:s.processType,onChange:g,children:U.map(n=>e.jsx(j,{value:n.value,children:n.label},n.value))})}),e.jsx(o,{item:!0,xs:12,md:1.5,children:e.jsx(d,{label:" Quantity",fullWidth:!0,size:"small",name:"availableQty",value:s.availableQty,onChange:g})}),e.jsx(o,{item:!0,xs:12,md:1.5,children:e.jsx(d,{label:"Rate",type:"number",fullWidth:!0,size:"small",name:"rate",value:s.rate,onChange:g})}),e.jsx(o,{item:!0,xs:12,md:1.5,children:e.jsx(d,{label:"Total Pcs",fullWidth:!0,size:"small",name:"totalPcs",value:s.totalPcs,onChange:g})}),e.jsx(o,{item:!0,xs:12,md:1.5,children:e.jsx(d,{label:"Total Amount",fullWidth:!0,size:"small",type:"number",name:"totalAmount",value:s.totalAmount,onChange:g})})]})})]})]}),e.jsx(ue,{color:"#cc8587",sx:{height:1,width:"100%",mt:2}}),e.jsxs(K,{variant:"outlined",children:[e.jsx(_,{className:"css-4rfrnx-MuiCardHeader-root",title:"View Additional Process ",titleTypographyProps:{style:{color:"white"}}}),e.jsx(o,{container:!0,spacing:2,width:"Inherit",sx:{paddingY:2,paddingX:2},children:e.jsx(o,{sx:{marginTop:2},item:!0,xs:12,children:e.jsx(ie,{sx:{height:500,width:"inherit","& .actions":{color:"text.secondary"},"& .textPrimary":{color:"text.primary"}},children:e.jsx(Ne,{rows:re,columns:L,rowLength:100,sx:{boxShadow:2,border:2,borderColor:"primary.light","& .MuiDataGrid-cell:hover":{color:"primary.main"}}})})})})]})]})},Lt=Ht;function Ft(a){const{data:t}=ve(),[s,r]=l.useState([]);l.useEffect(()=>{t&&r(t.result[0].vendorList)},[t]);const P=[{value:"Card Printing",label:"Card Printing"},{value:"Additional Service",label:"Additional Service"}],w=[{value:"Elaf PVC Zipper Bag",label:"Elaf PVC Zipper Bag"},{value:"No",label:"No"}],[N,A]=l.useState({serviceTypeId:"",serviceListId:"",vendorId:"",poPcs:"",qty:"",uomId:"",rate:"",totalAmount:"",quantity:"",ratePerPcs:"",costperPiece:"",uom:"",vendor:null,serviceType:null,serviceListName:null,createdBy:0,createdOn:new Date().toISOString()}),y=async k=>{const{name:G,value:R}=k.target;A({...N,[G]:R})};return e.jsxs(o,{container:!0,spacing:2,width:"Inherit",sx:{paddingY:2,paddingX:2},children:[" ",e.jsx(o,{item:!0,md:4,width:"inherit",paddingX:1,children:e.jsx(d,{id:"outlined-select-option",select:!0,label:"Service Type",name:"serviceTypeId",value:N.serviceTypeId,onChange:y,defaultValue:"Card Printing",variant:"outlined",size:"small",fullWidth:!0,children:P.map(k=>e.jsx(j,{value:k.value,children:k.label},k.value))})}),e.jsx(o,{item:!0,md:4,width:"inherit",paddingX:1,children:e.jsx(d,{id:"outlined-select-option",select:!0,label:"Service List Id",name:"serviceListId",value:N.serviceList,onChange:y,defaultValue:"Elaf PVC Zipper Bag",variant:"outlined",size:"small",fullWidth:!0,children:w.map(k=>e.jsx(j,{value:k.value,children:k.label},k.value))})}),e.jsx(o,{item:!0,xs:12,md:4,children:e.jsx(d,{fullWidth:!0,select:!0,label:"Vendor Name",size:"small",name:"vendorId",value:N.vendorId,onChange:y,children:s.map(k=>e.jsx(j,{value:k.lookUpId,children:k.lookUpName},k.lookUpId))})}),e.jsx(o,{item:!0,md:4,width:"inherit",paddingX:1,children:e.jsx(d,{id:"outlined-required",label:"PO PC's",name:"poPcs",value:N.poPcs,onChange:y,type:"number",size:"small",fullWidth:!0,disabled:!0})}),e.jsx(o,{item:!0,md:4,width:"inherit",paddingX:1,children:e.jsx(d,{id:"outlined-required",label:"Qty",name:"qty",value:N.qty,onChange:y,type:"number",size:"small",required:!0,fullWidth:!0})}),e.jsx(o,{item:!0,md:4,width:"inherit",paddingX:1,children:e.jsx(d,{id:"outlined-required",label:"UOM",name:"uomId",value:N.uomId,onChange:y,size:"small",required:!0,fullWidth:!0})}),e.jsx(o,{item:!0,md:4,width:"inherit",paddingX:1,children:e.jsx(d,{id:"outlined-required",label:"Rate",name:"rate",value:N.rate,onChange:y,type:"number",size:"small",fullWidth:!0,required:!0})}),e.jsx(o,{item:!0,md:4,width:"inherit",paddingX:1,children:e.jsx(d,{id:"outlined-required",label:"Total Amount",name:"totalAmount",value:N.totalAmount,onChange:y,type:"number",size:"small",fullWidth:!0,required:!0})}),e.jsx(o,{item:!0,md:4,width:"inherit",paddingX:1,children:e.jsx(d,{id:"outlined-required",label:"Cost per Piece",name:"costperPiece",value:N.costperPiece,onChange:y,type:"number",size:"small",required:!0,fullWidth:!0})}),e.jsx(o,{item:!0,md:12,width:"inherit",paddingX:1,textAlign:"right",children:e.jsx(ae,{variant:"contained",color:"primary",size:"small",children:"Add"})})]})}function Et(){const[a,t]=l.useState([]),s=l.useCallback(async()=>{try{const w=(await Z.get("https://gecxc.com:4041/api/AdditionalServices/GetdditionalServicesListByServiceTypeId?serviceTypeId=1")).data.result.map((N,A)=>({id:A,...N}));t(w)}catch(P){console.error("Error fetching data:",P)}},[]);l.useEffect(()=>{s()},[s]);const r=[{field:"serviceTypeId",headerName:"Service Type",width:150},{field:"serviceList",headerName:"Service List",width:200},{field:"vendorId",headerName:"Vendor",minWidth:120},{field:"qty",headerName:"Qty",minWidth:120},{field:"uom",headerName:"UOM",minWidth:120},{field:"rate",headerName:"Rate",minWidth:120},{field:"totalAmount",headerName:"Total Amount",minWidth:120},{field:"uomId",headerName:"UOM Id",minWidth:120},{field:"quantity",headerName:"quantity",minWidth:120},{field:"ratePerPcs",headerName:"rate Per Pcs",minWidth:120},{field:"costperPiece",headerName:"cost per Piece",minWidth:120},{field:"vendor",headerName:"Vendor",minWidth:120},{field:"serviceType",headerName:"Service Type",minWidth:120},{field:"serviceListName",headerName:"Service List Name",minWidth:120}];return e.jsx("div",{style:{height:"auto",width:"100%"},children:e.jsx(Ne,{rows:a,columns:r,autoHeight:!0,initialState:{pagination:{paginationModel:{page:0,pageSize:10}}},pageSizeOptions:[10,15],localeText:{toolbarDensity:"Size",toolbarDensityLabel:"Size",toolbarDensityCompact:"Small",toolbarDensityStandard:"Medium",toolbarDensityComfortable:"Large"},components:{Toolbar:gt}})})}function Ut(a){return e.jsxs(e.Fragment,{children:[e.jsxs(K,{variant:"outlined",children:[e.jsx(_,{className:"css-4rfrnx-MuiCardHeader-root",title:"Additional Services  ",titleTypographyProps:{style:{color:"white"}}}),e.jsx(Ft,{})]}),e.jsx(ue,{color:"#cc8587",sx:{height:1,width:"100%",mt:2}}),e.jsxs(K,{variant:"outlined",children:[e.jsx(_,{className:"css-4rfrnx-MuiCardHeader-root",title:"View Additional Services  ",titleTypographyProps:{style:{color:"white"}}}),e.jsx(Et,{fetchData:a})]})]})}const Ae=["Pre Planning","Fabrication","Dyeing/Printing  ","Embroidery ","Schiffli","Additional Process","Additional Services"];function Zt(){const[a,t]=l.useState(0),[s,r]=l.useState(new Set),[P,w]=l.useState(null),[N,A]=l.useState([]),{enqueueSnackbar:y}=Fe(),k=f=>{w(f.currentTarget)},G=()=>{w(null)},R=!!P,le=R?"simple-popover":void 0,H=f=>f===1,D=f=>s.has(f),B=()=>{let f=s;D(a)&&(f=new Set(f.values()),f.delete(a)),t(O=>O+1),r(f)},q=()=>{t(f=>f-1)},E=()=>{if(!H(a))throw new Error("You can't skip a step that isn't optional.");t(f=>f+1),r(f=>{const O=new Set(f.values());return O.add(a),O})},M=()=>{t(0)},[W,$]=l.useState({lookUpId:"",lookUpName:"",lookUpDomain:"",lookUpCategory:"",enabled:"",createdOn:new Date().toISOString()}),Y=async()=>{if(!W.lookUpDomain||!W.lookUpName){y("Please fill in all required fields.",{variant:"error",autoHideDuration:5e3});return}try{const f=await Z.get(`https://gecxc.com:4041/api/Common/SaveLookUp?lookupDomain=${W.lookUpDomain}&LookUpName=${W.lookUpName}&appId=1`);return console.log("Form data saved:",f.data),y("Lookup saved successfully!",{variant:"success",autoHideDuration:5e3}),$({lookUpId:"",lookUpName:"",lookUpDomain:"",lookUpCategory:"",enabled:"",createdOn:new Date().toISOString()}),f.data}catch(f){throw console.error("Error saving data:",f),y("Error saving data. Please try again.",{variant:"error",autoHideDuration:5e3}),f}},J=f=>{$({...W,[f.target.name]:f.target.value})};return l.useEffect(()=>{(async()=>{try{const O=await Z.get("https://gecxc.com:4041/api/Common/GetLookUpDomains?appId=1");console.log("LookupData",O),A(O.data.result)}catch(O){console.error("Error fetching design options:",O)}})()},[]),e.jsxs(ie,{sx:{width:"100%"},children:[e.jsxs(o,{container:!0,spacing:1,width:"Inherit",children:[e.jsx(o,{item:!0,sm:6,children:e.jsx(fe,{variant:"h2",gutterBottom:!0,children:"Planning Process"})}),e.jsxs(o,{item:!0,sm:6,textAlign:"right",children:[e.jsx(ae,{"aria-describedby":le,variant:"outlined",size:"small",onClick:k,children:"+Lookup"}),e.jsx(pt,{id:"mouse-over-popover",open:R,anchorEl:P,onClose:G,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"right"},sx:{".MuiPopover-paper":{width:"300px",padding:"16px"}},children:e.jsxs(o,{container:!0,spacing:3,width:"Inherit",children:[e.jsx(o,{item:!0,sm:12,children:e.jsx(d,{fullWidth:!0,id:"outlined-select-currency",select:!0,label:"Select Lookup",size:"small",value:W.lookUpDomain,name:"lookUpDomain",onChange:J,children:N.map(f=>e.jsx(j,{value:f.lookUpDomain,children:f.lookUpDomain},f.lookUpDomain))})}),e.jsx(o,{item:!0,sm:12,children:e.jsx(d,{fullWidth:!0,label:"Add Lookup Description",value:W.lookUpName,onChange:J,name:"lookUpName",size:"small"})}),e.jsx(o,{item:!0,sm:3,textAlign:"right",children:e.jsx(ae,{variant:"contained",size:"small",onClick:Y,children:"Save"})})]})})]})]}),e.jsx(lt,{activeStep:a,children:Ae.map((f,O)=>{const c={},Q={};return H(O)&&(Q.optional=e.jsx(fe,{variant:"caption",children:"Optional"})),D(O)&&(c.completed=!1),e.jsx(dt,{...c,children:e.jsxs(it,{...Q,onClick:()=>t(O),style:{cursor:"pointer"},children:[" ",f]})},f)})}),e.jsxs(ie,{sx:{display:"flex",flexDirection:"row",pt:2},children:[e.jsx(ae,{color:"inherit",disabled:a===0,onClick:q,sx:{mr:1},children:"Back"}),e.jsx(ie,{sx:{flex:"1 1 auto"}}),H(a)&&e.jsx(ae,{color:"inherit",onClick:E,sx:{mr:1},children:"Skip"}),e.jsx(ae,{onClick:B,children:a===Ae.length-1?"Finish":"Next"})]}),a===Ae.length?e.jsxs(l.Fragment,{children:[e.jsx(fe,{sx:{mt:2,mb:1},children:"All steps completed - you're finished"}),e.jsxs(ie,{sx:{display:"flex",flexDirection:"row",pt:2},children:[e.jsx(ie,{sx:{flex:"1 1 auto"}}),e.jsx(ae,{onClick:M,children:"Reset"})]})]}):e.jsxs(l.Fragment,{children:[a===0&&e.jsx(Ot,{}),a===1&&e.jsx(ct,{}),a===2&&e.jsx(Rt,{}),a===3&&e.jsx(At,{}),a===4&&e.jsx(Tt,{}),a===5&&e.jsx(Lt,{}),a===6&&e.jsx(Ut,{}),e.jsxs(ie,{sx:{display:"flex",flexDirection:"row",pt:2},children:[e.jsx(ae,{color:"inherit",disabled:a===0,onClick:q,sx:{mr:1},children:"Back"}),e.jsx(ie,{sx:{flex:"1 1 auto"}}),H(a)&&e.jsx(ae,{color:"inherit",onClick:E,sx:{mr:1},children:"Skip"}),e.jsx(ae,{onClick:B,children:a===Ae.length-1?"Finish":"Next"})]})]})]})}export{Zt as default};
